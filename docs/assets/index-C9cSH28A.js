(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Gd(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const yt={},Do=[],xr=()=>{},rw=()=>!1,oc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Yd=t=>t.startsWith("onUpdate:"),un=Object.assign,Xd=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},iw=Object.prototype.hasOwnProperty,ut=(t,e)=>iw.call(t,e),Be=Array.isArray,$o=t=>dl(t)==="[object Map]",sc=t=>dl(t)==="[object Set]",Ah=t=>dl(t)==="[object Date]",qe=t=>typeof t=="function",Bt=t=>typeof t=="string",Or=t=>typeof t=="symbol",St=t=>t!==null&&typeof t=="object",Ym=t=>(St(t)||qe(t))&&qe(t.then)&&qe(t.catch),Xm=Object.prototype.toString,dl=t=>Xm.call(t),ow=t=>dl(t).slice(8,-1),Zm=t=>dl(t)==="[object Object]",Zd=t=>Bt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Cs=Gd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),lc=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},sw=/-(\w)/g,ir=lc(t=>t.replace(sw,(e,n)=>n?n.toUpperCase():"")),lw=/\B([A-Z])/g,ao=lc(t=>t.replace(lw,"-$1").toLowerCase()),ac=lc(t=>t.charAt(0).toUpperCase()+t.slice(1)),Wc=lc(t=>t?`on${ac(t)}`:""),gi=(t,e)=>!Object.is(t,e),Gl=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Qm=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Lu=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Mh;const cc=()=>Mh||(Mh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ro(t){if(Be(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Bt(r)?dw(r):Ro(r);if(i)for(const o in i)e[o]=i[o]}return e}else if(Bt(t)||St(t))return t}const aw=/;(?![^(]*\))/g,cw=/:([^]+)/,uw=/\/\*[^]*?\*\//g;function dw(t){const e={};return t.replace(uw,"").split(aw).forEach(n=>{if(n){const r=n.split(cw);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function dr(t){let e="";if(Bt(t))e=t;else if(Be(t))for(let n=0;n<t.length;n++){const r=dr(t[n]);r&&(e+=r+" ")}else if(St(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const fw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hw=Gd(fw);function eg(t){return!!t||t===""}function pw(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=uc(t[r],e[r]);return n}function uc(t,e){if(t===e)return!0;let n=Ah(t),r=Ah(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Or(t),r=Or(e),n||r)return t===e;if(n=Be(t),r=Be(e),n||r)return n&&r?pw(t,e):!1;if(n=St(t),r=St(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,o=Object.keys(e).length;if(i!==o)return!1;for(const s in t){const l=t.hasOwnProperty(s),a=e.hasOwnProperty(s);if(l&&!a||!l&&a||!uc(t[s],e[s]))return!1}}return String(t)===String(e)}function tg(t,e){return t.findIndex(n=>uc(n,e))}const ng=t=>!!(t&&t.__v_isRef===!0),Nn=t=>Bt(t)?t:t==null?"":Be(t)||St(t)&&(t.toString===Xm||!qe(t.toString))?ng(t)?Nn(t.value):JSON.stringify(t,rg,2):String(t),rg=(t,e)=>ng(e)?rg(t,e.value):$o(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],o)=>(n[qc(r,o)+" =>"]=i,n),{})}:sc(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>qc(n))}:Or(e)?qc(e):St(e)&&!Be(e)&&!Zm(e)?String(e):e,qc=(t,e="")=>{var n;return Or(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let bn;class mw{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=bn,!e&&bn&&(this.index=(bn.scopes||(bn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=bn;try{return bn=this,e()}finally{bn=n}}}on(){bn=this}off(){bn=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function ig(){return bn}function gw(t,e=!1){bn&&bn.cleanups.push(t)}let kt;const Jc=new WeakSet;class og{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,bn&&bn.active&&bn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Jc.has(this)&&(Jc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||lg(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,_h(this),ag(this);const e=kt,n=fr;kt=this,fr=!0;try{return this.fn()}finally{cg(this),kt=e,fr=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)tf(e);this.deps=this.depsTail=void 0,_h(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Jc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Fu(this)&&this.run()}get dirty(){return Fu(this)}}let sg=0,Os,Es;function lg(t,e=!1){if(t.flags|=8,e){t.next=Es,Es=t;return}t.next=Os,Os=t}function Qd(){sg++}function ef(){if(--sg>0)return;if(Es){let e=Es;for(Es=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Os;){let e=Os;for(Os=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function ag(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cg(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),tf(r),yw(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function Fu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(ug(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function ug(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ks))return;t.globalVersion=Ks;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Fu(t)){t.flags&=-3;return}const n=kt,r=fr;kt=t,fr=!0;try{ag(t);const i=t.fn(t._value);(e.version===0||gi(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{kt=n,fr=r,cg(t),t.flags&=-3}}function tf(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)tf(o,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function yw(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let fr=!0;const dg=[];function Ti(){dg.push(fr),fr=!1}function Ai(){const t=dg.pop();fr=t===void 0?!0:t}function _h(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=kt;kt=void 0;try{e()}finally{kt=n}}}let Ks=0;class bw{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class dc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!kt||!fr||kt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==kt)n=this.activeLink=new bw(kt,this),kt.deps?(n.prevDep=kt.depsTail,kt.depsTail.nextDep=n,kt.depsTail=n):kt.deps=kt.depsTail=n,fg(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=kt.depsTail,n.nextDep=void 0,kt.depsTail.nextDep=n,kt.depsTail=n,kt.deps===n&&(kt.deps=r)}return n}trigger(e){this.version++,Ks++,this.notify(e)}notify(e){Qd();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ef()}}}function fg(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)fg(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const wa=new WeakMap,qi=Symbol(""),Vu=Symbol(""),Us=Symbol("");function on(t,e,n){if(fr&&kt){let r=wa.get(t);r||wa.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new dc),i.map=r,i.key=n),i.track()}}function Lr(t,e,n,r,i,o){const s=wa.get(t);if(!s){Ks++;return}const l=a=>{a&&a.trigger()};if(Qd(),e==="clear")s.forEach(l);else{const a=Be(t),c=a&&Zd(n);if(a&&n==="length"){const u=Number(r);s.forEach((d,h)=>{(h==="length"||h===Us||!Or(h)&&h>=u)&&l(d)})}else switch((n!==void 0||s.has(void 0))&&l(s.get(n)),c&&l(s.get(Us)),e){case"add":a?c&&l(s.get("length")):(l(s.get(qi)),$o(t)&&l(s.get(Vu)));break;case"delete":a||(l(s.get(qi)),$o(t)&&l(s.get(Vu)));break;case"set":$o(t)&&l(s.get(qi));break}}ef()}function vw(t,e){const n=wa.get(t);return n&&n.get(e)}function yo(t){const e=lt(t);return e===t?e:(on(e,"iterate",Us),tr(t)?e:e.map(sn))}function fc(t){return on(t=lt(t),"iterate",Us),t}const ww={__proto__:null,[Symbol.iterator](){return Gc(this,Symbol.iterator,sn)},concat(...t){return yo(this).concat(...t.map(e=>Be(e)?yo(e):e))},entries(){return Gc(this,"entries",t=>(t[1]=sn(t[1]),t))},every(t,e){return Pr(this,"every",t,e,void 0,arguments)},filter(t,e){return Pr(this,"filter",t,e,n=>n.map(sn),arguments)},find(t,e){return Pr(this,"find",t,e,sn,arguments)},findIndex(t,e){return Pr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Pr(this,"findLast",t,e,sn,arguments)},findLastIndex(t,e){return Pr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Pr(this,"forEach",t,e,void 0,arguments)},includes(...t){return Yc(this,"includes",t)},indexOf(...t){return Yc(this,"indexOf",t)},join(t){return yo(this).join(t)},lastIndexOf(...t){return Yc(this,"lastIndexOf",t)},map(t,e){return Pr(this,"map",t,e,void 0,arguments)},pop(){return us(this,"pop")},push(...t){return us(this,"push",t)},reduce(t,...e){return Nh(this,"reduce",t,e)},reduceRight(t,...e){return Nh(this,"reduceRight",t,e)},shift(){return us(this,"shift")},some(t,e){return Pr(this,"some",t,e,void 0,arguments)},splice(...t){return us(this,"splice",t)},toReversed(){return yo(this).toReversed()},toSorted(t){return yo(this).toSorted(t)},toSpliced(...t){return yo(this).toSpliced(...t)},unshift(...t){return us(this,"unshift",t)},values(){return Gc(this,"values",sn)}};function Gc(t,e,n){const r=fc(t),i=r[e]();return r!==t&&!tr(t)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.value&&(o.value=n(o.value)),o}),i}const kw=Array.prototype;function Pr(t,e,n,r,i,o){const s=fc(t),l=s!==t&&!tr(t),a=s[e];if(a!==kw[e]){const d=a.apply(t,o);return l?sn(d):d}let c=n;s!==t&&(l?c=function(d,h){return n.call(this,sn(d),h,t)}:n.length>2&&(c=function(d,h){return n.call(this,d,h,t)}));const u=a.call(s,c,r);return l&&i?i(u):u}function Nh(t,e,n,r){const i=fc(t);let o=n;return i!==t&&(tr(t)?n.length>3&&(o=function(s,l,a){return n.call(this,s,l,a,t)}):o=function(s,l,a){return n.call(this,s,sn(l),a,t)}),i[e](o,...r)}function Yc(t,e,n){const r=lt(t);on(r,"iterate",Us);const i=r[e](...n);return(i===-1||i===!1)&&of(n[0])?(n[0]=lt(n[0]),r[e](...n)):i}function us(t,e,n=[]){Ti(),Qd();const r=lt(t)[e].apply(t,n);return ef(),Ai(),r}const Sw=Gd("__proto__,__v_isRef,__isVue"),hg=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Or));function xw(t){Or(t)||(t=String(t));const e=lt(this);return on(e,"has",t),e.hasOwnProperty(t)}class pg{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return o;if(n==="__v_raw")return r===(i?o?Iw:bg:o?yg:gg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const s=Be(e);if(!i){let a;if(s&&(a=ww[n]))return a;if(n==="hasOwnProperty")return xw}const l=Reflect.get(e,n,$t(e)?e:r);return(Or(n)?hg.has(n):Sw(n))||(i||on(e,"get",n),o)?l:$t(l)?s&&Zd(n)?l:l.value:St(l)?i?vg(l):hc(l):l}}class mg extends pg{constructor(e=!1){super(!1,e)}set(e,n,r,i){let o=e[n];if(!this._isShallow){const a=to(o);if(!tr(r)&&!to(r)&&(o=lt(o),r=lt(r)),!Be(e)&&$t(o)&&!$t(r))return a?!1:(o.value=r,!0)}const s=Be(e)&&Zd(n)?Number(n)<e.length:ut(e,n),l=Reflect.set(e,n,r,$t(e)?e:i);return e===lt(i)&&(s?gi(r,o)&&Lr(e,"set",n,r):Lr(e,"add",n,r)),l}deleteProperty(e,n){const r=ut(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Lr(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Or(n)||!hg.has(n))&&on(e,"has",n),r}ownKeys(e){return on(e,"iterate",Be(e)?"length":qi),Reflect.ownKeys(e)}}class Cw extends pg{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Ow=new mg,Ew=new Cw,Tw=new mg(!0);const ju=t=>t,Ol=t=>Reflect.getPrototypeOf(t);function Aw(t,e,n){return function(...r){const i=this.__v_raw,o=lt(i),s=$o(o),l=t==="entries"||t===Symbol.iterator&&s,a=t==="keys"&&s,c=i[t](...r),u=n?ju:e?Hu:sn;return!e&&on(o,"iterate",a?Vu:qi),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:l?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function El(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Mw(t,e){const n={get(i){const o=this.__v_raw,s=lt(o),l=lt(i);t||(gi(i,l)&&on(s,"get",i),on(s,"get",l));const{has:a}=Ol(s),c=e?ju:t?Hu:sn;if(a.call(s,i))return c(o.get(i));if(a.call(s,l))return c(o.get(l));o!==s&&o.get(i)},get size(){const i=this.__v_raw;return!t&&on(lt(i),"iterate",qi),Reflect.get(i,"size",i)},has(i){const o=this.__v_raw,s=lt(o),l=lt(i);return t||(gi(i,l)&&on(s,"has",i),on(s,"has",l)),i===l?o.has(i):o.has(i)||o.has(l)},forEach(i,o){const s=this,l=s.__v_raw,a=lt(l),c=e?ju:t?Hu:sn;return!t&&on(a,"iterate",qi),l.forEach((u,d)=>i.call(o,c(u),c(d),s))}};return un(n,t?{add:El("add"),set:El("set"),delete:El("delete"),clear:El("clear")}:{add(i){!e&&!tr(i)&&!to(i)&&(i=lt(i));const o=lt(this);return Ol(o).has.call(o,i)||(o.add(i),Lr(o,"add",i,i)),this},set(i,o){!e&&!tr(o)&&!to(o)&&(o=lt(o));const s=lt(this),{has:l,get:a}=Ol(s);let c=l.call(s,i);c||(i=lt(i),c=l.call(s,i));const u=a.call(s,i);return s.set(i,o),c?gi(o,u)&&Lr(s,"set",i,o):Lr(s,"add",i,o),this},delete(i){const o=lt(this),{has:s,get:l}=Ol(o);let a=s.call(o,i);a||(i=lt(i),a=s.call(o,i)),l&&l.call(o,i);const c=o.delete(i);return a&&Lr(o,"delete",i,void 0),c},clear(){const i=lt(this),o=i.size!==0,s=i.clear();return o&&Lr(i,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Aw(i,t,e)}),n}function nf(t,e){const n=Mw(t,e);return(r,i,o)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(ut(n,i)&&i in r?n:r,i,o)}const _w={get:nf(!1,!1)},Nw={get:nf(!1,!0)},Pw={get:nf(!0,!1)};const gg=new WeakMap,yg=new WeakMap,bg=new WeakMap,Iw=new WeakMap;function Dw(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $w(t){return t.__v_skip||!Object.isExtensible(t)?0:Dw(ow(t))}function hc(t){return to(t)?t:rf(t,!1,Ow,_w,gg)}function Rw(t){return rf(t,!1,Tw,Nw,yg)}function vg(t){return rf(t,!0,Ew,Pw,bg)}function rf(t,e,n,r,i){if(!St(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=i.get(t);if(o)return o;const s=$w(t);if(s===0)return t;const l=new Proxy(t,s===2?r:n);return i.set(t,l),l}function Bo(t){return to(t)?Bo(t.__v_raw):!!(t&&t.__v_isReactive)}function to(t){return!!(t&&t.__v_isReadonly)}function tr(t){return!!(t&&t.__v_isShallow)}function of(t){return t?!!t.__v_raw:!1}function lt(t){const e=t&&t.__v_raw;return e?lt(e):t}function wg(t){return!ut(t,"__v_skip")&&Object.isExtensible(t)&&Qm(t,"__v_skip",!0),t}const sn=t=>St(t)?hc(t):t,Hu=t=>St(t)?vg(t):t;function $t(t){return t?t.__v_isRef===!0:!1}function sf(t){return Bw(t,!1)}function Bw(t,e){return $t(t)?t:new Lw(t,e)}class Lw{constructor(e,n){this.dep=new dc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:lt(e),this._value=n?e:sn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||tr(e)||to(e);e=r?e:lt(e),gi(e,n)&&(this._rawValue=e,this._value=r?e:sn(e),this.dep.trigger())}}function yn(t){return $t(t)?t.value:t}const Fw={get:(t,e,n)=>e==="__v_raw"?t:yn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return $t(i)&&!$t(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function kg(t){return Bo(t)?t:new Proxy(t,Fw)}class Vw{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new dc,{get:r,set:i}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function jw(t){return new Vw(t)}function Hw(t){const e=Be(t)?new Array(t.length):{};for(const n in t)e[n]=Kw(t,n);return e}class zw{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return vw(lt(this._object),this._key)}}function Kw(t,e,n){const r=t[e];return $t(r)?r:new zw(t,e,n)}class Uw{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new dc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ks-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&kt!==this)return lg(this,!0),!0}get value(){const e=this.dep.track();return ug(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Ww(t,e,n=!1){let r,i;return qe(t)?r=t:(r=t.get,i=t.set),new Uw(r,i,n)}const Tl={},ka=new WeakMap;let Li;function qw(t,e=!1,n=Li){if(n){let r=ka.get(n);r||ka.set(n,r=[]),r.push(t)}}function Jw(t,e,n=yt){const{immediate:r,deep:i,once:o,scheduler:s,augmentJob:l,call:a}=n,c=R=>i?R:tr(R)||i===!1||i===0?Fr(R,1):Fr(R);let u,d,h,m,g=!1,b=!1;if($t(t)?(d=()=>t.value,g=tr(t)):Bo(t)?(d=()=>c(t),g=!0):Be(t)?(b=!0,g=t.some(R=>Bo(R)||tr(R)),d=()=>t.map(R=>{if($t(R))return R.value;if(Bo(R))return c(R);if(qe(R))return a?a(R,2):R()})):qe(t)?e?d=a?()=>a(t,2):t:d=()=>{if(h){Ti();try{h()}finally{Ai()}}const R=Li;Li=u;try{return a?a(t,3,[m]):t(m)}finally{Li=R}}:d=xr,e&&i){const R=d,D=i===!0?1/0:i;d=()=>Fr(R(),D)}const S=ig(),O=()=>{u.stop(),S&&S.active&&Xd(S.effects,u)};if(o&&e){const R=e;e=(...D)=>{R(...D),O()}}let A=b?new Array(t.length).fill(Tl):Tl;const N=R=>{if(!(!(u.flags&1)||!u.dirty&&!R))if(e){const D=u.run();if(i||g||(b?D.some((F,j)=>gi(F,A[j])):gi(D,A))){h&&h();const F=Li;Li=u;try{const j=[D,A===Tl?void 0:b&&A[0]===Tl?[]:A,m];a?a(e,3,j):e(...j),A=D}finally{Li=F}}}else u.run()};return l&&l(N),u=new og(d),u.scheduler=s?()=>s(N,!1):N,m=R=>qw(R,!1,u),h=u.onStop=()=>{const R=ka.get(u);if(R){if(a)a(R,4);else for(const D of R)D();ka.delete(u)}},e?r?N(!0):A=u.run():s?s(N.bind(null,!0),!0):u.run(),O.pause=u.pause.bind(u),O.resume=u.resume.bind(u),O.stop=O,O}function Fr(t,e=1/0,n){if(e<=0||!St(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,$t(t))Fr(t.value,e,n);else if(Be(t))for(let r=0;r<t.length;r++)Fr(t[r],e,n);else if(sc(t)||$o(t))t.forEach(r=>{Fr(r,e,n)});else if(Zm(t)){for(const r in t)Fr(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Fr(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function fl(t,e,n,r){try{return r?t(...r):t()}catch(i){pc(i,e,n)}}function Er(t,e,n,r){if(qe(t)){const i=fl(t,e,n,r);return i&&Ym(i)&&i.catch(o=>{pc(o,e,n)}),i}if(Be(t)){const i=[];for(let o=0;o<t.length;o++)i.push(Er(t[o],e,n,r));return i}}function pc(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:s}=e&&e.appContext.config||yt;if(e){let l=e.parent;const a=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const u=l.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,a,c)===!1)return}l=l.parent}if(o){Ti(),fl(o,null,10,[t,a,c]),Ai();return}}Gw(t,n,i,r,s)}function Gw(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const vn=[];let br=-1;const Lo=[];let ri=null,Co=0;const Sg=Promise.resolve();let Sa=null;function mc(t){const e=Sa||Sg;return t?e.then(this?t.bind(this):t):e}function Yw(t){let e=br+1,n=vn.length;for(;e<n;){const r=e+n>>>1,i=vn[r],o=Ws(i);o<t||o===t&&i.flags&2?e=r+1:n=r}return e}function lf(t){if(!(t.flags&1)){const e=Ws(t),n=vn[vn.length-1];!n||!(t.flags&2)&&e>=Ws(n)?vn.push(t):vn.splice(Yw(e),0,t),t.flags|=1,xg()}}function xg(){Sa||(Sa=Sg.then(Og))}function Xw(t){Be(t)?Lo.push(...t):ri&&t.id===-1?ri.splice(Co+1,0,t):t.flags&1||(Lo.push(t),t.flags|=1),xg()}function Ph(t,e,n=br+1){for(;n<vn.length;n++){const r=vn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;vn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Cg(t){if(Lo.length){const e=[...new Set(Lo)].sort((n,r)=>Ws(n)-Ws(r));if(Lo.length=0,ri){ri.push(...e);return}for(ri=e,Co=0;Co<ri.length;Co++){const n=ri[Co];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ri=null,Co=0}}const Ws=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Og(t){try{for(br=0;br<vn.length;br++){const e=vn[br];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),fl(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;br<vn.length;br++){const e=vn[br];e&&(e.flags&=-2)}br=-1,vn.length=0,Cg(),Sa=null,(vn.length||Lo.length)&&Og()}}let Pn=null,Eg=null;function xa(t){const e=Pn;return Pn=t,Eg=t&&t.type.__scopeId||null,e}function Tg(t,e=Pn,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&Hh(-1);const o=xa(e);let s;try{s=t(...i)}finally{xa(o),r._d&&Hh(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function Un(t,e){if(Pn===null)return t;const n=wc(Pn),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[o,s,l,a=yt]=e[i];o&&(qe(o)&&(o={mounted:o,updated:o}),o.deep&&Fr(s),r.push({dir:o,instance:n,value:s,oldValue:void 0,arg:l,modifiers:a}))}return t}function Ii(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const l=i[s];o&&(l.oldValue=o[s].value);let a=l.dir[r];a&&(Ti(),Er(a,n,8,[t.el,l,t,e]),Ai())}}const Zw=Symbol("_vte"),Qw=t=>t.__isTeleport;function af(t,e){t.shapeFlag&6&&t.component?(t.transition=e,af(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Ag(t,e){return qe(t)?un({name:t.name},e,{setup:t}):t}function Mg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Ca(t,e,n,r,i=!1){if(Be(t)){t.forEach((g,b)=>Ca(g,e&&(Be(e)?e[b]:e),n,r,i));return}if(Ts(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Ca(t,e,n,r.component.subTree);return}const o=r.shapeFlag&4?wc(r.component):r.el,s=i?null:o,{i:l,r:a}=t,c=e&&e.r,u=l.refs===yt?l.refs={}:l.refs,d=l.setupState,h=lt(d),m=d===yt?()=>!1:g=>ut(h,g);if(c!=null&&c!==a&&(Bt(c)?(u[c]=null,m(c)&&(d[c]=null)):$t(c)&&(c.value=null)),qe(a))fl(a,l,12,[s,u]);else{const g=Bt(a),b=$t(a);if(g||b){const S=()=>{if(t.f){const O=g?m(a)?d[a]:u[a]:a.value;i?Be(O)&&Xd(O,o):Be(O)?O.includes(o)||O.push(o):g?(u[a]=[o],m(a)&&(d[a]=u[a])):(a.value=[o],t.k&&(u[t.k]=a.value))}else g?(u[a]=s,m(a)&&(d[a]=s)):b&&(a.value=s,t.k&&(u[t.k]=s))};s?(S.id=-1,jn(S,n)):S()}}}cc().requestIdleCallback;cc().cancelIdleCallback;const Ts=t=>!!t.type.__asyncLoader,_g=t=>t.type.__isKeepAlive;function ek(t,e){Ng(t,"a",e)}function tk(t,e){Ng(t,"da",e)}function Ng(t,e,n=en){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(gc(e,r,n),n){let i=n.parent;for(;i&&i.parent;)_g(i.parent.vnode)&&nk(r,e,n,i),i=i.parent}}function nk(t,e,n,r){const i=gc(e,t,r,!0);cf(()=>{Xd(r[e],i)},n)}function gc(t,e,n=en,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...s)=>{Ti();const l=hl(n),a=Er(e,n,t,s);return l(),Ai(),a});return r?i.unshift(o):i.push(o),o}}const Xr=t=>(e,n=en)=>{(!Js||t==="sp")&&gc(t,(...r)=>e(...r),n)},rk=Xr("bm"),Pg=Xr("m"),ik=Xr("bu"),ok=Xr("u"),Ig=Xr("bum"),cf=Xr("um"),sk=Xr("sp"),lk=Xr("rtg"),ak=Xr("rtc");function ck(t,e=en){gc("ec",t,e)}const Dg="components",uk="directives";function nt(t,e){return $g(Dg,t,!0,e)||t}const dk=Symbol.for("v-ndc");function fk(t){return $g(uk,t)}function $g(t,e,n=!0,r=!1){const i=Pn||en;if(i){const o=i.type;if(t===Dg){const l=tS(o,!1);if(l&&(l===e||l===ir(e)||l===ac(ir(e))))return o}const s=Ih(i[t]||o[t],e)||Ih(i.appContext[t],e);return!s&&r?o:s}}function Ih(t,e){return t&&(t[e]||t[ir(e)]||t[ac(ir(e))])}function Jr(t,e,n,r){let i;const o=n,s=Be(t);if(s||Bt(t)){const l=s&&Bo(t);let a=!1;l&&(a=!tr(t),t=fc(t)),i=new Array(t.length);for(let c=0,u=t.length;c<u;c++)i[c]=e(a?sn(t[c]):t[c],c,void 0,o)}else if(typeof t=="number"){i=new Array(t);for(let l=0;l<t;l++)i[l]=e(l+1,l,void 0,o)}else if(St(t))if(t[Symbol.iterator])i=Array.from(t,(l,a)=>e(l,a,void 0,o));else{const l=Object.keys(t);i=new Array(l.length);for(let a=0,c=l.length;a<c;a++){const u=l[a];i[a]=e(t[u],u,a,o)}}else i=[];return i}const zu=t=>t?ty(t)?wc(t):zu(t.parent):null,As=un(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>zu(t.parent),$root:t=>zu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Bg(t),$forceUpdate:t=>t.f||(t.f=()=>{lf(t.update)}),$nextTick:t=>t.n||(t.n=mc.bind(t.proxy)),$watch:t=>$k.bind(t)}),Xc=(t,e)=>t!==yt&&!t.__isScriptSetup&&ut(t,e),hk={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:l,appContext:a}=t;let c;if(e[0]!=="$"){const m=s[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return o[e]}else{if(Xc(r,e))return s[e]=1,r[e];if(i!==yt&&ut(i,e))return s[e]=2,i[e];if((c=t.propsOptions[0])&&ut(c,e))return s[e]=3,o[e];if(n!==yt&&ut(n,e))return s[e]=4,n[e];Ku&&(s[e]=0)}}const u=As[e];let d,h;if(u)return e==="$attrs"&&on(t.attrs,"get",""),u(t);if((d=l.__cssModules)&&(d=d[e]))return d;if(n!==yt&&ut(n,e))return s[e]=4,n[e];if(h=a.config.globalProperties,ut(h,e))return h[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;return Xc(i,e)?(i[e]=n,!0):r!==yt&&ut(r,e)?(r[e]=n,!0):ut(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let l;return!!n[s]||t!==yt&&ut(t,s)||Xc(e,s)||(l=o[0])&&ut(l,s)||ut(r,s)||ut(As,s)||ut(i.config.globalProperties,s)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ut(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Dh(t){return Be(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Ku=!0;function pk(t){const e=Bg(t),n=t.proxy,r=t.ctx;Ku=!1,e.beforeCreate&&$h(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:s,watch:l,provide:a,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:m,updated:g,activated:b,deactivated:S,beforeDestroy:O,beforeUnmount:A,destroyed:N,unmounted:R,render:D,renderTracked:F,renderTriggered:j,errorCaptured:K,serverPrefetch:E,expose:k,inheritAttrs:V,components:C,directives:ue,filters:Z}=e;if(c&&mk(c,r,null),s)for(const Q in s){const Ae=s[Q];qe(Ae)&&(r[Q]=Ae.bind(n))}if(i){const Q=i.call(n,n);St(Q)&&(t.data=hc(Q))}if(Ku=!0,o)for(const Q in o){const Ae=o[Q],Qe=qe(Ae)?Ae.bind(n,n):qe(Ae.get)?Ae.get.bind(n,n):xr,Ue=!qe(Ae)&&qe(Ae.set)?Ae.set.bind(n):xr,rt=Ju({get:Qe,set:Ue});Object.defineProperty(r,Q,{enumerable:!0,configurable:!0,get:()=>rt.value,set:ht=>rt.value=ht})}if(l)for(const Q in l)Rg(l[Q],r,n,Q);if(a){const Q=qe(a)?a.call(n):a;Reflect.ownKeys(Q).forEach(Ae=>{kk(Ae,Q[Ae])})}u&&$h(u,t,"c");function ye(Q,Ae){Be(Ae)?Ae.forEach(Qe=>Q(Qe.bind(n))):Ae&&Q(Ae.bind(n))}if(ye(rk,d),ye(Pg,h),ye(ik,m),ye(ok,g),ye(ek,b),ye(tk,S),ye(ck,K),ye(ak,F),ye(lk,j),ye(Ig,A),ye(cf,R),ye(sk,E),Be(k))if(k.length){const Q=t.exposed||(t.exposed={});k.forEach(Ae=>{Object.defineProperty(Q,Ae,{get:()=>n[Ae],set:Qe=>n[Ae]=Qe})})}else t.exposed||(t.exposed={});D&&t.render===xr&&(t.render=D),V!=null&&(t.inheritAttrs=V),C&&(t.components=C),ue&&(t.directives=ue),E&&Mg(t)}function mk(t,e,n=xr){Be(t)&&(t=Uu(t));for(const r in t){const i=t[r];let o;St(i)?"default"in i?o=Yl(i.from||r,i.default,!0):o=Yl(i.from||r):o=Yl(i),$t(o)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:s=>o.value=s}):e[r]=o}}function $h(t,e,n){Er(Be(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Rg(t,e,n,r){let i=r.includes(".")?Yg(n,r):()=>n[r];if(Bt(t)){const o=e[t];qe(o)&&Xl(i,o)}else if(qe(t))Xl(i,t.bind(n));else if(St(t))if(Be(t))t.forEach(o=>Rg(o,e,n,r));else{const o=qe(t.handler)?t.handler.bind(n):e[t.handler];qe(o)&&Xl(i,o,t)}}function Bg(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=t.appContext,l=o.get(e);let a;return l?a=l:!i.length&&!n&&!r?a=e:(a={},i.length&&i.forEach(c=>Oa(a,c,s,!0)),Oa(a,e,s)),St(e)&&o.set(e,a),a}function Oa(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&Oa(t,o,n,!0),i&&i.forEach(s=>Oa(t,s,n,!0));for(const s in e)if(!(r&&s==="expose")){const l=gk[s]||n&&n[s];t[s]=l?l(t[s],e[s]):e[s]}return t}const gk={data:Rh,props:Bh,emits:Bh,methods:ps,computed:ps,beforeCreate:mn,created:mn,beforeMount:mn,mounted:mn,beforeUpdate:mn,updated:mn,beforeDestroy:mn,beforeUnmount:mn,destroyed:mn,unmounted:mn,activated:mn,deactivated:mn,errorCaptured:mn,serverPrefetch:mn,components:ps,directives:ps,watch:bk,provide:Rh,inject:yk};function Rh(t,e){return e?t?function(){return un(qe(t)?t.call(this,this):t,qe(e)?e.call(this,this):e)}:e:t}function yk(t,e){return ps(Uu(t),Uu(e))}function Uu(t){if(Be(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function mn(t,e){return t?[...new Set([].concat(t,e))]:e}function ps(t,e){return t?un(Object.create(null),t,e):e}function Bh(t,e){return t?Be(t)&&Be(e)?[...new Set([...t,...e])]:un(Object.create(null),Dh(t),Dh(e??{})):e}function bk(t,e){if(!t)return e;if(!e)return t;const n=un(Object.create(null),t);for(const r in e)n[r]=mn(t[r],e[r]);return n}function Lg(){return{app:null,config:{isNativeTag:rw,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vk=0;function wk(t,e){return function(r,i=null){qe(r)||(r=un({},r)),i!=null&&!St(i)&&(i=null);const o=Lg(),s=new WeakSet,l=[];let a=!1;const c=o.app={_uid:vk++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:rS,get config(){return o.config},set config(u){},use(u,...d){return s.has(u)||(u&&qe(u.install)?(s.add(u),u.install(c,...d)):qe(u)&&(s.add(u),u(c,...d))),c},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),c},component(u,d){return d?(o.components[u]=d,c):o.components[u]},directive(u,d){return d?(o.directives[u]=d,c):o.directives[u]},mount(u,d,h){if(!a){const m=c._ceVNode||wt(r,i);return m.appContext=o,h===!0?h="svg":h===!1&&(h=void 0),t(m,u,h),a=!0,c._container=u,u.__vue_app__=c,wc(m.component)}},onUnmount(u){l.push(u)},unmount(){a&&(Er(l,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,d){return o.provides[u]=d,c},runWithContext(u){const d=Fo;Fo=c;try{return u()}finally{Fo=d}}};return c}}let Fo=null;function kk(t,e){if(en){let n=en.provides;const r=en.parent&&en.parent.provides;r===n&&(n=en.provides=Object.create(r)),n[t]=e}}function Yl(t,e,n=!1){const r=en||Pn;if(r||Fo){const i=Fo?Fo._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&qe(e)?e.call(r&&r.proxy):e}}const Fg={},Vg=()=>Object.create(Fg),jg=t=>Object.getPrototypeOf(t)===Fg;function Sk(t,e,n,r=!1){const i={},o=Vg();t.propsDefaults=Object.create(null),Hg(t,e,i,o);for(const s in t.propsOptions[0])s in i||(i[s]=void 0);n?t.props=r?i:Rw(i):t.type.props?t.props=i:t.props=o,t.attrs=o}function xk(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=t,l=lt(i),[a]=t.propsOptions;let c=!1;if((r||s>0)&&!(s&16)){if(s&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(yc(t.emitsOptions,h))continue;const m=e[h];if(a)if(ut(o,h))m!==o[h]&&(o[h]=m,c=!0);else{const g=ir(h);i[g]=Wu(a,l,g,m,t,!1)}else m!==o[h]&&(o[h]=m,c=!0)}}}else{Hg(t,e,i,o)&&(c=!0);let u;for(const d in l)(!e||!ut(e,d)&&((u=ao(d))===d||!ut(e,u)))&&(a?n&&(n[d]!==void 0||n[u]!==void 0)&&(i[d]=Wu(a,l,d,void 0,t,!0)):delete i[d]);if(o!==l)for(const d in o)(!e||!ut(e,d))&&(delete o[d],c=!0)}c&&Lr(t.attrs,"set","")}function Hg(t,e,n,r){const[i,o]=t.propsOptions;let s=!1,l;if(e)for(let a in e){if(Cs(a))continue;const c=e[a];let u;i&&ut(i,u=ir(a))?!o||!o.includes(u)?n[u]=c:(l||(l={}))[u]=c:yc(t.emitsOptions,a)||(!(a in r)||c!==r[a])&&(r[a]=c,s=!0)}if(o){const a=lt(n),c=l||yt;for(let u=0;u<o.length;u++){const d=o[u];n[d]=Wu(i,a,d,c[d],t,!ut(c,d))}}return s}function Wu(t,e,n,r,i,o){const s=t[n];if(s!=null){const l=ut(s,"default");if(l&&r===void 0){const a=s.default;if(s.type!==Function&&!s.skipFactory&&qe(a)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const u=hl(i);r=c[n]=a.call(null,e),u()}}else r=a;i.ce&&i.ce._setProp(n,r)}s[0]&&(o&&!l?r=!1:s[1]&&(r===""||r===ao(n))&&(r=!0))}return r}const Ck=new WeakMap;function zg(t,e,n=!1){const r=n?Ck:e.propsCache,i=r.get(t);if(i)return i;const o=t.props,s={},l=[];let a=!1;if(!qe(t)){const u=d=>{a=!0;const[h,m]=zg(d,e,!0);un(s,h),m&&l.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!o&&!a)return St(t)&&r.set(t,Do),Do;if(Be(o))for(let u=0;u<o.length;u++){const d=ir(o[u]);Lh(d)&&(s[d]=yt)}else if(o)for(const u in o){const d=ir(u);if(Lh(d)){const h=o[u],m=s[d]=Be(h)||qe(h)?{type:h}:un({},h),g=m.type;let b=!1,S=!0;if(Be(g))for(let O=0;O<g.length;++O){const A=g[O],N=qe(A)&&A.name;if(N==="Boolean"){b=!0;break}else N==="String"&&(S=!1)}else b=qe(g)&&g.name==="Boolean";m[0]=b,m[1]=S,(b||ut(m,"default"))&&l.push(d)}}const c=[s,l];return St(t)&&r.set(t,c),c}function Lh(t){return t[0]!=="$"&&!Cs(t)}const Kg=t=>t[0]==="_"||t==="$stable",uf=t=>Be(t)?t.map(kr):[kr(t)],Ok=(t,e,n)=>{if(e._n)return e;const r=Tg((...i)=>uf(e(...i)),n);return r._c=!1,r},Ug=(t,e,n)=>{const r=t._ctx;for(const i in t){if(Kg(i))continue;const o=t[i];if(qe(o))e[i]=Ok(i,o,r);else if(o!=null){const s=uf(o);e[i]=()=>s}}},Wg=(t,e)=>{const n=uf(e);t.slots.default=()=>n},qg=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},Ek=(t,e,n)=>{const r=t.slots=Vg();if(t.vnode.shapeFlag&32){const i=e._;i?(qg(r,e,n),n&&Qm(r,"_",i,!0)):Ug(e,r)}else e&&Wg(t,e)},Tk=(t,e,n)=>{const{vnode:r,slots:i}=t;let o=!0,s=yt;if(r.shapeFlag&32){const l=e._;l?n&&l===1?o=!1:qg(i,e,n):(o=!e.$stable,Ug(e,i)),s=e}else e&&(Wg(t,e),s={default:1});if(o)for(const l in i)!Kg(l)&&s[l]==null&&delete i[l]},jn=Hk;function Ak(t){return Mk(t)}function Mk(t,e){const n=cc();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:s,createText:l,createComment:a,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:m=xr,insertStaticContent:g}=t,b=(T,_,B,L=null,U=null,J=null,re=void 0,G=null,X=!!_.dynamicChildren)=>{if(T===_)return;T&&!ds(T,_)&&(L=H(T),ht(T,U,J,!0),T=null),_.patchFlag===-2&&(X=!1,_.dynamicChildren=null);const{type:Y,ref:me,shapeFlag:le}=_;switch(Y){case bc:S(T,_,B,L);break;case no:O(T,_,B,L);break;case Zl:T==null&&A(_,B,L,re);break;case at:C(T,_,B,L,U,J,re,G,X);break;default:le&1?D(T,_,B,L,U,J,re,G,X):le&6?ue(T,_,B,L,U,J,re,G,X):(le&64||le&128)&&Y.process(T,_,B,L,U,J,re,G,X,W)}me!=null&&U&&Ca(me,T&&T.ref,J,_||T,!_)},S=(T,_,B,L)=>{if(T==null)r(_.el=l(_.children),B,L);else{const U=_.el=T.el;_.children!==T.children&&c(U,_.children)}},O=(T,_,B,L)=>{T==null?r(_.el=a(_.children||""),B,L):_.el=T.el},A=(T,_,B,L)=>{[T.el,T.anchor]=g(T.children,_,B,L,T.el,T.anchor)},N=({el:T,anchor:_},B,L)=>{let U;for(;T&&T!==_;)U=h(T),r(T,B,L),T=U;r(_,B,L)},R=({el:T,anchor:_})=>{let B;for(;T&&T!==_;)B=h(T),i(T),T=B;i(_)},D=(T,_,B,L,U,J,re,G,X)=>{_.type==="svg"?re="svg":_.type==="math"&&(re="mathml"),T==null?F(_,B,L,U,J,re,G,X):E(T,_,U,J,re,G,X)},F=(T,_,B,L,U,J,re,G)=>{let X,Y;const{props:me,shapeFlag:le,transition:fe,dirs:he}=T;if(X=T.el=s(T.type,J,me&&me.is,me),le&8?u(X,T.children):le&16&&K(T.children,X,null,L,U,Zc(T,J),re,G),he&&Ii(T,null,L,"created"),j(X,T,T.scopeId,re,L),me){for(const Se in me)Se!=="value"&&!Cs(Se)&&o(X,Se,null,me[Se],J,L);"value"in me&&o(X,"value",null,me.value,J),(Y=me.onVnodeBeforeMount)&&yr(Y,L,T)}he&&Ii(T,null,L,"beforeMount");const ee=_k(U,fe);ee&&fe.beforeEnter(X),r(X,_,B),((Y=me&&me.onVnodeMounted)||ee||he)&&jn(()=>{Y&&yr(Y,L,T),ee&&fe.enter(X),he&&Ii(T,null,L,"mounted")},U)},j=(T,_,B,L,U)=>{if(B&&m(T,B),L)for(let J=0;J<L.length;J++)m(T,L[J]);if(U){let J=U.subTree;if(_===J||Zg(J.type)&&(J.ssContent===_||J.ssFallback===_)){const re=U.vnode;j(T,re,re.scopeId,re.slotScopeIds,U.parent)}}},K=(T,_,B,L,U,J,re,G,X=0)=>{for(let Y=X;Y<T.length;Y++){const me=T[Y]=G?ii(T[Y]):kr(T[Y]);b(null,me,_,B,L,U,J,re,G)}},E=(T,_,B,L,U,J,re)=>{const G=_.el=T.el;let{patchFlag:X,dynamicChildren:Y,dirs:me}=_;X|=T.patchFlag&16;const le=T.props||yt,fe=_.props||yt;let he;if(B&&Di(B,!1),(he=fe.onVnodeBeforeUpdate)&&yr(he,B,_,T),me&&Ii(_,T,B,"beforeUpdate"),B&&Di(B,!0),(le.innerHTML&&fe.innerHTML==null||le.textContent&&fe.textContent==null)&&u(G,""),Y?k(T.dynamicChildren,Y,G,B,L,Zc(_,U),J):re||Ae(T,_,G,null,B,L,Zc(_,U),J,!1),X>0){if(X&16)V(G,le,fe,B,U);else if(X&2&&le.class!==fe.class&&o(G,"class",null,fe.class,U),X&4&&o(G,"style",le.style,fe.style,U),X&8){const ee=_.dynamicProps;for(let Se=0;Se<ee.length;Se++){const Te=ee[Se],pe=le[Te],w=fe[Te];(w!==pe||Te==="value")&&o(G,Te,pe,w,U,B)}}X&1&&T.children!==_.children&&u(G,_.children)}else!re&&Y==null&&V(G,le,fe,B,U);((he=fe.onVnodeUpdated)||me)&&jn(()=>{he&&yr(he,B,_,T),me&&Ii(_,T,B,"updated")},L)},k=(T,_,B,L,U,J,re)=>{for(let G=0;G<_.length;G++){const X=T[G],Y=_[G],me=X.el&&(X.type===at||!ds(X,Y)||X.shapeFlag&70)?d(X.el):B;b(X,Y,me,null,L,U,J,re,!0)}},V=(T,_,B,L,U)=>{if(_!==B){if(_!==yt)for(const J in _)!Cs(J)&&!(J in B)&&o(T,J,_[J],null,U,L);for(const J in B){if(Cs(J))continue;const re=B[J],G=_[J];re!==G&&J!=="value"&&o(T,J,G,re,U,L)}"value"in B&&o(T,"value",_.value,B.value,U)}},C=(T,_,B,L,U,J,re,G,X)=>{const Y=_.el=T?T.el:l(""),me=_.anchor=T?T.anchor:l("");let{patchFlag:le,dynamicChildren:fe,slotScopeIds:he}=_;he&&(G=G?G.concat(he):he),T==null?(r(Y,B,L),r(me,B,L),K(_.children||[],B,me,U,J,re,G,X)):le>0&&le&64&&fe&&T.dynamicChildren?(k(T.dynamicChildren,fe,B,U,J,re,G),(_.key!=null||U&&_===U.subTree)&&Jg(T,_,!0)):Ae(T,_,B,me,U,J,re,G,X)},ue=(T,_,B,L,U,J,re,G,X)=>{_.slotScopeIds=G,T==null?_.shapeFlag&512?U.ctx.activate(_,B,L,re,X):Z(_,B,L,U,J,re,X):xe(T,_,X)},Z=(T,_,B,L,U,J,re)=>{const G=T.component=Yk(T,L,U);if(_g(T)&&(G.ctx.renderer=W),Xk(G,!1,re),G.asyncDep){if(U&&U.registerDep(G,ye,re),!T.el){const X=G.subTree=wt(no);O(null,X,_,B)}}else ye(G,T,_,B,U,J,re)},xe=(T,_,B)=>{const L=_.component=T.component;if(Vk(T,_,B))if(L.asyncDep&&!L.asyncResolved){Q(L,_,B);return}else L.next=_,L.update();else _.el=T.el,L.vnode=_},ye=(T,_,B,L,U,J,re)=>{const G=()=>{if(T.isMounted){let{next:le,bu:fe,u:he,parent:ee,vnode:Se}=T;{const x=Gg(T);if(x){le&&(le.el=Se.el,Q(T,le,re)),x.asyncDep.then(()=>{T.isUnmounted||G()});return}}let Te=le,pe;Di(T,!1),le?(le.el=Se.el,Q(T,le,re)):le=Se,fe&&Gl(fe),(pe=le.props&&le.props.onVnodeBeforeUpdate)&&yr(pe,ee,le,Se),Di(T,!0);const w=Vh(T),y=T.subTree;T.subTree=w,b(y,w,d(y.el),H(y),T,U,J),le.el=w.el,Te===null&&jk(T,w.el),he&&jn(he,U),(pe=le.props&&le.props.onVnodeUpdated)&&jn(()=>yr(pe,ee,le,Se),U)}else{let le;const{el:fe,props:he}=_,{bm:ee,m:Se,parent:Te,root:pe,type:w}=T,y=Ts(_);Di(T,!1),ee&&Gl(ee),!y&&(le=he&&he.onVnodeBeforeMount)&&yr(le,Te,_),Di(T,!0);{pe.ce&&pe.ce._injectChildStyle(w);const x=T.subTree=Vh(T);b(null,x,B,L,T,U,J),_.el=x.el}if(Se&&jn(Se,U),!y&&(le=he&&he.onVnodeMounted)){const x=_;jn(()=>yr(le,Te,x),U)}(_.shapeFlag&256||Te&&Ts(Te.vnode)&&Te.vnode.shapeFlag&256)&&T.a&&jn(T.a,U),T.isMounted=!0,_=B=L=null}};T.scope.on();const X=T.effect=new og(G);T.scope.off();const Y=T.update=X.run.bind(X),me=T.job=X.runIfDirty.bind(X);me.i=T,me.id=T.uid,X.scheduler=()=>lf(me),Di(T,!0),Y()},Q=(T,_,B)=>{_.component=T;const L=T.vnode.props;T.vnode=_,T.next=null,xk(T,_.props,L,B),Tk(T,_.children,B),Ti(),Ph(T),Ai()},Ae=(T,_,B,L,U,J,re,G,X=!1)=>{const Y=T&&T.children,me=T?T.shapeFlag:0,le=_.children,{patchFlag:fe,shapeFlag:he}=_;if(fe>0){if(fe&128){Ue(Y,le,B,L,U,J,re,G,X);return}else if(fe&256){Qe(Y,le,B,L,U,J,re,G,X);return}}he&8?(me&16&&At(Y,U,J),le!==Y&&u(B,le)):me&16?he&16?Ue(Y,le,B,L,U,J,re,G,X):At(Y,U,J,!0):(me&8&&u(B,""),he&16&&K(le,B,L,U,J,re,G,X))},Qe=(T,_,B,L,U,J,re,G,X)=>{T=T||Do,_=_||Do;const Y=T.length,me=_.length,le=Math.min(Y,me);let fe;for(fe=0;fe<le;fe++){const he=_[fe]=X?ii(_[fe]):kr(_[fe]);b(T[fe],he,B,null,U,J,re,G,X)}Y>me?At(T,U,J,!0,!1,le):K(_,B,L,U,J,re,G,X,le)},Ue=(T,_,B,L,U,J,re,G,X)=>{let Y=0;const me=_.length;let le=T.length-1,fe=me-1;for(;Y<=le&&Y<=fe;){const he=T[Y],ee=_[Y]=X?ii(_[Y]):kr(_[Y]);if(ds(he,ee))b(he,ee,B,null,U,J,re,G,X);else break;Y++}for(;Y<=le&&Y<=fe;){const he=T[le],ee=_[fe]=X?ii(_[fe]):kr(_[fe]);if(ds(he,ee))b(he,ee,B,null,U,J,re,G,X);else break;le--,fe--}if(Y>le){if(Y<=fe){const he=fe+1,ee=he<me?_[he].el:L;for(;Y<=fe;)b(null,_[Y]=X?ii(_[Y]):kr(_[Y]),B,ee,U,J,re,G,X),Y++}}else if(Y>fe)for(;Y<=le;)ht(T[Y],U,J,!0),Y++;else{const he=Y,ee=Y,Se=new Map;for(Y=ee;Y<=fe;Y++){const ne=_[Y]=X?ii(_[Y]):kr(_[Y]);ne.key!=null&&Se.set(ne.key,Y)}let Te,pe=0;const w=fe-ee+1;let y=!1,x=0;const P=new Array(w);for(Y=0;Y<w;Y++)P[Y]=0;for(Y=he;Y<=le;Y++){const ne=T[Y];if(pe>=w){ht(ne,U,J,!0);continue}let oe;if(ne.key!=null)oe=Se.get(ne.key);else for(Te=ee;Te<=fe;Te++)if(P[Te-ee]===0&&ds(ne,_[Te])){oe=Te;break}oe===void 0?ht(ne,U,J,!0):(P[oe-ee]=Y+1,oe>=x?x=oe:y=!0,b(ne,_[oe],B,null,U,J,re,G,X),pe++)}const $=y?Nk(P):Do;for(Te=$.length-1,Y=w-1;Y>=0;Y--){const ne=ee+Y,oe=_[ne],Oe=ne+1<me?_[ne+1].el:L;P[Y]===0?b(null,oe,B,Oe,U,J,re,G,X):y&&(Te<0||Y!==$[Te]?rt(oe,B,Oe,2):Te--)}}},rt=(T,_,B,L,U=null)=>{const{el:J,type:re,transition:G,children:X,shapeFlag:Y}=T;if(Y&6){rt(T.component.subTree,_,B,L);return}if(Y&128){T.suspense.move(_,B,L);return}if(Y&64){re.move(T,_,B,W);return}if(re===at){r(J,_,B);for(let le=0;le<X.length;le++)rt(X[le],_,B,L);r(T.anchor,_,B);return}if(re===Zl){N(T,_,B);return}if(L!==2&&Y&1&&G)if(L===0)G.beforeEnter(J),r(J,_,B),jn(()=>G.enter(J),U);else{const{leave:le,delayLeave:fe,afterLeave:he}=G,ee=()=>r(J,_,B),Se=()=>{le(J,()=>{ee(),he&&he()})};fe?fe(J,ee,Se):Se()}else r(J,_,B)},ht=(T,_,B,L=!1,U=!1)=>{const{type:J,props:re,ref:G,children:X,dynamicChildren:Y,shapeFlag:me,patchFlag:le,dirs:fe,cacheIndex:he}=T;if(le===-2&&(U=!1),G!=null&&Ca(G,null,B,T,!0),he!=null&&(_.renderCache[he]=void 0),me&256){_.ctx.deactivate(T);return}const ee=me&1&&fe,Se=!Ts(T);let Te;if(Se&&(Te=re&&re.onVnodeBeforeUnmount)&&yr(Te,_,T),me&6)et(T.component,B,L);else{if(me&128){T.suspense.unmount(B,L);return}ee&&Ii(T,null,_,"beforeUnmount"),me&64?T.type.remove(T,_,B,W,L):Y&&!Y.hasOnce&&(J!==at||le>0&&le&64)?At(Y,_,B,!1,!0):(J===at&&le&384||!U&&me&16)&&At(X,_,B),L&&Lt(T)}(Se&&(Te=re&&re.onVnodeUnmounted)||ee)&&jn(()=>{Te&&yr(Te,_,T),ee&&Ii(T,null,_,"unmounted")},B)},Lt=T=>{const{type:_,el:B,anchor:L,transition:U}=T;if(_===at){Me(B,L);return}if(_===Zl){R(T);return}const J=()=>{i(B),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(T.shapeFlag&1&&U&&!U.persisted){const{leave:re,delayLeave:G}=U,X=()=>re(B,J);G?G(T.el,J,X):X()}else J()},Me=(T,_)=>{let B;for(;T!==_;)B=h(T),i(T),T=B;i(_)},et=(T,_,B)=>{const{bum:L,scope:U,job:J,subTree:re,um:G,m:X,a:Y}=T;Fh(X),Fh(Y),L&&Gl(L),U.stop(),J&&(J.flags|=8,ht(re,T,_,B)),G&&jn(G,_),jn(()=>{T.isUnmounted=!0},_),_&&_.pendingBranch&&!_.isUnmounted&&T.asyncDep&&!T.asyncResolved&&T.suspenseId===_.pendingId&&(_.deps--,_.deps===0&&_.resolve())},At=(T,_,B,L=!1,U=!1,J=0)=>{for(let re=J;re<T.length;re++)ht(T[re],_,B,L,U)},H=T=>{if(T.shapeFlag&6)return H(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const _=h(T.anchor||T.el),B=_&&_[Zw];return B?h(B):_};let z=!1;const q=(T,_,B)=>{T==null?_._vnode&&ht(_._vnode,null,null,!0):b(_._vnode||null,T,_,null,null,null,B),_._vnode=T,z||(z=!0,Ph(),Cg(),z=!1)},W={p:b,um:ht,m:rt,r:Lt,mt:Z,mc:K,pc:Ae,pbc:k,n:H,o:t};return{render:q,hydrate:void 0,createApp:wk(q)}}function Zc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Di({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function _k(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Jg(t,e,n=!1){const r=t.children,i=e.children;if(Be(r)&&Be(i))for(let o=0;o<r.length;o++){const s=r[o];let l=i[o];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[o]=ii(i[o]),l.el=s.el),!n&&l.patchFlag!==-2&&Jg(s,l)),l.type===bc&&(l.el=s.el)}}function Nk(t){const e=t.slice(),n=[0];let r,i,o,s,l;const a=t.length;for(r=0;r<a;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)l=o+s>>1,t[n[l]]<c?o=l+1:s=l;c<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}for(o=n.length,s=n[o-1];o-- >0;)n[o]=s,s=e[s];return n}function Gg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Gg(e)}function Fh(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Pk=Symbol.for("v-scx"),Ik=()=>Yl(Pk);function Dk(t,e){return df(t,null,e)}function Xl(t,e,n){return df(t,e,n)}function df(t,e,n=yt){const{immediate:r,deep:i,flush:o,once:s}=n,l=un({},n),a=e&&r||!e&&o!=="post";let c;if(Js){if(o==="sync"){const m=Ik();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!a){const m=()=>{};return m.stop=xr,m.resume=xr,m.pause=xr,m}}const u=en;l.call=(m,g,b)=>Er(m,u,g,b);let d=!1;o==="post"?l.scheduler=m=>{jn(m,u&&u.suspense)}:o!=="sync"&&(d=!0,l.scheduler=(m,g)=>{g?m():lf(m)}),l.augmentJob=m=>{e&&(m.flags|=4),d&&(m.flags|=2,u&&(m.id=u.uid,m.i=u))};const h=Jw(t,e,l);return Js&&(c?c.push(h):a&&h()),h}function $k(t,e,n){const r=this.proxy,i=Bt(t)?t.includes(".")?Yg(r,t):()=>r[t]:t.bind(r,r);let o;qe(e)?o=e:(o=e.handler,n=e);const s=hl(this),l=df(i,o.bind(r),n);return s(),l}function Yg(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const Rk=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${ir(e)}Modifiers`]||t[`${ao(e)}Modifiers`];function Bk(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||yt;let i=n;const o=e.startsWith("update:"),s=o&&Rk(r,e.slice(7));s&&(s.trim&&(i=n.map(u=>Bt(u)?u.trim():u)),s.number&&(i=n.map(Lu)));let l,a=r[l=Wc(e)]||r[l=Wc(ir(e))];!a&&o&&(a=r[l=Wc(ao(e))]),a&&Er(a,t,6,i);const c=r[l+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Er(c,t,6,i)}}function Xg(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const o=t.emits;let s={},l=!1;if(!qe(t)){const a=c=>{const u=Xg(c,e,!0);u&&(l=!0,un(s,u))};!n&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!o&&!l?(St(t)&&r.set(t,null),null):(Be(o)?o.forEach(a=>s[a]=null):un(s,o),St(t)&&r.set(t,s),s)}function yc(t,e){return!t||!oc(e)?!1:(e=e.slice(2).replace(/Once$/,""),ut(t,e[0].toLowerCase()+e.slice(1))||ut(t,ao(e))||ut(t,e))}function Vh(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[o],slots:s,attrs:l,emit:a,render:c,renderCache:u,props:d,data:h,setupState:m,ctx:g,inheritAttrs:b}=t,S=xa(t);let O,A;try{if(n.shapeFlag&4){const R=i||r,D=R;O=kr(c.call(D,R,u,d,m,h,g)),A=l}else{const R=e;O=kr(R.length>1?R(d,{attrs:l,slots:s,emit:a}):R(d,null)),A=e.props?l:Lk(l)}}catch(R){Ms.length=0,pc(R,t,1),O=wt(no)}let N=O;if(A&&b!==!1){const R=Object.keys(A),{shapeFlag:D}=N;R.length&&D&7&&(o&&R.some(Yd)&&(A=Fk(A,o)),N=qo(N,A,!1,!0))}return n.dirs&&(N=qo(N,null,!1,!0),N.dirs=N.dirs?N.dirs.concat(n.dirs):n.dirs),n.transition&&af(N,n.transition),O=N,xa(S),O}const Lk=t=>{let e;for(const n in t)(n==="class"||n==="style"||oc(n))&&((e||(e={}))[n]=t[n]);return e},Fk=(t,e)=>{const n={};for(const r in t)(!Yd(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Vk(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:l,patchFlag:a}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return r?jh(r,s,c):!!s;if(a&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(s[h]!==r[h]&&!yc(c,h))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:r===s?!1:r?s?jh(r,s,c):!0:!!s;return!1}function jh(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!yc(n,o))return!0}return!1}function jk({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Zg=t=>t.__isSuspense;function Hk(t,e){e&&e.pendingBranch?Be(t)?e.effects.push(...t):e.effects.push(t):Xw(t)}const at=Symbol.for("v-fgt"),bc=Symbol.for("v-txt"),no=Symbol.for("v-cmt"),Zl=Symbol.for("v-stc"),Ms=[];let Wn=null;function ie(t=!1){Ms.push(Wn=t?null:[])}function zk(){Ms.pop(),Wn=Ms[Ms.length-1]||null}let qs=1;function Hh(t,e=!1){qs+=t,t<0&&Wn&&e&&(Wn.hasOnce=!0)}function Qg(t){return t.dynamicChildren=qs>0?Wn||Do:null,zk(),qs>0&&Wn&&Wn.push(t),t}function we(t,e,n,r,i,o){return Qg(I(t,e,n,r,i,o,!0))}function Tt(t,e,n,r,i){return Qg(wt(t,e,n,r,i,!0))}function Ea(t){return t?t.__v_isVNode===!0:!1}function ds(t,e){return t.type===e.type&&t.key===e.key}const ey=({key:t})=>t??null,Ql=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Bt(t)||$t(t)||qe(t)?{i:Pn,r:t,k:e,f:!!n}:t:null);function I(t,e=null,n=null,r=0,i=null,o=t===at?0:1,s=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ey(e),ref:e&&Ql(e),scopeId:Eg,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Pn};return l?(ff(a,n),o&128&&t.normalize(a)):n&&(a.shapeFlag|=Bt(n)?8:16),qs>0&&!s&&Wn&&(a.patchFlag>0||o&6)&&a.patchFlag!==32&&Wn.push(a),a}const wt=Kk;function Kk(t,e=null,n=null,r=0,i=null,o=!1){if((!t||t===dk)&&(t=no),Ea(t)){const l=qo(t,e,!0);return n&&ff(l,n),qs>0&&!o&&Wn&&(l.shapeFlag&6?Wn[Wn.indexOf(t)]=l:Wn.push(l)),l.patchFlag=-2,l}if(nS(t)&&(t=t.__vccOpts),e){e=Uk(e);let{class:l,style:a}=e;l&&!Bt(l)&&(e.class=dr(l)),St(a)&&(of(a)&&!Be(a)&&(a=un({},a)),e.style=Ro(a))}const s=Bt(t)?1:Zg(t)?128:Qw(t)?64:St(t)?4:qe(t)?2:0;return I(t,e,n,r,i,s,o,!0)}function Uk(t){return t?of(t)||jg(t)?un({},t):t:null}function qo(t,e,n=!1,r=!1){const{props:i,ref:o,patchFlag:s,children:l,transition:a}=t,c=e?qk(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&ey(c),ref:e&&e.ref?n&&o?Be(o)?o.concat(Ql(e)):[o,Ql(e)]:Ql(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==at?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&qo(t.ssContent),ssFallback:t.ssFallback&&qo(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&r&&af(u,a.clone(u)),u}function Zn(t=" ",e=0){return wt(bc,null,t,e)}function Wk(t,e){const n=wt(Zl,null,t);return n.staticCount=e,n}function Ke(t="",e=!1){return e?(ie(),Tt(no,null,t)):wt(no,null,t)}function kr(t){return t==null||typeof t=="boolean"?wt(no):Be(t)?wt(at,null,t.slice()):Ea(t)?ii(t):wt(bc,null,String(t))}function ii(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:qo(t)}function ff(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Be(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),ff(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!jg(e)?e._ctx=Pn:i===3&&Pn&&(Pn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else qe(e)?(e={default:e,_ctx:Pn},n=32):(e=String(e),r&64?(n=16,e=[Zn(e)]):n=8);t.children=e,t.shapeFlag|=n}function qk(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=dr([e.class,r.class]));else if(i==="style")e.style=Ro([e.style,r.style]);else if(oc(i)){const o=e[i],s=r[i];s&&o!==s&&!(Be(o)&&o.includes(s))&&(e[i]=o?[].concat(o,s):s)}else i!==""&&(e[i]=r[i])}return e}function yr(t,e,n,r=null){Er(t,e,7,[n,r])}const Jk=Lg();let Gk=0;function Yk(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||Jk,o={uid:Gk++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new mw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zg(r,i),emitsOptions:Xg(r,i),emit:null,emitted:null,propsDefaults:yt,inheritAttrs:r.inheritAttrs,ctx:yt,data:yt,props:yt,attrs:yt,slots:yt,refs:yt,setupState:yt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=Bk.bind(null,o),t.ce&&t.ce(o),o}let en=null;const vc=()=>en||Pn;let Ta,qu;{const t=cc(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),o=>{i.length>1?i.forEach(s=>s(o)):i[0](o)}};Ta=e("__VUE_INSTANCE_SETTERS__",n=>en=n),qu=e("__VUE_SSR_SETTERS__",n=>Js=n)}const hl=t=>{const e=en;return Ta(t),t.scope.on(),()=>{t.scope.off(),Ta(e)}},zh=()=>{en&&en.scope.off(),Ta(null)};function ty(t){return t.vnode.shapeFlag&4}let Js=!1;function Xk(t,e=!1,n=!1){e&&qu(e);const{props:r,children:i}=t.vnode,o=ty(t);Sk(t,r,o,e),Ek(t,i,n);const s=o?Zk(t,e):void 0;return e&&qu(!1),s}function Zk(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,hk);const{setup:r}=n;if(r){Ti();const i=t.setupContext=r.length>1?eS(t):null,o=hl(t),s=fl(r,t,0,[t.props,i]),l=Ym(s);if(Ai(),o(),(l||t.sp)&&!Ts(t)&&Mg(t),l){if(s.then(zh,zh),e)return s.then(a=>{Kh(t,a)}).catch(a=>{pc(a,t,0)});t.asyncDep=s}else Kh(t,s)}else ny(t)}function Kh(t,e,n){qe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:St(e)&&(t.setupState=kg(e)),ny(t)}function ny(t,e,n){const r=t.type;t.render||(t.render=r.render||xr);{const i=hl(t);Ti();try{pk(t)}finally{Ai(),i()}}}const Qk={get(t,e){return on(t,"get",""),t[e]}};function eS(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Qk),slots:t.slots,emit:t.emit,expose:e}}function wc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(kg(wg(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in As)return As[n](t)},has(e,n){return n in e||n in As}})):t.proxy}function tS(t,e=!0){return qe(t)?t.displayName||t.name:t.name||e&&t.__name}function nS(t){return qe(t)&&"__vccOpts"in t}const Ju=(t,e)=>Ww(t,e,Js);function ry(t,e,n){const r=arguments.length;return r===2?St(e)&&!Be(e)?Ea(e)?wt(t,null,[e]):wt(t,e):wt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ea(n)&&(n=[n]),wt(t,e,n))}const rS="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Gu;const Uh=typeof window<"u"&&window.trustedTypes;if(Uh)try{Gu=Uh.createPolicy("vue",{createHTML:t=>t})}catch{}const iy=Gu?t=>Gu.createHTML(t):t=>t,iS="http://www.w3.org/2000/svg",oS="http://www.w3.org/1998/Math/MathML",$r=typeof document<"u"?document:null,Wh=$r&&$r.createElement("template"),sS={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?$r.createElementNS(iS,t):e==="mathml"?$r.createElementNS(oS,t):n?$r.createElement(t,{is:n}):$r.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>$r.createTextNode(t),createComment:t=>$r.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>$r.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,o){const s=n?n.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{Wh.innerHTML=iy(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const l=Wh.content;if(r==="svg"||r==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,n)}return[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},lS=Symbol("_vtc");function aS(t,e,n){const r=t[lS];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const qh=Symbol("_vod"),cS=Symbol("_vsh"),uS=Symbol(""),dS=/(^|;)\s*display\s*:/;function fS(t,e,n){const r=t.style,i=Bt(n);let o=!1;if(n&&!i){if(e)if(Bt(e))for(const s of e.split(";")){const l=s.slice(0,s.indexOf(":")).trim();n[l]==null&&ea(r,l,"")}else for(const s in e)n[s]==null&&ea(r,s,"");for(const s in n)s==="display"&&(o=!0),ea(r,s,n[s])}else if(i){if(e!==n){const s=r[uS];s&&(n+=";"+s),r.cssText=n,o=dS.test(n)}}else e&&t.removeAttribute("style");qh in t&&(t[qh]=o?r.display:"",t[cS]&&(r.display="none"))}const Jh=/\s*!important$/;function ea(t,e,n){if(Be(n))n.forEach(r=>ea(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=hS(t,e);Jh.test(n)?t.setProperty(ao(r),n.replace(Jh,""),"important"):t[r]=n}}const Gh=["Webkit","Moz","ms"],Qc={};function hS(t,e){const n=Qc[e];if(n)return n;let r=ir(e);if(r!=="filter"&&r in t)return Qc[e]=r;r=ac(r);for(let i=0;i<Gh.length;i++){const o=Gh[i]+r;if(o in t)return Qc[e]=o}return e}const Yh="http://www.w3.org/1999/xlink";function Xh(t,e,n,r,i,o=hw(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Yh,e.slice(6,e.length)):t.setAttributeNS(Yh,e,n):n==null||o&&!eg(n)?t.removeAttribute(e):t.setAttribute(e,o?"":Or(n)?String(n):n)}function Zh(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?iy(n):n);return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const l=o==="OPTION"?t.getAttribute("value")||"":t.value,a=n==null?t.type==="checkbox"?"on":"":String(n);(l!==a||!("_value"in t))&&(t.value=a),n==null&&t.removeAttribute(e),t._value=n;return}let s=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=eg(n):n==null&&l==="string"?(n="",s=!0):l==="number"&&(n=0,s=!0)}try{t[e]=n}catch{}s&&t.removeAttribute(i||e)}function Vi(t,e,n,r){t.addEventListener(e,n,r)}function pS(t,e,n,r){t.removeEventListener(e,n,r)}const Qh=Symbol("_vei");function mS(t,e,n,r,i=null){const o=t[Qh]||(t[Qh]={}),s=o[e];if(r&&s)s.value=r;else{const[l,a]=gS(e);if(r){const c=o[e]=vS(r,i);Vi(t,l,c,a)}else s&&(pS(t,l,s,a),o[e]=void 0)}}const ep=/(?:Once|Passive|Capture)$/;function gS(t){let e;if(ep.test(t)){e={};let r;for(;r=t.match(ep);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ao(t.slice(2)),e]}let eu=0;const yS=Promise.resolve(),bS=()=>eu||(yS.then(()=>eu=0),eu=Date.now());function vS(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Er(wS(r,n.value),e,5,[r])};return n.value=t,n.attached=bS(),n}function wS(t,e){if(Be(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const tp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,kS=(t,e,n,r,i,o)=>{const s=i==="svg";e==="class"?aS(t,r,s):e==="style"?fS(t,n,r):oc(e)?Yd(e)||mS(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):SS(t,e,r,s))?(Zh(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Xh(t,e,r,s,o,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Bt(r))?Zh(t,ir(e),r,o,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Xh(t,e,r,s))};function SS(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&tp(e)&&qe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return tp(e)&&Bt(n)?!1:e in t}const Aa=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Be(e)?n=>Gl(e,n):e};function xS(t){t.target.composing=!0}function np(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Vo=Symbol("_assign"),nr={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Vo]=Aa(i);const o=r||i.props&&i.props.type==="number";Vi(t,e?"change":"input",s=>{if(s.target.composing)return;let l=t.value;n&&(l=l.trim()),o&&(l=Lu(l)),t[Vo](l)}),n&&Vi(t,"change",()=>{t.value=t.value.trim()}),e||(Vi(t,"compositionstart",xS),Vi(t,"compositionend",np),Vi(t,"change",np))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:o}},s){if(t[Vo]=Aa(s),t.composing)return;const l=(o||t.type==="number")&&!/^0\d/.test(t.value)?Lu(t.value):t.value,a=e??"";l!==a&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===a)||(t.value=a))}},CS={deep:!0,created(t,e,n){t[Vo]=Aa(n),Vi(t,"change",()=>{const r=t._modelValue,i=OS(t),o=t.checked,s=t[Vo];if(Be(r)){const l=tg(r,i),a=l!==-1;if(o&&!a)s(r.concat(i));else if(!o&&a){const c=[...r];c.splice(l,1),s(c)}}else if(sc(r)){const l=new Set(r);o?l.add(i):l.delete(i),s(l)}else s(oy(t,o))})},mounted:rp,beforeUpdate(t,e,n){t[Vo]=Aa(n),rp(t,e,n)}};function rp(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(Be(e))i=tg(e,r.props.value)>-1;else if(sc(e))i=e.has(r.props.value);else{if(e===n)return;i=uc(e,oy(t,!0))}t.checked!==i&&(t.checked=i)}function OS(t){return"_value"in t?t._value:t.value}function oy(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const ES=un({patchProp:kS},sS);let ip;function TS(){return ip||(ip=Ak(ES))}const AS=(...t)=>{const e=TS().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=_S(r);if(!i)return;const o=e._component;!qe(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const s=n(i,!1,MS(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},e};function MS(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function _S(t){return Bt(t)?document.querySelector(t):t}const xt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Rt=Object.keys,an=Array.isArray;function kn(t,e){return typeof e!="object"||Rt(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||xt.Promise||(xt.Promise=Promise);const Gs=Object.getPrototypeOf,NS={}.hasOwnProperty;function Jn(t,e){return NS.call(t,e)}function Jo(t,e){typeof e=="function"&&(e=e(Gs(t))),(typeof Reflect>"u"?Rt:Reflect.ownKeys)(e).forEach(n=>{zr(t,n,e[n])})}const sy=Object.defineProperty;function zr(t,e,n,r){sy(t,e,kn(n&&Jn(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function jo(t){return{from:function(e){return t.prototype=Object.create(e.prototype),zr(t.prototype,"constructor",t),{extend:Jo.bind(null,t.prototype)}}}}const PS=Object.getOwnPropertyDescriptor;function hf(t,e){let n;return PS(t,e)||(n=Gs(t))&&hf(n,e)}const IS=[].slice;function Ma(t,e,n){return IS.call(t,e,n)}function ly(t,e){return e(t)}function ms(t){if(!t)throw new Error("Assertion Failed")}function ay(t){xt.setImmediate?setImmediate(t):setTimeout(t,0)}function cy(t,e){return t.reduce((n,r,i)=>{var o=e(r,i);return o&&(n[o[0]]=o[1]),n},{})}function Kr(t,e){if(typeof e=="string"&&Jn(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var o=Kr(t,e[r]);n.push(o)}return n}var s=e.indexOf(".");if(s!==-1){var l=t[e.substr(0,s)];return l==null?void 0:Kr(l,e.substr(s+1))}}function hr(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){ms(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)hr(t,e[r],n[r])}else{var o=e.indexOf(".");if(o!==-1){var s=e.substr(0,o),l=e.substr(o+1);if(l==="")n===void 0?an(t)&&!isNaN(parseInt(s))?t.splice(s,1):delete t[s]:t[s]=n;else{var a=t[s];a&&Jn(t,s)||(a=t[s]={}),hr(a,l,n)}}else n===void 0?an(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function uy(t){var e={};for(var n in t)Jn(t,n)&&(e[n]=t[n]);return e}const DS=[].concat;function dy(t){return DS.apply([],t)}const fy="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(dy([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>xt[t]),$S=fy.map(t=>xt[t]);cy(fy,t=>[t,!0]);let oi=null;function pl(t){oi=typeof WeakMap<"u"&&new WeakMap;const e=Yu(t);return oi=null,e}function Yu(t){if(!t||typeof t!="object")return t;let e=oi&&oi.get(t);if(e)return e;if(an(t)){e=[],oi&&oi.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(Yu(t[n]))}else if($S.indexOf(t.constructor)>=0)e=t;else{const o=Gs(t);for(var i in e=o===Object.prototype?{}:Object.create(o),oi&&oi.set(t,e),t)Jn(t,i)&&(e[i]=Yu(t[i]))}return e}const{toString:RS}={};function Xu(t){return RS.call(t).slice(8,-1)}const Zu=typeof Symbol<"u"?Symbol.iterator:"@@iterator",BS=typeof Zu=="symbol"?function(t){var e;return t!=null&&(e=t[Zu])&&e.apply(t)}:function(){return null},Oo={};function Vr(t){var e,n,r,i;if(arguments.length===1){if(an(t))return t.slice();if(this===Oo&&typeof t=="string")return[t];if(i=BS(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const pf=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var _r=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function hy(t,e){_r=t,py=e}var py=()=>!0;const LS=!new Error("").stack;function co(){if(LS)try{throw co.arguments,new Error}catch(t){return t}return new Error}function Qu(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(py).map(r=>`
`+r).join("")):""}var my=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],mf=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(my),FS={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ho(t,e){this._e=co(),this.name=t,this.message=e}function gy(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function _a(t,e,n,r){this._e=co(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=gy(t,e)}function _s(t,e){this._e=co(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=gy(t,e)}jo(Ho).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Qu(this._e,2))}},toString:function(){return this.name+": "+this.message}}),jo(_a).from(Ho),jo(_s).from(Ho);var gf=mf.reduce((t,e)=>(t[e]=e+"Error",t),{});const VS=Ho;var je=mf.reduce((t,e)=>{var n=e+"Error";function r(i,o){this._e=co(),this.name=n,i?typeof i=="string"?(this.message=`${i}${o?`
 `+o:""}`,this.inner=o||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=FS[e]||n,this.inner=null)}return jo(r).from(VS),t[e]=r,t},{});je.Syntax=SyntaxError,je.Type=TypeError,je.Range=RangeError;var op=my.reduce((t,e)=>(t[e+"Error"]=je[e],t),{}),ta=mf.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=je[e]),t),{});function bt(){}function Ys(t){return t}function jS(t,e){return t==null||t===Ys?e:function(n){return e(t(n))}}function ro(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function HS(t,e){return t===bt?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ro(r,this.onsuccess):r),i&&(this.onerror=this.onerror?ro(i,this.onerror):i),o!==void 0?o:n}}function zS(t,e){return t===bt?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ro(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ro(r,this.onerror):r)}}function KS(t,e){return t===bt?e:function(n){var r=t.apply(this,arguments);kn(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ro(i,this.onsuccess):i),o&&(this.onerror=this.onerror?ro(o,this.onerror):o),r===void 0?s===void 0?void 0:s:kn(r,s)}}function US(t,e){return t===bt?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function yf(t,e){return t===bt?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return e.apply(r,o)})}return e.apply(this,arguments)}}ta.ModifyError=_a,ta.DexieError=Ho,ta.BulkError=_s;var Xs={};const yy=100,[ed,Na,td]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,Gs(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,Gs(e),t]})(),by=Na&&Na.then,na=ed&&ed.constructor,bf=!!td;var nd=!1,WS=td?()=>{td.then(Al)}:xt.setImmediate?setImmediate.bind(null,Al):xt.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Al(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Al,0)},Ns=function(t,e){gs.push([t,e]),Pa&&(WS(),Pa=!1)},rd=!0,Pa=!0,Ji=[],ra=[],id=null,od=Ys,zo={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ap,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{ap(t[0],t[1])}catch{}})}},Ie=zo,gs=[],Gi=0,ia=[];function ke(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=bt,this._lib=!1;var e=this._PSD=Ie;if(_r&&(this._stackHolder=co(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==Xs)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ld(this,this._value))}this._state=null,this._value=null,++e.ref,wy(this,t)}const sd={get:function(){var t=Ie,e=Ia;function n(r,i){var o=!t.global&&(t!==Ie||e!==Ia);const s=o&&!Gr();var l=new ke((a,c)=>{vf(this,new vy(Da(r,t,o,s),Da(i,t,o,s),a,c,t))});return _r&&xy(l,this),l}return n.prototype=Xs,n},set:function(t){zr(this,"then",t&&t.prototype===Xs?sd:{get:function(){return t},set:sd.set})}};function vy(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}function wy(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&ml();n&&typeof n.then=="function"?wy(t,(i,o)=>{n instanceof ke?n._then(i,o):n.then(i,o)}):(t._state=!0,t._value=n,ky(t)),r&&gl()}},ld.bind(null,t))}catch(n){ld(t,n)}}function ld(t,e){if(ra.push(e),t._state===null){var n=t._lib&&ml();e=od(e),t._state=!1,t._value=e,_r&&e!==null&&typeof e=="object"&&!e._promise&&function(r,i,o){try{r.apply(null,o)}catch{}}(()=>{var r=hf(e,"stack");e._promise=t,zr(e,"stack",{get:()=>nd?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){Ji.some(i=>i._value===r._value)||Ji.push(r)}(t),ky(t),n&&gl()}}function ky(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)vf(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),Gi===0&&(++Gi,Ns(()=>{--Gi==0&&wf()},[]))}function vf(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Gi,Ns(qS,[n,t,e])}else t._listeners.push(e)}function qS(t,e,n){try{id=e;var r,i=e._value;e._state?r=t(i):(ra.length&&(ra=[]),r=t(i),ra.indexOf(i)===-1&&function(o){for(var s=Ji.length;s;)if(Ji[--s]._value===o._value)return void Ji.splice(s,1)}(e)),n.resolve(r)}catch(o){n.reject(o)}finally{id=null,--Gi==0&&wf(),--n.psd.ref||n.psd.finalize()}}function Sy(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i,o,s=t._value;s!=null?(i=s.name||"Error",o=s.message||s,r=Qu(s,0)):(i=s,o=""),e.push(i+(o?": "+o:"")+r)}return _r&&((r=Qu(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&Sy(t._prev,e,n)),e}function xy(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Al(){ml()&&gl()}function ml(){var t=rd;return rd=!1,Pa=!1,t}function gl(){var t,e,n;do for(;gs.length>0;)for(t=gs,gs=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(gs.length>0);rd=!0,Pa=!0}function wf(){var t=Ji;Ji=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=ia.slice(0),n=e.length;n;)e[--n]()}function Ml(t){return new ke(Xs,!1,t)}function Ot(t,e){var n=Ie;return function(){var r=ml(),i=Ie;try{return Si(n,!0),t.apply(this,arguments)}catch(o){e&&e(o)}finally{Si(i,!1),r&&gl()}}}Jo(ke.prototype,{then:sd,_then:function(t,e){vf(this,new vy(null,null,t,e,Ie))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):Ml(r)):this.then(null,r=>r&&r.name===e?n(r):Ml(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),Ml(e)))},stack:{get:function(){if(this._stack)return this._stack;try{nd=!0;var t=Sy(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{nd=!1}}},timeout:function(t,e){return t<1/0?new ke((n,r)=>{var i=setTimeout(()=>r(new je.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&zr(ke.prototype,Symbol.toStringTag,"Dexie.Promise"),zo.env=Cy(),Jo(ke,{all:function(){var t=Vr.apply(null,arguments).map(_l);return new ke(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((i,o)=>ke.resolve(i).then(s=>{t[o]=s,--r||e(t)},n))})},resolve:t=>{if(t instanceof ke)return t;if(t&&typeof t.then=="function")return new ke((n,r)=>{t.then(n,r)});var e=new ke(Xs,!0,t);return xy(e,id),e},reject:Ml,race:function(){var t=Vr.apply(null,arguments).map(_l);return new ke((e,n)=>{t.map(r=>ke.resolve(r).then(e,n))})},PSD:{get:()=>Ie,set:t=>Ie=t},totalEchoes:{get:()=>Ia},newPSD:ki,usePSD:is,scheduler:{get:()=>Ns,set:t=>{Ns=t}},rejectionMapper:{get:()=>od,set:t=>{od=t}},follow:(t,e)=>new ke((n,r)=>ki((i,o)=>{var s=Ie;s.unhandleds=[],s.onunhandled=o,s.finalize=ro(function(){(function(l){function a(){l(),ia.splice(ia.indexOf(a),1)}ia.push(a),++Gi,Ns(()=>{--Gi==0&&wf()},[])})(()=>{this.unhandleds.length===0?i():o(this.unhandleds[0])})},s.finalize),t()},e,n,r))}),na&&(na.allSettled&&zr(ke,"allSettled",function(){const t=Vr.apply(null,arguments).map(_l);return new ke(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((i,o)=>ke.resolve(i).then(s=>r[o]={status:"fulfilled",value:s},s=>r[o]={status:"rejected",reason:s}).then(()=>--n||e(r)))})}),na.any&&typeof AggregateError<"u"&&zr(ke,"any",function(){const t=Vr.apply(null,arguments).map(_l);return new ke((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const i=new Array(r);t.forEach((o,s)=>ke.resolve(o).then(l=>e(l),l=>{i[s]=l,--r||n(new AggregateError(i))}))})}));const ln={awaits:0,echoes:0,id:0};var JS=0,oa=[],tu=0,Ia=0,GS=0;function ki(t,e,n,r){var i=Ie,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++GS;var s=zo.env;o.env=bf?{Promise:ke,PromiseProp:{value:ke,configurable:!0,writable:!0},all:ke.all,race:ke.race,allSettled:ke.allSettled,any:ke.any,resolve:ke.resolve,reject:ke.reject,nthen:sp(s.nthen,o),gthen:sp(s.gthen,o)}:{},e&&kn(o,e),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=is(o,t,n,r);return o.ref===0&&o.finalize(),l}function rs(){return ln.id||(ln.id=++JS),++ln.awaits,ln.echoes+=yy,ln.id}function Gr(){return!!ln.awaits&&(--ln.awaits==0&&(ln.id=0),ln.echoes=ln.awaits*yy,!0)}function _l(t){return ln.echoes&&t&&t.constructor===na?(rs(),t.then(e=>(Gr(),e),e=>(Gr(),Ht(e)))):t}function YS(t){++Ia,ln.echoes&&--ln.echoes!=0||(ln.echoes=ln.id=0),oa.push(Ie),Si(t,!0)}function XS(){var t=oa[oa.length-1];oa.pop(),Si(t,!1)}function Si(t,e){var n=Ie;if((e?!ln.echoes||tu++&&t===Ie:!tu||--tu&&t===Ie)||Oy(e?YS.bind(null,t):XS),t!==Ie&&(Ie=t,n===zo&&(zo.env=Cy()),bf)){var r=zo.env.Promise,i=t.env;Na.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(xt,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Cy(){var t=xt.Promise;return bf?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(xt,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:Na.then,gthen:t.prototype.then}:{}}function is(t,e,n,r,i){var o=Ie;try{return Si(t,!0),e(n,r,i)}finally{Si(o,!1)}}function Oy(t){by.call(ed,t)}function Da(t,e,n,r){return typeof t!="function"?t:function(){var i=Ie;n&&rs(),Si(e,!0);try{return t.apply(this,arguments)}finally{Si(i,!1),r&&Oy(Gr)}}}function sp(t,e){return function(n,r){return t.call(this,Da(n,e),Da(r,e))}}(""+by).indexOf("[native code]")===-1&&(rs=Gr=bt);const lp="unhandledrejection";function ap(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(xt.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(lp,!0,!0),kn(r,i)):xt.CustomEvent&&kn(r=new CustomEvent(lp,{detail:i}),i),r&&xt.dispatchEvent&&(dispatchEvent(r),!xt.PromiseRejectionEvent&&xt.onunhandledrejection))try{xt.onunhandledrejection(r)}catch{}_r&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var Ht=ke.reject;function ad(t,e,n,r){if(t.idbdb&&(t._state.openComplete||Ie.letThrough||t._vip)){var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(o){return o.name===gf.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>ad(t,e,n,r))):Ht(o)}return i._promise(e,(o,s)=>ki(()=>(Ie.trans=i,r(o,s,i)))).then(o=>i._completion.then(()=>o))}if(t._state.openComplete)return Ht(new je.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return Ht(new je.DatabaseClosed);t.open().catch(bt)}return t._state.dbReadyPromise.then(()=>ad(t,e,n,r))}const cp="3.2.7",zi="￿",cd=-1/0,Ir="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ey="String expected.",Ps=[],kc=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),ZS=kc,QS=kc,Ty=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),Sc="__dbnames",nu="readonly",ru="readwrite";function io(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const Ay={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Nl(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=pl(e))[t],e)}let ex=class{_trans(e,n,r){const i=this._tx||Ie.trans,o=this.name;function s(a,c,u){if(!u.schema[o])throw new je.NotFound("Table "+o+" not part of transaction");return n(u.idbtrans,u)}const l=ml();try{return i&&i.db===this.db?i===Ie.trans?i._promise(e,s,r):ki(()=>i._promise(e,s,r),{trans:i,transless:Ie.transless||Ie}):ad(this.db,e,[this.name],s)}finally{l&&gl()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(i=>this.hook.reading.fire(i))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(an(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=Rt(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(c=>{if(c.compound&&n.every(u=>c.keyPath.indexOf(u)>=0)){for(let u=0;u<n.length;++u)if(n.indexOf(c.keyPath[u])===-1)return!1;return!0}return!1}).sort((c,u)=>c.keyPath.length-u.keyPath.length)[0];if(r&&this.db._maxKey!==zi){const c=r.keyPath.slice(0,n.length);return this.where(c).equals(c.map(u=>e[u]))}!r&&_r&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,o=this.db._deps.indexedDB;function s(c,u){try{return o.cmp(c,u)===0}catch{return!1}}const[l,a]=n.reduce(([c,u],d)=>{const h=i[d],m=e[d];return[c||h,c||!h?io(u,h&&h.multi?g=>{const b=Kr(g,d);return an(b)&&b.some(S=>s(m,S))}:g=>s(m,Kr(g,d))):u]},[null,null]);return l?this.where(l.name).equals(e[l.keyPath]).filter(a):r?this.filter(a):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,an(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const i=Object.create(e.prototype);for(var o in r)if(Jn(r,o))try{i[o]=r[o]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){kn(this,e)})}add(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let o=e;return i&&r&&(o=Nl(i)(e)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[o]})).then(s=>s.numFailures?ke.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{hr(e,i,s)}catch{}return s})}update(e,n){if(typeof e!="object"||an(e))return this.where(":id").equals(e).modify(n);{const r=Kr(e,this.schema.primKey.keyPath);if(r===void 0)return Ht(new je.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?Rt(n).forEach(i=>{hr(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let o=e;return i&&r&&(o=Nl(i)(e)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"put",values:[o],keys:n!=null?[n]:null})).then(s=>s.numFailures?ke.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{hr(e,i,s)}catch{}return s})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?ke.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:Ay})).then(e=>e.numFailures?ke.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(e,n,r){const i=Array.isArray(n)?n:void 0,o=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:l,keyPath:a}=this.schema.primKey;if(a&&i)throw new je.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new je.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=a&&l?e.map(Nl(a)):e;return this.core.mutate({trans:s,type:"add",keys:i,values:u,wantResults:o}).then(({numFailures:d,results:h,lastResult:m,failures:g})=>{if(d===0)return o?h:m;throw new _s(`${this.name}.bulkAdd(): ${d} of ${c} operations failed`,g)})})}bulkPut(e,n,r){const i=Array.isArray(n)?n:void 0,o=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:l,keyPath:a}=this.schema.primKey;if(a&&i)throw new je.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new je.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=a&&l?e.map(Nl(a)):e;return this.core.mutate({trans:s,type:"put",keys:i,values:u,wantResults:o}).then(({numFailures:d,results:h,lastResult:m,failures:g})=>{if(d===0)return o?h:m;throw new _s(`${this.name}.bulkPut(): ${d} of ${c} operations failed`,g)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:i,failures:o})=>{if(r===0)return i;throw new _s(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,o)})}};function Is(t){var e={},n=function(s,l){if(l){for(var a=arguments.length,c=new Array(a-1);--a;)c[a-1]=arguments[a];return e[s].subscribe.apply(null,c),t}if(typeof s=="string")return e[s]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(s,l,a){if(typeof s!="object"){var c;l||(l=US),a||(a=bt);var u={subscribers:[],fire:a,subscribe:function(d){u.subscribers.indexOf(d)===-1&&(u.subscribers.push(d),u.fire=l(u.fire,d))},unsubscribe:function(d){u.subscribers=u.subscribers.filter(function(h){return h!==d}),u.fire=u.subscribers.reduce(l,a)}};return e[s]=n[s]=u,u}Rt(c=s).forEach(function(d){var h=c[d];if(an(h))o(d,c[d][0],c[d][1]);else{if(h!=="asap")throw new je.InvalidArgument("Invalid event config");var m=o(d,Ys,function(){for(var g=arguments.length,b=new Array(g);g--;)b[g]=arguments[g];m.subscribers.forEach(function(S){ay(function(){S.apply(null,b)})})})}})}}function fs(t,e){return jo(e).from({prototype:t}),e}function bo(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function iu(t,e){t.filter=io(t.filter,e)}function ou(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>io(r(),e()):e,t.justLimit=n&&!r}function sa(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new je.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function up(t,e,n){const r=sa(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function Pl(t,e,n,r){const i=t.replayFilter?io(t.filter,t.replayFilter()):t.filter;if(t.or){const o={},s=(l,a,c)=>{if(!i||i(a,c,h=>a.stop(h),h=>a.fail(h))){var u=a.primaryKey,d=""+u;d==="[object ArrayBuffer]"&&(d=""+new Uint8Array(u)),Jn(o,d)||(o[d]=!0,e(l,a,c))}};return Promise.all([t.or._iterate(s,n),dp(up(t,r,n),t.algorithm,s,!t.keysOnly&&t.valueMapper)])}return dp(up(t,r,n),io(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function dp(t,e,n,r){var i=Ot(r?(o,s,l)=>n(r(o),s,l):n);return t.then(o=>{if(o)return o.start(()=>{var s=()=>o.continue();e&&!e(o,l=>s=l,l=>{o.stop(l),s=bt},l=>{o.fail(l),s=bt})||i(o.value,o,l=>s=l),s()})})}function wn(t,e){try{const n=fp(t),r=fp(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(i,o){const s=i.length,l=o.length,a=s<l?s:l;for(let c=0;c<a;++c)if(i[c]!==o[c])return i[c]<o[c]?-1:1;return s===l?0:s<l?-1:1}(hp(t),hp(e));case"Array":return function(i,o){const s=i.length,l=o.length,a=s<l?s:l;for(let c=0;c<a;++c){const u=wn(i[c],o[c]);if(u!==0)return u}return s===l?0:s<l?-1:1}(t,e)}}catch{}return NaN}function fp(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=Xu(t);return n==="ArrayBuffer"?"binary":n}function hp(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}let tx=class{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,Ht.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,Ht.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=io(n.algorithm,e)}_iterate(e,n){return Pl(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&kn(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>Pl(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,i=r.table.core;if(bo(r,!0))return i.count({trans:n,query:{index:sa(r,i.schema),range:r.range}}).then(s=>Math.min(s,r.limit));var o=0;return Pl(r,()=>(++o,!1),n,i).then(()=>o)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),i=r[0],o=r.length-1;function s(c,u){return u?s(c[r[u]],u-1):c[i]}var l=this._ctx.dir==="next"?1:-1;function a(c,u){var d=s(c,o),h=s(u,o);return d<h?-l:d>h?l:0}return this.toArray(function(c){return c.sort(a)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&bo(r,!0)&&r.limit>0){const{valueMapper:i}=r,o=sa(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:o,range:r.range}}).then(({result:s})=>i?s.map(i):s)}{const i=[];return Pl(r,o=>i.push(o),n,r.table.core).then(()=>i)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,bo(n)?ou(n,()=>{var r=e;return(i,o)=>r===0||(r===1?(--r,!1):(o(()=>{i.advance(r),r=0}),!1))}):ou(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),ou(this._ctx,()=>{var n=e;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this}until(e,n){return iu(this._ctx,function(r,i,o){return!e(r.value)||(i(o),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return iu(this._ctx,function(i){return e(i.value)}),n=this._ctx,r=e,n.isMatch=io(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&bo(n,!0)&&n.limit>0)return this._read(i=>{var o=sa(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(({result:i})=>i).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return iu(this._ctx,function(i){var o=i.primaryKey.toString(),s=Jn(r,o);return r[o]=!0,!s}),this}modify(e){var n=this._ctx;return this._write(r=>{var i;if(typeof e=="function")i=e;else{var o=Rt(e),s=o.length;i=function(b){for(var S=!1,O=0;O<s;++O){var A=o[O],N=e[A];Kr(b,A)!==N&&(hr(b,A,N),S=!0)}return S}}const l=n.table.core,{outbound:a,extractKey:c}=l.schema.primaryKey,u=this.db._options.modifyChunkSize||200,d=[];let h=0;const m=[],g=(b,S)=>{const{failures:O,numFailures:A}=S;h+=b-A;for(let N of Rt(O))d.push(O[N])};return this.clone().primaryKeys().then(b=>{const S=O=>{const A=Math.min(u,b.length-O);return l.getMany({trans:r,keys:b.slice(O,O+A),cache:"immutable"}).then(N=>{const R=[],D=[],F=a?[]:null,j=[];for(let E=0;E<A;++E){const k=N[E],V={value:pl(k),primKey:b[O+E]};i.call(V,V.value,V)!==!1&&(V.value==null?j.push(b[O+E]):a||wn(c(k),c(V.value))===0?(D.push(V.value),a&&F.push(b[O+E])):(j.push(b[O+E]),R.push(V.value)))}const K=bo(n)&&n.limit===1/0&&(typeof e!="function"||e===su)&&{index:n.index,range:n.range};return Promise.resolve(R.length>0&&l.mutate({trans:r,type:"add",values:R}).then(E=>{for(let k in E.failures)j.splice(parseInt(k),1);g(R.length,E)})).then(()=>(D.length>0||K&&typeof e=="object")&&l.mutate({trans:r,type:"put",keys:F,values:D,criteria:K,changeSpec:typeof e!="function"&&e}).then(E=>g(D.length,E))).then(()=>(j.length>0||K&&e===su)&&l.mutate({trans:r,type:"delete",keys:j,criteria:K}).then(E=>g(j.length,E))).then(()=>b.length>O+A&&S(O+u))})};return S(0).then(()=>{if(d.length>0)throw new _a("Error modifying one or more objects",d,h,m);return b.length})})})}delete(){var e=this._ctx,n=e.range;return bo(e)&&(e.isPrimKey&&!QS||n.type===3)?this._write(r=>{const{primaryKey:i}=e.table.core.schema,o=n;return e.table.core.count({trans:r,query:{index:i,range:o}}).then(s=>e.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(({failures:l,lastResult:a,results:c,numFailures:u})=>{if(u)throw new _a("Could not delete some values",Object.keys(l).map(d=>l[d]),s-u);return s-u}))}):this.modify(su)}};const su=(t,e)=>e.value=null;function nx(t,e){return t<e?-1:t===e?0:1}function rx(t,e){return t>e?-1:t===e?0:1}function Fn(t,e,n){var r=t instanceof _y?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function vo(t){return new t.Collection(t,()=>My("")).limit(0)}function ix(t,e,n,r,i,o){for(var s=Math.min(t.length,r.length),l=-1,a=0;a<s;++a){var c=e[a];if(c!==r[a])return i(t[a],n[a])<0?t.substr(0,a)+n[a]+n.substr(a+1):i(t[a],r[a])<0?t.substr(0,a)+r[a]+n.substr(a+1):l>=0?t.substr(0,l)+e[l]+n.substr(l+1):null;i(t[a],c)<0&&(l=a)}return s<r.length&&o==="next"?t+n.substr(t.length):s<t.length&&o==="prev"?t.substr(0,n.length):l<0?null:t.substr(0,l)+r[l]+n.substr(l+1)}function Il(t,e,n,r){var i,o,s,l,a,c,u,d=n.length;if(!n.every(b=>typeof b=="string"))return Fn(t,Ey);function h(b){i=function(O){return O==="next"?A=>A.toUpperCase():A=>A.toLowerCase()}(b),o=function(O){return O==="next"?A=>A.toLowerCase():A=>A.toUpperCase()}(b),s=b==="next"?nx:rx;var S=n.map(function(O){return{lower:o(O),upper:i(O)}}).sort(function(O,A){return s(O.lower,A.lower)});l=S.map(function(O){return O.upper}),a=S.map(function(O){return O.lower}),c=b,u=b==="next"?"":r}h("next");var m=new t.Collection(t,()=>ti(l[0],a[d-1]+r));m._ondirectionchange=function(b){h(b)};var g=0;return m._addAlgorithm(function(b,S,O){var A=b.key;if(typeof A!="string")return!1;var N=o(A);if(e(N,a,g))return!0;for(var R=null,D=g;D<d;++D){var F=ix(A,N,l[D],a[D],s,c);F===null&&R===null?g=D+1:(R===null||s(R,F)>0)&&(R=F)}return S(R!==null?function(){b.continue(R+u)}:O),!1}),m}function ti(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function My(t){return{type:1,lower:t,upper:t}}let _y=class{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&(!r||!i)?vo(this):new this.Collection(this,()=>ti(e,n,!r,!i))}catch{return Fn(this,Ir)}}equals(e){return e==null?Fn(this,Ir):new this.Collection(this,()=>My(e))}above(e){return e==null?Fn(this,Ir):new this.Collection(this,()=>ti(e,void 0,!0))}aboveOrEqual(e){return e==null?Fn(this,Ir):new this.Collection(this,()=>ti(e,void 0,!1))}below(e){return e==null?Fn(this,Ir):new this.Collection(this,()=>ti(void 0,e,!1,!0))}belowOrEqual(e){return e==null?Fn(this,Ir):new this.Collection(this,()=>ti(void 0,e))}startsWith(e){return typeof e!="string"?Fn(this,Ey):this.between(e,e+zi,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):Il(this,(n,r)=>n.indexOf(r[0])===0,[e],zi)}equalsIgnoreCase(e){return Il(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=Vr.apply(Oo,arguments);return e.length===0?vo(this):Il(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=Vr.apply(Oo,arguments);return e.length===0?vo(this):Il(this,(n,r)=>r.some(i=>n.indexOf(i)===0),e,zi)}anyOf(){const e=Vr.apply(Oo,arguments);let n=this._cmp;try{e.sort(n)}catch{return Fn(this,Ir)}if(e.length===0)return vo(this);const r=new this.Collection(this,()=>ti(e[0],e[e.length-1]));r._ondirectionchange=o=>{n=o==="next"?this._ascending:this._descending,e.sort(n)};let i=0;return r._addAlgorithm((o,s,l)=>{const a=o.key;for(;n(a,e[i])>0;)if(++i,i===e.length)return s(l),!1;return n(a,e[i])===0||(s(()=>{o.continue(e[i])}),!1)}),r}notEqual(e){return this.inAnyRange([[cd,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=Vr.apply(Oo,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Fn(this,Ir)}const n=e.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[cd,i]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,i=this._ascending,o=this._descending,s=this._min,l=this._max;if(e.length===0)return vo(this);if(!e.every(A=>A[0]!==void 0&&A[1]!==void 0&&i(A[0],A[1])<=0))return Fn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",je.InvalidArgument);const a=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let u,d=i;function h(A,N){return d(A[0],N[0])}try{u=e.reduce(function(A,N){let R=0,D=A.length;for(;R<D;++R){const F=A[R];if(r(N[0],F[1])<0&&r(N[1],F[0])>0){F[0]=s(F[0],N[0]),F[1]=l(F[1],N[1]);break}}return R===D&&A.push(N),A},[]),u.sort(h)}catch{return Fn(this,Ir)}let m=0;const g=c?A=>i(A,u[m][1])>0:A=>i(A,u[m][1])>=0,b=a?A=>o(A,u[m][0])>0:A=>o(A,u[m][0])>=0;let S=g;const O=new this.Collection(this,()=>ti(u[0][0],u[u.length-1][1],!a,!c));return O._ondirectionchange=A=>{A==="next"?(S=g,d=i):(S=b,d=o),u.sort(h)},O._addAlgorithm((A,N,R)=>{for(var D=A.key;S(D);)if(++m,m===u.length)return N(R),!1;return!!function(F){return!g(F)&&!b(F)}(D)||(this._cmp(D,u[m][1])===0||this._cmp(D,u[m][0])===0||N(()=>{d===i?A.continue(u[m][0]):A.continue(u[m][1])}),!1)}),O}startsWithAnyOf(){const e=Vr.apply(Oo,arguments);return e.every(n=>typeof n=="string")?e.length===0?vo(this):this.inAnyRange(e.map(n=>[n,n+zi])):Fn(this,"startsWithAnyOf() only works with strings")}};function wr(t){return Ot(function(e){return Zs(e),t(e.target.error),!1})}function Zs(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const Qs="storagemutated",ci="x-storagemutated-1",xi=Is(null,Qs);class ox{_lock(){return ms(!Ie.global),++this._reculock,this._reculock!==1||Ie.global||(Ie.lockOwnerFor=this),this}_unlock(){if(ms(!Ie.global),--this._reculock==0)for(Ie.global||(Ie.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{is(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&Ie.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(ms(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new je.DatabaseClosed(r);case"MissingAPIError":throw new je.MissingAPI(r.message,r);default:throw new je.OpenFailed(r)}if(!this.active)throw new je.TransactionInactive;return ms(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Ot(i=>{Zs(i),this._reject(e.error)}),e.onabort=Ot(i=>{Zs(i),this.active&&this._reject(new je.Abort(e.error)),this.active=!1,this.on("abort").fire(i)}),e.oncomplete=Ot(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&xi.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return Ht(new je.ReadOnly("Transaction is readonly"));if(!this.active)return Ht(new je.TransactionInactive);if(this._locked())return new ke((o,s)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(o,s)},Ie])});if(r)return ki(()=>{var o=new ke((s,l)=>{this._lock();const a=n(s,l,this);a&&a.then&&a.then(s,l)});return o.finally(()=>this._unlock()),o._lib=!0,o});var i=new ke((o,s)=>{var l=n(o,s,this);l&&l.then&&l.then(o,s)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=ke.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function s(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=s)})()}var o=n._waitingFor;return new ke((s,l)=>{r.then(a=>n._waitingQueue.push(Ot(s.bind(null,a))),a=>n._waitingQueue.push(Ot(l.bind(null,a)))).finally(()=>{n._waitingFor===o&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new je.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(Jn(n,e))return n[e];const r=this.schema[e];if(!r)throw new je.NotFound("Table "+e+" not part of transaction");const i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i}}function ud(t,e,n,r,i,o,s){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:o,src:(n&&!s?"&":"")+(r?"*":"")+(i?"++":"")+Ny(e)}}function Ny(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Py(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:cy(n,r=>[r.name,r])}}let el=t=>{try{return t.only([[]]),el=()=>[[]],[[]]}catch{return el=()=>zi,zi}};function dd(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>Kr(r,e)}(t):e=>Kr(e,t)}function pp(t){return[].slice.call(t)}let sx=0;function Ds(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function lx(t,e,n){function r(a){if(a.type===3)return null;if(a.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:u,lowerOpen:d,upperOpen:h}=a;return c===void 0?u===void 0?null:e.upperBound(u,!!h):u===void 0?e.lowerBound(c,!!d):e.bound(c,u,!!d,!!h)}const{schema:i,hasGetAll:o}=function(a,c){const u=pp(a.objectStoreNames);return{schema:{name:a.name,tables:u.map(d=>c.objectStore(d)).map(d=>{const{keyPath:h,autoIncrement:m}=d,g=an(h),b=h==null,S={},O={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b,compound:g,keyPath:h,autoIncrement:m,unique:!0,extractKey:dd(h)},indexes:pp(d.indexNames).map(A=>d.index(A)).map(A=>{const{name:N,unique:R,multiEntry:D,keyPath:F}=A,j={name:N,compound:an(F),keyPath:F,unique:R,multiEntry:D,extractKey:dd(F)};return S[Ds(F)]=j,j}),getIndexByKeyPath:A=>S[Ds(A)]};return S[":id"]=O.primaryKey,h!=null&&(S[Ds(h)]=O.primaryKey),O})},hasGetAll:u.length>0&&"getAll"in c.objectStore(u[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),s=i.tables.map(a=>function(c){const u=c.name;return{name:u,schema:c,mutate:function({trans:d,type:h,keys:m,values:g,range:b}){return new Promise((S,O)=>{S=Ot(S);const A=d.objectStore(u),N=A.keyPath==null,R=h==="put"||h==="add";if(!R&&h!=="delete"&&h!=="deleteRange")throw new Error("Invalid operation type: "+h);const{length:D}=m||g||{length:1};if(m&&g&&m.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(D===0)return S({numFailures:0,failures:{},results:[],lastResult:void 0});let F;const j=[],K=[];let E=0;const k=C=>{++E,Zs(C)};if(h==="deleteRange"){if(b.type===4)return S({numFailures:E,failures:K,results:[],lastResult:void 0});b.type===3?j.push(F=A.clear()):j.push(F=A.delete(r(b)))}else{const[C,ue]=R?N?[g,m]:[g,null]:[m,null];if(R)for(let Z=0;Z<D;++Z)j.push(F=ue&&ue[Z]!==void 0?A[h](C[Z],ue[Z]):A[h](C[Z])),F.onerror=k;else for(let Z=0;Z<D;++Z)j.push(F=A[h](C[Z])),F.onerror=k}const V=C=>{const ue=C.target.result;j.forEach((Z,xe)=>Z.error!=null&&(K[xe]=Z.error)),S({numFailures:E,failures:K,results:h==="delete"?m:j.map(Z=>Z.result),lastResult:ue})};F.onerror=C=>{k(C),V(C)},F.onsuccess=V})},getMany:({trans:d,keys:h})=>new Promise((m,g)=>{m=Ot(m);const b=d.objectStore(u),S=h.length,O=new Array(S);let A,N=0,R=0;const D=j=>{const K=j.target;O[K._pos]=K.result,++R===N&&m(O)},F=wr(g);for(let j=0;j<S;++j)h[j]!=null&&(A=b.get(h[j]),A._pos=j,A.onsuccess=D,A.onerror=F,++N);N===0&&m(O)}),get:({trans:d,key:h})=>new Promise((m,g)=>{m=Ot(m);const b=d.objectStore(u).get(h);b.onsuccess=S=>m(S.target.result),b.onerror=wr(g)}),query:function(d){return h=>new Promise((m,g)=>{m=Ot(m);const{trans:b,values:S,limit:O,query:A}=h,N=O===1/0?void 0:O,{index:R,range:D}=A,F=b.objectStore(u),j=R.isPrimaryKey?F:F.index(R.name),K=r(D);if(O===0)return m({result:[]});if(d){const E=S?j.getAll(K,N):j.getAllKeys(K,N);E.onsuccess=k=>m({result:k.target.result}),E.onerror=wr(g)}else{let E=0;const k=S||!("openKeyCursor"in j)?j.openCursor(K):j.openKeyCursor(K),V=[];k.onsuccess=C=>{const ue=k.result;return ue?(V.push(S?ue.value:ue.primaryKey),++E===O?m({result:V}):void ue.continue()):m({result:V})},k.onerror=wr(g)}})}(o),openCursor:function({trans:d,values:h,query:m,reverse:g,unique:b}){return new Promise((S,O)=>{S=Ot(S);const{index:A,range:N}=m,R=d.objectStore(u),D=A.isPrimaryKey?R:R.index(A.name),F=g?b?"prevunique":"prev":b?"nextunique":"next",j=h||!("openKeyCursor"in D)?D.openCursor(r(N),F):D.openKeyCursor(r(N),F);j.onerror=wr(O),j.onsuccess=Ot(K=>{const E=j.result;if(!E)return void S(null);E.___id=++sx,E.done=!1;const k=E.continue.bind(E);let V=E.continuePrimaryKey;V&&(V=V.bind(E));const C=E.advance.bind(E),ue=()=>{throw new Error("Cursor not stopped")};E.trans=d,E.stop=E.continue=E.continuePrimaryKey=E.advance=()=>{throw new Error("Cursor not started")},E.fail=Ot(O),E.next=function(){let Z=1;return this.start(()=>Z--?this.continue():this.stop()).then(()=>this)},E.start=Z=>{const xe=new Promise((Q,Ae)=>{Q=Ot(Q),j.onerror=wr(Ae),E.fail=Ae,E.stop=Qe=>{E.stop=E.continue=E.continuePrimaryKey=E.advance=ue,Q(Qe)}}),ye=()=>{if(j.result)try{Z()}catch(Q){E.fail(Q)}else E.done=!0,E.start=()=>{throw new Error("Cursor behind last entry")},E.stop()};return j.onsuccess=Ot(Q=>{j.onsuccess=ye,ye()}),E.continue=k,E.continuePrimaryKey=V,E.advance=C,ye(),xe},S(E)},O)})},count({query:d,trans:h}){const{index:m,range:g}=d;return new Promise((b,S)=>{const O=h.objectStore(u),A=m.isPrimaryKey?O:O.index(m.name),N=r(g),R=N?A.count(N):A.count();R.onsuccess=Ot(D=>b(D.target.result)),R.onerror=wr(S)})}}}(a)),l={};return s.forEach(a=>l[a.name]=a),{stack:"dbcore",transaction:t.transaction.bind(t),table(a){if(!l[a])throw new Error(`Table '${a}' not found`);return l[a]},MIN_KEY:-1/0,MAX_KEY:el(e),schema:i}}function fd({_novip:t},e){const n=e.db,r=function(i,o,{IDBKeyRange:s,indexedDB:l},a){return{dbcore:function(u,d){return d.reduce((h,{create:m})=>({...h,...m(h)}),u)}(lx(o,s,a),i.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(i=>{const o=i.name;t.core.schema.tables.some(s=>s.name===o)&&(i.core=t.core.table(o),t[o]instanceof t.Table&&(t[o].core=i.core))})}function $a({_novip:t},e,n,r){n.forEach(i=>{const o=r[i];e.forEach(s=>{const l=hf(s,i);(!l||"value"in l&&l.value===void 0)&&(s===t.Transaction.prototype||s instanceof t.Transaction?zr(s,i,{get(){return this.table(i)},set(a){sy(this,i,{value:a,writable:!0,configurable:!0,enumerable:!0})}}):s[i]=new t.Table(i,o))})})}function hd({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function ax(t,e){return t._cfg.version-e._cfg.version}function cx(t,e,n,r){const i=t._dbSchema,o=t._createTransaction("readwrite",t._storeNames,i);o.create(n),o._completion.catch(r);const s=o._reject.bind(o),l=Ie.transless||Ie;ki(()=>{Ie.trans=o,Ie.transless=l,e===0?(Rt(i).forEach(a=>{lu(n,a,i[a].primKey,i[a].indexes)}),fd(t,n),ke.follow(()=>t.on.populate.fire(o)).catch(s)):function({_novip:a},c,u,d){const h=[],m=a._versions;let g=a._dbSchema=md(a,a.idbdb,d),b=!1;const S=m.filter(A=>A._cfg.version>=c);function O(){return h.length?ke.resolve(h.shift()(u.idbtrans)).then(O):ke.resolve()}return S.forEach(A=>{h.push(()=>{const N=g,R=A._cfg.dbschema;gd(a,N,d),gd(a,R,d),g=a._dbSchema=R;const D=Iy(N,R);D.add.forEach(j=>{lu(d,j[0],j[1].primKey,j[1].indexes)}),D.change.forEach(j=>{if(j.recreate)throw new je.Upgrade("Not yet support for changing primary key");{const K=d.objectStore(j.name);j.add.forEach(E=>pd(K,E)),j.change.forEach(E=>{K.deleteIndex(E.name),pd(K,E)}),j.del.forEach(E=>K.deleteIndex(E))}});const F=A._cfg.contentUpgrade;if(F&&A._cfg.version>c){fd(a,d),u._memoizedTables={},b=!0;let j=uy(R);D.del.forEach(V=>{j[V]=N[V]}),hd(a,[a.Transaction.prototype]),$a(a,[a.Transaction.prototype],Rt(j),j),u.schema=j;const K=pf(F);let E;K&&rs();const k=ke.follow(()=>{if(E=F(u),E&&K){var V=Gr.bind(null,null);E.then(V,V)}});return E&&typeof E.then=="function"?ke.resolve(E):k.then(()=>E)}}),h.push(N=>{(!b||!ZS)&&function(R,D){[].slice.call(D.db.objectStoreNames).forEach(F=>R[F]==null&&D.db.deleteObjectStore(F))}(A._cfg.dbschema,N),hd(a,[a.Transaction.prototype]),$a(a,[a.Transaction.prototype],a._storeNames,a._dbSchema),u.schema=a._dbSchema})}),O().then(()=>{var A,N;N=d,Rt(A=g).forEach(R=>{N.db.objectStoreNames.contains(R)||lu(N,R,A[R].primKey,A[R].indexes)})})}(t,e,o,n).catch(s)})}function Iy(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const i=t[r],o=e[r];if(i){const s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!kc)s.recreate=!0,n.change.push(s);else{const l=i.idxByName,a=o.idxByName;let c;for(c in l)a[c]||s.del.push(c);for(c in a){const u=l[c],d=a[c];u?u.src!==d.src&&s.change.push(d):s.add.push(d)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}else n.add.push([r,o])}return n}function lu(t,e,n,r){const i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(o=>pd(i,o)),i}function pd(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function md(t,e,n){const r={};return Ma(e.objectStoreNames,0).forEach(i=>{const o=n.objectStore(i);let s=o.keyPath;const l=ud(Ny(s),s||"",!1,!1,!!o.autoIncrement,s&&typeof s!="string",!0),a=[];for(let u=0;u<o.indexNames.length;++u){const d=o.index(o.indexNames[u]);s=d.keyPath;var c=ud(d.name,s,!!d.unique,!!d.multiEntry,!1,s&&typeof s!="string",!1);a.push(c)}r[i]=Py(i,l,a)}),r}function gd({_novip:t},e,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const o=r[i],s=n.objectStore(o);t._hasGetAll="getAll"in s;for(let l=0;l<s.indexNames.length;++l){const a=s.indexNames[l],c=s.index(a).keyPath,u=typeof c=="string"?c:"["+Ma(c).join("+")+"]";if(e[o]){const d=e[o].idxByName[u];d&&(d.name=a,delete e[o].idxByName[u],e[o].idxByName[a]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&xt.WorkerGlobalScope&&xt instanceof xt.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}let ux=class{_parseStoresSpec(e,n){Rt(e).forEach(r=>{if(e[r]!==null){var i=e[r].split(",").map((s,l)=>{const a=(s=s.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return ud(a,c||null,/\&/.test(s),/\*/.test(s),/\+\+/.test(s),an(c),l===0)}),o=i.shift();if(o.multi)throw new je.Schema("Primary key cannot be multi-valued");i.forEach(s=>{if(s.auto)throw new je.Schema("Only primary key can be marked as autoIncrement (++)");if(!s.keyPath)throw new je.Schema("Index must have a name and cannot be an empty string")}),n[r]=Py(r,o,i)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?kn(this._cfg.storesSource,e):e;const r=n._versions,i={};let o={};return r.forEach(s=>{kn(i,s._cfg.storesSource),o=s._cfg.dbschema={},s._parseStoresSpec(i,o)}),n._dbSchema=o,hd(n,[n._allTables,n,n.Transaction.prototype]),$a(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],Rt(o),o),n._storeNames=Rt(o),this}upgrade(e){return this._cfg.contentUpgrade=yf(this._cfg.contentUpgrade||bt,e),this}};function kf(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new jt(Sc,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Sf(t){return t&&typeof t.databases=="function"}function yd(t){return ki(function(){return Ie.letThrough=!0,t()})}function dx(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function fx(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?Ht(e.dbOpenError):t);_r&&(e.openCanceller._stackHolder=co()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new je.DatabaseClosed("db.open() was cancelled")}let o=e.dbReadyResolve,s=null,l=!1;const a=()=>new ke((c,u)=>{if(i(),!n)throw new je.MissingAPI;const d=t.name,h=e.autoSchema?n.open(d):n.open(d,Math.round(10*t.verno));if(!h)throw new je.MissingAPI;h.onerror=wr(u),h.onblocked=Ot(t._fireOnBlocked),h.onupgradeneeded=Ot(m=>{if(s=h.transaction,e.autoSchema&&!t._options.allowEmptyDB){h.onerror=Zs,s.abort(),h.result.close();const b=n.deleteDatabase(d);b.onsuccess=b.onerror=Ot(()=>{u(new je.NoSuchDatabase(`Database ${d} doesnt exist`))})}else{s.onerror=wr(u);var g=m.oldVersion>Math.pow(2,62)?0:m.oldVersion;l=g<1,t._novip.idbdb=h.result,cx(t,g/10,s,u)}},u),h.onsuccess=Ot(()=>{s=null;const m=t._novip.idbdb=h.result,g=Ma(m.objectStoreNames);if(g.length>0)try{const S=m.transaction((b=g).length===1?b[0]:b,"readonly");e.autoSchema?function({_novip:O},A,N){O.verno=A.version/10;const R=O._dbSchema=md(0,A,N);O._storeNames=Ma(A.objectStoreNames,0),$a(O,[O._allTables],Rt(R),R)}(t,m,S):(gd(t,t._dbSchema,S),function(O,A){const N=Iy(md(0,O.idbdb,A),O._dbSchema);return!(N.add.length||N.change.some(R=>R.add.length||R.change.length))}(t,S)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),fd(t,S)}catch{}var b;Ps.push(t),m.onversionchange=Ot(S=>{e.vcFired=!0,t.on("versionchange").fire(S)}),m.onclose=Ot(S=>{t.on("close").fire(S)}),l&&function({indexedDB:S,IDBKeyRange:O},A){!Sf(S)&&A!==Sc&&kf(S,O).put({name:A}).catch(bt)}(t._deps,d),c()},u)}).catch(c=>c&&c.name==="UnknownError"&&e.PR1398_maxLoop>0?(e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),a()):ke.reject(c));return ke.race([r,(typeof navigator>"u"?ke.resolve():dx()).then(a)]).then(()=>(i(),e.onReadyBeingFired=[],ke.resolve(yd(()=>t.on.ready.fire(t.vip))).then(function c(){if(e.onReadyBeingFired.length>0){let u=e.onReadyBeingFired.reduce(yf,bt);return e.onReadyBeingFired=[],ke.resolve(yd(()=>u(t.vip))).then(c)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(c=>{e.dbOpenError=c;try{s&&s.abort()}catch{}return r===e.openCanceller&&t._close(),Ht(c)}).finally(()=>{e.openComplete=!0,o()})}function bd(t){var e=o=>t.next(o),n=i(e),r=i(o=>t.throw(o));function i(o){return s=>{var l=o(s),a=l.value;return l.done?a:a&&typeof a.then=="function"?a.then(n,r):an(a)?Promise.all(a).then(n,r):n(a)}}return i(e)()}function hx(t,e,n){var r=arguments.length;if(r<2)throw new je.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[t,dy(i),n]}function Dy(t,e,n,r,i){return ke.resolve().then(()=>{const o=Ie.transless||Ie,s=t._createTransaction(e,n,t._dbSchema,r),l={trans:s,transless:o};if(r)s.idbtrans=r.idbtrans;else try{s.create(),t._state.PR1398_maxLoop=3}catch(d){return d.name===gf.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Dy(t,e,n,null,i))):Ht(d)}const a=pf(i);let c;a&&rs();const u=ke.follow(()=>{if(c=i.call(s,s),c)if(a){var d=Gr.bind(null,null);c.then(d,d)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=bd(c))},l);return(c&&typeof c.then=="function"?ke.resolve(c).then(d=>s.active?d:Ht(new je.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>c)).then(d=>(r&&s._resolve(),s._completion.then(()=>d))).catch(d=>(s._reject(d),Ht(d)))})}function Dl(t,e,n){const r=an(t)?t.slice():[t];for(let i=0;i<n;++i)r.push(e);return r}const px={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,i={},o=[];function s(u,d,h){const m=Ds(u),g=i[m]=i[m]||[],b=u==null?0:typeof u=="string"?1:u.length,S=d>0,O={...h,isVirtual:S,keyTail:d,keyLength:b,extractKey:dd(u),unique:!S&&h.unique};return g.push(O),O.isPrimaryKey||o.push(O),b>1&&s(b===2?u[0]:u.slice(0,b-1),d+1,h),g.sort((A,N)=>A.keyTail-N.keyTail),O}const l=s(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[l];for(const u of r.indexes)s(u.keyPath,0,u);function a(u){const d=u.query.index;return d.isVirtual?{...u,query:{index:d,range:(h=u.query.range,m=d.keyTail,{type:h.type===1?2:h.type,lower:Dl(h.lower,h.lowerOpen?t.MAX_KEY:t.MIN_KEY,m),lowerOpen:!0,upper:Dl(h.upper,h.upperOpen?t.MIN_KEY:t.MAX_KEY,m),upperOpen:!0})}}:u;var h,m}return{...n,schema:{...r,primaryKey:l,indexes:o,getIndexByKeyPath:function(u){const d=i[Ds(u)];return d&&d[0]}},count:u=>n.count(a(u)),query:u=>n.query(a(u)),openCursor(u){const{keyTail:d,isVirtual:h,keyLength:m}=u.query.index;return h?n.openCursor(a(u)).then(g=>g&&function(b){return Object.create(b,{continue:{value:function(O){O!=null?b.continue(Dl(O,u.reverse?t.MAX_KEY:t.MIN_KEY,d)):u.unique?b.continue(b.key.slice(0,m).concat(u.reverse?t.MIN_KEY:t.MAX_KEY,d)):b.continue()}},continuePrimaryKey:{value(O,A){b.continuePrimaryKey(Dl(O,t.MAX_KEY,d),A)}},primaryKey:{get:()=>b.primaryKey},key:{get(){const O=b.key;return m===1?O[0]:O.slice(0,m)}},value:{get:()=>b.value}})}(g)):n.openCursor(u)}}}}}};function xf(t,e,n,r){return n=n||{},r=r||"",Rt(t).forEach(i=>{if(Jn(e,i)){var o=t[i],s=e[i];if(typeof o=="object"&&typeof s=="object"&&o&&s){const l=Xu(o);l!==Xu(s)?n[r+i]=e[i]:l==="Object"?xf(o,s,n,r+i+"."):o!==s&&(n[r+i]=e[i])}else o!==s&&(n[r+i]=e[i])}else n[r+i]=void 0}),Rt(e).forEach(i=>{Jn(t,i)||(n[r+i]=e[i])}),n}const mx={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(o){const s=Ie.trans,{deleting:l,creating:a,updating:c}=s.table(e).hook;switch(o.type){case"add":if(a.fire===bt)break;return s._promise("readwrite",()=>u(o),!0);case"put":if(a.fire===bt&&c.fire===bt)break;return s._promise("readwrite",()=>u(o),!0);case"delete":if(l.fire===bt)break;return s._promise("readwrite",()=>u(o),!0);case"deleteRange":if(l.fire===bt)break;return s._promise("readwrite",()=>function(h){return d(h.trans,h.range,1e4)}(o),!0)}return n.mutate(o);function u(h){const m=Ie.trans,g=h.keys||function(b,S){return S.type==="delete"?S.keys:S.keys||S.values.map(b.extractKey)}(r,h);if(!g)throw new Error("Keys missing");return(h=h.type==="add"||h.type==="put"?{...h,keys:g}:{...h}).type!=="delete"&&(h.values=[...h.values]),h.keys&&(h.keys=[...h.keys]),function(b,S,O){return S.type==="add"?Promise.resolve([]):b.getMany({trans:S.trans,keys:O,cache:"immutable"})}(n,h,g).then(b=>{const S=g.map((O,A)=>{const N=b[A],R={onerror:null,onsuccess:null};if(h.type==="delete")l.fire.call(R,O,N,m);else if(h.type==="add"||N===void 0){const D=a.fire.call(R,O,h.values[A],m);O==null&&D!=null&&(O=D,h.keys[A]=O,r.outbound||hr(h.values[A],r.keyPath,O))}else{const D=xf(N,h.values[A]),F=c.fire.call(R,D,O,N,m);if(F){const j=h.values[A];Object.keys(F).forEach(K=>{Jn(j,K)?j[K]=F[K]:hr(j,K,F[K])})}}return R});return n.mutate(h).then(({failures:O,results:A,numFailures:N,lastResult:R})=>{for(let D=0;D<g.length;++D){const F=A?A[D]:g[D],j=S[D];F==null?j.onerror&&j.onerror(O[D]):j.onsuccess&&j.onsuccess(h.type==="put"&&b[D]?h.values[D]:F)}return{failures:O,results:A,numFailures:N,lastResult:R}}).catch(O=>(S.forEach(A=>A.onerror&&A.onerror(O)),Promise.reject(O)))})}function d(h,m,g){return n.query({trans:h,values:!1,query:{index:r,range:m},limit:g}).then(({result:b})=>u({type:"delete",keys:b,trans:h}).then(S=>S.numFailures>0?Promise.reject(S.failures[0]):b.length<g?{failures:[],numFailures:0,lastResult:void 0}:d(h,{...m,lower:b[b.length-1],lowerOpen:!0},g)))}}}}})};function $y(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let i=0,o=0;i<e.keys.length&&o<t.length;++i)wn(e.keys[i],t[o])===0&&(r.push(n?pl(e.values[i]):e.values[i]),++o);return r.length===t.length?r:null}catch{return null}}const gx={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=$y(r.keys,r.trans._cache,r.cache==="clone");return i?ke.resolve(i):n.getMany(r).then(o=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?pl(o):o},o))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Cf(t){return!("from"in t)}const Br=function(t,e){if(!this){const n=new Br;return t&&"d"in t&&kn(n,t),n}kn(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function tl(t,e,n){const r=wn(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Cf(t))return kn(t,{from:e,to:n,d:1});const i=t.l,o=t.r;if(wn(n,t.from)<0)return i?tl(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},mp(t);if(wn(e,t.to)>0)return o?tl(o,e,n):t.r={from:e,to:n,d:1,l:null,r:null},mp(t);wn(e,t.from)<0&&(t.from=e,t.l=null,t.d=o?o.d+1:1),wn(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const s=!t.r;i&&!t.l&&Ra(t,i),o&&s&&Ra(t,o)}function Ra(t,e){Cf(e)||function n(r,{from:i,to:o,l:s,r:l}){tl(r,i,o),s&&n(r,s),l&&n(r,l)}(t,e)}function yx(t,e){const n=vd(e);let r=n.next();if(r.done)return!1;let i=r.value;const o=vd(t);let s=o.next(i.from),l=s.value;for(;!r.done&&!s.done;){if(wn(l.from,i.to)<=0&&wn(l.to,i.from)>=0)return!0;wn(i.from,l.from)<0?i=(r=n.next(l.from)).value:l=(s=o.next(i.from)).value}return!1}function vd(t){let e=Cf(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&wn(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||wn(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function mp(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const o=i==="r"?"l":"r",s={...t},l=t[i];t.from=l.from,t.to=l.to,t[i]=l[i],s[i]=l[o],t[o]=s,s.d=gp(s)}t.d=gp(t)}function gp({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}Jo(Br.prototype,{add(t){return Ra(this,t),this},addKey(t){return tl(this,t,t),this},addKeys(t){return t.forEach(e=>tl(this,e,e)),this},[Zu](){return vd(this)}});const bx={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new Br(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const i=t.table(r),{schema:o}=i,{primaryKey:s}=o,{extractKey:l,outbound:a}=s,c={...i,mutate:h=>{const m=h.trans,g=m.mutatedParts||(m.mutatedParts={}),b=F=>{const j=`idb://${e}/${r}/${F}`;return g[j]||(g[j]=new Br)},S=b(""),O=b(":dels"),{type:A}=h;let[N,R]=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[];const D=h.trans._cache;return i.mutate(h).then(F=>{if(an(N)){A!=="delete"&&(N=F.results),S.addKeys(N);const j=$y(N,D);j||A==="add"||O.addKeys(N),(j||R)&&function(K,E,k,V){function C(ue){const Z=K(ue.name||"");function xe(Q){return Q!=null?ue.extractKey(Q):null}const ye=Q=>ue.multiEntry&&an(Q)?Q.forEach(Ae=>Z.addKey(Ae)):Z.addKey(Q);(k||V).forEach((Q,Ae)=>{const Qe=k&&xe(k[Ae]),Ue=V&&xe(V[Ae]);wn(Qe,Ue)!==0&&(Qe!=null&&ye(Qe),Ue!=null&&ye(Ue))})}E.indexes.forEach(C)}(b,o,j,R)}else if(N){const j={from:N.lower,to:N.upper};O.add(j),S.add(j)}else S.add(n),O.add(n),o.indexes.forEach(j=>b(j.name).add(n));return F})}},u=({query:{index:h,range:m}})=>{var g,b;return[h,new Br((g=m.lower)!==null&&g!==void 0?g:t.MIN_KEY,(b=m.upper)!==null&&b!==void 0?b:t.MAX_KEY)]},d={get:h=>[s,new Br(h.key)],getMany:h=>[s,new Br().addKeys(h.keys)],count:u,query:u,openCursor:u};return Rt(d).forEach(h=>{c[h]=function(m){const{subscr:g}=Ie;if(g){const b=R=>{const D=`idb://${e}/${r}/${R}`;return g[D]||(g[D]=new Br)},S=b(""),O=b(":dels"),[A,N]=d[h](m);if(b(A.name||"").add(N),!A.isPrimaryKey){if(h!=="count"){const R=h==="query"&&a&&m.values&&i.query({...m,values:!1});return i[h].apply(this,arguments).then(D=>{if(h==="query"){if(a&&m.values)return R.then(({result:j})=>(S.addKeys(j),D));const F=m.values?D.result.map(l):D.result;m.values?S.addKeys(F):O.addKeys(F)}else if(h==="openCursor"){const F=D,j=m.values;return F&&Object.create(F,{key:{get:()=>(O.addKey(F.primaryKey),F.key)},primaryKey:{get(){const K=F.primaryKey;return O.addKey(K),K}},value:{get:()=>(j&&S.addKey(F.primaryKey),F.value)}})}return D})}O.add(n)}}return i[h].apply(this,arguments)}}),c}}}};let jt=class la{constructor(e,n){this._middlewares={},this.verno=0;const r=la.dependencies;this._options=n={addons:la.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:bt,dbReadyPromise:null,cancelOpen:bt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var s;o.dbReadyPromise=new ke(l=>{o.dbReadyResolve=l}),o.openCanceller=new ke((l,a)=>{o.cancelOpen=a}),this._state=o,this.name=e,this.on=Is(this,"populate","blocked","versionchange","close",{ready:[yf,bt]}),this.on.ready.subscribe=ly(this.on.ready.subscribe,l=>(a,c)=>{la.vip(()=>{const u=this._state;if(u.openComplete)u.dbOpenError||ke.resolve().then(a),c&&l(a);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(a),c&&l(a);else{l(a);const d=this;c||l(function h(){d.on.ready.unsubscribe(a),d.on.ready.unsubscribe(h)})}})}),this.Collection=(s=this,fs(tx.prototype,function(l,a){this.db=s;let c=Ay,u=null;if(a)try{c=a()}catch(g){u=g}const d=l._ctx,h=d.table,m=h.hook.reading.fire;this._ctx={table:h,index:d.index,isPrimKey:!d.index||h.schema.primKey.keyPath&&d.index===h.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:u,or:d.or,valueMapper:m!==Ys?m:null}})),this.Table=function(l){return fs(ex.prototype,function(a,c,u){this.db=l,this._tx=u,this.name=a,this.schema=c,this.hook=l._allTables[a]?l._allTables[a].hook:Is(null,{creating:[HS,bt],reading:[jS,Ys],updating:[KS,bt],deleting:[zS,bt]})})}(this),this.Transaction=function(l){return fs(ox.prototype,function(a,c,u,d,h){this.db=l,this.mode=a,this.storeNames=c,this.schema=u,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=Is(this,"complete","error","abort"),this.parent=h||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ke((m,g)=>{this._resolve=m,this._reject=g}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},m=>{var g=this.active;return this.active=!1,this.on.error.fire(m),this.parent?this.parent._reject(m):g&&this.idbtrans&&this.idbtrans.abort(),Ht(m)})})}(this),this.Version=function(l){return fs(ux.prototype,function(a){this.db=l,this._cfg={version:a,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(l){return fs(_y.prototype,function(a,c,u){this.db=l,this._ctx={table:a,index:c===":id"?null:c,or:u};const d=l._deps.indexedDB;if(!d)throw new je.MissingAPI;this._cmp=this._ascending=d.cmp.bind(d),this._descending=(h,m)=>d.cmp(m,h),this._max=(h,m)=>d.cmp(h,m)>0?h:m,this._min=(h,m)=>d.cmp(h,m)<0?h:m,this._IDBKeyRange=l._deps.IDBKeyRange})}(this),this.on("versionchange",l=>{l.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",l=>{!l.newVersion||l.newVersion<l.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${l.oldVersion/10}`)}),this._maxKey=el(n.IDBKeyRange),this._createTransaction=(l,a,c,u)=>new this.Transaction(l,a,c,this._options.chromeTransactionDurability,u),this._fireOnBlocked=l=>{this.on("blocked").fire(l),Ps.filter(a=>a.name===this.name&&a!==this&&!a._state.vcFired).map(a=>a.on("versionchange").fire(l))},this.use(px),this.use(mx),this.use(bx),this.use(gx),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(l=>l(this))}version(e){if(isNaN(e)||e<.1)throw new je.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new je.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(i=>i._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(ax),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||Ie.letThrough||this._vip)?e():new ke((n,r)=>{if(this._state.openComplete)return r(new je.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new je.DatabaseClosed);this.open().catch(bt)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:i}){i&&this.unuse({stack:e,name:i});const o=this._middlewares[e]||(this._middlewares[e]=[]);return o.push({stack:e,create:n,level:r??10,name:i}),o.sort((s,l)=>s.level-l.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return fx(this)}_close(){const e=this._state,n=Ps.indexOf(this);if(n>=0&&Ps.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new ke(r=>{e.dbReadyResolve=r}),e.openCanceller=new ke((r,i)=>{e.cancelOpen=i})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new je.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new ke((r,i)=>{const o=()=>{this.close();var s=this._deps.indexedDB.deleteDatabase(this.name);s.onsuccess=Ot(()=>{(function({indexedDB:l,IDBKeyRange:a},c){!Sf(l)&&c!==Sc&&kf(l,a).delete(c).catch(bt)})(this._deps,this.name),r()}),s.onerror=wr(i),s.onblocked=this._fireOnBlocked};if(e)throw new je.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Rt(this._allTables).map(e=>this._allTables[e])}transaction(){const e=hx.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let i=Ie.trans;i&&i.db===this&&e.indexOf("!")===-1||(i=null);const o=e.indexOf("?")!==-1;let s,l;e=e.replace("!","").replace("?","");try{if(l=n.map(c=>{var u=c instanceof this.Table?c.name:c;if(typeof u!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),e=="r"||e===nu)s=nu;else{if(e!="rw"&&e!=ru)throw new je.InvalidArgument("Invalid transaction mode: "+e);s=ru}if(i){if(i.mode===nu&&s===ru){if(!o)throw new je.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&l.forEach(c=>{if(i&&i.storeNames.indexOf(c)===-1){if(!o)throw new je.SubTransaction("Table "+c+" not included in parent transaction.");i=null}}),o&&i&&!i.active&&(i=null)}}catch(c){return i?i._promise(null,(u,d)=>{d(c)}):Ht(c)}const a=Dy.bind(null,this,s,l,i,r);return i?i._promise(s,a,"lock"):Ie.trans?is(Ie.transless,()=>this._whenReady(a)):this._whenReady(a)}table(e){if(!Jn(this._allTables,e))throw new je.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}};const vx=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";let wx=class{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[vx](){return this}};function Ry(t,e){return Rt(e).forEach(n=>{Ra(t[n]||(t[n]=new Br),e[n])}),t}function By(t){let e,n=!1;const r=new wx(i=>{const o=pf(t);let s=!1,l={},a={};const c={get closed(){return s},unsubscribe:()=>{s=!0,xi.storagemutated.unsubscribe(m)}};i.start&&i.start(c);let u=!1,d=!1;function h(){return Rt(a).some(b=>l[b]&&yx(l[b],a[b]))}const m=b=>{Ry(l,b),h()&&g()},g=()=>{if(u||s)return;l={};const b={},S=function(O){o&&rs();const A=()=>ki(t,{subscr:O,trans:null}),N=Ie.trans?is(Ie.transless,A):A();return o&&N.then(Gr,Gr),N}(b);d||(xi(Qs,m),d=!0),u=!0,Promise.resolve(S).then(O=>{n=!0,e=O,u=!1,s||(h()?g():(l={},a=b,i.next&&i.next(O)))},O=>{u=!1,n=!1,i.error&&i.error(O),c.unsubscribe()})};return g(),c});return r.hasValue=()=>n,r.getValue=()=>e,r}let wd;try{wd={indexedDB:xt.indexedDB||xt.mozIndexedDB||xt.webkitIndexedDB||xt.msIndexedDB,IDBKeyRange:xt.IDBKeyRange||xt.webkitIDBKeyRange}}catch{wd={indexedDB:null,IDBKeyRange:null}}const $i=jt;function aa(t){let e=jr;try{jr=!0,xi.storagemutated.fire(t)}finally{jr=e}}Jo($i,{...ta,delete:t=>new $i(t,{addons:[]}).delete(),exists:t=>new $i(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return Sf(e)?Promise.resolve(e.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==Sc)):kf(e,n).toCollection().primaryKeys()}($i.dependencies).then(t)}catch{return Ht(new je.MissingAPI)}},defineClass:()=>function(t){kn(this,t)},ignoreTransaction:t=>Ie.trans?is(Ie.transless,t):t(),vip:yd,async:function(t){return function(){try{var e=bd(t.apply(this,arguments));return e&&typeof e.then=="function"?e:ke.resolve(e)}catch(n){return Ht(n)}}},spawn:function(t,e,n){try{var r=bd(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:ke.resolve(r)}catch(i){return Ht(i)}},currentTransaction:{get:()=>Ie.trans||null},waitFor:function(t,e){const n=ke.resolve(typeof t=="function"?$i.ignoreTransaction(t):t).timeout(e||6e4);return Ie.trans?Ie.trans.waitFor(n):n},Promise:ke,debug:{get:()=>_r,set:t=>{hy(t,t==="dexie"?()=>!0:Ty)}},derive:jo,extend:kn,props:Jo,override:ly,Events:Is,on:xi,liveQuery:By,extendObservabilitySet:Ry,getByKeyPath:Kr,setByKeyPath:hr,delByKeyPath:function(t,e){typeof e=="string"?hr(t,e,void 0):"length"in e&&[].map.call(e,function(n){hr(t,n,void 0)})},shallowClone:uy,deepClone:pl,getObjectDiff:xf,cmp:wn,asap:ay,minKey:cd,addons:[],connections:Ps,errnames:gf,dependencies:wd,semVer:cp,version:cp.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),$i.maxKey=el($i.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(xi(Qs,t=>{if(!jr){let e;kc?(e=document.createEvent("CustomEvent"),e.initCustomEvent(ci,!0,!0,t)):e=new CustomEvent(ci,{detail:t}),jr=!0,dispatchEvent(e),jr=!1}}),addEventListener(ci,({detail:t})=>{jr||aa(t)}));let jr=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(ci);typeof t.unref=="function"&&t.unref(),xi(Qs,e=>{jr||t.postMessage(e)}),t.onmessage=e=>{e.data&&aa(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){xi(Qs,e=>{try{jr||(typeof localStorage<"u"&&localStorage.setItem(ci,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:ci,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===ci){const n=JSON.parse(e.newValue);n&&aa(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===ci&&aa(e.changedParts)})}ke.rejectionMapper=function(t,e){if(!t||t instanceof Ho||t instanceof TypeError||t instanceof SyntaxError||!t.name||!op[t.name])return t;var n=new op[t.name](e||t.message,t);return"stack"in t&&zr(n,"stack",{get:function(){return this.inner.stack}}),n},hy(_r,Ty);var yp={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ba=function(){return Ba=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ba.apply(this,arguments)};function Ci(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function l(u){try{c(r.next(u))}catch(d){s(d)}}function a(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(l,a)}c((r=r.apply(t,[])).next())})}function ur(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(u){return a([c,u])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function kx(t){var e=[t.schema.primKey].concat(t.schema.indexes);return e.map(function(n){return n.src}).join(",")}function Sx(t){for(var e={},n=0,r=t.tables;n<r.length;n++){var i=r[n];e[i.name]=i.schema}return e}function Ly(t,e){return new Promise(function(n,r){var i=new FileReader;i.onabort=function(o){return r(new Error("file read aborted"))},i.onerror=function(o){return r(o.target.error)},i.onload=function(o){return n(o.target.result)},e==="binary"?i.readAsArrayBuffer(t):i.readAsText(t)})}function Fy(t,e){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync,r=e==="binary"?n.readAsArrayBuffer(t):n.readAsText(t);return r}var kd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Of(t,e){return e={exports:{}},t(e,e.exports),e.exports}var xc=Of(function(t,e){(function(n,r){t.exports=r()})(kd,function(){function n(H){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(z){return typeof z}:n=function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},n(H)}function r(H,z,q,W,ae,T,_){try{var B=H[T](_),L=B.value}catch(U){q(U);return}B.done?z(L):Promise.resolve(L).then(W,ae)}function i(H){return function(){var z=this,q=arguments;return new Promise(function(W,ae){var T=H.apply(z,q);function _(L){r(T,W,ae,_,B,"next",L)}function B(L){r(T,W,ae,_,B,"throw",L)}_(void 0)})}}function o(H,z){if(!(H instanceof z))throw new TypeError("Cannot call a class as a function")}function s(H,z){for(var q=0;q<z.length;q++){var W=z[q];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(H,W.key,W)}}function l(H,z,q){return z&&s(H.prototype,z),H}function a(H,z,q){return z in H?Object.defineProperty(H,z,{value:q,enumerable:!0,configurable:!0,writable:!0}):H[z]=q,H}function c(H,z){var q=Object.keys(H);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(H);z&&(W=W.filter(function(ae){return Object.getOwnPropertyDescriptor(H,ae).enumerable})),q.push.apply(q,W)}return q}function u(H){for(var z=1;z<arguments.length;z++){var q=arguments[z]!=null?arguments[z]:{};z%2?c(Object(q),!0).forEach(function(W){a(H,W,q[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(q)):c(Object(q)).forEach(function(W){Object.defineProperty(H,W,Object.getOwnPropertyDescriptor(q,W))})}return H}function d(H,z){return g(H)||S(H,z)||A()}function h(H){return m(H)||b(H)||O()}function m(H){if(Array.isArray(H)){for(var z=0,q=new Array(H.length);z<H.length;z++)q[z]=H[z];return q}}function g(H){if(Array.isArray(H))return H}function b(H){if(Symbol.iterator in Object(H)||Object.prototype.toString.call(H)==="[object Arguments]")return Array.from(H)}function S(H,z){if(Symbol.iterator in Object(H)||Object.prototype.toString.call(H)==="[object Arguments]"){var q=[],W=!0,ae=!1,T=void 0;try{for(var _=H[Symbol.iterator](),B;!(W=(B=_.next()).done)&&(q.push(B.value),!(z&&q.length===z));W=!0);}catch(L){ae=!0,T=L}finally{try{!W&&_.return!=null&&_.return()}finally{if(ae)throw T}}return q}}function O(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function A(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var N=function H(z){o(this,H),this.p=new Promise(z)};N.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(N.prototype[Symbol.toStringTag]="TypesonPromise"),N.prototype.then=function(H,z){var q=this;return new N(function(W,ae){q.p.then(function(T){W(H?H(T):T)}).catch(function(T){return z?z(T):Promise.reject(T)}).then(W,ae)})},N.prototype.catch=function(H){return this.then(null,H)},N.resolve=function(H){return new N(function(z){z(H)})},N.reject=function(H){return new N(function(z,q){q(H)})},["all","race"].forEach(function(H){N[H]=function(z){return new N(function(q,W){Promise[H](z.map(function(ae){return ae&&ae.constructor&&ae.constructor.__typeson__type__==="TypesonPromise"?ae.p:ae})).then(q,W)})}});var R={},D=R.toString,F={}.hasOwnProperty,j=Object.getPrototypeOf,K=F.toString;function E(H,z){return Z(H)&&typeof H.then=="function"&&(!z||typeof H.catch=="function")}function k(H){return D.call(H).slice(8,-1)}function V(H,z){if(!H||n(H)!=="object")return!1;var q=j(H);if(!q)return z===null;var W=F.call(q,"constructor")&&q.constructor;return typeof W!="function"?z===null:z===W||z!==null&&K.call(W)===K.call(z)||typeof z=="function"&&typeof W.__typeson__type__=="string"&&W.__typeson__type__===z.__typeson__type__}function C(H){if(!H||k(H)!=="Object")return!1;var z=j(H);return z?V(H,Object):!0}function ue(H){if(!H||k(H)!=="Object")return!1;var z=j(H);return z?V(H,Object)||ue(z):!0}function Z(H){return H&&n(H)==="object"}function xe(H){return H.replace(/~/g,"~0").replace(/\./g,"~1")}function ye(H){return H.replace(/~1/g,".").replace(/~0/g,"~")}function Q(H,z){if(z==="")return H;var q=z.indexOf(".");if(q>-1){var W=H[ye(z.slice(0,q))];return W===void 0?void 0:Q(W,z.slice(q+1))}return H[ye(z)]}function Ae(H,z,q){if(z==="")return q;var W=z.indexOf(".");if(W>-1){var ae=H[ye(z.slice(0,W))];return Ae(ae,z.slice(W+1),q)}return H[ye(z)]=q,H}function Qe(H){return H===null?"null":Array.isArray(H)?"array":n(H)}var Ue=Object.keys,rt=Array.isArray,ht={}.hasOwnProperty,Lt=["type","replaced","iterateIn","iterateUnsetNumeric"];function Me(H,z){if(H.keypath==="")return-1;var q=H.keypath.match(/\./g)||0,W=z.keypath.match(/\./g)||0;return q&&(q=q.length),W&&(W=W.length),q>W?-1:q<W?1:H.keypath<z.keypath?-1:H.keypath>z.keypath}var et=function(){function H(z){o(this,H),this.options=z,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return l(H,[{key:"stringify",value:function(q,W,ae,T){T=u({},this.options,{},T,{stringification:!0});var _=this.encapsulate(q,null,T);return rt(_)?JSON.stringify(_[0],W,ae):_.then(function(B){return JSON.stringify(B,W,ae)})}},{key:"stringifySync",value:function(q,W,ae,T){return this.stringify(q,W,ae,u({throwOnBadSyncType:!0},T,{sync:!0}))}},{key:"stringifyAsync",value:function(q,W,ae,T){return this.stringify(q,W,ae,u({throwOnBadSyncType:!0},T,{sync:!1}))}},{key:"parse",value:function(q,W,ae){return ae=u({},this.options,{},ae,{parse:!0}),this.revive(JSON.parse(q,W),ae)}},{key:"parseSync",value:function(q,W,ae){return this.parse(q,W,u({throwOnBadSyncType:!0},ae,{sync:!0}))}},{key:"parseAsync",value:function(q,W,ae){return this.parse(q,W,u({throwOnBadSyncType:!0},ae,{sync:!1}))}},{key:"specialTypeNames",value:function(q,W){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ae.returnTypeNames=!0,this.encapsulate(q,W,ae)}},{key:"rootTypeName",value:function(q,W){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ae.iterateNone=!0,this.encapsulate(q,W,ae)}},{key:"encapsulate",value:function(q,W,ae){ae=u({sync:!0},this.options,{},ae);var T=ae,_=T.sync,B=this,L={},U=[],J=[],re=[],G="cyclic"in ae?ae.cyclic:!0,X=ae,Y=X.encapsulateObserver,me=Se("",q,G,W||{},re);function le(pe){var w=Object.values(L);if(ae.iterateNone)return w.length?w[0]:H.getJSONType(pe);if(w.length){if(ae.returnTypeNames)return h(new Set(w));!pe||!C(pe)||ht.call(pe,"$types")?pe={$:pe,$types:{$:L}}:pe.$types=L}else Z(pe)&&ht.call(pe,"$types")&&(pe={$:pe,$types:!0});return ae.returnTypeNames?!1:pe}function fe(pe,w){return he.apply(this,arguments)}function he(){return he=i(regeneratorRuntime.mark(function pe(w,y){var x;return regeneratorRuntime.wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,Promise.all(y.map(function(ne){return ne[1].p}));case 2:return x=$.sent,$.next=5,Promise.all(x.map(function(){var ne=i(regeneratorRuntime.mark(function oe(Oe){var be,$e,Ge,Xe,ge,it,tt,pt,mt,Le,Ft,Ee,de,Pe;return regeneratorRuntime.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(be=[],$e=y.splice(0,1),Ge=d($e,1),Xe=Ge[0],ge=d(Xe,7),it=ge[0],tt=ge[2],pt=ge[3],mt=ge[4],Le=ge[5],Ft=ge[6],Ee=Se(it,Oe,tt,pt,be,!0,Ft),de=V(Ee,N),!(it&&de)){Re.next=11;break}return Re.next=8,Ee.p;case 8:return Pe=Re.sent,mt[Le]=Pe,Re.abrupt("return",fe(w,be));case 11:return it?mt[Le]=Ee:de?w=Ee.p:w=Ee,Re.abrupt("return",fe(w,be));case 13:case"end":return Re.stop()}},oe)}));return function(oe){return ne.apply(this,arguments)}}()));case 5:return $.abrupt("return",w);case 6:case"end":return $.stop()}},pe)})),he.apply(this,arguments)}function ee(pe,w,y){Object.assign(pe,w);var x=Lt.map(function(P){var $=pe[P];return delete pe[P],$});y(),Lt.forEach(function(P,$){pe[P]=x[$]})}function Se(pe,w,y,x,P,$,ne){var oe,Oe={},be=n(w),$e=Y?function(de){var Pe=ne||x.type||H.getJSONType(w);Y(Object.assign(de||Oe,{keypath:pe,value:w,cyclic:y,stateObj:x,promisesData:P,resolvingTypesonPromise:$,awaitingTypesonPromise:V(w,N)},{type:Pe}))}:null;if(["string","boolean","number","undefined"].includes(be))return w===void 0||be==="number"&&(isNaN(w)||w===-1/0||w===1/0)?(x.replaced?oe=w:oe=Te(pe,w,x,P,!1,$,$e),oe!==w&&(Oe={replaced:oe})):oe=w,$e&&$e(),oe;if(w===null)return $e&&$e(),w;if(y&&!x.iterateIn&&!x.iterateUnsetNumeric&&w&&n(w)==="object"){var Ge=U.indexOf(w);if(Ge<0)y===!0&&(U.push(w),J.push(pe));else return L[pe]="#",$e&&$e({cyclicKeypath:J[Ge]}),"#"+J[Ge]}var Xe=C(w),ge=rt(w),it=(Xe||ge)&&(!B.plainObjectReplacers.length||x.replaced)||x.iterateIn?w:Te(pe,w,x,P,Xe||ge,null,$e),tt;if(it!==w?(oe=it,Oe={replaced:it}):pe===""&&V(w,N)?(P.push([pe,w,y,x,void 0,void 0,x.type]),oe=w):ge&&x.iterateIn!=="object"||x.iterateIn==="array"?(tt=new Array(w.length),Oe={clone:tt}):!["function","symbol"].includes(n(w))&&!("toJSON"in w)&&!V(w,N)&&!V(w,Promise)&&!V(w,ArrayBuffer)||Xe||x.iterateIn==="object"?(tt={},x.addLength&&(tt.length=w.length),Oe={clone:tt}):oe=w,$e&&$e(),ae.iterateNone)return tt||oe;if(!tt)return oe;if(x.iterateIn){var pt=function(Pe){var _e={ownKeys:ht.call(w,Pe)};ee(x,_e,function(){var Re=pe+(pe?".":"")+xe(Pe),Ze=Se(Re,w[Pe],!!y,x,P,$);V(Ze,N)?P.push([Re,Ze,!!y,x,tt,Pe,x.type]):Ze!==void 0&&(tt[Pe]=Ze)})};for(var mt in w)pt(mt);$e&&$e({endIterateIn:!0,end:!0})}else Ue(w).forEach(function(de){var Pe=pe+(pe?".":"")+xe(de),_e={ownKeys:!0};ee(x,_e,function(){var Re=Se(Pe,w[de],!!y,x,P,$);V(Re,N)?P.push([Pe,Re,!!y,x,tt,de,x.type]):Re!==void 0&&(tt[de]=Re)})}),$e&&$e({endIterateOwn:!0,end:!0});if(x.iterateUnsetNumeric){for(var Le=w.length,Ft=function(Pe){if(!(Pe in w)){var _e=pe+(pe?".":"")+Pe,Re={ownKeys:!1};ee(x,Re,function(){var Ze=Se(_e,void 0,!!y,x,P,$);V(Ze,N)?P.push([_e,Ze,!!y,x,tt,Pe,x.type]):Ze!==void 0&&(tt[Pe]=Ze)})}},Ee=0;Ee<Le;Ee++)Ft(Ee);$e&&$e({endIterateUnsetNumeric:!0,end:!0})}return tt}function Te(pe,w,y,x,P,$,ne){for(var oe=P?B.plainObjectReplacers:B.nonplainObjectReplacers,Oe=oe.length;Oe--;){var be=oe[Oe];if(be.test(w,y)){var $e=be.type;if(B.revivers[$e]){var Ge=L[pe];L[pe]=Ge?[$e].concat(Ge):$e}if(Object.assign(y,{type:$e,replaced:!0}),(_||!be.replaceAsync)&&!be.replace)return ne&&ne({typeDetected:!0}),Se(pe,w,G&&"readonly",y,x,$,$e);ne&&ne({replacing:!0});var Xe=_||!be.replaceAsync?"replace":"replaceAsync";return Se(pe,be[Xe](w,y),G&&"readonly",y,x,$,$e)}}return w}return re.length?_&&ae.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(fe(me,re)).then(le):!_&&ae.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():ae.stringification&&_?[le(me)]:_?le(me):Promise.resolve(le(me))}},{key:"encapsulateSync",value:function(q,W,ae){return this.encapsulate(q,W,u({throwOnBadSyncType:!0},ae,{sync:!0}))}},{key:"encapsulateAsync",value:function(q,W,ae){return this.encapsulate(q,W,u({throwOnBadSyncType:!0},ae,{sync:!1}))}},{key:"revive",value:function(q,W){var ae=q&&q.$types;if(!ae)return q;if(ae===!0)return q.$;W=u({sync:!0},this.options,{},W);var T=W,_=T.sync,B=[],L={},U=!0;ae.$&&C(ae.$)&&(q=q.$,ae=ae.$,U=!1);var J=this;function re(he,ee){var Se=J.revivers[he]||[],Te=d(Se,1),pe=Te[0];if(!pe)throw new Error("Unregistered type: "+he);return _&&!("revive"in pe)?ee:pe[_&&pe.revive?"revive":!_&&pe.reviveAsync?"reviveAsync":"revive"](ee,L)}function G(){var he=[];if(Object.entries(ae).forEach(function(ee){var Se=d(ee,2),Te=Se[0],pe=Se[1];pe!=="#"&&[].concat(pe).forEach(function(w){var y=J.revivers[w]||[null,{}],x=d(y,2),P=x[1].plain;P&&(he.push({keypath:Te,type:w}),delete ae[Te])})}),!!he.length)return he.sort(Me).reduce(function ee(Se,Te){var pe=Te.keypath,w=Te.type;if(E(Se))return Se.then(function(P){return ee(P,{keypath:pe,type:w})});var y=Q(q,pe);if(y=re(w,y),V(y,N))return y.then(function(P){var $=Ae(q,pe,P);$===P&&(q=$)});var x=Ae(q,pe,y);x===y&&(q=x)},void 0)}var X=[];function Y(he,ee,Se,Te,pe){if(!(U&&he==="$types")){var w=ae[he],y=rt(ee);if(y||C(ee)){var x=y?new Array(ee.length):{};for(Ue(ee).forEach(function(Ge){var Xe=Y(he+(he?".":"")+xe(Ge),ee[Ge],Se||x,x,Ge),ge=function(tt){return V(tt,At)?x[Ge]=void 0:tt!==void 0&&(x[Ge]=tt),tt};V(Xe,N)?X.push(Xe.then(function(it){return ge(it)})):ge(Xe)}),ee=x;B.length;){var P=d(B[0],4),$=P[0],ne=P[1],oe=P[2],Oe=P[3],be=Q($,ne);if(be!==void 0)oe[Oe]=be;else break;B.splice(0,1)}}if(!w)return ee;if(w==="#"){var $e=Q(Se,ee.slice(1));return $e===void 0&&B.push([Se,ee.slice(1),Te,pe]),$e}return[].concat(w).reduce(function Ge(Xe,ge){return V(Xe,N)?Xe.then(function(it){return Ge(it,ge)}):re(ge,Xe)},ee)}}function me(he){return V(he,At)?void 0:he}var le=G(),fe;return V(le,N)?fe=le.then(function(){return q}):(fe=Y("",q,null),X.length&&(fe=N.resolve(fe).then(function(he){return N.all([he].concat(X))}).then(function(he){var ee=d(he,1),Se=ee[0];return Se}))),E(fe)?_&&W.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():V(fe,N)?fe.p.then(me):fe:!_&&W.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():_?me(fe):Promise.resolve(me(fe))}},{key:"reviveSync",value:function(q,W){return this.revive(q,u({throwOnBadSyncType:!0},W,{sync:!0}))}},{key:"reviveAsync",value:function(q,W){return this.revive(q,u({throwOnBadSyncType:!0},W,{sync:!1}))}},{key:"register",value:function(q,W){return W=W||{},[].concat(q).forEach(function ae(T){var _=this;if(rt(T))return T.map(function(B){return ae.call(_,B)});T&&Ue(T).forEach(function(B){if(B==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(H.JSON_TYPES.includes(B))throw new TypeError("Plain JSON object types are reserved as type names");var L=T[B],U=L&&L.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,J=U.filter(function(Se){return Se.type===B});if(J.length&&(U.splice(U.indexOf(J[0]),1),delete this.revivers[B],delete this.types[B]),typeof L=="function"){var re=L;L={test:function(Te){return Te&&Te.constructor===re},replace:function(Te){return u({},Te)},revive:function(Te){return Object.assign(Object.create(re.prototype),Te)}}}else if(rt(L)){var G=L,X=d(G,3),Y=X[0],me=X[1],le=X[2];L={test:Y,replace:me,revive:le}}if(!(!L||!L.test)){var fe={type:B,test:L.test.bind(L)};L.replace&&(fe.replace=L.replace.bind(L)),L.replaceAsync&&(fe.replaceAsync=L.replaceAsync.bind(L));var he=typeof W.fallback=="number"?W.fallback:W.fallback?0:1/0;if(L.testPlainObjects?this.plainObjectReplacers.splice(he,0,fe):this.nonplainObjectReplacers.splice(he,0,fe),L.revive||L.reviveAsync){var ee={};L.revive&&(ee.revive=L.revive.bind(L)),L.reviveAsync&&(ee.reviveAsync=L.reviveAsync.bind(L)),this.revivers[B]=[ee,{plain:L.testPlainObjects}]}this.types[B]=L}},this)},this),this}}]),H}(),At=function H(){o(this,H)};return At.__typeson__type__="TypesonUndefined",et.Undefined=At,et.Promise=N,et.isThenable=E,et.toStringTag=k,et.hasConstructorOf=V,et.isObject=Z,et.isPlainObject=C,et.isUserObject=ue,et.escapeKeyPathComponent=xe,et.unescapeKeyPathComponent=ye,et.getByKeyPath=Q,et.getJSONType=Qe,et.JSON_TYPES=["null","boolean","number","string","array","object"],et})}),xx=Of(function(t,e){(function(n,r){t.exports=r()})(kd,function(){function n(w){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(w)}function r(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function i(w,y){for(var x=0;x<y.length;x++){var P=y[x];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(w,P.key,P)}}function o(w,y,x){return y in w?Object.defineProperty(w,y,{value:x,enumerable:!0,configurable:!0,writable:!0}):w[y]=x,w}function s(w,y){var x=Object.keys(w);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(w);y&&(P=P.filter(function($){return Object.getOwnPropertyDescriptor(w,$).enumerable})),x.push.apply(x,P)}return x}function l(w){return function(x){if(Array.isArray(x))return a(x)}(w)||function(x){if(typeof Symbol<"u"&&Symbol.iterator in Object(x))return Array.from(x)}(w)||function(x,P){if(x){if(typeof x=="string")return a(x,P);var $=Object.prototype.toString.call(x).slice(8,-1);if($==="Object"&&x.constructor&&($=x.constructor.name),$==="Map"||$==="Set")return Array.from(x);if($==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($))return a(x,P)}}(w)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function a(w,y){(y==null||y>w.length)&&(y=w.length);for(var x=0,P=new Array(y);x<y;x++)P[x]=w[x];return P}function c(w){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(w)}function u(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function d(w,y){for(var x=0;x<y.length;x++){var P=y[x];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(w,P.key,P)}}function h(w,y,x){return y in w?Object.defineProperty(w,y,{value:x,enumerable:!0,configurable:!0,writable:!0}):w[y]=x,w}function m(w,y){var x=Object.keys(w);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(w);y&&(P=P.filter(function($){return Object.getOwnPropertyDescriptor(w,$).enumerable})),x.push.apply(x,P)}return x}function g(w){for(var y=1;y<arguments.length;y++){var x=arguments[y]!=null?arguments[y]:{};y%2?m(Object(x),!0).forEach(function(P){h(w,P,x[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(x)):m(Object(x)).forEach(function(P){Object.defineProperty(w,P,Object.getOwnPropertyDescriptor(x,P))})}return w}function b(w,y){return function(P){if(Array.isArray(P))return P}(w)||function(P,$){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(P)))){var ne=[],oe=!0,Oe=!1,be=void 0;try{for(var $e,Ge=P[Symbol.iterator]();!(oe=($e=Ge.next()).done)&&(ne.push($e.value),!$||ne.length!==$);oe=!0);}catch(Xe){Oe=!0,be=Xe}finally{try{oe||Ge.return==null||Ge.return()}finally{if(Oe)throw be}}return ne}}(w,y)||O(w,y)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function S(w){return function(x){if(Array.isArray(x))return A(x)}(w)||function(x){if(typeof Symbol<"u"&&Symbol.iterator in Object(x))return Array.from(x)}(w)||O(w)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function O(w,y){if(w){if(typeof w=="string")return A(w,y);var x=Object.prototype.toString.call(w).slice(8,-1);return x==="Object"&&w.constructor&&(x=w.constructor.name),x==="Map"||x==="Set"?Array.from(w):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?A(w,y):void 0}}function A(w,y){(y==null||y>w.length)&&(y=w.length);for(var x=0,P=new Array(y);x<y;x++)P[x]=w[x];return P}var N=function w(y){u(this,w),this.p=new Promise(y)};N.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(N.prototype[Symbol.toStringTag]="TypesonPromise"),N.prototype.then=function(w,y){var x=this;return new N(function(P,$){x.p.then(function(ne){P(w?w(ne):ne)}).catch(function(ne){return y?y(ne):Promise.reject(ne)}).then(P,$)})},N.prototype.catch=function(w){return this.then(null,w)},N.resolve=function(w){return new N(function(y){y(w)})},N.reject=function(w){return new N(function(y,x){x(w)})},["all","race"].forEach(function(w){N[w]=function(y){return new N(function(x,P){Promise[w](y.map(function($){return $&&$.constructor&&$.constructor.__typeson__type__==="TypesonPromise"?$.p:$})).then(x,P)})}});var R={}.toString,D={}.hasOwnProperty,F=Object.getPrototypeOf,j=D.toString;function K(w,y){return C(w)&&typeof w.then=="function"&&(!y||typeof w.catch=="function")}function E(w){return R.call(w).slice(8,-1)}function k(w,y){if(!w||c(w)!=="object")return!1;var x=F(w);if(!x)return y===null;var P=D.call(x,"constructor")&&x.constructor;return typeof P!="function"?y===null:y===P||y!==null&&j.call(P)===j.call(y)||typeof y=="function"&&typeof P.__typeson__type__=="string"&&P.__typeson__type__===y.__typeson__type__}function V(w){return!(!w||E(w)!=="Object")&&(!F(w)||k(w,Object))}function C(w){return w&&c(w)==="object"}function ue(w){return w.replace(/~/g,"~0").replace(/\./g,"~1")}function Z(w){return w.replace(/~1/g,".").replace(/~0/g,"~")}function xe(w,y){if(y==="")return w;var x=y.indexOf(".");if(x>-1){var P=w[Z(y.slice(0,x))];return P===void 0?void 0:xe(P,y.slice(x+1))}return w[Z(y)]}function ye(w,y,x){if(y==="")return x;var P=y.indexOf(".");return P>-1?ye(w[Z(y.slice(0,P))],y.slice(P+1),x):(w[Z(y)]=x,w)}function Q(w,y,x){return x?y?y(w):w:(w&&w.then||(w=Promise.resolve(w)),y?w.then(y):w)}var Ae=Object.keys,Qe=Array.isArray,Ue={}.hasOwnProperty,rt=["type","replaced","iterateIn","iterateUnsetNumeric"];function ht(w){return function(){for(var y=[],x=0;x<arguments.length;x++)y[x]=arguments[x];try{return Promise.resolve(w.apply(this,y))}catch(P){return Promise.reject(P)}}}function Lt(w,y){if(w.keypath==="")return-1;var x=w.keypath.match(/\./g)||0,P=y.keypath.match(/\./g)||0;return x&&(x=x.length),P&&(P=P.length),x>P?-1:x<P?1:w.keypath<y.keypath?-1:w.keypath>y.keypath}var Me=function(){function w(y){u(this,w),this.options=y,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(x,P,$){return P&&d(x.prototype,P),x}(w,[{key:"stringify",value:function(x,P,$,ne){ne=g(g(g({},this.options),ne),{},{stringification:!0});var oe=this.encapsulate(x,null,ne);return Qe(oe)?JSON.stringify(oe[0],P,$):oe.then(function(Oe){return JSON.stringify(Oe,P,$)})}},{key:"stringifySync",value:function(x,P,$,ne){return this.stringify(x,P,$,g(g({throwOnBadSyncType:!0},ne),{},{sync:!0}))}},{key:"stringifyAsync",value:function(x,P,$,ne){return this.stringify(x,P,$,g(g({throwOnBadSyncType:!0},ne),{},{sync:!1}))}},{key:"parse",value:function(x,P,$){return $=g(g(g({},this.options),$),{},{parse:!0}),this.revive(JSON.parse(x,P),$)}},{key:"parseSync",value:function(x,P,$){return this.parse(x,P,g(g({throwOnBadSyncType:!0},$),{},{sync:!0}))}},{key:"parseAsync",value:function(x,P,$){return this.parse(x,P,g(g({throwOnBadSyncType:!0},$),{},{sync:!1}))}},{key:"specialTypeNames",value:function(x,P){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return $.returnTypeNames=!0,this.encapsulate(x,P,$)}},{key:"rootTypeName",value:function(x,P){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return $.iterateNone=!0,this.encapsulate(x,P,$)}},{key:"encapsulate",value:function(x,P,$){var ne=ht(function(Ee,de){return Q(Promise.all(de.map(function(Pe){return Pe[1].p})),function(Pe){return Q(Promise.all(Pe.map(ht(function(_e){var Re=!1,Ze=[],fn=b(de.splice(0,1),1),gt=b(fn[0],7),tn=gt[0],Tn=gt[2],ct=gt[3],An=gt[4],dt=gt[5],hn=gt[6],qt=Le(tn,_e,Tn,ct,Ze,!0,hn),Rn=k(qt,N);return function(We,fo){var Qr=We();return Qr&&Qr.then?Qr.then(fo):fo(Qr)}(function(){if(tn&&Rn)return Q(qt.p,function(Bn){return An[dt]=Bn,Re=!0,ne(Ee,Ze)})},function(Bn){return Re?Bn:(tn?An[dt]=qt:Ee=Rn?qt.p:qt,ne(Ee,Ze))})}))),function(){return Ee})})}),oe=($=g(g({sync:!0},this.options),$)).sync,Oe=this,be={},$e=[],Ge=[],Xe=[],ge=!("cyclic"in $)||$.cyclic,it=$.encapsulateObserver,tt=Le("",x,ge,P||{},Xe);function pt(Ee){var de=Object.values(be);if($.iterateNone)return de.length?de[0]:w.getJSONType(Ee);if(de.length){if($.returnTypeNames)return S(new Set(de));Ee&&V(Ee)&&!Ue.call(Ee,"$types")?Ee.$types=be:Ee={$:Ee,$types:{$:be}}}else C(Ee)&&Ue.call(Ee,"$types")&&(Ee={$:Ee,$types:!0});return!$.returnTypeNames&&Ee}function mt(Ee,de,Pe){Object.assign(Ee,de);var _e=rt.map(function(Re){var Ze=Ee[Re];return delete Ee[Re],Ze});Pe(),rt.forEach(function(Re,Ze){Ee[Re]=_e[Ze]})}function Le(Ee,de,Pe,_e,Re,Ze,fn){var gt,tn={},Tn=c(de),ct=it?function(mr){var Jt=fn||_e.type||w.getJSONType(de);it(Object.assign(mr||tn,{keypath:Ee,value:de,cyclic:Pe,stateObj:_e,promisesData:Re,resolvingTypesonPromise:Ze,awaitingTypesonPromise:k(de,N)},{type:Jt}))}:null;if(["string","boolean","number","undefined"].includes(Tn))return de===void 0||Number.isNaN(de)||de===Number.NEGATIVE_INFINITY||de===Number.POSITIVE_INFINITY?(gt=_e.replaced?de:Ft(Ee,de,_e,Re,!1,Ze,ct))!==de&&(tn={replaced:gt}):gt=de,ct&&ct(),gt;if(de===null)return ct&&ct(),de;if(Pe&&!_e.iterateIn&&!_e.iterateUnsetNumeric&&de&&c(de)==="object"){var An=$e.indexOf(de);if(!(An<0))return be[Ee]="#",ct&&ct({cyclicKeypath:Ge[An]}),"#"+Ge[An];Pe===!0&&($e.push(de),Ge.push(Ee))}var dt,hn=V(de),qt=Qe(de),Rn=(hn||qt)&&(!Oe.plainObjectReplacers.length||_e.replaced)||_e.iterateIn?de:Ft(Ee,de,_e,Re,hn||qt,null,ct);if(Rn!==de?(gt=Rn,tn={replaced:Rn}):Ee===""&&k(de,N)?(Re.push([Ee,de,Pe,_e,void 0,void 0,_e.type]),gt=de):qt&&_e.iterateIn!=="object"||_e.iterateIn==="array"?(dt=new Array(de.length),tn={clone:dt}):(["function","symbol"].includes(c(de))||"toJSON"in de||k(de,N)||k(de,Promise)||k(de,ArrayBuffer))&&!hn&&_e.iterateIn!=="object"?gt=de:(dt={},_e.addLength&&(dt.length=de.length),tn={clone:dt}),ct&&ct(),$.iterateNone)return dt||gt;if(!dt)return gt;if(_e.iterateIn){var Bn=function(Jt){var or={ownKeys:Ue.call(de,Jt)};mt(_e,or,function(){var sr=Ee+(Ee?".":"")+ue(Jt),gr=Le(sr,de[Jt],!!Pe,_e,Re,Ze);k(gr,N)?Re.push([sr,gr,!!Pe,_e,dt,Jt,_e.type]):gr!==void 0&&(dt[Jt]=gr)})};for(var We in de)Bn(We);ct&&ct({endIterateIn:!0,end:!0})}else Ae(de).forEach(function(mr){var Jt=Ee+(Ee?".":"")+ue(mr);mt(_e,{ownKeys:!0},function(){var or=Le(Jt,de[mr],!!Pe,_e,Re,Ze);k(or,N)?Re.push([Jt,or,!!Pe,_e,dt,mr,_e.type]):or!==void 0&&(dt[mr]=or)})}),ct&&ct({endIterateOwn:!0,end:!0});if(_e.iterateUnsetNumeric){for(var fo=de.length,Qr=function(Jt){if(!(Jt in de)){var or=Ee+(Ee?".":"")+Jt;mt(_e,{ownKeys:!1},function(){var sr=Le(or,void 0,!!Pe,_e,Re,Ze);k(sr,N)?Re.push([or,sr,!!Pe,_e,dt,Jt,_e.type]):sr!==void 0&&(dt[Jt]=sr)})}},ls=0;ls<fo;ls++)Qr(ls);ct&&ct({endIterateUnsetNumeric:!0,end:!0})}return dt}function Ft(Ee,de,Pe,_e,Re,Ze,fn){for(var gt=Re?Oe.plainObjectReplacers:Oe.nonplainObjectReplacers,tn=gt.length;tn--;){var Tn=gt[tn];if(Tn.test(de,Pe)){var ct=Tn.type;if(Oe.revivers[ct]){var An=be[Ee];be[Ee]=An?[ct].concat(An):ct}return Object.assign(Pe,{type:ct,replaced:!0}),!oe&&Tn.replaceAsync||Tn.replace?(fn&&fn({replacing:!0}),Le(Ee,Tn[oe||!Tn.replaceAsync?"replace":"replaceAsync"](de,Pe),ge&&"readonly",Pe,_e,Ze,ct)):(fn&&fn({typeDetected:!0}),Le(Ee,de,ge&&"readonly",Pe,_e,Ze,ct))}}return de}return Xe.length?oe&&$.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(ne(tt,Xe)).then(pt):!oe&&$.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():$.stringification&&oe?[pt(tt)]:oe?pt(tt):Promise.resolve(pt(tt))}},{key:"encapsulateSync",value:function(x,P,$){return this.encapsulate(x,P,g(g({throwOnBadSyncType:!0},$),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(x,P,$){return this.encapsulate(x,P,g(g({throwOnBadSyncType:!0},$),{},{sync:!1}))}},{key:"revive",value:function(x,P){var $=x&&x.$types;if(!$)return x;if($===!0)return x.$;var ne=(P=g(g({sync:!0},this.options),P)).sync,oe=[],Oe={},be=!0;$.$&&V($.$)&&(x=x.$,$=$.$,be=!1);var $e=this;function Ge(pt,mt){var Le=b($e.revivers[pt]||[],1)[0];if(!Le)throw new Error("Unregistered type: "+pt);return ne&&!("revive"in Le)?mt:Le[ne&&Le.revive?"revive":!ne&&Le.reviveAsync?"reviveAsync":"revive"](mt,Oe)}var Xe=[];function ge(pt){return k(pt,et)?void 0:pt}var it,tt=function(){var mt=[];if(Object.entries($).forEach(function(Le){var Ft=b(Le,2),Ee=Ft[0],de=Ft[1];de!=="#"&&[].concat(de).forEach(function(Pe){b($e.revivers[Pe]||[null,{}],2)[1].plain&&(mt.push({keypath:Ee,type:Pe}),delete $[Ee])})}),mt.length)return mt.sort(Lt).reduce(function Le(Ft,Ee){var de=Ee.keypath,Pe=Ee.type;if(K(Ft))return Ft.then(function(Ze){return Le(Ze,{keypath:de,type:Pe})});var _e=xe(x,de);if(k(_e=Ge(Pe,_e),N))return _e.then(function(Ze){var fn=ye(x,de,Ze);fn===Ze&&(x=fn)});var Re=ye(x,de,_e);Re===_e&&(x=Re)},void 0)}();return k(tt,N)?it=tt.then(function(){return x}):(it=function pt(mt,Le,Ft,Ee,de){if(!be||mt!=="$types"){var Pe=$[mt],_e=Qe(Le);if(_e||V(Le)){var Re=_e?new Array(Le.length):{};for(Ae(Le).forEach(function(dt){var hn=pt(mt+(mt?".":"")+ue(dt),Le[dt],Ft||Re,Re,dt),qt=function(Bn){return k(Bn,et)?Re[dt]=void 0:Bn!==void 0&&(Re[dt]=Bn),Bn};k(hn,N)?Xe.push(hn.then(function(Rn){return qt(Rn)})):qt(hn)}),Le=Re;oe.length;){var Ze=b(oe[0],4),fn=Ze[0],gt=Ze[1],tn=Ze[2],Tn=Ze[3],ct=xe(fn,gt);if(ct===void 0)break;tn[Tn]=ct,oe.splice(0,1)}}if(!Pe)return Le;if(Pe==="#"){var An=xe(Ft,Le.slice(1));return An===void 0&&oe.push([Ft,Le.slice(1),Ee,de]),An}return[].concat(Pe).reduce(function dt(hn,qt){return k(hn,N)?hn.then(function(Rn){return dt(Rn,qt)}):Ge(qt,hn)},Le)}}("",x,null),Xe.length&&(it=N.resolve(it).then(function(pt){return N.all([pt].concat(Xe))}).then(function(pt){return b(pt,1)[0]}))),K(it)?ne&&P.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():k(it,N)?it.p.then(ge):it:!ne&&P.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():ne?ge(it):Promise.resolve(ge(it))}},{key:"reviveSync",value:function(x,P){return this.revive(x,g(g({throwOnBadSyncType:!0},P),{},{sync:!0}))}},{key:"reviveAsync",value:function(x,P){return this.revive(x,g(g({throwOnBadSyncType:!0},P),{},{sync:!1}))}},{key:"register",value:function(x,P){return P=P||{},[].concat(x).forEach(function $(ne){var oe=this;if(Qe(ne))return ne.map(function(Oe){return $.call(oe,Oe)});ne&&Ae(ne).forEach(function(Oe){if(Oe==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(w.JSON_TYPES.includes(Oe))throw new TypeError("Plain JSON object types are reserved as type names");var be=ne[Oe],$e=be&&be.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Ge=$e.filter(function(mt){return mt.type===Oe});if(Ge.length&&($e.splice($e.indexOf(Ge[0]),1),delete this.revivers[Oe],delete this.types[Oe]),typeof be=="function"){var Xe=be;be={test:function(Le){return Le&&Le.constructor===Xe},replace:function(Le){return g({},Le)},revive:function(Le){return Object.assign(Object.create(Xe.prototype),Le)}}}else if(Qe(be)){var ge=b(be,3);be={test:ge[0],replace:ge[1],revive:ge[2]}}if(be&&be.test){var it={type:Oe,test:be.test.bind(be)};be.replace&&(it.replace=be.replace.bind(be)),be.replaceAsync&&(it.replaceAsync=be.replaceAsync.bind(be));var tt=typeof P.fallback=="number"?P.fallback:P.fallback?0:Number.POSITIVE_INFINITY;if(be.testPlainObjects?this.plainObjectReplacers.splice(tt,0,it):this.nonplainObjectReplacers.splice(tt,0,it),be.revive||be.reviveAsync){var pt={};be.revive&&(pt.revive=be.revive.bind(be)),be.reviveAsync&&(pt.reviveAsync=be.reviveAsync.bind(be)),this.revivers[Oe]=[pt,{plain:be.testPlainObjects}]}this.types[Oe]=be}},this)},this),this}}]),w}(),et=function w(){u(this,w)};et.__typeson__type__="TypesonUndefined",Me.Undefined=et,Me.Promise=N,Me.isThenable=K,Me.toStringTag=E,Me.hasConstructorOf=k,Me.isObject=C,Me.isPlainObject=V,Me.isUserObject=function w(y){if(!y||E(y)!=="Object")return!1;var x=F(y);return!x||k(y,Object)||w(x)},Me.escapeKeyPathComponent=ue,Me.unescapeKeyPathComponent=Z,Me.getByKeyPath=xe,Me.getJSONType=function(y){return y===null?"null":Array.isArray(y)?"array":c(y)},Me.JSON_TYPES=["null","boolean","number","string","array","object"];for(var At={userObject:{test:function(y,x){return Me.isUserObject(y)},replace:function(y){return function(P){for(var $=1;$<arguments.length;$++){var ne=arguments[$]!=null?arguments[$]:{};$%2?s(Object(ne),!0).forEach(function(oe){o(P,oe,ne[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(ne)):s(Object(ne)).forEach(function(oe){Object.defineProperty(P,oe,Object.getOwnPropertyDescriptor(ne,oe))})}return P}({},y)},revive:function(y){return y}}},H=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(y,x){return!!Array.isArray(y)&&(Object.keys(y).some(function(P){return String(Number.parseInt(P))!==P})&&(x.iterateIn="object",x.addLength=!0),!0)},replace:function(y,x){return x.iterateUnsetNumeric=!0,y},revive:function(y){if(Array.isArray(y))return y;var x=[];return Object.keys(y).forEach(function(P){var $=y[P];x[P]=$}),x}}},{sparseUndefined:{test:function(y,x){return y===void 0&&x.ownKeys===!1},replace:function(y){return 0},revive:function(y){}}}],z={undef:{test:function(y,x){return y===void 0&&(x.ownKeys||!("ownKeys"in x))},replace:function(y){return 0},revive:function(y){return new Me.Undefined}}},q={StringObject:{test:function(y){return Me.toStringTag(y)==="String"&&n(y)==="object"},replace:function(y){return String(y)},revive:function(y){return new String(y)}},BooleanObject:{test:function(y){return Me.toStringTag(y)==="Boolean"&&n(y)==="object"},replace:function(y){return!!y},revive:function(y){return new Boolean(y)}},NumberObject:{test:function(y){return Me.toStringTag(y)==="Number"&&n(y)==="object"},replace:function(y){return Number(y)},revive:function(y){return new Number(y)}}},W=[{nan:{test:function(y){return Number.isNaN(y)},replace:function(y){return"NaN"},revive:function(y){return Number.NaN}}},{infinity:{test:function(y){return y===Number.POSITIVE_INFINITY},replace:function(y){return"Infinity"},revive:function(y){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(y){return y===Number.NEGATIVE_INFINITY},replace:function(y){return"-Infinity"},revive:function(y){return Number.NEGATIVE_INFINITY}}}],ae={date:{test:function(y){return Me.toStringTag(y)==="Date"},replace:function(y){var x=y.getTime();return Number.isNaN(x)?"NaN":x},revive:function(y){return y==="NaN"?new Date(Number.NaN):new Date(y)}}},T={regexp:{test:function(y){return Me.toStringTag(y)==="RegExp"},replace:function(y){return{source:y.source,flags:(y.global?"g":"")+(y.ignoreCase?"i":"")+(y.multiline?"m":"")+(y.sticky?"y":"")+(y.unicode?"u":"")}},revive:function(y){var x=y.source,P=y.flags;return new RegExp(x,P)}}},_={map:{test:function(y){return Me.toStringTag(y)==="Map"},replace:function(y){return l(y.entries())},revive:function(y){return new Map(y)}}},B={set:{test:function(y){return Me.toStringTag(y)==="Set"},replace:function(y){return l(y.values())},revive:function(y){return new Set(y)}}},L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U=new Uint8Array(256),J=0;J<L.length;J++)U[L.charCodeAt(J)]=J;var re=function(y,x,P){P==null&&(P=y.byteLength);for(var $=new Uint8Array(y,0,P),ne=$.length,oe="",Oe=0;Oe<ne;Oe+=3)oe+=L[$[Oe]>>2],oe+=L[(3&$[Oe])<<4|$[Oe+1]>>4],oe+=L[(15&$[Oe+1])<<2|$[Oe+2]>>6],oe+=L[63&$[Oe+2]];return ne%3==2?oe=oe.slice(0,-1)+"=":ne%3==1&&(oe=oe.slice(0,-2)+"=="),oe},G=function(y){var x,P,$,ne,oe=y.length,Oe=.75*y.length,be=0;y[y.length-1]==="="&&(Oe--,y[y.length-2]==="="&&Oe--);for(var $e=new ArrayBuffer(Oe),Ge=new Uint8Array($e),Xe=0;Xe<oe;Xe+=4)x=U[y.charCodeAt(Xe)],P=U[y.charCodeAt(Xe+1)],$=U[y.charCodeAt(Xe+2)],ne=U[y.charCodeAt(Xe+3)],Ge[be++]=x<<2|P>>4,Ge[be++]=(15&P)<<4|$>>2,Ge[be++]=(3&$)<<6|63&ne;return $e},X={arraybuffer:{test:function(y){return Me.toStringTag(y)==="ArrayBuffer"},replace:function(y,x){x.buffers||(x.buffers=[]);var P=x.buffers.indexOf(y);return P>-1?{index:P}:(x.buffers.push(y),re(y))},revive:function(y,x){if(x.buffers||(x.buffers=[]),n(y)==="object")return x.buffers[y.index];var P=G(y);return x.buffers.push(P),P}}},Y=typeof self>"u"?kd:self,me={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(w){var y=w,x=Y[y];x&&(me[w.toLowerCase()]={test:function($){return Me.toStringTag($)===y},replace:function($,ne){var oe=$.buffer,Oe=$.byteOffset,be=$.length;ne.buffers||(ne.buffers=[]);var $e=ne.buffers.indexOf(oe);return $e>-1?{index:$e,byteOffset:Oe,length:be}:(ne.buffers.push(oe),{encoded:re(oe),byteOffset:Oe,length:be})},revive:function($,ne){ne.buffers||(ne.buffers=[]);var oe,Oe=$.byteOffset,be=$.length,$e=$.encoded,Ge=$.index;return"index"in $?oe=ne.buffers[Ge]:(oe=G($e),ne.buffers.push(oe)),new x(oe,Oe,be)}})});var le={dataview:{test:function(y){return Me.toStringTag(y)==="DataView"},replace:function(y,x){var P=y.buffer,$=y.byteOffset,ne=y.byteLength;x.buffers||(x.buffers=[]);var oe=x.buffers.indexOf(P);return oe>-1?{index:oe,byteOffset:$,byteLength:ne}:(x.buffers.push(P),{encoded:re(P),byteOffset:$,byteLength:ne})},revive:function(y,x){x.buffers||(x.buffers=[]);var P,$=y.byteOffset,ne=y.byteLength,oe=y.encoded,Oe=y.index;return"index"in y?P=x.buffers[Oe]:(P=G(oe),x.buffers.push(P)),new DataView(P,$,ne)}}},fe={IntlCollator:{test:function(y){return Me.hasConstructorOf(y,Intl.Collator)},replace:function(y){return y.resolvedOptions()},revive:function(y){return new Intl.Collator(y.locale,y)}},IntlDateTimeFormat:{test:function(y){return Me.hasConstructorOf(y,Intl.DateTimeFormat)},replace:function(y){return y.resolvedOptions()},revive:function(y){return new Intl.DateTimeFormat(y.locale,y)}},IntlNumberFormat:{test:function(y){return Me.hasConstructorOf(y,Intl.NumberFormat)},replace:function(y){return y.resolvedOptions()},revive:function(y){return new Intl.NumberFormat(y.locale,y)}}};function he(w){for(var y=new Uint8Array(w.length),x=0;x<w.length;x++)y[x]=w.charCodeAt(x);return y.buffer}var ee={file:{test:function(y){return Me.toStringTag(y)==="File"},replace:function(y){var x=new XMLHttpRequest;if(x.overrideMimeType("text/plain; charset=x-user-defined"),x.open("GET",URL.createObjectURL(y),!1),x.send(),x.status!==200&&x.status!==0)throw new Error("Bad File access: "+x.status);return{type:y.type,stringContents:x.responseText,name:y.name,lastModified:y.lastModified}},revive:function(y){var x=y.name,P=y.type,$=y.stringContents,ne=y.lastModified;return new File([he($)],x,{type:P,lastModified:ne})},replaceAsync:function(y){return new Me.Promise(function(x,P){var $=new FileReader;$.addEventListener("load",function(){x({type:y.type,stringContents:$.result,name:y.name,lastModified:y.lastModified})}),$.addEventListener("error",function(){P($.error)}),$.readAsBinaryString(y)})}}},Se={bigint:{test:function(y){return typeof y=="bigint"},replace:function(y){return String(y)},revive:function(y){return BigInt(y)}}},Te={bigintObject:{test:function(y){return n(y)==="object"&&Me.hasConstructorOf(y,BigInt)},replace:function(y){return String(y)},revive:function(y){return new Object(BigInt(y))}}},pe={cryptokey:{test:function(y){return Me.toStringTag(y)==="CryptoKey"&&y.extractable},replaceAsync:function(y){return new Me.Promise(function(x,P){crypto.subtle.exportKey("jwk",y).catch(function($){P($)}).then(function($){x({jwk:$,algorithm:y.algorithm,usages:y.usages})})})},revive:function(y){var x=y.jwk,P=y.algorithm,$=y.usages;return crypto.subtle.importKey("jwk",x,P,!0,$)}}};return[At,z,H,q,W,ae,T,{imagedata:{test:function(y){return Me.toStringTag(y)==="ImageData"},replace:function(y){return{array:l(y.data),width:y.width,height:y.height}},revive:function(y){return new ImageData(new Uint8ClampedArray(y.array),y.width,y.height)}}},{imagebitmap:{test:function(y){return Me.toStringTag(y)==="ImageBitmap"||y&&y.dataset&&y.dataset.toStringTag==="ImageBitmap"},replace:function(y){var x=document.createElement("canvas");return x.getContext("2d").drawImage(y,0,0),x.toDataURL()},revive:function(y){var x=document.createElement("canvas"),P=x.getContext("2d"),$=document.createElement("img");return $.addEventListener("load",function(){P.drawImage($,0,0)}),$.src=y,x},reviveAsync:function(y){var x=document.createElement("canvas"),P=x.getContext("2d"),$=document.createElement("img");return $.addEventListener("load",function(){P.drawImage($,0,0)}),$.src=y,createImageBitmap(x)}}},ee,{file:ee.file,filelist:{test:function(y){return Me.toStringTag(y)==="FileList"},replace:function(y){for(var x=[],P=0;P<y.length;P++)x[P]=y.item(P);return x},revive:function(y){return new(function(){function x(){r(this,x),this._files=arguments[0],this.length=this._files.length}return function($,ne,oe){return ne&&i($.prototype,ne),$}(x,[{key:"item",value:function($){return this._files[$]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),x}())(y)}}},{blob:{test:function(y){return Me.toStringTag(y)==="Blob"},replace:function(y){var x=new XMLHttpRequest;if(x.overrideMimeType("text/plain; charset=x-user-defined"),x.open("GET",URL.createObjectURL(y),!1),x.send(),x.status!==200&&x.status!==0)throw new Error("Bad Blob access: "+x.status);return{type:y.type,stringContents:x.responseText}},revive:function(y){var x=y.type,P=y.stringContents;return new Blob([he(P)],{type:x})},replaceAsync:function(y){return new Me.Promise(function(x,P){var $=new FileReader;$.addEventListener("load",function(){x({type:y.type,stringContents:$.result})}),$.addEventListener("error",function(){P($.error)}),$.readAsBinaryString(y)})}}}].concat(typeof Map=="function"?_:[],typeof Set=="function"?B:[],typeof ArrayBuffer=="function"?X:[],typeof Uint8Array=="function"?me:[],typeof DataView=="function"?le:[],typeof Intl<"u"?fe:[],typeof crypto<"u"?pe:[],typeof BigInt<"u"?[Se,Te]:[])})}),Mo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ys=new Uint8Array(256);for(var $l=0;$l<Mo.length;$l++)ys[Mo.codePointAt($l)]=$l;var Sd=function(e,n,r){r==null&&(r=e.byteLength);for(var i=new Uint8Array(e,0,r),o=i.length,s="",l=0;l<o;l+=3)s+=Mo[i[l]>>2],s+=Mo[(i[l]&3)<<4|i[l+1]>>4],s+=Mo[(i[l+1]&15)<<2|i[l+2]>>6],s+=Mo[i[l+2]&63];return o%3===2?s=s.slice(0,-1)+"=":o%3===1&&(s=s.slice(0,-2)+"=="),s},Vy=function(e){var n=e.length,r=e.length*.75,i=0,o,s,l,a;e[e.length-1]==="="&&(r--,e[e.length-2]==="="&&r--);for(var c=new ArrayBuffer(r),u=new Uint8Array(c),d=0;d<n;d+=4)o=ys[e.codePointAt(d)],s=ys[e.codePointAt(d+1)],l=ys[e.codePointAt(d+2)],a=ys[e.codePointAt(d+3)],u[i++]=o<<2|s>>4,u[i++]=(s&15)<<4|l>>2,u[i++]=(l&3)<<6|a&63;return c},Cx=typeof self>"u"?global:self,jy={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(t){var e=t,n=Cx[e];n&&(jy[t.toLowerCase()+"2"]={test:function(r){return xc.toStringTag(r)===e},replace:function(r){var i=r.buffer,o=r.byteOffset,s=r.length;return{buffer:i,byteOffset:o,length:s}},revive:function(r){var i=r.buffer,o=r.byteOffset,s=r.length;return new n(i,o,s)}})});var Ox={arraybuffer:{test:function(t){return xc.toStringTag(t)==="ArrayBuffer"},replace:function(t){return Sd(t,0,t.byteLength)},revive:function(t){var e=Vy(t);return e}}},Yn=new xc().register(xx),Ex="FileReaderSync"in self,La=[],ca=0;Yn.register([Ox,jy,{blob2:{test:function(t){return xc.toStringTag(t)==="Blob"},replace:function(t){if(t.isClosed)throw new Error("The Blob is closed");if(Ex){var e=Fy(t,"binary"),n=Sd(e,0,e.byteLength);return{type:t.type,data:n}}else{La.push(t);var r={type:t.type,data:{start:ca,end:ca+t.size}};return ca+=t.size,r}},finalize:function(t,e){t.data=Sd(e,0,e.byteLength)},revive:function(t){var e=t.type,n=t.data;return new Blob([Vy(n)],{type:e})}}}]);Yn.mustFinalize=function(){return La.length>0};Yn.finalize=function(t){return Ci(void 0,void 0,void 0,function(){var e,n,r,i,o,s,l,a,c,u,d,h;return ur(this,function(m){switch(m.label){case 0:return[4,Ly(new Blob(La),"binary")];case 1:if(e=m.sent(),t){for(n=0,r=t;n<r.length;n++)if(i=r[n],i.$types){o=i.$types,s=o.$,s&&(o=o.$);for(l in o)a=o[l],c=Yn.types[a],c&&c.finalize&&(u=jt.getByKeyPath(i,s?"$."+l:l),c.finalize(u,e.slice((d=u.data)===null||d===void 0?void 0:d.start,(h=u.data)===null||h===void 0?void 0:h.end)))}}return La=[],ca=0,[2]}})})};var Tx=2e3;function Ax(t,e){return Ci(this,void 0,void 0,function(){function n(){return Ci(this,void 0,void 0,function(){var d,h,m,g,b,S,O,A,N,R;return ur(this,function(D){switch(D.label){case 0:return[4,Promise.all(i.map(function(F){return F.count()}))];case 1:d=D.sent(),d.forEach(function(F,j){return s[j].rowCount=F}),u.totalRows=d.reduce(function(F,j){return F+j}),h=JSON.stringify(a,void 0,l?2:void 0),m=h.lastIndexOf("]"),g=h.substring(0,m),o.push(g),b=e.filter,S=e.transform,O=function(F){var j,K,E,k,V,C,ue,Z,xe,ye,Q,Ae;return ur(this,function(Qe){switch(Qe.label){case 0:j=t.table(F),K=j.schema.primKey,E=!!K.keyPath,k=e.numRowsPerChunk||Tx,V=E?{tableName:j.name,inbound:!0,rows:[]}:{tableName:j.name,inbound:!1,rows:[]},C=JSON.stringify(V,void 0,l?2:void 0),l&&(C=C.split(`
`).join(`
    `)),ue=C.lastIndexOf("]"),o.push(C.substring(0,ue)),Z=null,xe=0,ye=!0,Q=function(){var Ue,rt,ht,Lt,Me,z,et,At,H,z;return ur(this,function(q){switch(q.label){case 0:return c&&jt.ignoreTransaction(function(){return c(u)}),Ue=Z==null?j.limit(k):j.where(":id").above(Z).limit(k),[4,Ue.toArray()];case 1:return rt=q.sent(),rt.length===0?[2,"break"]:(Z!=null&&xe>0&&(o.push(","),l&&o.push(`
      `)),ye=rt.length===k,E?(ht=b?rt.filter(function(W){return b(F,W)}):rt,Lt=S?ht.map(function(W){return S(F,W).value}):ht,Me=Lt.map(function(W){return Yn.encapsulate(W)}),Yn.mustFinalize()?[4,jt.waitFor(Yn.finalize(Me))]:[3,3]):[3,4]);case 2:q.sent(),q.label=3;case 3:return z=JSON.stringify(Me,void 0,l?2:void 0),l&&(z=z.split(`
`).join(`
      `)),o.push(new Blob([z.substring(1,z.length-1)])),xe=Lt.length,Z=rt.length>0?jt.getByKeyPath(rt[rt.length-1],K.keyPath):null,[3,8];case 4:return[4,Ue.primaryKeys()];case 5:return et=q.sent(),At=et.map(function(W,ae){return[W,rt[ae]]}),b&&(At=At.filter(function(W){var ae=W[0],T=W[1];return b(F,T,ae)})),S&&(At=At.map(function(W){var ae=W[0],T=W[1],_=S(F,T,ae);return[_.key,_.value]})),H=At.map(function(W){return Yn.encapsulate(W)}),Yn.mustFinalize()?[4,jt.waitFor(Yn.finalize(H))]:[3,7];case 6:q.sent(),q.label=7;case 7:z=JSON.stringify(H,void 0,l?2:void 0),l&&(z=z.split(`
`).join(`
      `)),o.push(new Blob([z.substring(1,z.length-1)])),xe=At.length,Z=et.length>0?et[et.length-1]:null,q.label=8;case 8:return u.completedRows+=rt.length,[2]}})},Qe.label=1;case 1:return ye?[5,Q()]:[3,3];case 2:return Ae=Qe.sent(),Ae==="break"?[3,3]:[3,1];case 3:return o.push(C.substr(ue)),u.completedTables+=1,u.completedTables<u.totalTables&&o.push(","),[2]}})},A=0,N=s,D.label=2;case 2:return A<N.length?(R=N[A].name,[5,O(R)]):[3,5];case 3:D.sent(),D.label=4;case 4:return A++,[3,2];case 5:return o.push(h.substr(m)),u.done=!0,c&&jt.ignoreTransaction(function(){return c(u)}),[2]}})})}var r,i,o,s,l,a,c,u;return ur(this,function(d){switch(d.label){case 0:e=e||{},r=e.skipTables?e.skipTables:[],i=t.tables.filter(function(h){return!r.includes(h.name)}),o=[],s=i.map(function(h){return{name:h.name,schema:kx(h),rowCount:0}}),l=e.prettyJson,a={formatName:"dexie",formatVersion:1,data:{databaseName:t.name,databaseVersion:t.verno,tables:s,data:[]}},c=e.progressCallback,u={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:s.length},d.label=1;case 1:return d.trys.push([1,,6,7]),e.noTransaction?[4,n()]:[3,3];case 2:return d.sent(),[3,5];case 3:return[4,t.transaction("r",t.tables,n)];case 4:d.sent(),d.label=5;case 5:return[3,7];case 6:return Yn.finalize(),[7];case 7:return[2,new Blob(o,{type:"text/json"})]}})})}var Mx=1,_x={Stream:function(){}},Nx=Of(function(t,e){(function(n){var r=typeof process=="object"&&yp?yp:self;n.parser=function(E){return new m(E)},n.CParser=m,n.CStream=b,n.createStream=g,n.MAX_BUFFER_LENGTH=10*1024*1024,n.DEBUG=r.CDEBUG==="debug",n.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",n.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var i={textNode:void 0,numberNode:""},o=n.EVENTS.filter(function(E){return E!=="error"&&E!=="end"}),s=0,l;n.STATE={BEGIN:s++,VALUE:s++,OPEN_OBJECT:s++,CLOSE_OBJECT:s++,OPEN_ARRAY:s++,CLOSE_ARRAY:s++,TEXT_ESCAPE:s++,STRING:s++,BACKSLASH:s++,END:s++,OPEN_KEY:s++,CLOSE_KEY:s++,TRUE:s++,TRUE2:s++,TRUE3:s++,FALSE:s++,FALSE2:s++,FALSE3:s++,FALSE4:s++,NULL:s++,NULL2:s++,NULL3:s++,NUMBER_DECIMAL_POINT:s++,NUMBER_DIGIT:s++};for(var a in n.STATE)n.STATE[n.STATE[a]]=a;s=n.STATE;const c={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(E){function k(){this.__proto__=E}return k.prototype=E,new k}),Object.getPrototypeOf||(Object.getPrototypeOf=function(E){return E.__proto__}),Object.keys||(Object.keys=function(E){var k=[];for(var V in E)E.hasOwnProperty(V)&&k.push(V);return k});function u(E){var k=Math.max(n.MAX_BUFFER_LENGTH,10),V=0;for(var C in i){var ue=E[C]===void 0?0:E[C].length;if(ue>k)switch(C){case"text":closeText(E);break;default:D(E,"Max buffer length exceeded: "+C)}V=Math.max(V,ue)}E.bufferCheckPosition=n.MAX_BUFFER_LENGTH-V+E.position}function d(E){for(var k in i)E[k]=i[k]}var h=/[\\"\n]/g;function m(E){if(!(this instanceof m))return new m(E);var k=this;d(k),k.bufferCheckPosition=n.MAX_BUFFER_LENGTH,k.q=k.c=k.p="",k.opt=E||{},k.closed=k.closedRoot=k.sawRoot=!1,k.tag=k.error=null,k.state=s.BEGIN,k.stack=new Array,k.position=k.column=0,k.line=1,k.slashed=!1,k.unicodeI=0,k.unicodeS=null,k.depth=0,S(k,"onready")}m.prototype={end:function(){F(this)},write:K,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{l=_x.Stream}catch{l=function(){}}function g(E){return new b(E)}function b(E){if(!(this instanceof b))return new b(E);this._parser=new m(E),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var k=this;l.apply(k),this._parser.onend=function(){k.emit("end")},this._parser.onerror=function(V){k.emit("error",V),k._parser.error=null},o.forEach(function(V){Object.defineProperty(k,"on"+V,{get:function(){return k._parser["on"+V]},set:function(C){if(!C)return k.removeAllListeners(V),k._parser["on"+V]=C,C;k.on(V,C)},enumerable:!0,configurable:!1})})}b.prototype=Object.create(l.prototype,{constructor:{value:b}}),b.prototype.write=function(E){E=new Buffer(E);for(var k=0;k<E.length;k++){var V=E[k];if(this.bytes_remaining>0){for(var C=0;C<this.bytes_remaining;C++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+C]=E[C];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,k=k+C-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&V>=128)if(V>=194&&V<=223&&(this.bytes_in_sequence=2),V>=224&&V<=239&&(this.bytes_in_sequence=3),V>=240&&V<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+k>E.length){for(var ue=0;ue<=E.length-1-k;ue++)this.temp_buffs[this.bytes_in_sequence][ue]=E[k+ue];return this.bytes_remaining=k+this.bytes_in_sequence-E.length,!0}else{this.string=E.slice(k,k+this.bytes_in_sequence).toString(),k=k+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var Z=k;Z<E.length&&!(E[Z]>=128);Z++);this.string=E.slice(k,Z).toString(),this._parser.write(this.string),this.emit("data",this.string),k=Z-1}},b.prototype.end=function(E){return E&&E.length&&this._parser.write(E.toString()),this._parser.end(),!0},b.prototype.on=function(E,k){var V=this;return!V._parser["on"+E]&&o.indexOf(E)!==-1&&(V._parser["on"+E]=function(){var C=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);C.splice(0,0,E),V.emit.apply(V,C)}),l.prototype.on.call(V,E,k)},b.prototype.destroy=function(){d(this._parser),this.emit("close")};function S(E,k,V){n.INFO&&console.log("-- emit",k,V),E[k]&&E[k](V)}function O(E,k,V){A(E),S(E,k,V)}function A(E,k){E.textNode=R(E.opt,E.textNode),E.textNode!==void 0&&S(E,k||"onvalue",E.textNode),E.textNode=void 0}function N(E){E.numberNode&&S(E,"onvalue",parseFloat(E.numberNode)),E.numberNode=""}function R(E,k){return k===void 0||(E.trim&&(k=k.trim()),E.normalize&&(k=k.replace(/\s+/g," "))),k}function D(E,k){return A(E),k+=`
Line: `+E.line+`
Column: `+E.column+`
Char: `+E.c,k=new Error(k),E.error=k,S(E,"onerror",k),E}function F(E){return(E.state!==s.VALUE||E.depth!==0)&&D(E,"Unexpected end"),A(E),E.c="",E.closed=!0,S(E,"onend"),m.call(E,E.opt),E}function j(E){return E===c.carriageReturn||E===c.lineFeed||E===c.space||E===c.tab}function K(E){var k=this;if(this.error)throw this.error;if(k.closed)return D(k,"Cannot write after close. Assign an onready handler.");if(E===null)return F(k);var V=0,C=E.charCodeAt(0),ue=k.p;for(n.DEBUG&&console.log("write -> ["+E+"]");C&&(ue=C,k.c=C=E.charCodeAt(V++),ue!==C?k.p=ue:ue=k.p,!!C);)switch(n.DEBUG&&console.log(V,C,n.STATE[k.state]),k.position++,C===c.lineFeed?(k.line++,k.column=0):k.column++,k.state){case s.BEGIN:C===c.openBrace?k.state=s.OPEN_OBJECT:C===c.openBracket?k.state=s.OPEN_ARRAY:j(C)||D(k,"Non-whitespace before {[.");continue;case s.OPEN_KEY:case s.OPEN_OBJECT:if(j(C))continue;if(k.state===s.OPEN_KEY)k.stack.push(s.CLOSE_KEY);else if(C===c.closeBrace){S(k,"onopenobject"),this.depth++,S(k,"oncloseobject"),this.depth--,k.state=k.stack.pop()||s.VALUE;continue}else k.stack.push(s.CLOSE_OBJECT);C===c.doubleQuote?k.state=s.STRING:D(k,'Malformed object key should start with "');continue;case s.CLOSE_KEY:case s.CLOSE_OBJECT:if(j(C))continue;k.state,s.CLOSE_KEY,C===c.colon?(k.state===s.CLOSE_OBJECT?(k.stack.push(s.CLOSE_OBJECT),A(k,"onopenobject"),this.depth++):A(k,"onkey"),k.state=s.VALUE):C===c.closeBrace?(O(k,"oncloseobject"),this.depth--,k.state=k.stack.pop()||s.VALUE):C===c.comma?(k.state===s.CLOSE_OBJECT&&k.stack.push(s.CLOSE_OBJECT),A(k),k.state=s.OPEN_KEY):D(k,"Bad object");continue;case s.OPEN_ARRAY:case s.VALUE:if(j(C))continue;if(k.state===s.OPEN_ARRAY)if(S(k,"onopenarray"),this.depth++,k.state=s.VALUE,C===c.closeBracket){S(k,"onclosearray"),this.depth--,k.state=k.stack.pop()||s.VALUE;continue}else k.stack.push(s.CLOSE_ARRAY);C===c.doubleQuote?k.state=s.STRING:C===c.openBrace?k.state=s.OPEN_OBJECT:C===c.openBracket?k.state=s.OPEN_ARRAY:C===c.t?k.state=s.TRUE:C===c.f?k.state=s.FALSE:C===c.n?k.state=s.NULL:C===c.minus?k.numberNode+="-":c._0<=C&&C<=c._9?(k.numberNode+=String.fromCharCode(C),k.state=s.NUMBER_DIGIT):D(k,"Bad value");continue;case s.CLOSE_ARRAY:if(C===c.comma)k.stack.push(s.CLOSE_ARRAY),A(k,"onvalue"),k.state=s.VALUE;else if(C===c.closeBracket)O(k,"onclosearray"),this.depth--,k.state=k.stack.pop()||s.VALUE;else{if(j(C))continue;D(k,"Bad array")}continue;case s.STRING:k.textNode===void 0&&(k.textNode="");var Z=V-1,xe=k.slashed,ye=k.unicodeI;e:for(;;){for(n.DEBUG&&console.log(V,C,n.STATE[k.state],xe);ye>0;)if(k.unicodeS+=String.fromCharCode(C),C=E.charCodeAt(V++),k.position++,ye===4?(k.textNode+=String.fromCharCode(parseInt(k.unicodeS,16)),ye=0,Z=V-1):ye++,!C)break e;if(C===c.doubleQuote&&!xe){k.state=k.stack.pop()||s.VALUE,k.textNode+=E.substring(Z,V-1),k.position+=V-1-Z;break}if(C===c.backslash&&!xe&&(xe=!0,k.textNode+=E.substring(Z,V-1),k.position+=V-1-Z,C=E.charCodeAt(V++),k.position++,!C))break;if(xe){if(xe=!1,C===c.n?k.textNode+=`
`:C===c.r?k.textNode+="\r":C===c.t?k.textNode+="	":C===c.f?k.textNode+="\f":C===c.b?k.textNode+="\b":C===c.u?(ye=1,k.unicodeS=""):k.textNode+=String.fromCharCode(C),C=E.charCodeAt(V++),k.position++,Z=V-1,C)continue;break}h.lastIndex=V;var Q=h.exec(E);if(Q===null){V=E.length+1,k.textNode+=E.substring(Z,V-1),k.position+=V-1-Z;break}if(V=Q.index+1,C=E.charCodeAt(Q.index),!C){k.textNode+=E.substring(Z,V-1),k.position+=V-1-Z;break}}k.slashed=xe,k.unicodeI=ye;continue;case s.TRUE:C===c.r?k.state=s.TRUE2:D(k,"Invalid true started with t"+C);continue;case s.TRUE2:C===c.u?k.state=s.TRUE3:D(k,"Invalid true started with tr"+C);continue;case s.TRUE3:C===c.e?(S(k,"onvalue",!0),k.state=k.stack.pop()||s.VALUE):D(k,"Invalid true started with tru"+C);continue;case s.FALSE:C===c.a?k.state=s.FALSE2:D(k,"Invalid false started with f"+C);continue;case s.FALSE2:C===c.l?k.state=s.FALSE3:D(k,"Invalid false started with fa"+C);continue;case s.FALSE3:C===c.s?k.state=s.FALSE4:D(k,"Invalid false started with fal"+C);continue;case s.FALSE4:C===c.e?(S(k,"onvalue",!1),k.state=k.stack.pop()||s.VALUE):D(k,"Invalid false started with fals"+C);continue;case s.NULL:C===c.u?k.state=s.NULL2:D(k,"Invalid null started with n"+C);continue;case s.NULL2:C===c.l?k.state=s.NULL3:D(k,"Invalid null started with nu"+C);continue;case s.NULL3:C===c.l?(S(k,"onvalue",null),k.state=k.stack.pop()||s.VALUE):D(k,"Invalid null started with nul"+C);continue;case s.NUMBER_DECIMAL_POINT:C===c.period?(k.numberNode+=".",k.state=s.NUMBER_DIGIT):D(k,"Leading zero not followed by .");continue;case s.NUMBER_DIGIT:c._0<=C&&C<=c._9?k.numberNode+=String.fromCharCode(C):C===c.period?(k.numberNode.indexOf(".")!==-1&&D(k,"Invalid number has two dots"),k.numberNode+="."):C===c.e||C===c.E?((k.numberNode.indexOf("e")!==-1||k.numberNode.indexOf("E")!==-1)&&D(k,"Invalid number has two exponential"),k.numberNode+="e"):C===c.plus||C===c.minus?(ue===c.e||ue===c.E||D(k,"Invalid symbol in number"),k.numberNode+=String.fromCharCode(C)):(N(k),V--,k.state=k.stack.pop()||s.VALUE);continue;default:D(k,"Unknown state: "+k.state)}return k.position>=k.bufferCheckPosition&&u(k),k}})(e)});function Px(t){var e=0,n=Ix(),r={pullAsync:function(i){return Ci(this,void 0,void 0,function(){var o,s,l;return ur(this,function(a){switch(a.label){case 0:return o=t.slice(e,e+i),e+=i,[4,Ly(o,"text")];case 1:return s=a.sent(),l=n.write(s),r.result=l||{},[2,l]}})})},pullSync:function(i){var o=t.slice(e,e+i);e+=i;var s=Fy(o,"text"),l=n.write(s);return r.result=l||{},l},done:function(){return n.done()},eof:function(){return e>=t.size},result:{}};return r}function Ix(t){var e=Nx.parser(),n=0,r,i=[],o,s,l=!1,a=!1;return e.onopenobject=function(c){var u={};u.incomplete=!0,r||(r=u),o&&(i.push([s,o,a]),a?o.push(u):o[s]=u),o=u,s=c,a=!1,++n},e.onkey=function(c){return s=c},e.onvalue=function(c){return a?o.push(c):o[s]=c},e.oncloseobject=function(){var c;delete o.incomplete,s=null,--n===0?l=!0:(c=i.pop(),s=c[0],o=c[1],a=c[2])},e.onopenarray=function(){var c=[];c.incomplete=!0,r||(r=c),o&&(i.push([s,o,a]),a?o.push(c):o[s]=c),o=c,a=!0,s=null,++n},e.onclosearray=function(){var c;delete o.incomplete,s=null,--n===0?l=!0:(c=i.pop(),s=c[0],o=c[1],a=c[2])},{write:function(c){return e.write(c),r},done:function(){return l}}}var Hy=1024;function zy(t,e){return Ci(this,void 0,void 0,function(){var n,r,i,o;return ur(this,function(s){switch(s.label){case 0:return e=e||{},n=e.chunkSizeBytes||Hy*1024,[4,Uy(t,n)];case 1:return r=s.sent(),i=r.result.data,o=new jt(e.name!==void 0?e.name:i.databaseName),o.version(i.databaseVersion).stores(Sx(i)),[4,Ky(o,r,e.name!==void 0?Ba(Ba({},e),{acceptNameDiff:!0}):e)];case 2:return s.sent(),[2,o]}})})}function Ky(t,e,n){return Ci(this,void 0,void 0,function(){function r(){return Ci(this,void 0,void 0,function(){var b,S,O,A,N;return ur(this,function(R){switch(R.label){case 0:b=function(D){var F,j,K,E,k,V,C,ue,Z,xe,ye,Q,Ae;return ur(this,function(Qe){switch(Qe.label){case 0:if(c.includes(D.tableName))return[2,"continue"];if(!D.rows)return[2,"break"];if(!D.rows.incomplete&&D.rows.length===0)return[2,"continue"];if(u&&jt.ignoreTransaction(function(){return u(d)}),F=D.tableName,j=t.table(F),K=a.tables.filter(function(Ue){return Ue.name===F})[0].schema,!j){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(D.tableName," is missing in installed database"))}if(!n.acceptChangedPrimaryKey&&K.split(",")[0]!=j.schema.primKey.src)throw new Error("Primary key differs for table ".concat(D.tableName,". "));for(E=D.rows,k=[],V=0;V<E.length&&(C=E[V],!C.incomplete);V++)k.push(Yn.revive(C));return ue=n.filter,Z=n.transform,xe=ue?D.inbound?k.filter(function(Ue){return ue(F,Ue)}):k.filter(function(Ue){var rt=Ue[0],ht=Ue[1];return ue(F,ht,rt)}):k,Z&&(xe=xe.map(D.inbound?function(Ue){return Z(F,Ue).value}:function(Ue){var rt=Ue[0],ht=Ue[1],Lt=Z(F,ht,rt);return[Lt.key,Lt.value]})),ye=D.inbound?[void 0,xe]:[xe.map(function(Ue){return Ue[0]}),k.map(function(Ue){return Ue[1]})],Q=ye[0],Ae=ye[1],n.overwriteValues?[4,j.bulkPut(Ae,Q)]:[3,2];case 1:return Qe.sent(),[3,4];case 2:return[4,j.bulkAdd(Ae,Q)];case 3:Qe.sent(),Qe.label=4;case 4:return d.completedRows+=k.length,k.incomplete||(d.completedTables+=1),E.splice(0,k.length),[2]}})},S=0,O=a.data,R.label=1;case 1:return S<O.length?(A=O[S],[5,b(A)]):[3,4];case 2:if(N=R.sent(),N==="break")return[3,4];R.label=3;case 3:return S++,[3,1];case 4:for(;a.data.length>0&&a.data[0].rows&&!a.data[0].rows.incomplete;)a.data.splice(0,1);return!o.done()&&!o.eof()?l?(o.pullSync(i),[3,7]):[3,5]:[3,8];case 5:return[4,jt.waitFor(o.pullAsync(i))];case 6:R.sent(),R.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var i,o,s,l,a,c,u,d,h,m,g;return ur(this,function(b){switch(b.label){case 0:return n=n||{},i=n.chunkSizeBytes||Hy*1024,[4,Uy(e,i)];case 1:if(o=b.sent(),s=o.result,l="FileReaderSync"in self,a=s.data,c=n.skipTables?n.skipTables:[],!n.acceptNameDiff&&t.name!==a.databaseName)throw new Error("Name differs. Current database name is ".concat(t.name," but export is ").concat(a.databaseName));if(!n.acceptVersionDiff&&t.verno!==a.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(t.verno," but export is ").concat(a.databaseVersion));if(u=n.progressCallback,d={done:!1,completedRows:0,completedTables:0,totalRows:a.tables.reduce(function(S,O){return S+O.rowCount},0),totalTables:a.tables.length},u&&jt.ignoreTransaction(function(){return u(d)}),!n.clearTablesBeforeImport)return[3,5];h=0,m=t.tables,b.label=2;case 2:return h<m.length?(g=m[h],c.includes(g.name)?[3,4]:[4,g.clear()]):[3,5];case 3:b.sent(),b.label=4;case 4:return h++,[3,2];case 5:return n.noTransaction?[4,r()]:[3,7];case 6:return b.sent(),[3,9];case 7:return[4,t.transaction("rw",t.tables,r)];case 8:b.sent(),b.label=9;case 9:return d.done=!0,u&&jt.ignoreTransaction(function(){return u(d)}),[2]}})})}function Uy(t,e){return Ci(this,void 0,void 0,function(){var n,r;return ur(this,function(i){switch(i.label){case 0:n="slice"in t?Px(t):t,i.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(e)];case 2:return i.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(r=n.result,!r||r.formatName!="dexie")throw new Error("Given file is not a dexie export");if(r.formatVersion>Mx)throw new Error("Format version ".concat(r.formatVersion," not supported"));if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}})})}jt.prototype.export=function(t){return Ax(this,t)};jt.prototype.import=function(t,e){return Ky(this,t,e)};jt.import=function(t,e){return zy(t,e)};function Dx(t){return ig()?(gw(t),!0):!1}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function $x(t,e){const n=sf(e==null?void 0:e.initialValue),r=t.subscribe({next:i=>n.value=i,error:e==null?void 0:e.onError});return Dx(()=>{r.unsubscribe()}),n}let Rl;const Rx=new Uint8Array(16);function Bx(){if(!Rl&&(Rl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Rl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Rl(Rx)}const Gt=[];for(let t=0;t<256;++t)Gt.push((t+256).toString(16).slice(1));function Lx(t,e=0){return Gt[t[e+0]]+Gt[t[e+1]]+Gt[t[e+2]]+Gt[t[e+3]]+"-"+Gt[t[e+4]]+Gt[t[e+5]]+"-"+Gt[t[e+6]]+Gt[t[e+7]]+"-"+Gt[t[e+8]]+Gt[t[e+9]]+"-"+Gt[t[e+10]]+Gt[t[e+11]]+Gt[t[e+12]]+Gt[t[e+13]]+Gt[t[e+14]]+Gt[t[e+15]]}const Fx=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),bp={randomUUID:Fx};function Vx(t,e,n){if(bp.randomUUID&&!e&&!t)return bp.randomUUID();t=t||{};const r=t.random||(t.rng||Bx)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return Lx(r)}const jx=async t=>await t.export(),Hx={data(){return{dbRef:null,db:null,databaseName:null,dblist:[],useObservable:$x,liveQuery:By,uuid:Vx,syncdb:{},DBstores:{Settings:"uuid, settings, lastupdated",Writer:"uuid, title, description, files, lastupdated",Cards:"uuid, title,description,content,style,labels,options,lastupdated",Files:"uuid, writerid, title, content, lastupdated",Snowflake:"uuid, title, description,content,lastupdated",Timeline:"uuid, title, description,content,lastupdated",Gridplanner:"uuid, title, description,content,lastupdated",Mindmap:"uuid, title, description,content,lastupdated",ImageLibrary:"uuid, title, base64"}}},methods:{async getDatabases(){},async initDatabase(){console.log(this.databaseName),this.databaseName||(console.log("New Db Created"),this.databaseName=this.uuid()),this.db||(console.log("Creating new database"),this.db=await new jt(this.databaseName),console.log("Creating new stores"),this.db.version(1).stores(this.DBstores));let t=await this.db.Settings.toArray(),e={};if(t){if(t.length)e=t[0],this.dbRef=e.uuid;else{let n=JSON.parse(JSON.stringify(this.$root.SettingsTemplate));n.uuid=this.$root.uuid(),n.ProjectName="New Project",await this.$root.AddRecord("Settings",n),this.dbRef=n.uuid}this.syncdb.Settings=await this.useObservable(this.liveQuery(async()=>await this.db.Settings.get(this.dbRef))),this.syncdb.Cards=await this.useObservable(this.liveQuery(async()=>await this.db.Cards.toArray())),this.syncdb.Files=await this.useObservable(this.liveQuery(async()=>await this.db.Files.toArray())),this.syncdb.Gridplanner=await this.useObservable(this.liveQuery(async()=>await this.db.Gridplanner.toArray())),this.syncdb.ImageLibrary=await this.useObservable(this.liveQuery(async()=>await this.db.ImageLibrary.toArray())),this.syncdb.Mindmap=await this.useObservable(this.liveQuery(async()=>await this.db.Mindmap.toArray())),this.syncdb.Snowflake=await this.useObservable(this.liveQuery(async()=>await this.db.Snowflake.toArray())),this.syncdb.Timeline=await this.useObservable(this.liveQuery(async()=>await this.db.Timeline.toArray())),this.syncdb.Writer=await this.useObservable(this.liveQuery(async()=>await this.db.Writer.toArray()))}},async dbImport(t){this.databaseName=t.data.databaseName;const e=new Blob([JSON.stringify(t)],{type:"text/json;charset=utf-8"});this.db=await zy(e,{clearTablesBeforeImport:!0}),await this.initDatabase()},async dbExport(){const t=await new jt(this.databaseName).open(),e=await jx(t);return t.close(),e},async getImage(t){return await this.$root.db.ImageLibrary.get(t)},async AddRecord(t,e){return e.lastupdated=Date.now(),await this.db[t].add(e)},async UpdateRecord(t,e,n){return n.uuid=e,n.lastupdated=Date.now(),await this.db[t].put(JSON.parse(JSON.stringify(n)))},async DeleteRecord(t,e){return await this.db[t].delete(e)},clearDatabase(){this.$root.db.Settings.clear(),this.$root.db.Writer.clear(),this.$root.db.Cards.clear(),this.$root.db.Files.clear(),this.$root.db.Mindmap.clear(),this.$root.db.ImageLibrary.clear(),this.$root.db.Gridplanner.clear(),this.$root.db.Snowflake.clear(),this.$root.db.Timeline.clear()},async closeProject(){this.$swal({title:"Are you sure?",text:"This will close the project any unsaved changes will be lost!",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, close it!"}).then(async t=>{t.isConfirmed&&(window.removeEventListener("beforeunload",this.$root.unloadEvent),this.dbRef=null,this.$root.clearDatabase(),await this.$root.db.delete(),location.reload())})},async closeAndDeleteDatabase(){this.db&&(await this.db.close(),await jt.delete(this.databaseName),console.log(`Database ${this.databaseName} closed and deleted.`))}},async mounted(){this.databaseName?this.initDatabase():this.getDatabases(),console.log("closing db",this.$root.mainwindow),this.$root.mainwindow&&(console.log("closing db"),window.addEventListener("beforeunload",this.closeAndDeleteDatabase))},beforeDestroy(){console.log("closing db",this.$root.mainwindow),this.$root.mainwindow&&(console.log("closing db"),window.addEventListener("beforeunload",this.closeAndDeleteDatabase))}},zx={data(){return{SettingsTemplate:{documentprefs:{align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-align")),fontsize:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-fontsize")),lspacing:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-lspacing")),indentation:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-indentation")),pspacing:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-pspacing")),page:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-page")),font:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-font")),color:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-color")),bgcolor:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-bgcolor")),h1align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h1align")),h2align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h2align")),h3align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h3align")),h4align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h4align")),distractionfree_font:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--distractionfree-font")),distractionfree_bg:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--distractionfree-bg")),distractionfree_fg:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--distractionfree-fg")),typesound:!1,caretfocus:!1}},writerTemplate:{title:"Another Great Novel",author:"A.N. Author",description:" ... ",files:[]},fileTemplate:{title:"New Section",content:"",notes:[]}}},methods:{dotrim(t){return t[0]===" "&&(t=t.substring(1)),t},async makeNewCard(t){let e=this.$root.uuid();t&&(e=t);let n={};n.uuid=e,n.title="",n.description="",n.showdesc=!1,n.content="",n.labels=[],n.images=[],n.style="",n.options={},n.color="cardcolor0",console.log(n),await this.$root.AddRecord("Cards",n),this.$root.modal=!0,this.$root.tools.cards.selected=n},async makeMindmap(){let t=this.$root.uuid(),e={};e.uuid=t,e.title="New Mindmap",e.description="",e.content={links:[],nodes:{}},await this.$root.AddRecord("Mindmap",e),this.$root.tools.mindmap.selected=e},async makeTimeline(){let t=this.$root.uuid(),e={};e.uuid=t,e.title="",e.description="",e.content={items:[]},await this.$root.AddRecord("Timeline",e),this.$root.tools.timeline.selected=e},async makeGridplanner(){let t=this.$root.uuid(),e={};e.uuid=t,e.title="",e.description="",e.content={headers:[],rows:[]},await this.$root.AddRecord("Gridplanner",e),this.$root.tools.gridplanner.selected=e},async makeSnowflake(){let t=this.$root.uuid(),e={};e.uuid=t,e.title="",e.description="",e.content=[],await this.$root.AddRecord("Snowflake",e),this.$root.tools.snowflake.selected=e}}},Kx={data(){return{}},methods:{handleKeyPress(t){this.$root.databaseName&&t.keyCode==83&&(navigator.userAgent.includes("Mac")?t.metaKey:t.ctrlKey)&&(t.preventDefault(),this.saveFile())},async openFile(){try{[this.$root.fileHandle]=await window.showOpenFilePicker({types:[{description:"Wavemaker Cards File",accept:{"application/json":[".wmc"]},extensions:["wmc"]}]});const e=await(await this.$root.fileHandle.getFile()).text();this.$root.jsonData=JSON.parse(e),this.$root.dbImport(this.$root.jsonData)}catch(t){console.error("Error opening file:",t)}},async snapShot(){let t=this.sanitizeFilename(this.$root.syncdb.Settings.ProjectName);const n=await(await this.$root.dbExport()).text();this.$root.jsonData=JSON.parse(n);const r=new Blob([JSON.stringify(this.$root.jsonData,null,2)],{type:"application/json"}),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)},sanitizeFilename(t){const e=new Date,n=`${e.getDate()}-${e.getMonth()+1}-${e.getFullYear()}-${e.getHours()}-${e.getMinutes()}-${e.getSeconds()}`;return t.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")+`-${n}.wmc`},async saveFile(){const e=await(await this.$root.dbExport()).text();this.$root.jsonData=JSON.parse(e);try{this.$root.fileHandle||(this.$root.fileHandle=await window.showSaveFilePicker({suggestedName:"untitled.wmc",types:[{description:"Wavemaker Cards File",accept:{"application/json":[".wmc"]}}]}));const n=await this.$root.fileHandle.createWritable();await n.write(JSON.stringify(this.$root.jsonData,null,2)),await n.close(),this.$swal({title:"Your File Was saved",text:"The file was saved successfully",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK"})}catch{this.$swal({title:"Your file was not saved",text:"Please try again, or use other export tools to make a backup.",icon:"error",confirmButtonColor:"#3085d6",confirmButtonText:"OK"})}},async clearFile(){this.$root.closeProject()}},created(){"launchQueue"in window&&"files"in window.LaunchParams.prototype&&window.launchQueue.setConsumer(async t=>{if(!t.files.length)return;this.$root.fileHandle=t.files[0];const n=await(await this.$root.fileHandle.getFile()).text();this.$root.jsonData=JSON.parse(n),await this.$root.dbImport(this.$root.jsonData)})},mounted(){window.addEventListener("keydown",this.handleKeyPress)},beforeDestroy(){window.removeEventListener("keydown",this.handleKeyPress)}},Ux={data(){return{windowID:null,parentID:null,mainwindow:!0,childWindows:[]}},methods:{openNewWindow(){let t="",e="";this.$root.currentTool&&(t=this.$root.currentTool,this.$root.tools[this.$root.currentTool].selected&&(e=this.$root.tools[this.$root.currentTool].selected));let n=window.location.href;n=n+"?parentid="+this.windowID,n=n+"&dbname="+this.$root.databaseName,n=n+"&tool="+t,n=n+"&selected="+e;const r=window.open(n,"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=800,height=600");this.childWindows.push(r),r.onload=function(){const i=new URL(r.location);i.search="",r.history.replaceState(null,"",i)}},closeChildWindows(){this.childWindows.forEach(t=>{t&&!t.closed&&t.close()}),this.childWindows=[]}},async created(){const t=new URLSearchParams(window.location.search);for(const[e,n]of t.entries())console.log(`${e}: ${n}`);if(this.parentID=t.get("parentid"),this.$root.databaseName=t.get("dbname"),this.$root.currentTool=t.get("tool"),this.$root.currentTool){const e=this.$root.currentTool,n=e.charAt(0).toUpperCase()+e.slice(1);let r=t.get("selected");r&&(this.$root.tools[this.$root.currentTool].selected=await this.db[n].get(r))}this.parentID&&(this.mainwindow=!1),this.windowID=this.uuid(),window.addEventListener("beforeunload",this.closeChildWindows)},beforeDestroy(){window.removeEventListener("beforeunload",this.closeChildWindows)}},ft=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},Wx={},qx={xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 453.543 453.543","xml:space":"preserve",class:"logo"};function Jx(t,e){return ie(),we("svg",qx,e[0]||(e[0]=[I("path",{d:"M464.632 212.901 337.566 83.292a55.653 55.653 0 0 0-79.771 0l-126.63 129.386a19.322 19.322 0 0 0 0 27.122l38.359 39.127 25.5 24.232c7.628 7.114 19.18 7.114 26.808 0l51.219-48.242c14.167-13.338 35.744-13.338 49.693 0l51.219 48.242c7.629 7.114 19.18 7.114 26.809 0l25.501-24.232 38.359-38.904c7.193-7.337 7.193-19.563 0-27.122z",class:"logotop",transform:"matrix(.6795 0 0 .6795 21.648 1.33)"},null,-1),I("path",{d:"m58.804 367.853 198.991 202.973a55.657 55.657 0 0 0 79.771 0l198.991-202.973c34.437-35.125 10.244-45.574-15.039-70.029L490.35 267.59c-7.409-7.336-19.18-7.113-26.808 0l-51.218 48.242c-14.169 13.339-35.744 13.339-49.694 0l-51.219-48.242a19.508 19.508 0 0 0-26.809 0l-51.219 48.242c-14.167 13.339-35.744 13.339-49.693 0l-51.219-48.242a19.508 19.508 0 0 0-26.809 0l-28.77 27.123c-26.37 24.899-54.05 36.236-18.088 73.14z",class:"logobtm",transform:"matrix(.6795 0 0 .6795 21.648 1.33)"},null,-1)]))}const Ef=ft(Wx,[["render",Jx],["__scopeId","data-v-c0fdd851"]]),Gx={methods:{update(){this.$root.UpdateRecord("Settings",this.$root.syncdb.Settings.uuid,this.$root.syncdb.Settings)}}},Yx={key:0};function Xx(t,e,n,r,i,o){return this.$root.syncdb.Settings?(ie(),we("span",Yx,[Un(I("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>this.$root.syncdb.Settings.ProjectName=s),placeholder:"Project Name",onBlur:e[1]||(e[1]=s=>o.update())},null,544),[[nr,this.$root.syncdb.Settings.ProjectName]])])):Ke("",!0)}const Wy=ft(Gx,[["render",Xx]]),Zx={components:{Logo:Ef,ProjectName:Wy},methods:{}},Qx={class:"toptoolbar"},eC={class:"floatRight"},tC={key:3};function nC(t,e,n,r,i,o){const s=nt("Logo"),l=nt("ProjectName");return ie(),we("div",Qx,[I("button",{onClick:e[0]||(e[0]=a=>t.$root.currentTool=null),class:"titlebtn"},[wt(s,{style:{width:"30px",height:"30px"}})]),wt(l,{class:"projectname"}),I("span",eC,[t.$root.dbRef?Ke("",!0):(ie(),we("button",{key:0,onClick:e[1]||(e[1]=(...a)=>t.$root.openFileFromGoogleDrive&&t.$root.openFileFromGoogleDrive(...a))},e[8]||(e[8]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[I("title",null,"google-drive"),I("path",{d:"M7.71,3.5L1.15,15L4.58,21L11.13,9.5M9.73,15L6.3,21H19.42L22.85,15M22.28,14L15.42,2H8.58L8.57,2L15.43,14H22.28Z"})],-1)]))),t.$root.dbRef?Ke("",!0):(ie(),we("button",{key:1,onClick:e[2]||(e[2]=(...a)=>t.$root.openFileFromDropBox&&t.$root.openFileFromDropBox(...a))},e[9]||(e[9]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[I("title",null,"dropbox"),I("path",{d:"M3 6.2L8 9.39L13 6.2L8 3L3 6.2M13 6.2L18 9.39L23 6.2L18 3L13 6.2M3 12.55L8 15.74L13 12.55L8 9.35L3 12.55M18 9.35L13 12.55L18 15.74L23 12.55L18 9.35M8.03 16.8L13.04 20L18.04 16.8L13.04 13.61L8.03 16.8Z"})],-1)]))),t.$root.dbRef?Ke("",!0):(ie(),we("button",{key:2,onClick:e[3]||(e[3]=a=>t.$root.openFile())},e[10]||(e[10]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[I("title",null,"open-in-app"),I("path",{d:"M12,10L8,14H11V20H13V14H16M19,4H5C3.89,4 3,4.9 3,6V18A2,2 0 0,0 5,20H9V18H5V8H19V18H15V20H19A2,2 0 0,0 21,18V6A2,2 0 0,0 19,4Z"})],-1)]))),t.$root.dbRef?(ie(),we("span",tC,[I("button",{title:"Open in a new window",onClick:e[4]||(e[4]=a=>t.$root.openNewWindow())},e[11]||(e[11]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[I("title",null,"open-in-app"),I("path",{d:"M12,10L8,14H11V20H13V14H16M19,4H5C3.89,4 3,4.9 3,6V18A2,2 0 0,0 5,20H9V18H5V8H19V18H15V20H19A2,2 0 0,0 21,18V6A2,2 0 0,0 19,4Z"})],-1)])),I("button",{onClick:e[5]||(e[5]=a=>t.$root.snapShot())},e[12]||(e[12]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[I("title",null,"camera-outline"),I("path",{d:"M20,4H16.83L15,2H9L7.17,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6A2,2 0 0,0 20,4M20,18H4V6H8.05L9.88,4H14.12L15.95,6H20V18M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15Z"})],-1)])),I("button",{onClick:e[6]||(e[6]=a=>t.$root.saveFile())},e[13]||(e[13]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[I("title",null,"content-save-outline"),I("path",{d:"M17 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3M19 19H5V5H16.17L19 7.83V19M12 12C10.34 12 9 13.34 9 15S10.34 18 12 18 15 16.66 15 15 13.66 12 12 12M6 6H15V10H6V6Z"})],-1)])),I("button",{onClick:e[7]||(e[7]=a=>t.$root.clearFile())},e[14]||(e[14]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[I("title",null,"close-box-outline"),I("path",{d:"M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V5H19V19M17,8.4L13.4,12L17,15.6L15.6,17L12,13.4L8.4,17L7,15.6L10.6,12L7,8.4L8.4,7L12,10.6L15.6,7L17,8.4Z"})],-1)]))])):Ke("",!0)])])}const rC=ft(Zx,[["render",nC],["__scopeId","data-v-dc1ad763"]]),iC={name:"CardEditor",data(){return{colorlist:["cardcolor0","cardcolor1","cardcolor2","cardcolor3","cardcolor4","cardcolor5","cardcolor6"]}},methods:{update(){this.$root.UpdateRecord("Cards",this.$root.tools.cards.selected.uuid,this.$root.tools.cards.selected)},setColor(t){console.log(t),this.$root.tools.cards.selected.color=t,this.update()}}},oC={key:0},sC=["onClick"];function lC(t,e,n,r,i,o){return ie(),we(at,null,[t.$root.tools.cards.selected?Ke("",!0):(ie(),we("div",oC,[e[9]||(e[9]=Zn(" no card picked - so its gonna be link or new ")),I("button",{onClick:e[0]||(e[0]=s=>t.$root.makeNewCard())},"New Card")])),t.$root.tools.cards.selected?(ie(),we("div",{key:1,class:dr(["card",t.$root.tools.cards.selected.color])},[I("div",null,[(ie(!0),we(at,null,Jr(i.colorlist,s=>(ie(),we("button",{class:dr(["colorbtn",s]),onClick:l=>o.setColor(s)},null,10,sC))),256))]),I("h1",null,[Un(I("input",{type:"text",placeholder:"Card Title","onUpdate:modelValue":e[1]||(e[1]=s=>t.$root.tools.cards.selected.title=s),onBlur:e[2]||(e[2]=s=>o.update())},null,544),[[nr,t.$root.tools.cards.selected.title]])]),e[11]||(e[11]=I("h2",null,"Description",-1)),I("label",null,[Un(I("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=s=>t.$root.tools.cards.selected.showdesc=s),onBlur:e[4]||(e[4]=s=>o.update())},null,544),[[CS,t.$root.tools.cards.selected.showdesc]]),e[10]||(e[10]=Zn(" Show on card"))]),I("p",null,[Un(I("textarea",{placeholder:"card summary","onUpdate:modelValue":e[5]||(e[5]=s=>t.$root.tools.cards.selected.description=s),onBlur:e[6]||(e[6]=s=>o.update())},null,544),[[nr,t.$root.tools.cards.selected.description]])]),e[12]||(e[12]=I("h2",null,"Content",-1)),I("p",null,[Un(I("textarea",{placeholder:"card details","onUpdate:modelValue":e[7]||(e[7]=s=>t.$root.tools.cards.selected.content=s),onBlur:e[8]||(e[8]=s=>o.update())},null,544),[[nr,t.$root.tools.cards.selected.content]])]),e[13]||(e[13]=I("p",null,null,-1))],2)):Ke("",!0)],64)}const aC=ft(iC,[["render",lC],["__scopeId","data-v-ab29f6c2"]]),cC={components:{CardEditor:aC}},uC={class:"centreme"};function dC(t,e,n,r,i,o){const s=nt("CardEditor");return ie(),we(at,null,[I("div",{class:"blackout",onClick:e[0]||(e[0]=l=>t.$root.modal=!1)}),I("div",uC,[I("button",{onClick:e[1]||(e[1]=l=>t.$root.modal=!1),class:"modalclose"},e[2]||(e[2]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[I("title",null,"close-circle-outline"),I("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})],-1)])),wt(s)])],64)}const fC=ft(cC,[["render",dC],["__scopeId","data-v-21b499cb"]]),hC={},pC={class:"footerbar"};function mC(t,e){return ie(),we("div",pC," Wavemaker Cards v5 © 2021 ")}const gC=ft(hC,[["render",mC]]),yC={data(){return{deferredPrompt:null,showInstallBanner:!1}},mounted(){window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),this.deferredPrompt=t,this.showInstallBanner=!0})},methods:{async installApp(){this.showInstallBanner=!1,this.deferredPrompt.prompt();const{outcome:t}=await this.deferredPrompt.userChoice;console.log(t==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),this.deferredPrompt=null}}},bC={key:0,class:"install-banner"};function vC(t,e,n,r,i,o){return i.showInstallBanner?(ie(),we("div",bC,[e[1]||(e[1]=I("p",null,"Install our app for a better experience!",-1)),I("button",{onClick:e[0]||(e[0]=(...s)=>o.installApp&&o.installApp(...s))},"Install")])):Ke("",!0)}const wC=ft(yC,[["render",vC],["__scopeId","data-v-7d957fbf"]]),kC={name:"About",components:{Logo:Ef},data(){return{}},methods:{async newProject(){this.$root.initDatabase()}}},SC={class:"center-box"},xC={class:"hero"},CC={style:{display:"flex","justify-content":"center","align-items":"center"}},OC={style:{display:"block"}};function EC(t,e,n,r,i,o){const s=nt("Logo");return ie(),we("div",SC,[I("div",xC,[I("div",CC,[wt(s,{style:{width:"50px"}}),e[2]||(e[2]=I("h1",null,"Wavemaker Cards",-1))]),e[5]||(e[5]=I("p",null,[I("strong",null,"Version 5")],-1)),e[6]||(e[6]=I("p",{style:{padding:"10px","font-size":"1rem"}},"Start Writing",-1)),I("div",OC,[I("button",{class:"btn welcomebtn",onClick:e[0]||(e[0]=l=>o.newProject())},e[3]||(e[3]=[I("svg",{class:"icon",viewBox:"0 0 24 24"},[I("path",{d:"M10,16.5V7.5L16,12M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"})],-1),Zn(" Create a new project")])),I("button",{class:"btn welcomebtn",onClick:e[1]||(e[1]=l=>t.$root.openFile())},e[4]||(e[4]=[I("svg",{class:"icon",viewBox:"0 0 24 24"},[I("path",{d:"M19,20H4C2.89,20 2,19.1 2,18V6C2,4.89 2.89,4 4,4H10L12,6H19A2,2 0 0,1 21,8H21L4,8V18L6.14,10H23.21L20.93,18.5C20.7,19.37 19.92,20 19,20Z"})],-1),I("span",null," Load a project (.wmc file) ",-1)]))])])])}const TC=ft(kC,[["render",EC],["__scopeId","data-v-200f914c"]]),AC={data(){return{currentdate:new Date,wordcountprogress:0,month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},computed:{monthDays(){const t=new Date(this.currentdate),e=t.getFullYear(),n=t.getMonth();return new Date(e,n+1,0).getDate()},prevMonthDays(){const t=new Date(this.currentdate),e=t.getFullYear(),n=t.getMonth();return new Date(e,n,0).getDate()},nextMonthDays(){const t=new Date(this.currentdate),e=t.getFullYear(),n=t.getMonth();return new Date(e,n-1,0).getDate()}},mounted(){this.$root.syncdb.Settings.tracker||(this.$root.syncdb.Settings.tracker={wordcount:0,target:2500,log:{"2025-02-01":123,"2025-02-02":432,"2025-02-03":234,"2025-02-04":345,"2025-02-05":456,"2025-02-06":567,"2025-02-07":678,"2025-02-08":789,"2025-02-09":890,"2025-02-10":901,"2025-02-11":123,"2025-02-12":234,"2025-02-13":345,"2025-02-14":456,"2025-02-15":567,"2025-02-16":678,"2025-02-17":789,"2025-02-18":890,"2025-02-19":901,"2025-02-20":123,"2025-02-21":234,"2025-02-22":345,"2025-02-23":456,"2025-02-24":567,"2025-02-25":678,"2025-02-26":789,"2025-02-27":890,"2025-02-28":901,"2025-03-01":123,"2025-03-02":234,"2025-03-03":345,"2025-03-04":456,"2025-03-05":567,"2025-03-06":678,"2025-03-07":789,"2025-03-08":890,"2025-03-09":901,"2025-03-10":123,"2025-03-11":234,"2025-03-12":345,"2025-03-13":456,"2025-03-14":567,"2025-03-15":678,"2025-03-16":789,"2025-03-17":890,"2025-03-18":901,"2025-03-19":123,"2025-03-20":234,"2025-03-21":345}})},methods:{update(){this.$root.UpdateRecord("Settings",this.$root.syncdb.Settings.uuid,this.$root.syncdb.Settings)},monthName(t=0){let e=this.currentdate.getMonth()+t;return e===-1&&(e=11),e===12&&(e=0),this.month[e]},getLogValue(t,e){const n=this.currentdate.getFullYear(),r=this.currentdate.getMonth()+e,i=String(t).padStart(2,"0"),o=`${n}-${String(r).padStart(2,"0")}-${i}`,s=this.$root.syncdb.Settings.tracker.log[o]||0,l=this.$root.syncdb.Settings.tracker.target||1,a=s/l;return{count:s,percent:a}},advanceMonth(){const t=new Date(this.currentdate);t.setMonth(t.getMonth()+1),this.currentdate=t},reduceMonth(){const t=new Date(this.currentdate);t.setMonth(t.getMonth()-1),this.currentdate=t}}},MC={key:0},_C={class:"calendars"},NC={class:"month"},PC={class:"calendar"},IC=["title"],DC={class:"month"},$C={class:"calendar"},RC=["title"],BC={class:"progress-container"},LC={class:"progress-circle",viewBox:"0 0 36 36"};function FC(t,e,n,r,i,o){return this.$root.syncdb.Settings.tracker?(ie(),we("div",MC,[I("h3",null,Nn(t.$root.syncdb.Settings.tracker.wordcount)+" Words",1),I("label",null,[e[3]||(e[3]=Zn("Daily Wordcount Target ")),Un(I("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=s=>t.$root.syncdb.Settings.tracker.target=s)},null,512),[[nr,t.$root.syncdb.Settings.tracker.target]])]),e[5]||(e[5]=I("p",{style:{"text-align":"center"}},"Your Goals",-1)),I("div",null,[I("button",{onClick:e[1]||(e[1]=(...s)=>o.reduceMonth&&o.reduceMonth(...s))},"Previous Month"),I("button",{onClick:e[2]||(e[2]=(...s)=>o.advanceMonth&&o.advanceMonth(...s))},"Next Month")]),I("div",_C,[I("div",null,[I("div",NC,Nn(o.monthName(-1)),1),I("div",PC,[(ie(!0),we(at,null,Jr(o.prevMonthDays,s=>(ie(),we("div",{class:"day",title:o.getLogValue(s,0).count+" Words"},[I("div",{class:"block",style:Ro(`opacity:${o.getLogValue(s,0).percent}`)},null,4)],8,IC))),256))])]),I("div",null,[I("div",DC,Nn(o.monthName()),1),I("div",$C,[(ie(!0),we(at,null,Jr(o.monthDays,s=>(ie(),we("div",{class:"day",title:o.getLogValue(s,1).count+" Words"},[I("div",{class:"block",style:Ro(`opacity:${o.getLogValue(s,1).percent}`)},null,4)],8,RC))),256))])]),I("div",BC,[(ie(),we("svg",LC,[e[4]||(e[4]=I("path",{class:"circle-bg",d:`M18 2.0845
                     a 15.9155 15.9155 0 0 1 0 31.831
                     a 15.9155 15.9155 0 0 1 0 -31.831`},null,-1)),I("path",{class:"circle",style:Ro(`stroke-dasharray: ${i.wordcountprogress}, 100`),d:`M18 2.0845
                     a 15.9155 15.9155 0 0 1 0 31.831
                     a 15.9155 15.9155 0 0 1 0 -31.831`},null,4)]))])])])):Ke("",!0)}const VC=ft(AC,[["render",FC]]),jC={name:"ProjectHome",components:{Logo:Ef,ProjectName:Wy,GridLogger:VC},mounted(){this.$root.tools.writer.selected=null,this.$root.tools.gridplanner.selected=null,this.$root.tools.timeline.selected=null,this.$root.tools.mindmap.selected=null,this.$root.tools.snowflake.selected=null,this.$root.tools.planningboard.selected=null},methods:{}},HC={key:0,class:"project-home"},zC={style:{"text-align":"center"}},KC={open:""},UC={class:"inputstyle"},WC={class:"mainnav"};function qC(t,e,n,r,i,o){const s=nt("Logo"),l=nt("ProjectName"),a=nt("GridLogger");return this.$root.syncdb.Settings?(ie(),we("div",HC,[I("div",zC,[wt(s,{style:{width:"150px",height:"150px"}})]),I("details",KC,[e[6]||(e[6]=I("summary",null,"Project Settings",-1)),e[7]||(e[7]=I("p",{style:{"text-align":"center"}},"What is this project called?",-1)),I("h2",UC,[wt(l)]),wt(a)]),I("div",WC,[I("button",{onClick:e[0]||(e[0]=c=>t.$root.currentTool="writer")},e[8]||(e[8]=[I("svg",{"data-v-92328502":"",version:"1.1",viewBox:"0 0 24 24"},[I("path",{"data-v-92328502":"",d:"M19 2L14 6.5V17.5L19 13V2M6.5 5C4.55 5 2.45 5.4 1 6.5V21.16C1 21.41 1.25 21.66 1.5 21.66C1.6 21.66 1.65 21.59 1.75 21.59C3.1 20.94 5.05 20.5 6.5 20.5C8.45 20.5 10.55 20.9 12 22C13.35 21.15 15.8 20.5 17.5 20.5C19.15 20.5 20.85 20.81 22.25 21.56C22.35 21.61 22.4 21.59 22.5 21.59C22.75 21.59 23 21.34 23 21.09V6.5C22.4 6.05 21.75 5.75 21 5.5V19C19.9 18.65 18.7 18.5 17.5 18.5C15.8 18.5 13.35 19.15 12 20V6.5C10.55 5.4 8.45 5 6.5 5Z"})],-1),Zn(" Your Books")])),I("button",{onClick:e[1]||(e[1]=c=>t.$root.currentTool="gridplanner")},e[9]||(e[9]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[I("title",null,"view-grid"),I("path",{d:"M3,11H11V3H3M3,21H11V13H3M13,21H21V13H13M13,3V11H21V3"})],-1),Zn(" Grid Planner ")])),I("button",{onClick:e[2]||(e[2]=c=>t.$root.currentTool="mindmap")},e[10]||(e[10]=[I("svg",{"data-v-92328502":"",version:"1.1",viewBox:"0 0 24 24"},[I("path",{"data-v-92328502":"",d:"M21 16V13C21 11.89 20.11 11 19 11H13V8H15V2H9V8H11V11H5C3.89 11 3 11.89 3 13V16H1V22H7V16H5V13H11V16H9V22H15V16H13V13H19V16H17V22H23V16H21M11 4H13V6H11V4M5 20H3V18H5V20M13 20H11V18H13V20M21 20H19V18H21V20Z"})],-1),Zn(" Mindmap Builder")])),I("button",{onClick:e[3]||(e[3]=c=>t.$root.currentTool="timeline")},e[11]||(e[11]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[I("title",null,"timeline-outline"),I("path",{d:"M4 2V8H2V2H4M2 22V16H4V22H2M5 12C5 13.11 4.11 14 3 14C1.9 14 1 13.11 1 12C1 10.9 1.9 10 3 10C4.11 10 5 10.9 5 12M24 6V18C24 19.11 23.11 20 22 20H10C8.9 20 8 19.11 8 18V14L6 12L8 10V6C8 4.89 8.9 4 10 4H22C23.11 4 24 4.89 24 6M10 6V18H22V6H10Z"})],-1),Zn(" Timeline Creator")])),I("button",{onClick:e[4]||(e[4]=c=>t.$root.currentTool="snowflake")},e[12]||(e[12]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[I("title",null,"snowflake"),I("path",{d:"M20.79,13.95L18.46,14.57L16.46,13.44V10.56L18.46,9.43L20.79,10.05L21.31,8.12L19.54,7.65L20,5.88L18.07,5.36L17.45,7.69L15.45,8.82L13,7.38V5.12L14.71,3.41L13.29,2L12,3.29L10.71,2L9.29,3.41L11,5.12V7.38L8.5,8.82L6.5,7.69L5.92,5.36L4,5.88L4.47,7.65L2.7,8.12L3.22,10.05L5.55,9.43L7.55,10.56V13.45L5.55,14.58L3.22,13.96L2.7,15.89L4.47,16.36L4,18.12L5.93,18.64L6.55,16.31L8.55,15.18L11,16.62V18.88L9.29,20.59L10.71,22L12,20.71L13.29,22L14.7,20.59L13,18.88V16.62L15.5,15.17L17.5,16.3L18.12,18.63L20,18.12L19.53,16.35L21.3,15.88L20.79,13.95M9.5,10.56L12,9.11L14.5,10.56V13.44L12,14.89L9.5,13.44V10.56Z"})],-1),Zn(" Snowflake Tool")])),I("button",{onClick:e[5]||(e[5]=c=>t.$root.currentTool="cardsdatabase")},e[13]||(e[13]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[I("title",null,"cards-outline"),I("path",{d:"M11.19,2.25C10.93,2.25 10.67,2.31 10.42,2.4L3.06,5.45C2.04,5.87 1.55,7.04 1.97,8.05L6.93,20C7.24,20.77 7.97,21.23 8.74,21.25C9,21.25 9.27,21.22 9.53,21.1L16.9,18.05C17.65,17.74 18.11,17 18.13,16.25C18.14,16 18.09,15.71 18,15.45L13,3.5C12.71,2.73 11.97,2.26 11.19,2.25M14.67,2.25L18.12,10.6V4.25A2,2 0 0,0 16.12,2.25M20.13,3.79V12.82L22.56,6.96C22.97,5.94 22.5,4.78 21.47,4.36M11.19,4.22L16.17,16.24L8.78,19.3L3.8,7.29"})],-1),Zn(" Cards Database")]))])])):Ke("",!0)}const JC=ft(jC,[["render",qC],["__scopeId","data-v-d1a7a50f"]]);var GC=Object.defineProperty,Fa=Object.getOwnPropertySymbols,qy=Object.prototype.hasOwnProperty,Jy=Object.prototype.propertyIsEnumerable,vp=(t,e,n)=>e in t?GC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_o=(t,e)=>{for(var n in e||(e={}))qy.call(e,n)&&vp(t,n,e[n]);if(Fa)for(var n of Fa(e))Jy.call(e,n)&&vp(t,n,e[n]);return t},Gy=(t,e)=>{var n={};for(var r in t)qy.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Fa)for(var r of Fa(t))e.indexOf(r)<0&&Jy.call(t,r)&&(n[r]=t[r]);return n};const Yy="[vue-draggable-plus]: ";function YC(t){console.warn(Yy+t)}function XC(t){console.error(Yy+t)}function wp(t,e,n){return n>=0&&n<t.length&&t.splice(n,0,t.splice(e,1)[0]),t}function ZC(t){return t.replace(/-(\w)/g,(e,n)=>n?n.toUpperCase():"")}function QC(t){return Object.keys(t).reduce((e,n)=>(typeof t[n]<"u"&&(e[ZC(n)]=t[n]),e),{})}function kp(t,e){return Array.isArray(t)&&t.splice(e,1),t}function Sp(t,e,n){return Array.isArray(t)&&t.splice(e,0,n),t}function eO(t){return typeof t>"u"}function tO(t){return typeof t=="string"}function xp(t,e,n){const r=t.children[n];t.insertBefore(e,r)}function au(t){t.parentNode&&t.parentNode.removeChild(t)}function nO(t,e=document){var n;let r=null;return typeof(e==null?void 0:e.querySelector)=="function"?r=(n=e==null?void 0:e.querySelector)==null?void 0:n.call(e,t):r=document.querySelector(t),r||YC(`Element not found: ${t}`),r}function rO(t,e,n=null){return function(...r){return t.apply(n,r),e.apply(n,r)}}function iO(t,e){const n=_o({},t);return Object.keys(e).forEach(r=>{n[r]?n[r]=rO(t[r],e[r]):n[r]=e[r]}),n}function oO(t){return t instanceof HTMLElement}function Cp(t,e){Object.keys(t).forEach(n=>{e(n,t[n])})}function sO(t){return t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97)}const lO=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Op(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Op(Object(n),!0).forEach(function(r){aO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Op(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ua(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ua=function(e){return typeof e}:ua=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ua(t)}function aO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yr(){return Yr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yr.apply(this,arguments)}function cO(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function uO(t,e){if(t==null)return{};var n=cO(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var dO="1.15.2";function Ur(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Zr=Ur(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),yl=Ur(/Edge/i),Ep=Ur(/firefox/i),$s=Ur(/safari/i)&&!Ur(/chrome/i)&&!Ur(/android/i),Xy=Ur(/iP(ad|od|hone)/i),Zy=Ur(/chrome/i)&&Ur(/android/i),Qy={capture:!1,passive:!1};function st(t,e,n){t.addEventListener(e,n,!Zr&&Qy)}function ot(t,e,n){t.removeEventListener(e,n,!Zr&&Qy)}function Va(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function fO(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function ar(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Va(t,e):Va(t,e))||r&&t===n)return t;if(t===n)break}while(t=fO(t))}return null}var Tp=/\s+/g;function Vn(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(Tp," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(Tp," ")}}function Fe(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function Ko(t,e){var n="";if(typeof t=="string")n=t;else do{var r=Fe(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function eb(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function Cr(){var t=document.scrollingElement;return t||document.documentElement}function It(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var o,s,l,a,c,u,d;if(t!==window&&t.parentNode&&t!==Cr()?(o=t.getBoundingClientRect(),s=o.top,l=o.left,a=o.bottom,c=o.right,u=o.height,d=o.width):(s=0,l=0,a=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!Zr))do if(i&&i.getBoundingClientRect&&(Fe(i,"transform")!=="none"||n&&Fe(i,"position")!=="static")){var h=i.getBoundingClientRect();s-=h.top+parseInt(Fe(i,"border-top-width")),l-=h.left+parseInt(Fe(i,"border-left-width")),a=s+o.height,c=l+o.width;break}while(i=i.parentNode);if(r&&t!==window){var m=Ko(i||t),g=m&&m.a,b=m&&m.d;m&&(s/=b,l/=g,d/=g,u/=b,a=s+u,c=l+d)}return{top:s,left:l,bottom:a,right:c,width:d,height:u}}}function Ap(t,e,n){for(var r=fi(t,!0),i=It(t)[e];r;){var o=It(r)[n],s=void 0;if(s=i>=o,!s)return r;if(r===Cr())break;r=fi(r,!1)}return!1}function Go(t,e,n,r){for(var i=0,o=0,s=t.children;o<s.length;){if(s[o].style.display!=="none"&&s[o]!==Ve.ghost&&(r||s[o]!==Ve.dragged)&&ar(s[o],n.draggable,t,!1)){if(i===e)return s[o];i++}o++}return null}function Tf(t,e){for(var n=t.lastElementChild;n&&(n===Ve.ghost||Fe(n,"display")==="none"||e&&!Va(n,e));)n=n.previousElementSibling;return n||null}function Gn(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Ve.clone&&(!e||Va(t,e))&&n++;return n}function Mp(t){var e=0,n=0,r=Cr();if(t)do{var i=Ko(t),o=i.a,s=i.d;e+=t.scrollLeft*o,n+=t.scrollTop*s}while(t!==r&&(t=t.parentNode));return[e,n]}function hO(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function fi(t,e){if(!t||!t.getBoundingClientRect)return Cr();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Fe(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Cr();if(r||e)return n;r=!0}}while(n=n.parentNode);return Cr()}function pO(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function cu(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Rs;function tb(t,e){return function(){if(!Rs){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),Rs=setTimeout(function(){Rs=void 0},e)}}}function mO(){clearTimeout(Rs),Rs=void 0}function nb(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function rb(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function ib(t,e,n){var r={};return Array.from(t.children).forEach(function(i){var o,s,l,a;if(!(!ar(i,e.draggable,t,!1)||i.animated||i===n)){var c=It(i);r.left=Math.min((o=r.left)!==null&&o!==void 0?o:1/0,c.left),r.top=Math.min((s=r.top)!==null&&s!==void 0?s:1/0,c.top),r.right=Math.max((l=r.right)!==null&&l!==void 0?l:-1/0,c.right),r.bottom=Math.max((a=r.bottom)!==null&&a!==void 0?a:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var zn="Sortable"+new Date().getTime();function gO(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(r){if(!(Fe(r,"display")==="none"||r===Ve.ghost)){t.push({target:r,rect:It(r)});var i=Tr({},t[t.length-1].rect);if(r.thisAnimationDuration){var o=Ko(r,!0);o&&(i.top-=o.f,i.left-=o.e)}r.fromRect=i}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(hO(t,{target:n}),1)},animateAll:function(n){var r=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var i=!1,o=0;t.forEach(function(s){var l=0,a=s.target,c=a.fromRect,u=It(a),d=a.prevFromRect,h=a.prevToRect,m=s.rect,g=Ko(a,!0);g&&(u.top-=g.f,u.left-=g.e),a.toRect=u,a.thisAnimationDuration&&cu(d,u)&&!cu(c,u)&&(m.top-u.top)/(m.left-u.left)===(c.top-u.top)/(c.left-u.left)&&(l=bO(m,d,h,r.options)),cu(u,c)||(a.prevFromRect=c,a.prevToRect=u,l||(l=r.options.animation),r.animate(a,m,u,l)),l&&(i=!0,o=Math.max(o,l),clearTimeout(a.animationResetTimer),a.animationResetTimer=setTimeout(function(){a.animationTime=0,a.prevFromRect=null,a.fromRect=null,a.prevToRect=null,a.thisAnimationDuration=null},l),a.thisAnimationDuration=l)}),clearTimeout(e),i?e=setTimeout(function(){typeof n=="function"&&n()},o):typeof n=="function"&&n(),t=[]},animate:function(n,r,i,o){if(o){Fe(n,"transition",""),Fe(n,"transform","");var s=Ko(this.el),l=s&&s.a,a=s&&s.d,c=(r.left-i.left)/(l||1),u=(r.top-i.top)/(a||1);n.animatingX=!!c,n.animatingY=!!u,Fe(n,"transform","translate3d("+c+"px,"+u+"px,0)"),this.forRepaintDummy=yO(n),Fe(n,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Fe(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){Fe(n,"transition",""),Fe(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},o)}}}}function yO(t){return t.offsetWidth}function bO(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var wo=[],uu={initializeByDefault:!0},bl={mount:function(t){for(var e in uu)uu.hasOwnProperty(e)&&!(e in t)&&(t[e]=uu[e]);wo.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),wo.push(t)},pluginEvent:function(t,e,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var i=t+"Global";wo.forEach(function(o){e[o.pluginName]&&(e[o.pluginName][i]&&e[o.pluginName][i](Tr({sortable:e},n)),e.options[o.pluginName]&&e[o.pluginName][t]&&e[o.pluginName][t](Tr({sortable:e},n)))})},initializePlugins:function(t,e,n,r){wo.forEach(function(s){var l=s.pluginName;if(!(!t.options[l]&&!s.initializeByDefault)){var a=new s(t,e,t.options);a.sortable=t,a.options=t.options,t[l]=a,Yr(n,a.defaults)}});for(var i in t.options)if(t.options.hasOwnProperty(i)){var o=this.modifyOption(t,i,t.options[i]);typeof o<"u"&&(t.options[i]=o)}},getEventProperties:function(t,e){var n={};return wo.forEach(function(r){typeof r.eventProperties=="function"&&Yr(n,r.eventProperties.call(e[r.pluginName],t))}),n},modifyOption:function(t,e,n){var r;return wo.forEach(function(i){t[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[e]=="function"&&(r=i.optionListeners[e].call(t[i.pluginName],n))}),r}};function vO(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,o=t.cloneEl,s=t.toEl,l=t.fromEl,a=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,h=t.originalEvent,m=t.putSortable,g=t.extraEventProperties;if(e=e||n&&n[zn],!!e){var b,S=e.options,O="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Zr&&!yl?b=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(b=document.createEvent("Event"),b.initEvent(r,!0,!0)),b.to=s||n,b.from=l||n,b.item=i||n,b.clone=o,b.oldIndex=a,b.newIndex=c,b.oldDraggableIndex=u,b.newDraggableIndex=d,b.originalEvent=h,b.pullMode=m?m.lastPutMode:void 0;var A=Tr(Tr({},g),bl.getEventProperties(r,e));for(var N in A)b[N]=A[N];n&&n.dispatchEvent(b),S[O]&&S[O].call(e,b)}}var wO=["evt"],_n=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.evt,i=uO(n,wO);bl.pluginEvent.bind(Ve)(t,e,Tr({dragEl:ce,parentEl:Mt,ghostEl:ze,rootEl:Ct,nextEl:Fi,lastDownEl:da,cloneEl:Et,cloneHidden:ui,dragStarted:bs,putSortable:Yt,activeSortable:Ve.active,originalEvent:r,oldIndex:No,oldDraggableIndex:Bs,newIndex:Hn,newDraggableIndex:si,hideGhostForTarget:ab,unhideGhostForTarget:cb,cloneNowHidden:function(){ui=!0},cloneNowShown:function(){ui=!1},dispatchSortableEvent:function(o){gn({sortable:e,name:o,originalEvent:r})}},i))};function gn(t){vO(Tr({putSortable:Yt,cloneEl:Et,targetEl:ce,rootEl:Ct,oldIndex:No,oldDraggableIndex:Bs,newIndex:Hn,newDraggableIndex:si},t))}var ce,Mt,ze,Ct,Fi,da,Et,ui,No,Hn,Bs,si,Bl,Yt,Eo=!1,ja=!1,Ha=[],Ri,lr,du,fu,_p,Np,bs,ko,Ls,Fs=!1,Ll=!1,fa,nn,hu=[],xd=!1,za=[],Cc=typeof document<"u",Fl=Xy,Pp=yl||Zr?"cssFloat":"float",kO=Cc&&!Zy&&!Xy&&"draggable"in document.createElement("div"),ob=function(){if(Cc){if(Zr)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),sb=function(t,e){var n=Fe(t),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=Go(t,0,e),o=Go(t,1,e),s=i&&Fe(i),l=o&&Fe(o),a=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+It(i).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+It(o).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&s.float&&s.float!=="none"){var u=s.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===u)?"vertical":"horizontal"}return i&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||a>=r&&n[Pp]==="none"||o&&n[Pp]==="none"&&a+c>r)?"vertical":"horizontal"},SO=function(t,e,n){var r=n?t.left:t.top,i=n?t.right:t.bottom,o=n?t.width:t.height,s=n?e.left:e.top,l=n?e.right:e.bottom,a=n?e.width:e.height;return r===s||i===l||r+o/2===s+a/2},xO=function(t,e){var n;return Ha.some(function(r){var i=r[zn].options.emptyInsertThreshold;if(!(!i||Tf(r))){var o=It(r),s=t>=o.left-i&&t<=o.right+i,l=e>=o.top-i&&e<=o.bottom+i;if(s&&l)return n=r}}),n},lb=function(t){function e(i,o){return function(s,l,a,c){var u=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(i==null&&(o||u))return!0;if(i==null||i===!1)return!1;if(o&&i==="clone")return i;if(typeof i=="function")return e(i(s,l,a,c),o)(s,l,a,c);var d=(o?s:l).options.group.name;return i===!0||typeof i=="string"&&i===d||i.join&&i.indexOf(d)>-1}}var n={},r=t.group;(!r||ua(r)!="object")&&(r={name:r}),n.name=r.name,n.checkPull=e(r.pull,!0),n.checkPut=e(r.put),n.revertClone=r.revertClone,t.group=n},ab=function(){!ob&&ze&&Fe(ze,"display","none")},cb=function(){!ob&&ze&&Fe(ze,"display","")};Cc&&!Zy&&document.addEventListener("click",function(t){if(ja)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),ja=!1,!1},!0);var Bi=function(t){if(ce){t=t.touches?t.touches[0]:t;var e=xO(t.clientX,t.clientY);if(e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[zn]._onDragOver(n)}}},CO=function(t){ce&&ce.parentNode[zn]._isOutsideThisEl(t.target)};function Ve(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Yr({},e),t[zn]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return sb(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,s){o.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ve.supportPointer!==!1&&"PointerEvent"in window&&!$s,emptyInsertThreshold:5};bl.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);lb(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:kO,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?st(t,"pointerdown",this._onTapStart):(st(t,"mousedown",this._onTapStart),st(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(st(t,"dragover",this),st(t,"dragenter",this)),Ha.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Yr(this,gO())}Ve.prototype={constructor:Ve,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(ko=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,ce):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,r=this.options,i=r.preventOnFilter,o=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(s||t).target,a=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,c=r.filter;if(PO(n),!ce&&!(/mousedown|pointerdown/.test(o)&&t.button!==0||r.disabled)&&!a.isContentEditable&&!(!this.nativeDraggable&&$s&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=ar(l,r.draggable,n,!1),!(l&&l.animated)&&da!==l)){if(No=Gn(l),Bs=Gn(l,r.draggable),typeof c=="function"){if(c.call(this,t,l,this)){gn({sortable:e,rootEl:a,name:"filter",targetEl:l,toEl:n,fromEl:n}),_n("filter",e,{evt:t}),i&&t.cancelable&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(u){if(u=ar(a,u.trim(),n,!1),u)return gn({sortable:e,rootEl:u,name:"filter",targetEl:l,fromEl:n,toEl:n}),_n("filter",e,{evt:t}),!0}),c)){i&&t.cancelable&&t.preventDefault();return}r.handle&&!ar(a,r.handle,n,!1)||this._prepareDragStart(t,s,l)}}},_prepareDragStart:function(t,e,n){var r=this,i=r.el,o=r.options,s=i.ownerDocument,l;if(n&&!ce&&n.parentNode===i){var a=It(n);if(Ct=i,ce=n,Mt=ce.parentNode,Fi=ce.nextSibling,da=n,Bl=o.group,Ve.dragged=ce,Ri={target:ce,clientX:(e||t).clientX,clientY:(e||t).clientY},_p=Ri.clientX-a.left,Np=Ri.clientY-a.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,ce.style["will-change"]="all",l=function(){if(_n("delayEnded",r,{evt:t}),Ve.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Ep&&r.nativeDraggable&&(ce.draggable=!0),r._triggerDragStart(t,e),gn({sortable:r,name:"choose",originalEvent:t}),Vn(ce,o.chosenClass,!0)},o.ignore.split(",").forEach(function(c){eb(ce,c.trim(),pu)}),st(s,"dragover",Bi),st(s,"mousemove",Bi),st(s,"touchmove",Bi),st(s,"mouseup",r._onDrop),st(s,"touchend",r._onDrop),st(s,"touchcancel",r._onDrop),Ep&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ce.draggable=!0),_n("delayStart",this,{evt:t}),o.delay&&(!o.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(yl||Zr))){if(Ve.eventCanceled){this._onDrop();return}st(s,"mouseup",r._disableDelayedDrag),st(s,"touchend",r._disableDelayedDrag),st(s,"touchcancel",r._disableDelayedDrag),st(s,"mousemove",r._delayedDragTouchMoveHandler),st(s,"touchmove",r._delayedDragTouchMoveHandler),o.supportPointer&&st(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ce&&pu(ce),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;ot(t,"mouseup",this._disableDelayedDrag),ot(t,"touchend",this._disableDelayedDrag),ot(t,"touchcancel",this._disableDelayedDrag),ot(t,"mousemove",this._delayedDragTouchMoveHandler),ot(t,"touchmove",this._delayedDragTouchMoveHandler),ot(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?st(document,"pointermove",this._onTouchMove):e?st(document,"touchmove",this._onTouchMove):st(document,"mousemove",this._onTouchMove):(st(ce,"dragend",this),st(Ct,"dragstart",this._onDragStart));try{document.selection?ha(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(Eo=!1,Ct&&ce){_n("dragStarted",this,{evt:e}),this.nativeDraggable&&st(document,"dragover",CO);var n=this.options;!t&&Vn(ce,n.dragClass,!1),Vn(ce,n.ghostClass,!0),Ve.active=this,t&&this._appendGhost(),gn({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(lr){this._lastX=lr.clientX,this._lastY=lr.clientY,ab();for(var t=document.elementFromPoint(lr.clientX,lr.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(lr.clientX,lr.clientY),t!==e);)e=t;if(ce.parentNode[zn]._isOutsideThisEl(t),e)do{if(e[zn]){var n=void 0;if(n=e[zn]._onDragOver({clientX:lr.clientX,clientY:lr.clientY,target:t,rootEl:e}),n&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);cb()}},_onTouchMove:function(t){if(Ri){var e=this.options,n=e.fallbackTolerance,r=e.fallbackOffset,i=t.touches?t.touches[0]:t,o=ze&&Ko(ze,!0),s=ze&&o&&o.a,l=ze&&o&&o.d,a=Fl&&nn&&Mp(nn),c=(i.clientX-Ri.clientX+r.x)/(s||1)+(a?a[0]-hu[0]:0)/(s||1),u=(i.clientY-Ri.clientY+r.y)/(l||1)+(a?a[1]-hu[1]:0)/(l||1);if(!Ve.active&&!Eo){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(ze){o?(o.e+=c-(du||0),o.f+=u-(fu||0)):o={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Fe(ze,"webkitTransform",d),Fe(ze,"mozTransform",d),Fe(ze,"msTransform",d),Fe(ze,"transform",d),du=c,fu=u,lr=i}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!ze){var t=this.options.fallbackOnBody?document.body:Ct,e=It(ce,!0,Fl,!0,t),n=this.options;if(Fl){for(nn=t;Fe(nn,"position")==="static"&&Fe(nn,"transform")==="none"&&nn!==document;)nn=nn.parentNode;nn!==document.body&&nn!==document.documentElement?(nn===document&&(nn=Cr()),e.top+=nn.scrollTop,e.left+=nn.scrollLeft):nn=Cr(),hu=Mp(nn)}ze=ce.cloneNode(!0),Vn(ze,n.ghostClass,!1),Vn(ze,n.fallbackClass,!0),Vn(ze,n.dragClass,!0),Fe(ze,"transition",""),Fe(ze,"transform",""),Fe(ze,"box-sizing","border-box"),Fe(ze,"margin",0),Fe(ze,"top",e.top),Fe(ze,"left",e.left),Fe(ze,"width",e.width),Fe(ze,"height",e.height),Fe(ze,"opacity","0.8"),Fe(ze,"position",Fl?"absolute":"fixed"),Fe(ze,"zIndex","100000"),Fe(ze,"pointerEvents","none"),Ve.ghost=ze,t.appendChild(ze),Fe(ze,"transform-origin",_p/parseInt(ze.style.width)*100+"% "+Np/parseInt(ze.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,r=t.dataTransfer,i=n.options;if(_n("dragStart",this,{evt:t}),Ve.eventCanceled){this._onDrop();return}_n("setupClone",this),Ve.eventCanceled||(Et=rb(ce),Et.removeAttribute("id"),Et.draggable=!1,Et.style["will-change"]="",this._hideClone(),Vn(Et,this.options.chosenClass,!1),Ve.clone=Et),n.cloneId=ha(function(){_n("clone",n),!Ve.eventCanceled&&(n.options.removeCloneOnHide||Ct.insertBefore(Et,ce),n._hideClone(),gn({sortable:n,name:"clone"}))}),!e&&Vn(ce,i.dragClass,!0),e?(ja=!0,n._loopId=setInterval(n._emulateDragOver,50)):(ot(document,"mouseup",n._onDrop),ot(document,"touchend",n._onDrop),ot(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",i.setData&&i.setData.call(n,r,ce)),st(document,"drop",n),Fe(ce,"transform","translateZ(0)")),Eo=!0,n._dragStartId=ha(n._dragStarted.bind(n,e,t)),st(document,"selectstart",n),bs=!0,$s&&Fe(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,n=t.target,r,i,o,s=this.options,l=s.group,a=Ve.active,c=Bl===l,u=s.sort,d=Yt||a,h,m=this,g=!1;if(xd)return;function b(Q,Ae){_n(Q,m,Tr({evt:t,isOwner:c,axis:h?"vertical":"horizontal",revert:o,dragRect:r,targetRect:i,canSort:u,fromSortable:d,target:n,completed:O,onMove:function(Qe,Ue){return Vl(Ct,e,ce,r,Qe,It(Qe),t,Ue)},changed:A},Ae))}function S(){b("dragOverAnimationCapture"),m.captureAnimationState(),m!==d&&d.captureAnimationState()}function O(Q){return b("dragOverCompleted",{insertion:Q}),Q&&(c?a._hideClone():a._showClone(m),m!==d&&(Vn(ce,Yt?Yt.options.ghostClass:a.options.ghostClass,!1),Vn(ce,s.ghostClass,!0)),Yt!==m&&m!==Ve.active?Yt=m:m===Ve.active&&Yt&&(Yt=null),d===m&&(m._ignoreWhileAnimating=n),m.animateAll(function(){b("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(n===ce&&!ce.animated||n===e&&!n.animated)&&(ko=null),!s.dragoverBubble&&!t.rootEl&&n!==document&&(ce.parentNode[zn]._isOutsideThisEl(t.target),!Q&&Bi(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function A(){Hn=Gn(ce),si=Gn(ce,s.draggable),gn({sortable:m,name:"change",toEl:e,newIndex:Hn,newDraggableIndex:si,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=ar(n,s.draggable,e,!0),b("dragOver"),Ve.eventCanceled)return g;if(ce.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||m._ignoreWhileAnimating===n)return O(!1);if(ja=!1,a&&!s.disabled&&(c?u||(o=Mt!==Ct):Yt===this||(this.lastPutMode=Bl.checkPull(this,a,ce,t))&&l.checkPut(this,a,ce,t))){if(h=this._getDirection(t,n)==="vertical",r=It(ce),b("dragOverValid"),Ve.eventCanceled)return g;if(o)return Mt=Ct,S(),this._hideClone(),b("revert"),Ve.eventCanceled||(Fi?Ct.insertBefore(ce,Fi):Ct.appendChild(ce)),O(!0);var N=Tf(e,s.draggable);if(!N||AO(t,h,this)&&!N.animated){if(N===ce)return O(!1);if(N&&e===t.target&&(n=N),n&&(i=It(n)),Vl(Ct,e,ce,r,n,i,t,!!n)!==!1)return S(),N&&N.nextSibling?e.insertBefore(ce,N.nextSibling):e.appendChild(ce),Mt=e,A(),O(!0)}else if(N&&TO(t,h,this)){var R=Go(e,0,s,!0);if(R===ce)return O(!1);if(n=R,i=It(n),Vl(Ct,e,ce,r,n,i,t,!1)!==!1)return S(),e.insertBefore(ce,R),Mt=e,A(),O(!0)}else if(n.parentNode===e){i=It(n);var D=0,F,j=ce.parentNode!==e,K=!SO(ce.animated&&ce.toRect||r,n.animated&&n.toRect||i,h),E=h?"top":"left",k=Ap(n,"top","top")||Ap(ce,"top","top"),V=k?k.scrollTop:void 0;ko!==n&&(F=i[E],Fs=!1,Ll=!K&&s.invertSwap||j),D=MO(t,n,i,h,K?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Ll,ko===n);var C;if(D!==0){var ue=Gn(ce);do ue-=D,C=Mt.children[ue];while(C&&(Fe(C,"display")==="none"||C===ze))}if(D===0||C===n)return O(!1);ko=n,Ls=D;var Z=n.nextElementSibling,xe=!1;xe=D===1;var ye=Vl(Ct,e,ce,r,n,i,t,xe);if(ye!==!1)return(ye===1||ye===-1)&&(xe=ye===1),xd=!0,setTimeout(EO,30),S(),xe&&!Z?e.appendChild(ce):n.parentNode.insertBefore(ce,xe?Z:n),k&&nb(k,0,V-k.scrollTop),Mt=ce.parentNode,F!==void 0&&!Ll&&(fa=Math.abs(F-It(n)[E])),A(),O(!0)}if(e.contains(ce))return O(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ot(document,"mousemove",this._onTouchMove),ot(document,"touchmove",this._onTouchMove),ot(document,"pointermove",this._onTouchMove),ot(document,"dragover",Bi),ot(document,"mousemove",Bi),ot(document,"touchmove",Bi)},_offUpEvents:function(){var t=this.el.ownerDocument;ot(t,"mouseup",this._onDrop),ot(t,"touchend",this._onDrop),ot(t,"pointerup",this._onDrop),ot(t,"touchcancel",this._onDrop),ot(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;if(Hn=Gn(ce),si=Gn(ce,n.draggable),_n("drop",this,{evt:t}),Mt=ce&&ce.parentNode,Hn=Gn(ce),si=Gn(ce,n.draggable),Ve.eventCanceled){this._nulling();return}Eo=!1,Ll=!1,Fs=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Cd(this.cloneId),Cd(this._dragStartId),this.nativeDraggable&&(ot(document,"drop",this),ot(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),$s&&Fe(document.body,"user-select",""),Fe(ce,"transform",""),t&&(bs&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),ze&&ze.parentNode&&ze.parentNode.removeChild(ze),(Ct===Mt||Yt&&Yt.lastPutMode!=="clone")&&Et&&Et.parentNode&&Et.parentNode.removeChild(Et),ce&&(this.nativeDraggable&&ot(ce,"dragend",this),pu(ce),ce.style["will-change"]="",bs&&!Eo&&Vn(ce,Yt?Yt.options.ghostClass:this.options.ghostClass,!1),Vn(ce,this.options.chosenClass,!1),gn({sortable:this,name:"unchoose",toEl:Mt,newIndex:null,newDraggableIndex:null,originalEvent:t}),Ct!==Mt?(Hn>=0&&(gn({rootEl:Mt,name:"add",toEl:Mt,fromEl:Ct,originalEvent:t}),gn({sortable:this,name:"remove",toEl:Mt,originalEvent:t}),gn({rootEl:Mt,name:"sort",toEl:Mt,fromEl:Ct,originalEvent:t}),gn({sortable:this,name:"sort",toEl:Mt,originalEvent:t})),Yt&&Yt.save()):Hn!==No&&Hn>=0&&(gn({sortable:this,name:"update",toEl:Mt,originalEvent:t}),gn({sortable:this,name:"sort",toEl:Mt,originalEvent:t})),Ve.active&&((Hn==null||Hn===-1)&&(Hn=No,si=Bs),gn({sortable:this,name:"end",toEl:Mt,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){_n("nulling",this),Ct=ce=Mt=ze=Fi=Et=da=ui=Ri=lr=bs=Hn=si=No=Bs=ko=Ls=Yt=Bl=Ve.dragged=Ve.ghost=Ve.clone=Ve.active=null,za.forEach(function(t){t.checked=!0}),za.length=du=fu=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":ce&&(this._onDragOver(t),OO(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,n=this.el.children,r=0,i=n.length,o=this.options;r<i;r++)e=n[r],ar(e,o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||NO(e));return t},sort:function(t,e){var n={},r=this.el;this.toArray().forEach(function(i,o){var s=r.children[o];ar(s,this.options.draggable,r,!1)&&(n[i]=s)},this),e&&this.captureAnimationState(),t.forEach(function(i){n[i]&&(r.removeChild(n[i]),r.appendChild(n[i]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return ar(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(e===void 0)return n[t];var r=bl.modifyOption(this,t,e);typeof r<"u"?n[t]=r:n[t]=e,t==="group"&&lb(n)},destroy:function(){_n("destroy",this);var t=this.el;t[zn]=null,ot(t,"mousedown",this._onTapStart),ot(t,"touchstart",this._onTapStart),ot(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(ot(t,"dragover",this),ot(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ha.splice(Ha.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!ui){if(_n("hideClone",this),Ve.eventCanceled)return;Fe(Et,"display","none"),this.options.removeCloneOnHide&&Et.parentNode&&Et.parentNode.removeChild(Et),ui=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(ui){if(_n("showClone",this),Ve.eventCanceled)return;ce.parentNode==Ct&&!this.options.group.revertClone?Ct.insertBefore(Et,ce):Fi?Ct.insertBefore(Et,Fi):Ct.appendChild(Et),this.options.group.revertClone&&this.animate(ce,Et),Fe(Et,"display",""),ui=!1}}};function OO(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Vl(t,e,n,r,i,o,s,l){var a,c=t[zn],u=c.options.onMove,d;return window.CustomEvent&&!Zr&&!yl?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=e,a.from=t,a.dragged=n,a.draggedRect=r,a.related=i||e,a.relatedRect=o||It(e),a.willInsertAfter=l,a.originalEvent=s,t.dispatchEvent(a),u&&(d=u.call(c,a,s)),d}function pu(t){t.draggable=!1}function EO(){xd=!1}function TO(t,e,n){var r=It(Go(n.el,0,n.options,!0)),i=ib(n.el,n.options,ze),o=10;return e?t.clientX<i.left-o||t.clientY<r.top&&t.clientX<r.right:t.clientY<i.top-o||t.clientY<r.bottom&&t.clientX<r.left}function AO(t,e,n){var r=It(Tf(n.el,n.options.draggable)),i=ib(n.el,n.options,ze),o=10;return e?t.clientX>i.right+o||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>i.bottom+o||t.clientX>r.right&&t.clientY>r.top}function MO(t,e,n,r,i,o,s,l){var a=r?t.clientY:t.clientX,c=r?n.height:n.width,u=r?n.top:n.left,d=r?n.bottom:n.right,h=!1;if(!s){if(l&&fa<c*i){if(!Fs&&(Ls===1?a>u+c*o/2:a<d-c*o/2)&&(Fs=!0),Fs)h=!0;else if(Ls===1?a<u+fa:a>d-fa)return-Ls}else if(a>u+c*(1-i)/2&&a<d-c*(1-i)/2)return _O(e)}return h=h||s,h&&(a<u+c*o/2||a>d-c*o/2)?a>u+c/2?1:-1:0}function _O(t){return Gn(ce)<Gn(t)?1:-1}function NO(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function PO(t){za.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&za.push(r)}}function ha(t){return setTimeout(t,0)}function Cd(t){return clearTimeout(t)}Cc&&st(document,"touchmove",function(t){(Ve.active||Eo)&&t.cancelable&&t.preventDefault()});Ve.utils={on:st,off:ot,css:Fe,find:eb,is:function(t,e){return!!ar(t,e,t,!1)},extend:pO,throttle:tb,closest:ar,toggleClass:Vn,clone:rb,index:Gn,nextTick:ha,cancelNextTick:Cd,detectDirection:sb,getChild:Go};Ve.get=function(t){return t[zn]};Ve.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Ve.utils=Tr(Tr({},Ve.utils),r.utils)),bl.mount(r)})};Ve.create=function(t,e){return new Ve(t,e)};Ve.version=dO;var Pt=[],vs,Od,Ed=!1,mu,gu,Ka,ws;function IO(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?st(document,"dragover",this._handleAutoScroll):this.options.supportPointer?st(document,"pointermove",this._handleFallbackAutoScroll):n.touches?st(document,"touchmove",this._handleFallbackAutoScroll):st(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?ot(document,"dragover",this._handleAutoScroll):(ot(document,"pointermove",this._handleFallbackAutoScroll),ot(document,"touchmove",this._handleFallbackAutoScroll),ot(document,"mousemove",this._handleFallbackAutoScroll)),Ip(),pa(),mO()},nulling:function(){Ka=Od=vs=Ed=ws=mu=gu=null,Pt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var r=this,i=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,s=document.elementFromPoint(i,o);if(Ka=e,n||this.options.forceAutoScrollFallback||yl||Zr||$s){yu(e,this.options,s,n);var l=fi(s,!0);Ed&&(!ws||i!==mu||o!==gu)&&(ws&&Ip(),ws=setInterval(function(){var a=fi(document.elementFromPoint(i,o),!0);a!==l&&(l=a,pa()),yu(e,r.options,a,n)},10),mu=i,gu=o)}else{if(!this.options.bubbleScroll||fi(s,!0)===Cr()){pa();return}yu(e,this.options,fi(s,!1),!1)}}},Yr(t,{pluginName:"scroll",initializeByDefault:!0})}function pa(){Pt.forEach(function(t){clearInterval(t.pid)}),Pt=[]}function Ip(){clearInterval(ws)}var yu=tb(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,s=e.scrollSensitivity,l=e.scrollSpeed,a=Cr(),c=!1,u;Od!==n&&(Od=n,pa(),vs=e.scroll,u=e.scrollFn,vs===!0&&(vs=fi(n,!0)));var d=0,h=vs;do{var m=h,g=It(m),b=g.top,S=g.bottom,O=g.left,A=g.right,N=g.width,R=g.height,D=void 0,F=void 0,j=m.scrollWidth,K=m.scrollHeight,E=Fe(m),k=m.scrollLeft,V=m.scrollTop;m===a?(D=N<j&&(E.overflowX==="auto"||E.overflowX==="scroll"||E.overflowX==="visible"),F=R<K&&(E.overflowY==="auto"||E.overflowY==="scroll"||E.overflowY==="visible")):(D=N<j&&(E.overflowX==="auto"||E.overflowX==="scroll"),F=R<K&&(E.overflowY==="auto"||E.overflowY==="scroll"));var C=D&&(Math.abs(A-i)<=s&&k+N<j)-(Math.abs(O-i)<=s&&!!k),ue=F&&(Math.abs(S-o)<=s&&V+R<K)-(Math.abs(b-o)<=s&&!!V);if(!Pt[d])for(var Z=0;Z<=d;Z++)Pt[Z]||(Pt[Z]={});(Pt[d].vx!=C||Pt[d].vy!=ue||Pt[d].el!==m)&&(Pt[d].el=m,Pt[d].vx=C,Pt[d].vy=ue,clearInterval(Pt[d].pid),(C!=0||ue!=0)&&(c=!0,Pt[d].pid=setInterval((function(){r&&this.layer===0&&Ve.active._onTouchMove(Ka);var xe=Pt[this.layer].vy?Pt[this.layer].vy*l:0,ye=Pt[this.layer].vx?Pt[this.layer].vx*l:0;typeof u=="function"&&u.call(Ve.dragged.parentNode[zn],ye,xe,t,Ka,Pt[this.layer].el)!=="continue"||nb(Pt[this.layer].el,ye,xe)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&h!==a&&(h=fi(h,!1)));Ed=c}},30),ub=function(t){var e=t.originalEvent,n=t.putSortable,r=t.dragEl,i=t.activeSortable,o=t.dispatchSortableEvent,s=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var a=n||i;s();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,u=document.elementFromPoint(c.clientX,c.clientY);l(),a&&!a.el.contains(u)&&(o("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function Af(){}Af.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=Go(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(e,r):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:ub};Yr(Af,{pluginName:"revertOnSpill"});function Mf(){}Mf.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable,r=n||this.sortable;r.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),r.animateAll()},drop:ub};Yr(Mf,{pluginName:"removeOnSpill"});Ve.mount(new IO);Ve.mount(Mf,Af);function DO(t){return t==null?t:JSON.parse(JSON.stringify(t))}function $O(t){vc()&&cf(t)}function RO(t){vc()?Pg(t):mc(t)}let db=null,fb=null;function Dp(t=null,e=null){db=t,fb=e}function BO(){return{data:db,clonedData:fb}}const $p=Symbol("cloneElement");function LO(...t){var e,n;const r=(e=vc())==null?void 0:e.proxy;let i=null;const o=t[0];let[,s,l]=t;Array.isArray(yn(s))||(l=s,s=null);let a=null;const{immediate:c=!0,clone:u=DO,customUpdate:d}=(n=yn(l))!=null?n:{};function h(K){var E;const{from:k,oldIndex:V,item:C}=K;i=Array.from(k.childNodes);const ue=yn((E=yn(s))==null?void 0:E[V]),Z=u(ue);Dp(ue,Z),C[$p]=Z}function m(K){const E=K.item[$p];if(!eO(E)){if(au(K.item),$t(s)){const k=[...yn(s)];s.value=Sp(k,K.newDraggableIndex,E);return}Sp(yn(s),K.newDraggableIndex,E)}}function g(K){const{from:E,item:k,oldIndex:V,oldDraggableIndex:C,pullMode:ue,clone:Z}=K;if(xp(E,k,V),ue==="clone"){au(Z);return}if($t(s)){const xe=[...yn(s)];s.value=kp(xe,C);return}kp(yn(s),C)}function b(K){if(d){d(K);return}const{from:E,item:k,oldIndex:V,oldDraggableIndex:C,newDraggableIndex:ue}=K;if(au(k),xp(E,k,V),$t(s)){const Z=[...yn(s)];s.value=wp(Z,C,ue);return}wp(yn(s),C,ue)}function S(K){const{newIndex:E,oldIndex:k,from:V,to:C}=K;let ue=null;const Z=E===k&&V===C;try{if(Z){let xe=null;i==null||i.some((ye,Q)=>{if(xe&&(i==null?void 0:i.length)!==C.childNodes.length)return V.insertBefore(xe,ye.nextSibling),!0;const Ae=C.childNodes[Q];xe=C==null?void 0:C.replaceChild(ye,Ae)})}}catch(xe){ue=xe}finally{i=null}mc(()=>{if(Dp(),ue)throw ue})}const O={onUpdate:b,onStart:h,onAdd:m,onRemove:g,onEnd:S};function A(K){const E=yn(o);return K||(K=tO(E)?nO(E,r==null?void 0:r.$el):E),K&&!oO(K)&&(K=K.$el),K||XC("Root element not found"),K}function N(){var K;const E=(K=yn(l))!=null?K:{},{immediate:k,clone:V}=E,C=Gy(E,["immediate","clone"]);return Cp(C,(ue,Z)=>{sO(ue)&&(C[ue]=(xe,...ye)=>{const Q=BO();return lO(xe,Q),Z(xe,...ye)})}),iO(s===null?{}:O,C)}const R=K=>{K=A(K),a&&D.destroy(),a=new Ve(K,N())};Xl(()=>l,()=>{a&&Cp(N(),(K,E)=>{a==null||a.option(K,E)})},{deep:!0});const D={option:(K,E)=>a==null?void 0:a.option(K,E),destroy:()=>{a==null||a.destroy(),a=null},save:()=>a==null?void 0:a.save(),toArray:()=>a==null?void 0:a.toArray(),closest:(...K)=>a==null?void 0:a.closest(...K)},F=()=>D==null?void 0:D.option("disabled",!0),j=()=>D==null?void 0:D.option("disabled",!1);return RO(()=>{c&&R()}),$O(D.destroy),_o({start:R,pause:F,resume:j},D)}const Td=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],FO=["clone","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...Td.map(t=>`on${t.replace(/^\S/,e=>e.toUpperCase())}`)],VO=Ag({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:FO,emits:["update:modelValue",...Td],setup(t,{slots:e,emit:n,expose:r,attrs:i}){const o=Td.reduce((u,d)=>{const h=`on${d.replace(/^\S/,m=>m.toUpperCase())}`;return u[h]=(...m)=>n(d,...m),u},{}),s=Ju(()=>{const u=Hw(t),{modelValue:d}=u,h=Gy(u,["modelValue"]),m=Object.entries(h).reduce((g,[b,S])=>{const O=yn(S);return O!==void 0&&(g[b]=O),g},{});return _o(_o({},o),QC(_o(_o({},i),m)))}),l=Ju({get:()=>t.modelValue,set:u=>n("update:modelValue",u)}),a=sf(),c=hc(LO(t.target||a,l,s));return r(c),()=>{var u;return ry(t.tag||"div",{ref:a},(u=e==null?void 0:e.default)==null?void 0:u.call(e,c))}}}),jO={props:["myuuid","formmode"],data(){return{myfile:null,editme:!1}},async mounted(){this.formmode&&(this.editme=!0),this.myfile=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Files.get(this.myuuid)))},methods:{update(){this.myfile.title==""&&(this.myfile.title="...."),console.log(this.myfile),this.$root.UpdateRecord("Files",this.myuuid,this.myfile),this.formmode||(this.editme=!1)}}},HO={key:0};function zO(t,e,n,r,i,o){return i.myfile?(ie(),we("span",HO,[i.editme?Ke("",!0):(ie(),we("div",{key:0,onDblclick:e[0]||(e[0]=s=>i.editme=!0)},Nn(i.myfile.title),33)),i.editme?Un((ie(),we("input",{key:1,type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>i.myfile.title=s),placeholder:"......",onBlur:e[2]||(e[2]=s=>o.update())},null,544)),[[nr,i.myfile.title]]):Ke("",!0)])):Ke("",!0)}const hb=ft(jO,[["render",zO]]),KO={props:{modelValue:{required:!0,type:Array}},components:{VueDraggable:VO,FileName:hb},computed:{list:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},methods:{handleChange(t){this.$root.UpdateRecord("Writer",this.$root.tools.writer.selected,this.$root.tools.writer.mybook)}},name:"DocStructureNode"},UO={class:"btn"},WO=["onClick"],qO={key:0,viewBox:"0 0 24 24"},JO={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},GO=["onClick"];function YO(t,e,n,r,i,o){const s=nt("FileName"),l=nt("DocStructureNode",!0),a=nt("VueDraggable");return ie(),Tt(a,{class:"dragArea",tag:"ul",modelValue:o.list,"onUpdate:modelValue":e[0]||(e[0]=c=>o.list=c),group:"files","item-key":"name",onEnd:o.handleChange},{default:Tg(()=>[(ie(!0),we(at,null,Jr(n.modelValue,(c,u)=>(ie(),we("li",{class:"node",key:u},[I("div",UO,[I("button",{onClick:d=>c.open=!c.open,class:"toggle"},[c.open?Ke("",!0):(ie(),we("svg",qO,e[1]||(e[1]=[I("title",null,"chevron-right",-1),I("path",{d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"},null,-1)]))),c.open?(ie(),we("svg",JO,e[2]||(e[2]=[I("title",null,"chevron-down-box",-1),I("path",{d:"M19,3H5A2,2 0 0,0 3,5V19C3,20.11 3.9,21 5,21H19C20.11,21 21,20.11 21,19V5A2,2 0 0,0 19,3M12,15.71L6,9.71L7.41,8.29L12,12.88L16.59,8.29L18,9.71L12,15.71Z"},null,-1)]))):Ke("",!0)],8,WO),I("button",{class:dr(["labelbtn",{selected:t.$root.tools.writer.selectednode===c.uuid}]),onClick:d=>t.$root.tools.writer.selectednode=c.uuid},[(ie(),Tt(s,{myuuid:c.uuid,key:c.uuid},null,8,["myuuid"]))],10,GO)]),c.open?(ie(),Tt(l,{key:0,modelValue:c.files,"onUpdate:modelValue":d=>c.files=d},null,8,["modelValue","onUpdate:modelValue"])):Ke("",!0)]))),128))]),_:1},8,["modelValue","onEnd"])}const XO=ft(KO,[["render",YO],["__scopeId","data-v-b839ba46"]]),ZO={name:"DocStructure",components:{DocStructureNode:XO},data(){return{bookwatch:null}},async mounted(){this.bookwatch=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Writer.get(this.$root.tools.writer.selected))),this.$watch("bookwatch",(t,e)=>{this.$root.tools.writer.mybook=JSON.parse(JSON.stringify(t))})},methods:{async addNode(){let t=JSON.parse(JSON.stringify(this.$root.fileTemplate));t.writerid=this.$root.tools.writer.selected,t.uuid=this.$root.uuid(),await this.$root.AddRecord("Files",t);let e={};e.open=!1,e.uuid=t.uuid,e.files=[];let n=null;this.$root.tools.writer.selectednode?n=this.findNodeByUUID(this.$root.tools.writer.selectednode,this.$root.tools.writer.mybook):n=this.$root.tools.writer.mybook,n.files.push(e),n.open=!0,this.$root.UpdateRecord("Writer",this.$root.tools.writer.selected,this.$root.tools.writer.mybook)},findNodeByUUID(t,e){if(e.uuid===t)return e;for(let n of e.files){let r=this.findNodeByUUID(t,n);if(r)return r}return null}}},QO={key:0,class:"documentStructure"},eE={class:"lhstools"},tE={class:"docsettings"},nE={style:{padding:"10px"}},rE={class:"lhsscrollcontainer"};function iE(t,e,n,r,i,o){const s=nt("DocStructureNode");return this.$root.tools.writer.mybook?(ie(),we("div",QO,[I("div",eE,[I("button",{onClick:e[0]||(e[0]=(...l)=>o.addNode&&o.addNode(...l)),class:"btn"},e[3]||(e[3]=[I("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[I("title",null,"Add File"),I("path",{d:"M14 2H6C4.89 2 4 2.89 4 4V20C4 21.11 4.89 22 6 22H13.81C13.28 21.09 13 20.05 13 19C13 15.69 15.69 13 19 13C19.34 13 19.67 13.03 20 13.08V8L14 2M13 9V3.5L18.5 9H13M23 20H20V23H18V20H15V18H18V15H20V18H23V20Z"})],-1),I("span",null,"Add",-1)]))]),I("div",null,[I("div",tE,[I("button",{class:"btn",onClick:e[1]||(e[1]=l=>t.$root.tools.writer.selectednode=null)},e[4]||(e[4]=[I("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[I("title",null,"book-open-page-variant-outline"),I("path",{d:"M19 1L14 6V17L19 12.5V1M21 5V18.5C19.9 18.15 18.7 18 17.5 18C15.8 18 13.35 18.65 12 19.5V6C10.55 4.9 8.45 4.5 6.5 4.5C4.55 4.5 2.45 4.9 1 6V20.65C1 20.9 1.25 21.15 1.5 21.15C1.6 21.15 1.65 21.1 1.75 21.1C3.1 20.45 5.05 20 6.5 20C8.45 20 10.55 20.4 12 21.5C13.35 20.65 15.8 20 17.5 20C19.15 20 20.85 20.3 22.25 21.05C22.35 21.1 22.4 21.1 22.5 21.1C22.75 21.1 23 20.85 23 20.6V6C22.4 5.55 21.75 5.25 21 5M10 18.41C8.75 18.09 7.5 18 6.5 18C5.44 18 4.18 18.19 3 18.5V7.13C3.91 6.73 5.14 6.5 6.5 6.5C7.86 6.5 9.09 6.73 10 7.13V18.41Z"})],-1),Zn(" Document Settings ")]))]),I("div",nE,[I("div",rE,[this.$root.tools.writer.mybook.files.length?(ie(),Tt(s,{key:0,modelValue:this.$root.tools.writer.mybook.files,"onUpdate:modelValue":e[2]||(e[2]=l=>this.$root.tools.writer.mybook.files=l)},null,8,["modelValue"])):Ke("",!0)])])])])):Ke("",!0)}const oE=ft(ZO,[["render",iE],["__scopeId","data-v-9e249c8e"]]);function Xt(t){this.content=t}Xt.prototype={constructor:Xt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new Xt(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Xt(n)},addToStart:function(t,e){return new Xt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Xt(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new Xt(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Xt.from(t),t.size?new Xt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Xt.from(t),t.size?new Xt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Xt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Xt.from=function(t){if(t instanceof Xt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Xt(e)};function pb(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=pb(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function mb(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),l=e.child(--o),a=s.nodeSize;if(s==l){n-=a,r-=a;continue}if(!s.sameMarkup(l))return{a:n,b:r};if(s.isText&&s.text!=l.text){let c=0,u=Math.min(s.text.length,l.text.length);for(;c<u&&s.text[s.text.length-c-1]==l.text[l.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||l.content.size){let c=mb(s.content,l.content,n-1,r-1);if(c)return c}n-=a,r-=a}}class te{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,l=0;l<n;s++){let a=this.content[s],c=l+a.nodeSize;if(c>e&&r(a,i+l,o||null,s)!==!1&&a.content.size){let u=l+1;a.nodesBetween(Math.max(0,e-u),Math.min(a.content.size,n-u),r,i+u)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(l,a)=>{let c=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&r&&(s?s=!1:o+=r),o+=c},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new te(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let l=this.content[o],a=s+l.nodeSize;a>e&&((s<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,n-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,n-s-1))),r.push(l),i+=l.nodeSize),s=a}return new te(r,i)}cutByIndex(e,n){return e==n?te.empty:e==0&&n==this.content.length?this:new te(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new te(i,o)}addToStart(e){return new te([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new te(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return pb(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return mb(this,e,n,r)}findIndex(e,n=-1){if(e==0)return jl(0,e);if(e==this.size)return jl(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||n>0?jl(r+1,s):jl(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return te.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new te(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return te.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new te(n||e,r)}static from(e){if(!e)return te.empty;if(e instanceof te)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new te([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}te.empty=new te([],0);const bu={index:0,offset:0};function jl(t,e){return bu.index=t,bu.offset=e,bu}function Ua(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Ua(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Ua(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let vt=class Ad{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ua(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Ad.none;if(e instanceof Ad)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};vt.none=[];class Wa extends Error{}class ve{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=yb(this.content,e+this.openStart,n);return r&&new ve(r,this.openStart,this.openEnd)}removeBetween(e,n){return new ve(gb(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return ve.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ve(te.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new ve(e,r,i)}}ve.empty=new ve(te.empty,0,0);function gb(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:l}=t.findIndex(n);if(i==e||o.isText){if(l!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(gb(o.content,e-i-1,n-i-1)))}function yb(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return t.cut(0,e).append(n).append(t.cut(e));let l=yb(s.content,e-o-1,n);return l&&t.replaceChild(i,s.copy(l))}function sE(t,e,n){if(n.openStart>t.depth)throw new Wa("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Wa("Inconsistent open depths");return bb(t,e,n,0)}function bb(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=bb(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,l=s.content;return Xi(s,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:s,end:l}=lE(n,t);return Xi(o,wb(t,s,l,e,r))}else return Xi(o,qa(t,e,r))}function vb(t,e){if(!e.type.compatibleContent(t.type))throw new Wa("Cannot join "+e.type.name+" onto "+t.type.name)}function Md(t,e,n){let r=t.node(n);return vb(r,e.node(n)),r}function Yi(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Vs(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(Yi(t.nodeAfter,r),o++));for(let l=o;l<s;l++)Yi(i.child(l),r);e&&e.depth==n&&e.textOffset&&Yi(e.nodeBefore,r)}function Xi(t,e){return t.type.checkContent(e),t.copy(e)}function wb(t,e,n,r,i){let o=t.depth>i&&Md(t,e,i+1),s=r.depth>i&&Md(n,r,i+1),l=[];return Vs(null,t,i,l),o&&s&&e.index(i)==n.index(i)?(vb(o,s),Yi(Xi(o,wb(t,e,n,r,i+1)),l)):(o&&Yi(Xi(o,qa(t,e,i+1)),l),Vs(e,n,i,l),s&&Yi(Xi(s,qa(n,r,i+1)),l)),Vs(r,null,i,l),new te(l)}function qa(t,e,n){let r=[];if(Vs(null,t,n,r),t.depth>n){let i=Md(t,e,n+1);Yi(Xi(i,qa(t,e,n+1)),r)}return Vs(e,null,n,r),new te(r)}function lE(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(te.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class nl{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return vt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Ja(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:l,offset:a}=s.content.findIndex(o),c=o-a;if(r.push(s,l,i+a),!c||(s=s.child(l),s.isText))break;o=c-1,i+=a+1}return new nl(n,r,o)}static resolveCached(e,n){let r=Rp.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==n)return s}else Rp.set(e,r=new aE);let i=r.elts[r.i]=nl.resolve(e,n);return r.i=(r.i+1)%cE,i}}class aE{constructor(){this.elts=[],this.i=0}}const cE=12,Rp=new WeakMap;class Ja{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const uE=Object.create(null);let yi=class _d{constructor(e,n,r,i=vt.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||te.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Ua(this.attrs,n||e.defaultAttrs||uE)&&vt.sameSet(this.marks,r||vt.none)}copy(e=null){return e==this.content?this:new _d(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new _d(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return ve.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),l=i.start(s),c=i.node(s).content.cut(i.pos-l,o.pos-l);return new ve(c,i.depth-s,o.depth-s)}replace(e,n,r){return sE(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return nl.resolveCached(this,e)}resolveNoCache(e){return nl.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),kb(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=te.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),l=s&&s.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<o;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=vt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!vt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=te.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};yi.prototype.text=void 0;class Ga extends yi{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):kb(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ga(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ga(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function kb(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class oo{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new dE(e,n);if(r.next==null)return oo.empty;let i=Sb(r);r.next&&r.err("Unexpected trailing text");let o=bE(yE(i));return vE(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,l){let a=s.matchFragment(e,r);if(a&&(!n||a.validEnd))return te.from(l.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:d}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let h=o(d,l.concat(u));if(h)return h}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let l=i;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:l,next:a}=o.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}oo.empty=new oo(!0);class dE{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Sb(t){let e=[];do e.push(fE(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function fE(t){let e=[];do e.push(hE(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function hE(t){let e=gE(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=pE(t,e);else break;return e}function Bp(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function pE(t,e){let n=Bp(t),r=n;return t.eat(",")&&(t.next!="}"?r=Bp(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function mE(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.isInGroup(e)&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function gE(t){if(t.eat("(")){let e=Sb(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=mE(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function yE(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,l,a){let c={term:a,to:l};return e[s].push(c),c}function i(s,l){s.forEach(a=>a.to=l)}function o(s,l){if(s.type=="choice")return s.exprs.reduce((a,c)=>a.concat(o(c,l)),[]);if(s.type=="seq")for(let a=0;;a++){let c=o(s.exprs[a],l);if(a==s.exprs.length-1)return c;i(c,l=n())}else if(s.type=="star"){let a=n();return r(l,a),i(o(s.expr,a),a),[r(a)]}else if(s.type=="plus"){let a=n();return i(o(s.expr,l),a),i(o(s.expr,a),a),[r(a)]}else{if(s.type=="opt")return[r(l)].concat(o(s.expr,l));if(s.type=="range"){let a=l;for(let c=0;c<s.min;c++){let u=n();i(o(s.expr,a),u),a=u}if(s.max==-1)i(o(s.expr,a),a);else for(let c=s.min;c<s.max;c++){let u=n();r(a,u),i(o(s.expr,a),u),a=u}return[r(a)]}else{if(s.type=="name")return[r(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function xb(t,e){return e-t}function Lp(t,e){let n=[];return r(e),n.sort(xb);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:l,to:a}=o[s];!l&&n.indexOf(a)==-1&&r(a)}}}function bE(t){let e=Object.create(null);return n(Lp(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let u=0;u<i.length;u++)i[u][0]==l&&(c=i[u][1]);Lp(t,a).forEach(u=>{c||i.push([l,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=e[r.join(",")]=new oo(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let l=i[s][1].sort(xb);o.next.push({type:i[s][0],next:e[l.join(",")]||n(l)})}return o}}function vE(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let l=0;l<i.next.length;l++){let{type:a,next:c}=i.next[l];s.push(a.name),o&&!(a.isText||a.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Cb(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Ob(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function Eb(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function Tb(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new kE(t,r,e[r]);return n}let Fp=class Ab{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Tb(e,r.attrs),this.defaultAttrs=Cb(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==oo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Ob(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new yi(this,this.computeAttrs(e),te.from(n),vt.setFrom(r))}createChecked(e=null,n,r){return n=te.from(n),this.checkContent(n),new yi(this,this.computeAttrs(e),n,vt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=te.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(te.empty,!0);return o?new yi(this,e,n.append(o),vt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Eb(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:vt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new Ab(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function wE(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class kE{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?wE(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Oc{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=Tb(e,i.attrs),this.excluded=null;let o=Cb(this.attrs);this.instance=o?new vt(this,o):null}create(e=null){return!e&&this.instance?this.instance:new vt(this,Ob(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new Oc(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Eb(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Mb{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Xt.from(e.nodes),n.marks=Xt.from(e.marks||{}),this.nodes=Fp.compile(this.spec.nodes,this),this.marks=Oc.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",l=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=oo.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=l=="_"?null:l?Vp(this,l.split(" ")):l==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:Vp(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Fp){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Ga(r,r.defaultAttrs,e,vt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return yi.fromJSON(this,e)}markFromJSON(e){return vt.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Vp(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=a)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function SE(t){return t.tag!=null}function xE(t){return t.style!=null}let js=class Nd{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(SE(i))this.tags.push(i);else if(xE(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new Hp(this,n,!1);return r.addAll(e,vt.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Hp(this,n,!0);return r.addAll(e,vt.none,n.from,n.to),ve.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(EE(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(s.getAttrs){let a=s.getAttrs(n);if(a===!1)continue;s.attrs=a||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let l=n[s];if((l.priority==null?50:l.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=zp(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=zp(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Nd(e,Nd.schemaRules(e)))}};const _b={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},CE={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Nb={ol:!0,ul:!0},rl=1,Pd=2,ma=4;function jp(t,e,n){return e!=null?(e?rl:0)|(e==="full"?Pd:0):t&&t.whitespace=="pre"?rl|Pd:n&-5}class Hl{constructor(e,n,r,i,o,s){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=vt.none,this.match=o||(s&ma?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(te.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&rl)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=te.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(te.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!_b.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Hp{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,s=jp(null,n.preserveWhitespace,0)|(r?ma:0);i?o=new Hl(i.type,i.attrs,vt.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new Hl(null,null,vt.none,!0,null,s):o=new Hl(e.schema.topNodeType,null,vt.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&Pd?"full":this.localPreserveWS||(i.options&rl)>0;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],l=e.previousSibling;(!s||l&&l.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),l;Nb.hasOwnProperty(s)&&this.parser.normalizeLists&&OE(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(a?a.ignore:CE.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let c,u=this.needsBlock;if(_b.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),c=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=a&&a.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(o),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,a,c,a.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let l=void 0;;){let a=this.parser.matchStyle(o,s,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(c=>!a.clearMark(c)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,i){let o,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r)||this.leafFallback(e,r);else{let a=this.enter(s,n.attrs||null,r,n.preserveWhitespace);a&&(o=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}o&&this.sync(l)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let s=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];s!=l;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,n);this.findAtPoint(e,o)}findPlace(e,n){let r,i;for(let o=this.open;o>=0;o--){let s=this.nodes[o],l=s.findWrapping(e);if(l&&(!r||r.length>l.length)&&(r=l,i=s,!l.length)||s.solid)break}if(!r)return null;this.sync(i);for(let o=0;o<r.length;o++)n=this.enterInner(r[o],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=vt.none;for(let s of r.concat(e.marks))(i.type?i.type.allowsMarkType(s.type):Kp(s.type,e.type))&&(o=s.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let l=jp(e,o,s.options);s.options&ma&&s.content.length==0&&(l|=ma);let a=vt.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):Kp(c.type,e))?(a=c.addToSet(a),!1):!0),this.nodes.push(new Hl(e,n,a,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=rl)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(l,a)=>{for(;l>=0;l--){let c=n[l];if(c==""){if(l==n.length-1||l==0)continue;for(;a>=o;a--)if(s(l-1,a))return!0;return!1}else{let u=a>0||a==0&&i?this.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;a--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function OE(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Nb.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function EE(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function zp(t){let e={};for(let n in t)e[n]=t[n];return e}function Kp(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=l=>{o.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:u}=l.edge(a);if(c==e||o.indexOf(u)<0&&s(u))return!0}};if(s(i.contentMatch))return!0}}class uo{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=vu(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let l=0,a=0;for(;l<o.length&&a<s.marks.length;){let c=s.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(o[l][0])||c.type.spec.spanning===!1)break;l++,a++}for(;l<o.length;)i=o.pop()[1];for(;a<s.marks.length;){let c=s.marks[a++],u=this.serializeMark(c,s.isInline,n);u&&(o.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=ga(vu(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&ga(vu(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return ga(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new uo(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Up(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Up(e.marks)}}function Up(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function vu(t){return t.document||window.document}const Wp=new WeakMap;function TE(t){let e=Wp.get(t);return e===void 0&&Wp.set(t,e=AE(t)),e}function AE(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function ga(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=TE(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let l,a=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let h=d.indexOf(" ");h>0?a.setAttributeNS(d.slice(0,h),d.slice(h+1),c[d]):a.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let h=e[d];if(h===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:m,contentDOM:g}=ga(t,h,n,r);if(a.appendChild(m),g){if(l)throw new RangeError("Multiple content holes");l=g}}}return{dom:a,contentDOM:l}}const Pb=65535,Ib=Math.pow(2,16);function ME(t,e){return t+e*Ib}function qp(t){return t&Pb}function _E(t){return(t-(t&Pb))/Ib}const Db=1,$b=2,ya=4,Rb=8;class Id{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Rb)>0}get deletedBefore(){return(this.delInfo&(Db|ya))>0}get deletedAfter(){return(this.delInfo&($b|ya))>0}get deletedAcross(){return(this.delInfo&ya)>0}}class Kn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Kn.empty)return Kn.empty}recover(e){let n=0,r=qp(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+_E(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let c=this.ranges[l+o],u=this.ranges[l+s],d=a+c;if(e<=d){let h=c?e==a?-1:e==d?1:n:n,m=a+i+(h<0?0:u);if(r)return m;let g=e==(n<0?a:d)?null:ME(l/3,e-a),b=e==a?$b:e==d?Db:ya;return(n<0?e!=a:e!=d)&&(b|=Rb),new Id(m,b,g)}i+=u-c}return r?e+i:new Id(e+i,0,null)}touches(e,n){let r=0,i=qp(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+o],u=a+c;if(e<=u&&l==i*3)return!0;r+=this.ranges[l+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),c=this.ranges[i+n],u=this.ranges[i+r];e(l,l+c,a,a+u),o+=u-c}}invert(){return new Kn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Kn.empty:new Kn(e<0?[0,-e,0]:[0,0,e])}}Kn.empty=new Kn([]);class il{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new il(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new il;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this._maps[o],l=s.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,e=this._maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new Id(e,i,null)}}const wu=Object.create(null);class dn{getMap(){return Kn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=wu[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in wu)throw new RangeError("Duplicate use of step JSON ID "+e);return wu[e]=n,n.prototype.jsonID=e,n}}class Dt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Dt(e,null)}static fail(e){return new Dt(null,e)}static fromReplace(e,n,r,i){try{return Dt.ok(e.replace(n,r,i))}catch(o){if(o instanceof Wa)return Dt.fail(o.message);throw o}}}function _f(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(_f(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return te.fromArray(r)}class hi extends dn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new ve(_f(n.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return Dt.fromReplace(e,this.from,this.to,o)}invert(){return new Sr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new hi(n.pos,r.pos,this.mark)}merge(e){return e instanceof hi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new hi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new hi(n.from,n.to,e.markFromJSON(n.mark))}}dn.jsonID("addMark",hi);class Sr extends dn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new ve(_f(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Dt.fromReplace(e,this.from,this.to,r)}invert(){return new hi(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Sr(n.pos,r.pos,this.mark)}merge(e){return e instanceof Sr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Sr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Sr(n.from,n.to,e.markFromJSON(n.mark))}}dn.jsonID("removeMark",Sr);class pi extends dn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Dt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Dt.fromReplace(e,this.pos,this.pos+1,new ve(te.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new pi(this.pos,n.marks[i]);return new pi(this.pos,this.mark)}}return new Yo(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new pi(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new pi(n.pos,e.markFromJSON(n.mark))}}dn.jsonID("addNodeMark",pi);class Yo extends dn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Dt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Dt.fromReplace(e,this.pos,this.pos+1,new ve(te.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new pi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Yo(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Yo(n.pos,e.markFromJSON(n.mark))}}dn.jsonID("removeNodeMark",Yo);class zt extends dn{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Dd(e,this.from,this.to)?Dt.fail("Structure replace would overwrite content"):Dt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Kn([this.from,this.to-this.from,this.slice.size])}invert(e){return new zt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new zt(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof zt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?ve.empty:new ve(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new zt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?ve.empty:new ve(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new zt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new zt(n.from,n.to,ve.fromJSON(e,n.slice),!!n.structure)}}dn.jsonID("replace",zt);class Kt extends dn{constructor(e,n,r,i,o,s,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(Dd(e,this.from,this.gapFrom)||Dd(e,this.gapTo,this.to)))return Dt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Dt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Dt.fromReplace(e,this.from,this.to,r):Dt.fail("Content does not fit in gap")}getMap(){return new Kn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Kt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new Kt(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Kt(n.from,n.to,n.gapFrom,n.gapTo,ve.fromJSON(e,n.slice),n.insert,!!n.structure)}}dn.jsonID("replaceAround",Kt);function Dd(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function NE(t,e,n,r){let i=[],o=[],s,l;t.doc.nodesBetween(e,n,(a,c,u)=>{if(!a.isInline)return;let d=a.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,e),m=Math.min(c+a.nodeSize,n),g=r.addToSet(d);for(let b=0;b<d.length;b++)d[b].isInSet(g)||(s&&s.to==h&&s.mark.eq(d[b])?s.to=m:i.push(s=new Sr(h,m,d[b])));l&&l.to==h?l.to=m:o.push(l=new hi(h,m,r))}}),i.forEach(a=>t.step(a)),o.forEach(a=>t.step(a))}function PE(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(s,l)=>{if(!s.isInline)return;o++;let a=null;if(r instanceof Oc){let c=s.marks,u;for(;u=r.isInSet(c);)(a||(a=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(a=[r]):a=s.marks;if(a&&a.length){let c=Math.min(l+s.nodeSize,n);for(let u=0;u<a.length;u++){let d=a[u],h;for(let m=0;m<i.length;m++){let g=i[m];g.step==o-1&&d.eq(i[m].style)&&(h=g)}h?(h.to=c,h.step=o):i.push({style:d,from:Math.max(l,e),to:c,step:o})}}}),i.forEach(s=>t.step(new Sr(s.from,s.to,s.style)))}function Nf(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),s=[],l=e+1;for(let a=0;a<o.childCount;a++){let c=o.child(a),u=l+c.nodeSize,d=r.matchType(c.type);if(!d)s.push(new zt(l,u,ve.empty));else{r=d;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new Sr(l,u,c.marks[h]));if(i&&c.isText&&n.whitespace!="pre"){let h,m=/\r?\n|\r/g,g;for(;h=m.exec(c.text);)g||(g=new ve(te.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new zt(l+h.index,l+h.index+h[0].length,g))}}l=u}if(!r.validEnd){let a=r.fillBefore(te.empty,!0);t.replace(l,l,new ve(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function IE(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function ss(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,s,n))return r;if(r==0||i.type.spec.isolating||!IE(i,o,s))break}return null}function DE(t,e,n){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),l=i.after(o+1),a=s,c=l,u=te.empty,d=0;for(let g=o,b=!1;g>n;g--)b||r.index(g)>0?(b=!0,u=te.from(r.node(g).copy(u)),d++):a--;let h=te.empty,m=0;for(let g=o,b=!1;g>n;g--)b||i.after(g+1)<i.end(g)?(b=!0,h=te.from(i.node(g).copy(h)),m++):c++;t.step(new Kt(a,c,s,l,new ve(u.append(h),d,m),u.size-d,!0))}function Pf(t,e,n=null,r=t){let i=$E(t,e),o=i&&RE(r,e);return o?i.map(Jp).concat({type:e,attrs:n}).concat(o.map(Jp)):null}function Jp(t){return{type:t,attrs:null}}function $E(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function RE(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;a&&c<i;c++)a=a.matchType(n.child(c).type);return!a||!a.validEnd?null:s}function BE(t,e,n){let r=te.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let l=n[s].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=te.from(n[s].type.create(n[s].attrs,r))}let i=e.start,o=e.end;t.step(new Kt(i,o,i,o,new ve(r,0,0),n.length,!0))}function LE(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(s,l)=>{let a=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,a)&&FE(t.doc,t.mapping.slice(o).map(l),r)){let c=null;if(r.schema.linebreakReplacement){let m=r.whitespace=="pre",g=!!r.contentMatch.matchType(r.schema.linebreakReplacement);m&&!g?c=!1:!m&&g&&(c=!0)}c===!1&&Lb(t,s,l,o),Nf(t,t.mapping.slice(o).map(l,1),r,void 0,c===null);let u=t.mapping.slice(o),d=u.map(l,1),h=u.map(l+s.nodeSize,1);return t.step(new Kt(d,h,d+1,h-1,new ve(te.from(r.create(a,null,s.marks)),0,0),1,!0)),c===!0&&Bb(t,s,l,o),!1}})}function Bb(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let s,l=/\r?\n|\r/g;for(;s=l.exec(i.text);){let a=t.mapping.slice(r).map(n+1+o+s.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function Lb(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+o);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function FE(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function VE(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Kt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new ve(te.from(s),0,0),1,!0))}function Wr(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>o;c--,u--){let d=i.node(c),h=i.index(c);if(d.type.spec.isolating)return!1;let m=d.content.cutByIndex(h,d.childCount),g=r&&r[u+1];g&&(m=m.replaceChild(0,g.type.create(g.attrs)));let b=r&&r[u]||d;if(!d.canReplace(h+1,d.childCount)||!b.type.validContent(m))return!1}let l=i.indexAfter(o),a=r&&r[0];return i.node(o).canReplaceWith(l,l,a?a.type:i.node(o+1).type)}function jE(t,e,n=1,r){let i=t.doc.resolve(e),o=te.empty,s=te.empty;for(let l=i.depth,a=i.depth-n,c=n-1;l>a;l--,c--){o=te.from(i.node(l).copy(o));let u=r&&r[c];s=te.from(u?u.type.create(u.attrs,s):i.node(l).copy(s))}t.step(new zt(e,e,new ve(o.append(s),n,n),!0))}function Mi(t,e){let n=t.resolve(e),r=n.index();return Fb(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function HE(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),s=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function Fb(t,e){return!!(t&&e&&!t.isLeaf&&HE(t,e))}function Ec(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,l=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),l++,s=r.node(i).maybeChild(l)):(o=r.node(i).maybeChild(l-1),s=r.node(i+1)),o&&!o.isTextblock&&Fb(o,s)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function zE(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),s=o.node().type;if(i&&s.inlineContent){let u=s.whitespace=="pre",d=!!s.contentMatch.matchType(i);u&&!d?r=!1:!u&&d&&(r=!0)}let l=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);Lb(t,u.node(),u.before(),l)}s.inlineContent&&Nf(t,e+n-1,s,o.node().contentMatchAt(o.index()),r==null);let a=t.mapping.slice(l),c=a.map(e-n);if(t.step(new zt(c,a.map(e+n,-1),ve.empty,!0)),r===!0){let u=t.doc.resolve(c);Bb(t,u.node(),u.before(),t.steps.length)}return t}function KE(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function Vb(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,a=r.index(s)+(l>0?1:0),c=r.node(s),u=!1;if(o==1)u=c.canReplace(a,a,i);else{let d=c.contentMatchAt(a).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(a,a,d[0])}if(u)return l==0?r.pos:l<0?r.before(s+1):r.after(s+1)}return null}function Tc(t,e,n=e,r=ve.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return jb(i,o,r)?new zt(e,n,r):new UE(i,o,r).fit()}function jb(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class UE{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=te.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=te.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,l=i.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new ve(o,s,l);return e>-1?new Kt(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new zt(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=ku(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],u,d=null;if(n==1&&(s?c.matchType(s.type)||(d=c.fillBefore(te.from(s),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:l,parent:o,inject:d};if(n==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:l,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=ku(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ve(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=ku(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new ve(ks(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new ve(ks(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let b=0;b<o.length;b++)this.openFrontierNode(o[b]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[n];if(i){for(let b=0;b<i.childCount;b++)u.push(i.child(b));d=d.matchFragment(i)}let m=l.size+e-(s.content.size-s.openEnd);for(;c<l.childCount;){let b=l.child(c),S=d.matchType(b.type);if(!S)break;c++,(c>1||a==0||b.content.size)&&(d=S,u.push(Hb(b.mark(h.allowedMarks(b.marks)),c==1?a:0,c==l.childCount?m:-1)))}let g=c==l.childCount;g||(m=-1),this.placed=Ss(this.placed,n,te.from(u)),this.frontier[n].match=d,g&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let b=0,S=l;b<m;b++){let O=S.lastChild;this.frontier.push({type:O.type,match:O.contentMatchAt(O.childCount)}),S=O.content}this.unplaced=g?e==0?ve.empty:new ve(ks(s.content,e-1,1),e-1,m<0?s.openEnd:e-1):new ve(ks(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Su(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=Su(e,n,i,r,o);if(s){for(let l=n-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],u=Su(e,l,c,a,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Ss(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Ss(this.placed,this.depth,te.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(te.empty,!0);n.childCount&&(this.placed=Ss(this.placed,this.frontier.length,n))}}function ks(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(ks(t.firstChild.content,e-1,n)))}function Ss(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Ss(t.lastChild.content,e-1,n)))}function ku(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Hb(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Hb(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(te.empty,!0)))),t.copy(r)}function Su(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,s);return l&&!WE(n,o.content,s)?l:null}function WE(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function qE(t){return t.spec.defining||t.spec.definingForContent}function JE(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(jb(i,o,r))return t.step(new zt(e,n,r));let s=Kb(i,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let l=-(i.depth+1);s.unshift(l);for(let h=i.depth,m=i.pos-1;h>0;h--,m--){let g=i.node(h).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;s.indexOf(h)>-1?l=h:i.before(h)==m&&s.splice(1,0,-h)}let a=s.indexOf(l),c=[],u=r.openStart;for(let h=r.content,m=0;;m++){let g=h.firstChild;if(c.push(g),m==r.openStart)break;h=g.content}for(let h=u-1;h>=0;h--){let m=c[h],g=qE(m.type);if(g&&!m.sameMarkup(i.node(Math.abs(l)-1)))u=h;else if(g||!m.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let m=(h+u+1)%(r.openStart+1),g=c[m];if(g)for(let b=0;b<s.length;b++){let S=s[(b+a)%s.length],O=!0;S<0&&(O=!1,S=-S);let A=i.node(S-1),N=i.index(S-1);if(A.canReplaceWith(N,N,g.type,g.marks))return t.replace(i.before(S),O?o.after(S):n,new ve(zb(r.content,0,r.openStart,m),m,r.openEnd))}}let d=t.steps.length;for(let h=s.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>d));h--){let m=s[h];m<0||(e=i.before(m),n=o.after(m))}}function zb(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(zb(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(t).append(t);t=s.append(o.matchFragment(s).fillBefore(te.empty,!0))}return t}function GE(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=KE(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new ve(te.from(r),0,0))}function YE(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=Kb(r,i);for(let s=0;s<o.length;s++){let l=o[s],a=s==o.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function Kb(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class Uo extends dn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Dt.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Dt.fromReplace(e,this.pos,this.pos+1,new ve(te.from(i),0,n.isLeaf?0:1))}getMap(){return Kn.empty}invert(e){return new Uo(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Uo(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Uo(n.pos,n.attr,n.value)}}dn.jsonID("attr",Uo);class ol extends dn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Dt.ok(r)}getMap(){return Kn.empty}invert(e){return new ol(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new ol(n.attr,n.value)}}dn.jsonID("docAttr",ol);let Xo=class extends Error{};Xo=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Xo.prototype=Object.create(Error.prototype);Xo.prototype.constructor=Xo;Xo.prototype.name="TransformError";class XE{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new il}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Xo(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=ve.empty){let i=Tc(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new ve(te.from(r),0,0))}delete(e,n){return this.replace(e,n,ve.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return JE(this,e,n,r),this}replaceRangeWith(e,n,r){return GE(this,e,n,r),this}deleteRange(e,n){return YE(this,e,n),this}lift(e,n){return DE(this,e,n),this}join(e,n=1){return zE(this,e,n),this}wrap(e,n){return BE(this,e,n),this}setBlockType(e,n=e,r,i=null){return LE(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return VE(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Uo(e,n,r)),this}setDocAttribute(e,n){return this.step(new ol(e,n)),this}addNodeMark(e,n){return this.step(new pi(e,n)),this}removeNodeMark(e,n){if(!(n instanceof vt)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Yo(e,n)),this}split(e,n=1,r){return jE(this,e,n,r),this}addMark(e,n,r){return NE(this,e,n,r),this}removeMark(e,n,r){return PE(this,e,n,r),this}clearIncompatible(e,n,r){return Nf(this,e,n,r),this}}const xu=Object.create(null);class Je{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new ZE(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=ve.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:c}=s[l],u=e.mapping.slice(o);e.replaceRange(u.map(a.pos),u.map(c.pos),l?ve.empty:n),l==0&&Xp(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:l}=i[o],a=e.mapping.slice(r),c=a.map(s.pos),u=a.map(l.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),Xp(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new He(e):To(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?To(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):To(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new qn(e.node(0))}static atStart(e){return To(e,e,0,0,1)||new qn(e)}static atEnd(e){return To(e,e,e.content.size,e.childCount,-1)||new qn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=xu[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in xu)throw new RangeError("Duplicate use of selection JSON ID "+e);return xu[e]=n,n.prototype.jsonID=e,n}getBookmark(){return He.between(this.$anchor,this.$head).getBookmark()}}Je.prototype.visible=!0;class ZE{constructor(e,n){this.$from=e,this.$to=n}}let Gp=!1;function Yp(t){!Gp&&!t.parent.inlineContent&&(Gp=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class He extends Je{constructor(e,n=e){Yp(e),Yp(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Je.near(r);let i=e.resolve(n.map(this.anchor));return new He(i.parent.inlineContent?i:r,r)}replace(e,n=ve.empty){if(super.replace(e,n),n==ve.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof He&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Ac(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new He(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=Je.findFrom(n,r,!0)||Je.findFrom(n,-r,!0);if(o)n=o.$head;else return Je.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(Je.findFrom(e,-r,!0)||Je.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new He(e,n)}}Je.jsonID("text",He);class Ac{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Ac(e.map(this.anchor),e.map(this.head))}resolve(e){return He.between(e.resolve(this.anchor),e.resolve(this.head))}}class De extends Je{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?Je.near(o):new De(o)}content(){return new ve(te.from(this.node),0,0)}eq(e){return e instanceof De&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new If(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new De(e.resolve(n.anchor))}static create(e,n){return new De(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}De.prototype.visible=!1;Je.jsonID("node",De);class If{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Ac(r,r):new If(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&De.isSelectable(r)?new De(n):Je.near(n)}}class qn extends Je{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=ve.empty){if(n==ve.empty){e.delete(0,e.doc.content.size);let r=Je.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new qn(e)}map(e){return new qn(e)}eq(e){return e instanceof qn}getBookmark(){return QE}}Je.jsonID("all",qn);const QE={map(){return this},resolve(t){return new qn(t)}};function To(t,e,n,r,i,o=!1){if(e.inlineContent)return He.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let l=e.child(s);if(l.isAtom){if(!o&&De.isSelectable(l))return De.create(t,n-(i<0?l.nodeSize:0))}else{let a=To(t,l,n+i,i<0?l.childCount:0,i,o);if(a)return a}n+=l.nodeSize*i}return null}function Xp(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof zt||i instanceof Kt))return;let o=t.mapping.maps[r],s;o.forEach((l,a,c,u)=>{s==null&&(s=u)}),t.setSelection(Je.near(t.doc.resolve(s),n))}const Zp=1,Qp=2,em=4;class eT extends XE{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Zp)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&Zp)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Qp,this}ensureMarks(e){return vt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Qp)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||vt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),this.selection.empty||this.setSelection(Je.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=em,this}get scrolledIntoView(){return(this.updated&em)>0}}function tm(t,e){return!e||!t?t:t.bind(e)}class xs{constructor(e,n,r){this.name=e,this.init=tm(n.init,r),this.apply=tm(n.apply,r)}}const tT=[new xs("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new xs("selection",{init(t,e){return t.selection||Je.atStart(e.doc)},apply(t){return t.selection}}),new xs("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new xs("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Cu{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=tT.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new xs(r.key,r.spec.state,r))})}}class Po{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let l=this.config.plugins[s];if(l.spec.appendTransaction){let a=i?i[s].n:0,c=i?i[s].state:this,u=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<s?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Po(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new eT(this)}static create(e){let n=new Cu(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Po(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Cu(this.schema,e.plugins),r=n.fields,i=new Po(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Cu(e.schema,e.plugins),o=new Po(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=yi.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=Je.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],c=a.spec.state;if(a.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){o[s.name]=c.fromJSON.call(a,e,n[l],o);return}}o[s.name]=s.init(e,o)}}),o}}function Ub(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Ub(i,e,{})),n[r]=i}return n}class $n{constructor(e){this.spec=e,this.props={},e.props&&Ub(e.props,this,this.props),this.key=e.key?e.key.key:Wb("plugin")}getState(e){return e[this.key]}}const Ou=Object.create(null);function Wb(t){return t in Ou?t+"$"+ ++Ou[t]:(Ou[t]=0,t+"$")}class Nr{constructor(e="key"){this.key=Wb(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Zt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Zo=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let $d=null;const Rr=function(t,e,n){let r=$d||($d=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},nT=function(){$d=null},so=function(t,e,n,r){return n&&(nm(t,e,n,r,-1)||nm(t,e,n,r,1))},rT=/^(img|br|input|textarea|hr)$/i;function nm(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Qn(t))){let o=t.parentNode;if(!o||o.nodeType!=1||vl(t)||rT.test(t.nodeName)||t.contentEditable=="false")return!1;e=Zt(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?Qn(t):0}else return!1}}function Qn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function iT(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Qn(t)}else if(t.parentNode&&!vl(t))e=Zt(t),t=t.parentNode;else return null}}function oT(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!vl(t))e=Zt(t)+1,t=t.parentNode;else return null}}function sT(t,e,n){for(let r=e==0,i=e==Qn(t);r||i;){if(t==n)return!0;let o=Zt(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==Qn(t)}}function vl(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Mc=function(t){return t.focusNode&&so(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function ji(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function lT(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function aT(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Qn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Qn(r.startContainer),r.startOffset)}}}const Ar=typeof navigator<"u"?navigator:null,rm=typeof document<"u"?document:null,_i=Ar&&Ar.userAgent||"",Rd=/Edge\/(\d+)/.exec(_i),qb=/MSIE \d/.exec(_i),Bd=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(_i),In=!!(qb||Bd||Rd),bi=qb?document.documentMode:Bd?+Bd[1]:Rd?+Rd[1]:0,pr=!In&&/gecko\/(\d+)/i.test(_i);pr&&+(/Firefox\/(\d+)/.exec(_i)||[0,0])[1];const Ld=!In&&/Chrome\/(\d+)/.exec(_i),cn=!!Ld,Jb=Ld?+Ld[1]:0,Sn=!In&&!!Ar&&/Apple Computer/.test(Ar.vendor),Qo=Sn&&(/Mobile\/\w+/.test(_i)||!!Ar&&Ar.maxTouchPoints>2),Xn=Qo||(Ar?/Mac/.test(Ar.platform):!1),cT=Ar?/Win/.test(Ar.platform):!1,Hr=/Android \d/.test(_i),wl=!!rm&&"webkitFontSmoothing"in rm.documentElement.style,uT=wl?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function dT(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Dr(t,e){return typeof t=="number"?t:t[e]}function fT(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function im(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=Zo(s);continue}let l=s,a=l==o.body,c=a?dT(o):fT(l),u=0,d=0;if(e.top<c.top+Dr(r,"top")?d=-(c.top-e.top+Dr(i,"top")):e.bottom>c.bottom-Dr(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Dr(i,"top")-c.top:e.bottom-c.bottom+Dr(i,"bottom")),e.left<c.left+Dr(r,"left")?u=-(c.left-e.left+Dr(i,"left")):e.right>c.right-Dr(r,"right")&&(u=e.right-c.right+Dr(i,"right")),u||d)if(a)o.defaultView.scrollBy(u,d);else{let m=l.scrollLeft,g=l.scrollTop;d&&(l.scrollTop+=d),u&&(l.scrollLeft+=u);let b=l.scrollLeft-m,S=l.scrollTop-g;e={left:e.left-b,top:e.top-S,right:e.right-b,bottom:e.bottom-S}}let h=a?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(h))break;s=h=="absolute"?s.offsetParent:Zo(s)}}function hT(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let l=t.root.elementFromPoint(o,s);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:Gb(t.dom)}}function Gb(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Zo(r));return e}function pT({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Yb(n,r==0?0:r-e)}function Yb(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let So=null;function mT(t){if(t.setActive)return t.setActive();if(So)return t.focus(So);let e=Gb(t);t.focus(So==null?{get preventScroll(){return So={preventScroll:!0},!0}}:void 0),So||(So=!1,Yb(e,0))}function Xb(t,e){let n,r=2e8,i,o=0,s=e.top,l=e.top,a,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=Rr(u).getClientRects();else continue;for(let m=0;m<h.length;m++){let g=h[m];if(g.top<=s&&g.bottom>=l){s=Math.max(g.bottom,s),l=Math.min(g.top,l);let b=g.left>e.left?g.left-e.left:g.right<e.left?e.left-g.right:0;if(b<r){n=u,r=b,i=b&&n.nodeType==3?{left:g.right<e.left?g.right:g.left,top:e.top}:e,u.nodeType==1&&b&&(o=d+(e.left>=(g.left+g.right)/2?1:0));continue}}else g.top>e.top&&!a&&g.left<=e.left&&g.right>=e.left&&(a=u,c={left:Math.max(g.left,Math.min(g.right,e.left)),top:g.top});!n&&(e.left>=g.right&&e.top>=g.top||e.left>=g.left&&e.top>=g.bottom)&&(o=d+1)}}return!n&&a&&(n=a,i=c,r=0),n&&n.nodeType==3?gT(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:Xb(n,i)}function gT(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=ni(r,1);if(o.top!=o.bottom&&Df(e,o))return{node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function Df(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function yT(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function bT(t,e,n){let{node:r,offset:i}=Xb(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function vT(t,e,n,r){let i=-1;for(let o=e,s=!1;o!=t.dom;){let l=t.docView.nearestDesc(o,!0),a;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((a=l.dom.getBoundingClientRect()).width||a.height)&&(l.node.isBlock&&l.parent&&(!s&&a.left>r.left||a.top>r.top?i=l.posBefore:(!s&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),s=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter;o=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function Zb(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=t.childNodes[o];if(s.nodeType==1){let l=s.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if(Df(e,c))return Zb(s,e,c)}}if((o=(o+1)%r)==i)break}return t}function wT(t,e){let n=t.dom.ownerDocument,r,i=0,o=aT(n,e.left,e.top);o&&({node:r,offset:i}=o);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=t.dom.getBoundingClientRect();if(!Df(e,c)||(s=Zb(t.dom,e,c),!s))return null}if(Sn)for(let c=s;r&&c;c=Zo(c))c.draggable&&(r=void 0);if(s=yT(s,e),r){if(pr&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;wl&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=vT(t,r,i,e))}l==null&&(l=bT(t,s,e));let a=t.docView.nearestDesc(s,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function om(t){return t.top<t.bottom||t.left<t.right}function ni(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(om(r))return r}return Array.prototype.find.call(n,om)||t.getBoundingClientRect()}const kT=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Qb(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=wl||pr;if(r.nodeType==3)if(s&&(kT.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=ni(Rr(r,i,i),n);if(pr&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=ni(Rr(r,i-1,i-1),-1);if(c.top==a.top){let u=ni(Rr(r,i,i+1),-1);if(u.top!=a.top)return hs(u,u.left<c.left)}}return a}else{let a=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(a--,u=1):n<0?a--:c++,hs(ni(Rr(r,a,c),u),u<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==Qn(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return Eu(a.getBoundingClientRect(),!1)}if(o==null&&i<Qn(r)){let a=r.childNodes[i];if(a.nodeType==1)return Eu(a.getBoundingClientRect(),!0)}return Eu(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==Qn(r))){let a=r.childNodes[i-1],c=a.nodeType==3?Rr(a,Qn(a)-(s?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return hs(ni(c,1),!1)}if(o==null&&i<Qn(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?Rr(a,0,s?0:1):a.nodeType==1?a:null:null;if(c)return hs(ni(c,-1),!0)}return hs(ni(r.nodeType==3?Rr(r):r,-n),n>=0)}function hs(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Eu(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function ev(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function ST(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return ev(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(o,!0);if(!l)break;if(l.node.isBlock){o=l.contentDOM||l.dom;break}o=l.dom.parentNode}let s=Qb(t,i.pos,1);for(let l=o.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=Rr(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let u=a[c];if(u.bottom>u.top+1&&(n=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const xT=/[\u0590-\u08ac]/;function CT(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,l=t.domSelection();return l?!xT.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?o:s:ev(t,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),h=l.caretBidiLevel;l.modify("move",n,"character");let m=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:g,focusOffset:b}=t.domSelectionRange(),S=g&&!m.contains(g.nodeType==1?g:g.parentNode)||a==g&&c==b;try{l.collapse(u,d),a&&(a!=u||c!=d)&&l.extend&&l.extend(a,c)}catch{}return h!=null&&(l.caretBidiLevel=h),S}):r.pos==r.start()||r.pos==r.end()}let sm=null,lm=null,am=!1;function OT(t,e,n){return sm==e&&lm==n?am:(sm=e,lm=n,am=n=="up"||n=="down"?ST(t,e,n):CT(t,e,n))}const rr=0,cm=1,Ki=2,Mr=3;class kl{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=rr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Zt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let l=i.children[s];if(l.size){i=l;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],l=o+s.size;if(l>e||s instanceof nv){i=e-o;break}o=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof tv&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Zt(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Zt(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,l=0;;l++){let a=this.children[l],c=s+a.size;if(i==-1&&e<=c){let u=s+a.border;if(e>=u&&n<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,u);e=s;for(let d=l;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){i=Zt(h.dom)+1;break}e-=h.size}i==-1&&(i=0)}if(i>-1&&(c>n||l==this.children.length-1)){n=c;for(let u=l+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=Zt(d.dom);break}n+=d.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),s=Math.max(e,n);for(let m=0,g=0;m<this.children.length;m++){let b=this.children[m],S=g+b.size;if(o>g&&s<S)return b.setSelection(e-g-b.border,n-g-b.border,r,i);g=S}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((pr||Sn)&&e==n){let{node:m,offset:g}=l;if(m.nodeType==3){if(d=!!(g&&m.nodeValue[g-1]==`
`),d&&g==m.nodeValue.length)for(let b=m,S;b;b=b.parentNode){if(S=b.nextSibling){S.nodeName=="BR"&&(l=a={node:S.parentNode,offset:Zt(S)+1});break}let O=b.pmViewDesc;if(O&&O.node&&O.node.isBlock)break}}else{let b=m.childNodes[g-1];d=b&&(b.nodeName=="BR"||b.contentEditable=="false")}}if(pr&&u.focusNode&&u.focusNode!=a.node&&u.focusNode.nodeType==1){let m=u.focusNode.childNodes[u.focusOffset];m&&m.contentEditable=="false"&&(i=!0)}if(!(i||d&&Sn)&&so(l.node,l.offset,u.anchorNode,u.anchorOffset)&&so(a.node,a.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||e==n)&&!d){c.collapse(l.node,l.offset);try{e!=n&&c.extend(a.node,a.offset),h=!0}catch{}}if(!h){if(e>n){let g=l;l=a,a=g}let m=document.createRange();m.setEnd(a.node,a.offset),m.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(m)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let l=r+o.border,a=s-o.border;if(e>=l&&n<=a){this.dirty=e==r||n==s?Ki:cm,e==l&&n==a&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Mr:o.markDirty(e-l,n-l);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Ki:Mr}r=s}this.dirty=Ki}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Ki:cm;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class tv extends kl{constructor(e,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let l=document.createElement("span");l.appendChild(s),s=l}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==rr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class ET extends kl{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class lo extends kl{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=uo.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new lo(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Mr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Mr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=rr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=rr}}slice(e,n,r){let i=lo.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=Vd(o,n,s,r)),e>0&&(o=Vd(o,0,e,r));for(let l=0;l<o.length;l++)o[l].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class vi extends kl{constructor(e,n,r,i,o,s,l,a,c){super(e,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,o,s){let l=o.nodeViews[n.type.name],a,c=l&&l(n,o,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=uo.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let h=u;return u=ov(u,r,n),c?a=new TT(e,n,r,i,u,d||null,h,c,o,s+1):n.isText?new _c(e,n,r,i,u,h,o):new vi(e,n,r,i,u,d||null,h,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>te.empty)}return e}matchesNode(e,n,r){return this.dirty==rr&&e.eq(this.node)&&Ya(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,s=o&&o.pos>-1?o:null,l=o&&o.pos<0,a=new MT(this,s&&s.node,e);PT(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?a.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&a.syncToMarks(u==this.node.childCount?vt.none:this.node.child(u).marks,r,e),a.placeWidget(c,e,i)},(c,u,d,h)=>{a.syncToMarks(c.marks,r,e);let m;a.findNodeMatch(c,u,d,h)||l&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(m=a.findIndexWithChild(o.node))>-1&&a.updateNodeAt(c,u,d,m,e)||a.updateNextNode(c,u,d,e,h,i)||a.addNode(c,u,d,e,i),i+=c.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Ki)&&(s&&this.protectLocalComposition(e,s),rv(this.contentDOM,this.children,e),Qo&&IT(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof He)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,l=DT(this.node.content,s,r-n,i-n);return l<0?null:{node:o,pos:l,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new ET(this,o,n,i);e.input.compositionNodes.push(s),this.children=Vd(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==Mr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=rr}updateOuterDeco(e){if(Ya(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=iv(this.dom,this.nodeDOM,Fd(this.outerDeco,this.node,n),Fd(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function um(t,e,n,r,i){ov(r,e,t);let o=new vi(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class _c extends vi{constructor(e,n,r,i,o,s,l){super(e,n,r,i,o,null,s,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Mr||this.dirty!=rr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=rr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=rr,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new _c(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Mr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class nv extends kl{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==rr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class TT extends vi{constructor(e,n,r,i,o,s,l,a,c,u){super(e,n,r,i,o,s,l,c,u),this.spec=a}update(e,n,r,i){if(this.dirty==Mr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function rv(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],l=s.dom;if(l.parentNode==t){for(;l!=r;)r=dm(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(s instanceof lo){let a=r?r.previousSibling:t.lastChild;rv(s.contentDOM,s.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=dm(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Hs=function(t){t&&(this.nodeName=t)};Hs.prototype=Object.create(null);const Ui=[new Hs];function Fd(t,e,n){if(t.length==0)return Ui;let r=n?Ui[0]:new Hs,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new Hs(s.nodeName));for(let l in s){let a=s[l];a!=null&&(n&&i.length==1&&i.push(r=new Hs(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function iv(t,e,n,r){if(n==Ui&&r==Ui)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],l=n[o];if(o){let a;l&&l.nodeName==s.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==s.nodeName||(a=document.createElement(s.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=Ui[0]),i=a}AT(i,l||Ui[0],s)}return i}function AT(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function ov(t,e,n){return iv(t,t,Ui,Fd(e,n,t.nodeType!=1))}function Ya(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function dm(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class MT{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=_T(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=rr,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let c=this.top.children[a];if(c.matchesMark(e[o])&&!this.isLocked(c.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=lo.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))o=this.top.children.indexOf(s,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){o=l;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let s=this.top.children[i];return s.dirty==Mr&&s.dom==s.contentDOM&&(s.dirty=Ki),s.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,s){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof vi){let c=this.preMatch.matched.get(a);if(c!=null&&c!=o)return!1;let u=a.dom,d,h=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=Mr&&Ya(n,a.outerDeco));if(!h&&a.update(e,n,r,i))return this.destroyBetween(this.index,l),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(a,e,n,r,i,s)))return this.destroyBetween(this.index,l),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Ki,d.updateChildren(i,s+1),d.dirty=rr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Ya(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=vi.create(this.top,n,r,i,o,s);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,i,o){let s=vi.create(this.top,e,n,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new tv(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof lo;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof _c)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Sn||cn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new nv(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function _T(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];e:for(;i>0;){let l;for(;;)if(r){let c=n.children[r-1];if(c instanceof lo)n=c,r=c.children.length;else{l=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,o.set(l,i),s.push(l)}}return{index:i,matched:o,matches:s.reverse()}}function NT(t,e){return t.type.side-e.type.side}function PT(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(o,u),c),o+=u.nodeSize}return}let s=0,l=[],a=null;for(let c=0;;){let u,d;for(;s<i.length&&i[s].to==o;){let S=i[s++];S.widget&&(u?(d||(d=[u])).push(S):u=S)}if(u)if(d){d.sort(NT);for(let S=0;S<d.length;S++)n(d[S],c,!!a)}else n(u,c,!!a);let h,m;if(a)m=-1,h=a,a=null;else if(c<t.childCount)m=c,h=t.child(c++);else break;for(let S=0;S<l.length;S++)l[S].to<=o&&l.splice(S--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)l.push(i[s++]);let g=o+h.nodeSize;if(h.isText){let S=g;s<i.length&&i[s].from<S&&(S=i[s].from);for(let O=0;O<l.length;O++)l[O].to<S&&(S=l[O].to);S<g&&(a=h.cut(S-o),h=h.cut(0,S-o),g=S,m=-1)}else for(;s<i.length&&i[s].to<g;)s++;let b=h.isInline&&!h.isLeaf?l.filter(S=>!S.inline):l.slice();r(h,b,e.forChild(o,h),m),o=g}}function IT(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function DT(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),l=o;if(o+=s.nodeSize,!s.isText)continue;let a=s.text;for(;i<t.childCount;){let c=t.child(i++);if(o+=c.nodeSize,!c.isText)break;a+=c.text}if(o>=n){if(o>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let c=l<r?a.lastIndexOf(e,r-l-1):-1;if(c>=0&&c+e.length+l>=n)return l+c;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function Vd(t,e,n,r,i){let o=[];for(let s=0,l=0;s<t.length;s++){let a=t[s],c=l,u=l+=a.size;c>=n||u<=e?o.push(a):(c<e&&o.push(a.slice(0,e-c,r)),i&&(o.push(i),i=void 0),u>n&&o.push(a.slice(n-c,a.size,r)))}return o}function $f(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let l=r.resolve(s),a,c;if(Mc(n)){for(a=s;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&De.isSelectable(d)&&i.parent&&!(d.isInline&&sT(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;c=new De(s==h?l:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=s,h=s;for(let m=0;m<n.rangeCount;m++){let g=n.getRangeAt(m);d=Math.min(d,t.docView.posFromDOM(g.startContainer,g.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(d<0)return null;[a,s]=h==t.state.selection.anchor?[h,d]:[d,h],l=r.resolve(s)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let u=r.resolve(a);if(!c){let d=e=="pointer"||t.state.selection.head<l.pos&&!o?1:-1;c=Rf(t,u,l,d)}return c}function sv(t){return t.editable?t.hasFocus():av(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function qr(t,e=!1){let n=t.state.selection;if(lv(t,n),!!sv(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&cn){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&so(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)RT(t);else{let{anchor:r,head:i}=n,o,s;fm&&!(n instanceof He)&&(n.$from.parent.inlineContent||(o=hm(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=hm(t,n.to))),t.docView.setSelection(r,i,t,e),fm&&(o&&pm(o),s&&pm(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&$T(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const fm=Sn||cn&&Jb<63;function hm(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Sn&&i&&i.contentEditable=="false")return Tu(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return Tu(i);if(o)return Tu(o)}}function Tu(t){return t.contentEditable="true",Sn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function pm(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function $T(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!sv(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function RT(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,Zt(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&In&&bi<=11&&(r.disabled=!0,r.disabled=!1)}function lv(t,e){if(e instanceof De){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(mm(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else mm(t)}function mm(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Rf(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||He.between(e,n,r)}function gm(t){return t.editable&&!t.hasFocus()?!1:av(t)}function av(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function BT(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return so(e.node,e.offset,n.anchorNode,n.anchorOffset)}function jd(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&Je.findFrom(o,e)}function li(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function ym(t,e,n){let r=t.state.selection;if(r instanceof He)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return li(t,new He(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=jd(t.state,e);return i&&i instanceof De?li(t,i):!1}else if(!(Xn&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let l=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(l))&&!s.contentDOM?De.isSelectable(o)?li(t,new De(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):wl?li(t,new He(t.state.doc.resolve(e<0?l:l+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof De&&r.node.isInline)return li(t,new He(e>0?r.$to:r.$from));{let i=jd(t.state,e);return i?li(t,i):!1}}}function Xa(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function zs(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function xo(t,e){return e<0?LT(t):FT(t)}function LT(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for(pr&&n.nodeType==1&&r<Xa(n)&&zs(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(zs(l,-1))i=n,o=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(cv(n))break;{let l=n.previousSibling;for(;l&&zs(l,-1);)i=n.parentNode,o=Zt(l),l=l.previousSibling;if(l)n=l,r=Xa(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?Hd(t,n,r):i&&Hd(t,i,o)}function FT(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Xa(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(zs(l,1))o=n,s=++r;else break}else{if(cv(n))break;{let l=n.nextSibling;for(;l&&zs(l,1);)o=l.parentNode,s=Zt(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Xa(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&Hd(t,o,s)}function cv(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function VT(t,e){for(;t&&e==t.childNodes.length&&!vl(t);)e=Zt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function jT(t,e){for(;t&&!e&&!vl(t);)e=Zt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Hd(t,e,n){if(e.nodeType!=3){let o,s;(s=VT(e,n))?(e=s,n=0):(o=jT(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Mc(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&qr(t)},50)}function bm(t,e){let n=t.state.doc.resolve(e);if(!(cn||cT)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function vm(t,e,n){let r=t.state.selection;if(r instanceof He&&!r.empty||n.indexOf("s")>-1||Xn&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=jd(t.state,e);if(s&&s instanceof De)return li(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,l=r instanceof qn?Je.near(s,e):Je.findFrom(s,e);return l?li(t,l):!1}return!1}function wm(t,e){if(!(t.state.selection instanceof He))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function km(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function HT(t){if(!Sn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;km(t,r,"true"),setTimeout(()=>km(t,r,"false"),20)}return!1}function zT(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function KT(t,e){let n=e.keyCode,r=zT(e);if(n==8||Xn&&n==72&&r=="c")return wm(t,-1)||xo(t,-1);if(n==46&&!e.shiftKey||Xn&&n==68&&r=="c")return wm(t,1)||xo(t,1);if(n==13||n==27)return!0;if(n==37||Xn&&n==66&&r=="c"){let i=n==37?bm(t,t.state.selection.from)=="ltr"?-1:1:-1;return ym(t,i,r)||xo(t,i)}else if(n==39||Xn&&n==70&&r=="c"){let i=n==39?bm(t,t.state.selection.from)=="ltr"?1:-1:1;return ym(t,i,r)||xo(t,i)}else{if(n==38||Xn&&n==80&&r=="c")return vm(t,-1,r)||xo(t,-1);if(n==40||Xn&&n==78&&r=="c")return HT(t)||vm(t,1,r)||xo(t,1);if(r==(Xn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Bf(t,e){t.someProp("transformCopied",m=>{e=m(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let m=r.firstChild;n.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),r=m.content}let s=t.someProp("clipboardSerializer")||uo.fromSchema(t.state.schema),l=mv(),a=l.createElement("div");a.appendChild(s.serializeFragment(r,{document:l}));let c=a.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=pv[c.nodeName.toLowerCase()]);){for(let m=u.length-1;m>=0;m--){let g=l.createElement(u[m]);for(;a.firstChild;)g.appendChild(a.firstChild);a.appendChild(g),d++}c=a.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",m=>m(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:h,slice:e}}function uv(t,e,n,r,i){let o=i.parent.type.spec.code,s,l;if(!n&&!e)return null;let a=e&&(r||o||!n);if(a){if(t.someProp("transformPastedText",h=>{e=h(e,o||r,t)}),o)return e?new ve(te.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):ve.empty;let d=t.someProp("clipboardTextParser",h=>h(e,i,r,t));if(d)l=d;else{let h=i.marks(),{schema:m}=t.state,g=uo.fromSchema(m);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(b=>{let S=s.appendChild(document.createElement("p"));b&&S.appendChild(g.serializeNode(m.text(b,h)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),s=JT(n),wl&&GT(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=s.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;s=h}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||js.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(a||u),context:i,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!UT.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)l=YT(Sm(l,+u[1],+u[2]),u[4]);else if(l=ve.maxOpen(WT(l.content,i),!0),l.openStart||l.openEnd){let d=0,h=0;for(let m=l.content.firstChild;d<l.openStart&&!m.type.spec.isolating;d++,m=m.firstChild);for(let m=l.content.lastChild;h<l.openEnd&&!m.type.spec.isolating;h++,m=m.lastChild);l=Sm(l,d,h)}return t.someProp("transformPasted",d=>{l=d(l,t)}),l}const UT=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function WT(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(l=>{if(!s)return;let a=i.findWrapping(l.type),c;if(!a)return s=null;if(c=s.length&&o.length&&fv(a,o,l,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=hv(s[s.length-1],o.length));let u=dv(l,a);s.push(u),i=i.matchType(u.type),o=a}}),s)return te.from(s)}return t}function dv(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,te.from(t));return t}function fv(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=fv(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(te.from(dv(n,t,i+1))))}}function hv(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,hv(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(te.empty,!0);return t.copy(n.append(r))}function zd(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,l=s.content;return t.childCount>1&&(o=0),i<r-1&&(l=zd(l,e,n,r,i+1,o)),i>=n&&(l=e<0?s.contentMatchAt(0).fillBefore(l,o<=i).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(te.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(l))}function Sm(t,e,n){return e<t.openStart&&(t=new ve(zd(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new ve(zd(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const pv={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let xm=null;function mv(){return xm||(xm=document.implementation.createHTMLDocument("title"))}let Au=null;function qT(t){let e=window.trustedTypes;return e?(Au||(Au=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Au.createHTML(t)):t}function JT(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=mv().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&pv[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=qT(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function GT(t){let e=t.querySelectorAll(cn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function YT(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=te.from(a.create(r[l+1],i)),o++,s++}return new ve(i,o,s)}const xn={},Cn={},XT={touchstart:!0,touchmove:!0};class ZT{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function QT(t){for(let e in xn){let n=xn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{tA(t,r)&&!Lf(t,r)&&(t.editable||!(r.type in Cn))&&n(t,r)},XT[e]?{passive:!0}:void 0)}Sn&&t.dom.addEventListener("input",()=>null),Kd(t)}function mi(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function eA(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Kd(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Lf(t,r))})}function Lf(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function tA(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function nA(t,e){!Lf(t,e)&&xn[e.type]&&(t.editable||!(e.type in Cn))&&xn[e.type](t,e)}Cn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!yv(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Hr&&cn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Qo&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,ji(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||KT(t,n)?n.preventDefault():mi(t,"key")};Cn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Cn.keypress=(t,e)=>{let n=e;if(yv(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Xn&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof He)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function Nc(t){return{left:t.clientX,top:t.clientY}}function rA(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Ff(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,l=>s>o.depth?l(t,n,o.nodeAfter,o.before(s),i,!0):l(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function Wo(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function iA(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&De.isSelectable(r)?(Wo(t,new De(n)),!0):!1}function oA(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof De&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let l=s>o.depth?o.nodeAfter:o.node(s);if(De.isSelectable(l)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(Wo(t,De.create(t.state.doc,i)),!0):!1}function sA(t,e,n,r,i){return Ff(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?oA(t,n):iA(t,n))}function lA(t,e,n,r){return Ff(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function aA(t,e,n,r){return Ff(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||cA(t,n,r)}function cA(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Wo(t,He.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),l=i.before(o);if(s.inlineContent)Wo(t,He.create(r,l+1,l+1+s.content.size));else if(De.isSelectable(s))Wo(t,De.create(r,l));else continue;return!0}}function Vf(t){return Za(t)}const gv=Xn?"metaKey":"ctrlKey";xn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Vf(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&rA(n,t.input.lastClick)&&!n[gv]&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=t.posAtCoords(Nc(n));s&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new uA(t,s,n,!!r)):(o=="doubleClick"?lA:aA)(t,s.pos,s.inside,n)?n.preventDefault():mi(t,"pointer"))};class uA{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[gv],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let u=e.state.doc.resolve(n.pos);o=u.parent,s=u.depth?u.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:c}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof De&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&pr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),mi(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>qr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Nc(e))),this.updateAllowDefault(e),this.allowDefault||!n?mi(this.view,"pointer"):sA(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Sn&&this.mightDrag&&!this.mightDrag.node.isAtom||cn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Wo(this.view,Je.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):mi(this.view,"pointer")}move(e){this.updateAllowDefault(e),mi(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}xn.touchstart=t=>{t.input.lastTouch=Date.now(),Vf(t),mi(t,"pointer")};xn.touchmove=t=>{t.input.lastTouch=Date.now(),mi(t,"pointer")};xn.contextmenu=t=>Vf(t);function yv(t,e){return t.composing?!0:Sn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const dA=Hr?5e3:-1;Cn.compositionstart=Cn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof He&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Za(t,!0),t.markCursor=null;else if(Za(t,!e.selection.empty),pr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let l=t.domSelection();l&&l.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}bv(t,dA)};Cn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,bv(t,20))};function bv(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Za(t),e))}function vv(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=hA());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function fA(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=iT(e.focusNode,e.focusOffset),r=oT(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function hA(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Za(t,e=!1){if(!(Hr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),vv(t),e||t.docView&&t.docView.dirty){let n=$f(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function pA(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const sl=In&&bi<15||Qo&&uT<604;xn.copy=Cn.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=sl?null:n.clipboardData,s=r.content(),{dom:l,text:a}=Bf(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",l.innerHTML),o.setData("text/plain",a)):pA(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function mA(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function gA(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ll(t,r.value,null,i,e):ll(t,r.textContent,r.innerHTML,i,e)},50)}function ll(t,e,n,r,i){let o=uv(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,o||ve.empty)))return!0;if(!o)return!1;let s=mA(o),l=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(o);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function wv(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Cn.paste=(t,e)=>{let n=e;if(t.composing&&!Hr)return;let r=sl?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&ll(t,wv(r),r.getData("text/html"),i,n)?n.preventDefault():gA(t,n)};class kv{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const Sv=Xn?"altKey":"ctrlKey";xn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(Nc(n)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof De?i.to-1:i.to))){if(r&&r.mightDrag)s=De.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(s=De.create(t.state.doc,d.posBefore))}}let l=(s||t.state.selection).content(),{dom:a,text:c,slice:u}=Bf(t,l);(!n.dataTransfer.files.length||!cn||Jb>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(sl?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",sl||n.dataTransfer.setData("text/plain",c),t.dragging=new kv(u,!n[Sv],s)};xn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Cn.dragover=Cn.dragenter=(t,e)=>e.preventDefault();Cn.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Nc(n));if(!i)return;let o=t.state.doc.resolve(i.pos),s=r&&r.slice;s?t.someProp("transformPasted",g=>{s=g(s,t)}):s=uv(t,wv(n.dataTransfer),sl?null:n.dataTransfer.getData("text/html"),!1,o);let l=!!(r&&!n[Sv]);if(t.someProp("handleDrop",g=>g(t,n,s||ve.empty,l))){n.preventDefault();return}if(!s)return;n.preventDefault();let a=s?Vb(t.state.doc,o.pos,s):o.pos;a==null&&(a=o.pos);let c=t.state.tr;if(l){let{node:g}=r;g?g.replace(c):c.deleteSelection()}let u=c.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(h))return;let m=c.doc.resolve(u);if(d&&De.isSelectable(s.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new De(m));else{let g=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((b,S,O,A)=>g=A),c.setSelection(Rf(t,m,c.doc.resolve(g)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};xn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&qr(t)},20))};xn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};xn.beforeinput=(t,e)=>{if(cn&&Hr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,ji(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Cn)xn[t]=Cn[t];function al(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Qa{constructor(e,n){this.toDOM=e,this.spec=n||Zi,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new er(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Qa&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&al(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class wi{constructor(e,n){this.attrs=e,this.spec=n||Zi}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new er(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof wi&&al(this.attrs,e.attrs)&&al(this.spec,e.spec)}static is(e){return e.type instanceof wi}destroy(){}}class jf{constructor(e,n){this.attrs=e,this.spec=n||Zi}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new er(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof jf&&al(this.attrs,e.attrs)&&al(this.spec,e.spec)}destroy(){}}class er{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new er(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new er(e,e,new Qa(n,r))}static inline(e,n,r,i){return new er(e,n,new wi(r,i))}static node(e,n,r,i){return new er(e,n,new jf(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof wi}get widget(){return this.type instanceof Qa}}const Ao=[],Zi={};class Vt{constructor(e,n){this.local=e.length?e:Ao,this.children=n.length?n:Ao}static create(e,n){return n.length?ec(n,e,0,Zi):rn}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let l=this.local[s];l.from<=n&&l.to>=e&&(!o||o(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let l=this.children[s]+1;this.children[s+2].findInner(e-l,n-l,r,i+l,o)}}map(e,n,r){return this==rn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Zi)}mapInner(e,n,r,i,o){let s;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(s||(s=[])).push(a):o.onRemove&&o.onRemove(this.local[l].spec)}return this.children.length?yA(this.children,s||[],e,n,r,i,o):s?new Vt(s.sort(Qi),Ao):rn}add(e,n){return n.length?this==rn?Vt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((l,a)=>{let c=a+r,u;if(u=Cv(n,l,c)){for(i||(i=this.children.slice());o<i.length&&i[o]<a;)o+=3;i[o]==a?i[o+2]=i[o+2].addInner(l,u,c+1):i.splice(o,0,a,a+l.nodeSize,ec(u,l,c+1,Zi)),o+=3}});let s=xv(o?Ov(n):n,-r);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||s.splice(l--,1);return new Vt(s.length?this.local.concat(s).sort(Qi):this.local,i||this.children)}remove(e){return e.length==0||this==rn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,l=r[o]+n,a=r[o+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>l&&d.to<a&&(e[u]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(s,l+1);c!=rn?r[o+2]=c:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let l=0;l<i.length;l++)i[l].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Vt(i,r):rn}forChild(e,n){if(this==rn)return this;if(n.isLeaf)return Vt.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let o=e+1,s=o+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<s&&a.to>o&&a.type instanceof wi){let c=Math.max(o,a.from)-o,u=Math.min(s,a.to)-o;c<u&&(i||(i=[])).push(a.copy(c,u))}}if(i){let l=new Vt(i.sort(Qi),Ao);return r?new di([l,r]):l}return r||rn}eq(e){if(this==e)return!0;if(!(e instanceof Vt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Hf(this.localsInner(e))}localsInner(e){if(this==rn)return Ao;if(e.inlineContent||!this.local.some(wi.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof wi||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Vt.empty=new Vt([],[]);Vt.removeOverlap=Hf;const rn=Vt.empty;class di{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Zi));return di.from(r)}forChild(e,n){if(n.isLeaf)return Vt.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=rn&&(o instanceof di?r=r.concat(o.members):r.push(o))}return di.from(r)}eq(e){if(!(e instanceof di)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?Hf(r?n:n.sort(Qi)):Ao}static from(e){switch(e.length){case 0:return rn;case 1:return e[0];default:return new di(e.every(n=>n instanceof Vt)?e:e.reduce((n,r)=>n.concat(r instanceof Vt?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function yA(t,e,n,r,i,o,s){let l=t.slice();for(let c=0,u=o;c<n.maps.length;c++){let d=0;n.maps[c].forEach((h,m,g,b)=>{let S=b-g-(m-h);for(let O=0;O<l.length;O+=3){let A=l[O+1];if(A<0||h>A+u-d)continue;let N=l[O]+u-d;m>=N?l[O+1]=h<=N?-2:-1:h>=u&&S&&(l[O]+=S,l[O+1]+=S)}d+=S}),u=n.maps[c].map(u,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let u=n.map(t[c]+o),d=u-i;if(d<0||d>=r.content.size){a=!0;continue}let h=n.map(t[c+1]+o,-1),m=h-i,{index:g,offset:b}=r.content.findIndex(d),S=r.maybeChild(g);if(S&&b==d&&b+S.nodeSize==m){let O=l[c+2].mapInner(n,S,u+1,t[c]+o+1,s);O!=rn?(l[c]=d,l[c+1]=m,l[c+2]=O):(l[c+1]=-2,a=!0)}else a=!0}if(a){let c=bA(l,t,e,n,i,o,s),u=ec(c,r,0,s);e=u.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let m=u.children[d];for(;h<l.length&&l[h]<m;)h+=3;l.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new Vt(e.sort(Qi),l)}function xv(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new er(i.from+e,i.to+e,i.type))}return n}function bA(t,e,n,r,i,o,s){function l(a,c){for(let u=0;u<a.local.length;u++){let d=a.local[u].map(r,i,c);d?n.push(d):s.onRemove&&s.onRemove(a.local[u].spec)}for(let u=0;u<a.children.length;u+=3)l(a.children[u+2],a.children[u]+c+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+o+1);return n}function Cv(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function Ov(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function ec(t,e,n,r){let i=[],o=!1;e.forEach((l,a)=>{let c=Cv(t,l,a+n);if(c){o=!0;let u=ec(c,l,n+a+1,r);u!=rn&&i.push(a,a+l.nodeSize,u)}});let s=xv(o?Ov(t):t,-n).sort(Qi);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||(r.onRemove&&r.onRemove(s[l].spec),s.splice(l--,1));return s.length||i.length?new Vt(s,i):rn}function Qi(t,e){return t.from-e.from||t.to-e.to}function Hf(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),Cm(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),Cm(e,i,r.copy(o.from,r.to)));break}}}return e}function Cm(t,e,n){for(;e<t.length&&Qi(n,t[e])>0;)e++;t.splice(e,0,n)}function Mu(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=rn&&e.push(r)}),t.cursorWrapper&&e.push(Vt.create(t.state.doc,[t.cursorWrapper.deco])),di.from(e)}const vA={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},wA=In&&bi<=11;class kA{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class SA{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new kA,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);In&&bi<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),wA&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,vA)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(gm(this.view)){if(this.suppressingSelectionUpdates)return qr(this.view);if(In&&bi<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&so(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=Zo(o))n.add(o);for(let o=e.anchorNode;o;o=Zo(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&gm(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,l=!1,a=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],a);d&&(o=o<0?d.from:Math.min(d.from,o),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(l=!0))}if(pr&&a.length){let u=a.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,h]=u;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of u){let m=h.parentNode;m&&m.nodeName=="LI"&&(!d||OA(e,d)!=m)&&h.remove()}}}let c=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Mc(r)&&(c=$f(e))&&c.eq(Je.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,qr(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),xA(e)),this.handleDOMChange(o,s,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||qr(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(In&&bi<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(o=h)}let s=i&&i.parentNode==e.target?Zt(i)+1:0,l=r.localPosFromDOM(e.target,s,-1),a=o&&o.parentNode==e.target?Zt(o):e.target.childNodes.length,c=r.localPosFromDOM(e.target,a,1);return{from:l,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Om=new WeakMap,Em=!1;function xA(t){if(!Om.has(t)&&(Om.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=pr,Em)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Em=!0}}function Tm(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return so(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function CA(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return Tm(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Tm(t,n):null}function OA(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function EA(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),c,u=a.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:a.anchorOffset}],Mc(a)||c.push({node:a.focusNode,offset:a.focusOffset})),cn&&t.input.lastKeyCode===8)for(let S=o;S>i;S--){let O=r.childNodes[S-1],A=O.pmViewDesc;if(O.nodeName=="BR"&&!A){o=S;break}if(!A||A.size)break}let d=t.state.doc,h=t.someProp("domParser")||js.fromSchema(t.state.schema),m=d.resolve(s),g=null,b=h.parse(r,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:i,to:o,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:TA,context:m});if(c&&c[0].pos!=null){let S=c[0].pos,O=c[1]&&c[1].pos;O==null&&(O=S),g={anchor:S+s,head:O+s}}return{doc:b,sel:g,from:s,to:l}}function TA(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Sn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Sn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const AA=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function MA(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let E=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,k=$f(t,E);if(k&&!t.state.selection.eq(k)){if(cn&&Hr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",C=>C(t,ji(13,"Enter"))))return;let V=t.state.tr.setSelection(k);E=="pointer"?V.setMeta("pointer",!0):E=="key"&&V.scrollIntoView(),o&&V.setMeta("composition",o),t.dispatch(V)}return}let s=t.state.doc.resolve(e),l=s.sharedDepth(n);e=s.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,c=EA(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),h,m;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,m="end"):(h=t.state.selection.from,m="start"),t.input.lastKeyCode=null;let g=PA(d.content,c.doc.content,c.from,h,m);if(g&&t.input.domChangeCount++,(Qo&&t.input.lastIOSEnter>Date.now()-225||Hr)&&i.some(E=>E.nodeType==1&&!AA.test(E.nodeName))&&(!g||g.endA>=g.endB)&&t.someProp("handleKeyDown",E=>E(t,ji(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!g)if(r&&a instanceof He&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))g={start:a.from,endA:a.to,endB:a.to};else{if(c.sel){let E=Am(t,t.state.doc,c.sel);if(E&&!E.eq(t.state.selection)){let k=t.state.tr.setSelection(E);o&&k.setMeta("composition",o),t.dispatch(k)}}return}t.state.selection.from<t.state.selection.to&&g.start==g.endB&&t.state.selection instanceof He&&(g.start>t.state.selection.from&&g.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?g.start=t.state.selection.from:g.endA<t.state.selection.to&&g.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(g.endB+=t.state.selection.to-g.endA,g.endA=t.state.selection.to)),In&&bi<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>c.from&&c.doc.textBetween(g.start-c.from-1,g.start-c.from+1)=="  "&&(g.start--,g.endA--,g.endB--);let b=c.doc.resolveNoCache(g.start-c.from),S=c.doc.resolveNoCache(g.endB-c.from),O=u.resolve(g.start),A=b.sameParent(S)&&b.parent.inlineContent&&O.end()>=g.endA,N;if((Qo&&t.input.lastIOSEnter>Date.now()-225&&(!A||i.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!A&&b.pos<c.doc.content.size&&!b.sameParent(S)&&(N=Je.findFrom(c.doc.resolve(b.pos+1),1,!0))&&N.head==S.pos)&&t.someProp("handleKeyDown",E=>E(t,ji(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>g.start&&NA(u,g.start,g.endA,b,S)&&t.someProp("handleKeyDown",E=>E(t,ji(8,"Backspace")))){Hr&&cn&&t.domObserver.suppressSelectionUpdates();return}cn&&g.endB==g.start&&(t.input.lastChromeDelete=Date.now()),Hr&&!A&&b.start()!=S.start()&&S.parentOffset==0&&b.depth==S.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==g.endA&&(g.endB-=2,S=c.doc.resolveNoCache(g.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(E){return E(t,ji(13,"Enter"))})},20));let R=g.start,D=g.endA,F,j,K;if(A){if(b.pos==S.pos)In&&bi<=11&&b.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>qr(t),20)),F=t.state.tr.delete(R,D),j=u.resolve(g.start).marksAcross(u.resolve(g.endA));else if(g.endA==g.endB&&(K=_A(b.parent.content.cut(b.parentOffset,S.parentOffset),O.parent.content.cut(O.parentOffset,g.endA-O.start()))))F=t.state.tr,K.type=="add"?F.addMark(R,D,K.mark):F.removeMark(R,D,K.mark);else if(b.parent.child(b.index()).isText&&b.index()==S.index()-(S.textOffset?0:1)){let E=b.parent.textBetween(b.parentOffset,S.parentOffset);if(t.someProp("handleTextInput",k=>k(t,R,D,E)))return;F=t.state.tr.insertText(E,R,D)}}if(F||(F=t.state.tr.replace(R,D,c.doc.slice(g.start-c.from,g.endB-c.from))),c.sel){let E=Am(t,F.doc,c.sel);E&&!(cn&&t.composing&&E.empty&&(g.start!=g.endB||t.input.lastChromeDelete<Date.now()-100)&&(E.head==R||E.head==F.mapping.map(D)-1)||In&&E.empty&&E.head==R)&&F.setSelection(E)}j&&F.ensureMarks(j),o&&F.setMeta("composition",o),t.dispatch(F.scrollIntoView())}function Am(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Rf(t,e.resolve(n.anchor),e.resolve(n.head))}function _A(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,s,l,a;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)o=n[u].removeFromSet(o);if(i.length==1&&o.length==0)l=i[0],s="add",a=u=>u.mark(l.addToSet(u.marks));else if(i.length==0&&o.length==1)l=o[0],s="remove",a=u=>u.mark(l.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(a(e.child(u)));if(te.from(c).eq(t))return{mark:l,type:s}}function NA(t,e,n,r,i){if(n-e<=i.pos-r.pos||_u(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let l=o.nodeAfter;return l!=null&&n==e+l.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(_u(o,!0,!0));return!s.parent.isTextblock||s.pos>n||_u(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function _u(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function PA(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:s,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,o-Math.min(s,l));r-=s+a-o}if(s<o&&t.size<e.size){let a=r<=o&&r>=s?o-r:0;o-=a,o&&o<e.size&&Mm(e.textBetween(o-1,o+1))&&(o+=a?1:-1),l=o+(l-s),s=o}else if(l<o){let a=r<=o&&r>=l?o-r:0;o-=a,o&&o<t.size&&Mm(t.textBetween(o-1,o+1))&&(o+=a?1:-1),s=o+(s-l),l=o}return{start:o,endA:s,endB:l}}function Mm(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class IA{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new ZT,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Dm),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Pm(this),Nm(this),this.nodeViews=Im(this),this.docView=um(this.state.doc,_m(this),Mu(this),this.dom,this),this.domObserver=new SA(this,(r,i,o,s)=>MA(this,r,i,o,s)),this.domObserver.start(),QT(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Kd(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Dm),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(vv(this),s=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let m=Im(this);$A(m,this.nodeViews)&&(this.nodeViews=m,o=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&Kd(this),this.editable=Pm(this),Nm(this);let a=Mu(this),c=_m(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=o||!this.docView.matchesNode(e.doc,c,a);(d||!e.selection.eq(i.selection))&&(s=!0);let h=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&hT(this);if(s){this.domObserver.stop();let m=d&&(In||cn)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&DA(i.selection,e.selection);if(d){let g=cn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=fA(this)),(o||!this.docView.update(e.doc,c,a,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=um(e.doc,c,a,this.dom,this)),g&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&BT(this))?qr(this,m):(lv(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&pT(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof De){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&im(this,n.getBoundingClientRect(),e)}else im(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new kv(e.slice,e.move,i<0?void 0:De.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let l=this.directPlugins[s].props[e];if(l!=null&&(i=n?n(l):l))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let l=o[s].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(In){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&mT(this.dom),qr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return wT(this,e)}coordsAtPos(e,n=1){return Qb(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return OT(this,n||this.state,e)}pasteHTML(e,n){return ll(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return ll(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Bf(this,e)}destroy(){this.docView&&(eA(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Mu(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,nT())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return nA(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Sn&&this.root.nodeType===11&&lT(this.dom.ownerDocument)==this.dom&&CA(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function _m(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[er.node(0,t.state.doc.content.size,e)]}function Nm(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:er.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Pm(t){return!t.someProp("editable",e=>e(t.state)===!1)}function DA(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Im(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function $A(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Dm(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Oi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},tc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},RA=typeof navigator<"u"&&/Mac/.test(navigator.platform),BA=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Qt=0;Qt<10;Qt++)Oi[48+Qt]=Oi[96+Qt]=String(Qt);for(var Qt=1;Qt<=24;Qt++)Oi[Qt+111]="F"+Qt;for(var Qt=65;Qt<=90;Qt++)Oi[Qt]=String.fromCharCode(Qt+32),tc[Qt]=String.fromCharCode(Qt);for(var Nu in Oi)tc.hasOwnProperty(Nu)||(tc[Nu]=Oi[Nu]);function LA(t){var e=RA&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||BA&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?tc:Oi)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const FA=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function VA(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))FA?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function jA(t){let e=Object.create(null);for(let n in t)e[VA(n)]=t[n];return e}function Pu(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function HA(t){return new $n({props:{handleKeyDown:Ev(t)}})}function Ev(t){let e=jA(t);return function(n,r){let i=LA(r),o,s=e[Pu(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[Pu(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=Oi[r.keyCode])&&o!=i){let l=e[Pu(o,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const zf=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Tv(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const Av=(t,e,n)=>{let r=Tv(t,n);if(!r)return!1;let i=Kf(r);if(!i){let s=r.blockRange(),l=s&&ss(s);return l==null?!1:(e&&e(t.tr.lift(s,l).scrollIntoView()),!0)}let o=i.nodeBefore;if(Bv(t,i,e,-1))return!0;if(r.parent.content.size==0&&(es(o,"end")||De.isSelectable(o)))for(let s=r.depth;;s--){let l=Tc(t.doc,r.before(s),r.after(s),ve.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(es(o,"end")?Je.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):De.create(a.doc,i.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},zA=(t,e,n)=>{let r=Tv(t,n);if(!r)return!1;let i=Kf(r);return i?Mv(t,i,e):!1},KA=(t,e,n)=>{let r=Nv(t,n);if(!r)return!1;let i=Uf(r);return i?Mv(t,i,e):!1};function Mv(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let s=e.nodeAfter,l=s,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let u=l.firstChild;if(!u)return!1;l=u}let c=Tc(t.doc,o,a,ve.empty);if(!c||c.from!=o||c instanceof zt&&c.slice.size>=a-o)return!1;if(n){let u=t.tr.step(c);u.setSelection(He.create(u.doc,o)),n(u.scrollIntoView())}return!0}function es(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const _v=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=Kf(r)}let s=o&&o.nodeBefore;return!s||!De.isSelectable(s)?!1:(e&&e(t.tr.setSelection(De.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function Kf(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Nv(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Pv=(t,e,n)=>{let r=Nv(t,n);if(!r)return!1;let i=Uf(r);if(!i)return!1;let o=i.nodeAfter;if(Bv(t,i,e,1))return!0;if(r.parent.content.size==0&&(es(o,"start")||De.isSelectable(o))){let s=Tc(t.doc,r.before(),r.after(),ve.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=t.tr.step(s);l.setSelection(es(o,"start")?Je.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):De.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},Iv=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=Uf(r)}let s=o&&o.nodeAfter;return!s||!De.isSelectable(s)?!1:(e&&e(t.tr.setSelection(De.create(t.doc,o.pos)).scrollIntoView()),!0)};function Uf(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const UA=(t,e)=>{let n=t.selection,r=n instanceof De,i;if(r){if(n.node.isTextblock||!Mi(t.doc,n.from))return!1;i=n.from}else if(i=Ec(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(De.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},WA=(t,e)=>{let n=t.selection,r;if(n instanceof De){if(n.node.isTextblock||!Mi(t.doc,n.to))return!1;r=n.to}else if(r=Ec(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},qA=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&ss(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},Dv=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Wf(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const JA=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=Wf(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,s.createAndFill());a.setSelection(Je.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},$v=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof qn||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=Wf(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(s,o.createAndFill());l.setSelection(He.create(l.doc,s+1)),e(l.scrollIntoView())}return!0},Rv=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Wr(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&ss(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function GA(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof De&&e.selection.node.isBlock)return!r.parentOffset||!Wr(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],s,l,a=!1,c=!1;for(let m=r.depth;;m--)if(r.node(m).isBlock){a=r.end(m)==r.pos+(r.depth-m),c=r.start(m)==r.pos-(r.depth-m),l=Wf(r.node(m-1).contentMatchAt(r.indexAfter(m-1))),o.unshift(a&&l?{type:l}:null),s=m;break}else{if(m==1)return!1;o.unshift(null)}let u=e.tr;(e.selection instanceof He||e.selection instanceof qn)&&u.deleteSelection();let d=u.mapping.map(r.pos),h=Wr(u.doc,d,o.length,o);if(h||(o[0]=l?{type:l}:null,h=Wr(u.doc,d,o.length,o)),u.split(d,o.length,o),!a&&c&&r.node(s).type!=l){let m=u.mapping.map(r.before(s)),g=u.doc.resolve(m);l&&r.node(s-1).canReplaceWith(g.index(),g.index()+1,l)&&u.setNodeMarkup(u.mapping.map(r.before(s)),l)}return n&&n(u.scrollIntoView()),!0}}const YA=GA(),XA=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(De.create(t.doc,i))),!0)};function ZA(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||Mi(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function Bv(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,s,l,a=i.type.spec.isolating||o.type.spec.isolating;if(!a&&ZA(t,e,n))return!0;let c=!a&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(l=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&l.matchType(s[0]||o.type).validEnd){if(n){let m=e.pos+o.nodeSize,g=te.empty;for(let O=s.length-1;O>=0;O--)g=te.from(s[O].create(null,g));g=te.from(i.copy(g));let b=t.tr.step(new Kt(e.pos-1,m,e.pos,m,new ve(g,1,0),s.length,!0)),S=b.doc.resolve(m+2*s.length);S.nodeAfter&&S.nodeAfter.type==i.type&&Mi(b.doc,S.pos)&&b.join(S.pos),n(b.scrollIntoView())}return!0}let u=o.type.spec.isolating||r>0&&a?null:Je.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),h=d&&ss(d);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(d,h).scrollIntoView()),!0;if(c&&es(o,"start",!0)&&es(i,"end")){let m=i,g=[];for(;g.push(m),!m.isTextblock;)m=m.lastChild;let b=o,S=1;for(;!b.isTextblock;b=b.firstChild)S++;if(m.canReplace(m.childCount,m.childCount,b.content)){if(n){let O=te.empty;for(let N=g.length-1;N>=0;N--)O=te.from(g[N].copy(O));let A=t.tr.step(new Kt(e.pos-g.length,e.pos+o.nodeSize,e.pos+S,e.pos+o.nodeSize-S,new ve(O,g.length,0),0,!0));n(A.scrollIntoView())}return!0}}return!1}function Lv(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(He.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const QA=Lv(-1),eM=Lv(1);function tM(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),l=s&&Pf(s,t,e);return l?(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0):!1}}function $m(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:l}}=n.selection.ranges[o];n.doc.nodesBetween(s,l,(a,c)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[s];o.setBlockType(l,a,t,e)}r(o.scrollIntoView())}return!0}}function qf(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}qf(zf,Av,_v);qf(zf,Pv,Iv);qf(Dv,$v,Rv,YA);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function nM(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o);if(!s)return!1;let l=r?n.tr:null;return rM(l,s,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function rM(t,e,n,r=null){let i=!1,o=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=s.resolve(e.start-2);o=new Ja(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new Ja(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let l=Pf(o,n,r,e);return l?(t&&iM(t,e,l,i,n),!0):!1}function iM(t,e,n,r,i){let o=te.empty;for(let u=n.length-1;u>=0;u--)o=te.from(n[u].type.create(n[u].attrs,o));t.step(new Kt(e.start-(r?2:0),e.end,e.start,e.end,new ve(o,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==i&&(s=u+1);let l=n.length-s,a=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,h=!0;u<d;u++,h=!1)!h&&Wr(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=c.child(u).nodeSize;return t}function oM(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?sM(e,n,t,o):lM(e,n,o):!0:!1}}function sM(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new Kt(o-1,s,o,s,new ve(te.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Ja(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const l=ss(r);if(l==null)return!1;i.lift(r,l);let a=i.doc.resolve(i.mapping.map(o,-1)-1);return Mi(i.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&i.join(a.pos),e(i.scrollIntoView()),!0}function lM(t,e,n){let r=t.tr,i=n.parent;for(let m=n.end,g=n.endIndex-1,b=n.startIndex;g>b;g--)m-=i.child(g).nodeSize,r.delete(m-1,m+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(l?0:1),u+1,s.content.append(a?te.empty:te.from(i))))return!1;let d=o.pos,h=d+s.nodeSize;return r.step(new Kt(d-(l?1:0),h+(a?1:0),d+1,h-1,new ve((l?te.empty:te.from(i.copy(te.empty))).append(a?te.empty:te.from(i.copy(te.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function aM(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let l=o.parent,a=l.child(s-1);if(a.type!=t)return!1;if(n){let c=a.lastChild&&a.lastChild.type==l.type,u=te.from(c?t.create():null),d=new ve(te.from(t.create(null,te.from(l.type.create(null,u)))),c?3:1,0),h=o.start,m=o.end;n(e.tr.step(new Kt(h-(c?3:1),m,h,m,d,1,!0)).scrollIntoView())}return!0}}function Pc(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}class Ic{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...u)=>{const d=a(...u)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l=[],a=!!e,c=e||o.tr,u=()=>(!a&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),l.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,m])=>[h,(...b)=>{const S=this.buildProps(c,n),O=m(...b)(S);return l.push(O),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(n).map(([a,c])=>[a,(...u)=>c(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l={tr:e,editor:i,view:s,state:Pc({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,c])=>[a,(...u)=>c(...u)(l)]))}};return l}}class cM{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function Ce(t,e,n){return t.config[e]===void 0&&t.parent?Ce(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Ce(t.parent,e,n):null}):t.config[e]}function Dc(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function Fv(t){const e=[],{nodeExtensions:n,markExtensions:r}=Dc(t),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage,extensions:i},a=Ce(s,"addGlobalAttributes",l);if(!a)return;a().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([h,m])=>{e.push({type:d,name:h,attribute:{...o,...m}})})})})}),i.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=Ce(s,"addAttributes",l);if(!a)return;const c=a();Object.entries(c).forEach(([u,d])=>{const h={...o,...d};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:s.name,name:u,attribute:h})})}),e}function Wt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function On(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const l=o?String(o).split(" "):[],a=r[i]?r[i].split(" "):[],c=l.filter(u=>!a.includes(u));r[i]=[...a,...c].join(" ")}else if(i==="style"){const l=o?o.split(";").map(u=>u.trim()).filter(Boolean):[],a=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;a.forEach(u=>{const[d,h]=u.split(":").map(m=>m.trim());c.set(d,h)}),l.forEach(u=>{const[d,h]=u.split(":").map(m=>m.trim());c.set(d,h)}),r[i]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[i]=o}),r},{})}function Ud(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>On(n,r),{})}function Vv(t){return typeof t=="function"}function Ye(t,e=void 0,...n){return Vv(t)?e?t.bind(e)(...n):t(...n):t}function uM(t={}){return Object.keys(t).length===0&&t.constructor===Object}function dM(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Rm(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const l=s.attribute.parseHTML?s.attribute.parseHTML(n):dM(n.getAttribute(s.name));return l==null?o:{...o,[s.name]:l}},{});return{...r,...i}}}}function Bm(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&uM(n)?!1:n!=null))}function fM(t,e){var n;const r=Fv(t),{nodeExtensions:i,markExtensions:o}=Dc(t),s=(n=i.find(c=>Ce(c,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(i.map(c=>{const u=r.filter(O=>O.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((O,A)=>{const N=Ce(A,"extendNodeSchema",d);return{...O,...N?N(c):{}}},{}),m=Bm({...h,content:Ye(Ce(c,"content",d)),marks:Ye(Ce(c,"marks",d)),group:Ye(Ce(c,"group",d)),inline:Ye(Ce(c,"inline",d)),atom:Ye(Ce(c,"atom",d)),selectable:Ye(Ce(c,"selectable",d)),draggable:Ye(Ce(c,"draggable",d)),code:Ye(Ce(c,"code",d)),whitespace:Ye(Ce(c,"whitespace",d)),linebreakReplacement:Ye(Ce(c,"linebreakReplacement",d)),defining:Ye(Ce(c,"defining",d)),isolating:Ye(Ce(c,"isolating",d)),attrs:Object.fromEntries(u.map(O=>{var A;return[O.name,{default:(A=O==null?void 0:O.attribute)===null||A===void 0?void 0:A.default}]}))}),g=Ye(Ce(c,"parseHTML",d));g&&(m.parseDOM=g.map(O=>Rm(O,u)));const b=Ce(c,"renderHTML",d);b&&(m.toDOM=O=>b({node:O,HTMLAttributes:Ud(O,u)}));const S=Ce(c,"renderText",d);return S&&(m.toText=S),[c.name,m]})),a=Object.fromEntries(o.map(c=>{const u=r.filter(S=>S.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((S,O)=>{const A=Ce(O,"extendMarkSchema",d);return{...S,...A?A(c):{}}},{}),m=Bm({...h,inclusive:Ye(Ce(c,"inclusive",d)),excludes:Ye(Ce(c,"excludes",d)),group:Ye(Ce(c,"group",d)),spanning:Ye(Ce(c,"spanning",d)),code:Ye(Ce(c,"code",d)),attrs:Object.fromEntries(u.map(S=>{var O;return[S.name,{default:(O=S==null?void 0:S.attribute)===null||O===void 0?void 0:O.default}]}))}),g=Ye(Ce(c,"parseHTML",d));g&&(m.parseDOM=g.map(S=>Rm(S,u)));const b=Ce(c,"renderHTML",d);return b&&(m.toDOM=S=>b({mark:S,HTMLAttributes:Ud(S,u)})),[c.name,m]}));return new Mb({topNode:s,nodes:l,marks:a})}function Iu(t,e){return e.nodes[t]||e.marks[t]||null}function Lm(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Jf(t,e){const n=uo.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const hM=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,s,l)=>{var a,c;const u=((c=(a=i.type.spec).toText)===null||c===void 0?void 0:c.call(a,{node:i,pos:o,parent:s,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-o))}),n};function Gf(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class $c{constructor(e){this.find=e.find,this.handler=e.handler}}const pM=(t,e)=>{if(Gf(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function zl(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const c=a.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const d=hM(c)+o;return s.forEach(h=>{if(u)return;const m=pM(d,h.find);if(!m)return;const g=a.state.tr,b=Pc({state:a.state,transaction:g}),S={from:r-(m[0].length-o.length),to:i},{commands:O,chain:A,can:N}=new Ic({editor:n,state:b});h.handler({state:b,range:S,match:m,commands:O,chain:A,can:N})===null||!g.steps.length||(g.setMeta(l,{transform:g,from:r,to:i,text:o}),a.dispatch(g),u=!0)}),u}function mM(t){const{editor:e,rules:n}=t,r=new $n({state:{init(){return null},apply(i,o,s){const l=i.getMeta(r);if(l)return l;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:u}=a;typeof u=="string"?u=u:u=Jf(te.from(u),s.schema);const{from:d}=a,h=d+u.length;zl({editor:e,from:d,to:h,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,s,l){return zl({editor:e,from:o,to:s,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&zl({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?zl({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function gM(t){return Object.prototype.toString.call(t).slice(8,-1)}function Kl(t){return gM(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Rc(t,e){const n={...t};return Kl(t)&&Kl(e)&&Object.keys(e).forEach(r=>{Kl(e[r])&&Kl(t[r])?n[r]=Rc(t[r],e[r]):n[r]=e[r]}),n}class Ei{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ye(Ce(this,"addOptions",{name:this.name}))),this.storage=Ye(Ce(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ei(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Rc(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Ei(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ye(Ce(n,"addOptions",{name:n.name})),n.storage=Ye(Ce(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const a=s.find(c=>(c==null?void 0:c.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function yM(t){return typeof t=="number"}class bM{constructor(e){this.find=e.find,this.handler=e.handler}}const vM=(t,e,n)=>{if(Gf(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function wM(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:s,dropEvent:l}=t,{commands:a,chain:c,can:u}=new Ic({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(m,g)=>{if(!m.isTextblock||m.type.spec.code)return;const b=Math.max(r,g),S=Math.min(i,g+m.content.size),O=m.textBetween(b-g,S-g,void 0,"￼");vM(O,o.find,s).forEach(N=>{if(N.index===void 0)return;const R=b+N.index+1,D=R+N[0].length,F={from:n.tr.mapping.map(R),to:n.tr.mapping.map(D)},j=o.handler({state:n,range:F,match:N,commands:a,chain:c,can:u,pasteEvent:s,dropEvent:l});d.push(j)})}),d.every(m=>m!==null)}let Ul=null;const kM=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function SM(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const a=({state:u,from:d,to:h,rule:m,pasteEvt:g})=>{const b=u.tr,S=Pc({state:u,transaction:b});if(!(!wM({editor:e,state:S,from:Math.max(d-1,0),to:h.b-1,rule:m,pasteEvent:g,dropEvent:l})||!b.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,b}};return n.map(u=>new $n({view(d){const h=g=>{var b;r=!((b=d.dom.parentElement)===null||b===void 0)&&b.contains(g.target)?d.dom.parentElement:null,r&&(Ul=e)},m=()=>{Ul&&(Ul=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",m),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",m)}}},props:{handleDOMEvents:{drop:(d,h)=>{if(o=r===d.dom.parentElement,l=h,!o){const m=Ul;m&&setTimeout(()=>{const g=m.state.selection;g&&m.commands.deleteRange({from:g.from,to:g.to})},10)}return!1},paste:(d,h)=>{var m;const g=(m=h.clipboardData)===null||m===void 0?void 0:m.getData("text/html");return s=h,i=!!(g!=null&&g.includes("data-pm-slice")),!1}}},appendTransaction:(d,h,m)=>{const g=d[0],b=g.getMeta("uiEvent")==="paste"&&!i,S=g.getMeta("uiEvent")==="drop"&&!o,O=g.getMeta("applyPasteRules"),A=!!O;if(!b&&!S&&!A)return;if(A){let{text:D}=O;typeof D=="string"?D=D:D=Jf(te.from(D),m.schema);const{from:F}=O,j=F+D.length,K=kM(D);return a({rule:u,state:m,from:F,to:{b:j},pasteEvt:K})}const N=h.doc.content.findDiffStart(m.doc.content),R=h.doc.content.findDiffEnd(m.doc.content);if(!(!yM(N)||!R||N===R.b))return a({rule:u,state:m,from:N,to:R,pasteEvt:s})}}))}function xM(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Io{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Io.resolve(e),this.schema=fM(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Io.sort(Io.flatten(e)),r=xM(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=Ce(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=Ce(r,"priority")||100,s=Ce(i,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Iu(n.name,this.schema)},i=Ce(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Io.sort([...this.extensions].reverse()),r=[],i=[],o=n.map(s=>{const l={name:s.name,options:s.options,storage:s.storage,editor:e,type:Iu(s.name,this.schema)},a=[],c=Ce(s,"addKeyboardShortcuts",l);let u={};if(s.type==="mark"&&Ce(s,"exitable",l)&&(u.ArrowRight=()=>Ei.handleExit({editor:e,mark:s})),c){const b=Object.fromEntries(Object.entries(c()).map(([S,O])=>[S,()=>O({editor:e})]));u={...u,...b}}const d=HA(u);a.push(d);const h=Ce(s,"addInputRules",l);Lm(s,e.options.enableInputRules)&&h&&r.push(...h());const m=Ce(s,"addPasteRules",l);Lm(s,e.options.enablePasteRules)&&m&&i.push(...m());const g=Ce(s,"addProseMirrorPlugins",l);if(g){const b=g();a.push(...b)}return a}).flat();return[mM({editor:e,rules:r}),...SM({editor:e,rules:i}),...o]}get attributes(){return Fv(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Dc(this.extensions);return Object.fromEntries(n.filter(r=>!!Ce(r,"addNodeView")).map(r=>{const i=this.attributes.filter(a=>a.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:Wt(r.name,this.schema)},s=Ce(r,"addNodeView",o);if(!s)return[];const l=(a,c,u,d,h)=>{const m=Ud(a,i);return s()({node:a,view:c,getPos:u,decorations:d,innerDecorations:h,editor:e,extension:r,HTMLAttributes:m})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Iu(e.name,this.schema)};e.type==="mark"&&(!((n=Ye(Ce(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=Ce(e,"onBeforeCreate",r),o=Ce(e,"onCreate",r),s=Ce(e,"onUpdate",r),l=Ce(e,"onSelectionUpdate",r),a=Ce(e,"onTransaction",r),c=Ce(e,"onFocus",r),u=Ce(e,"onBlur",r),d=Ce(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),s&&this.editor.on("update",s),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class En{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ye(Ce(this,"addOptions",{name:this.name}))),this.storage=Ye(Ce(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new En(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Rc(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new En({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ye(Ce(n,"addOptions",{name:n.name})),n.storage=Ye(Ce(n,"addStorage",{name:n.name,options:n.options})),n}}function jv(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let l="";return t.nodesBetween(r,i,(a,c,u,d)=>{var h;a.isBlock&&c>r&&(l+=o);const m=s==null?void 0:s[a.type.name];if(m)return u&&(l+=m({node:a,pos:c,parent:u,index:d,range:e})),!1;a.isText&&(l+=(h=a==null?void 0:a.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,i-c))}),l}function Hv(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const CM=En.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new $n({key:new Nr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(u=>u.$from.pos)),l=Math.max(...o.map(u=>u.$to.pos)),a=Hv(n);return jv(r,{from:s,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),OM=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),EM=(t=!1)=>({commands:e})=>e.setContent("",t),TM=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(l,a)=>{if(l.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(a)),h=c.resolve(u.map(a+l.nodeSize)),m=d.blockRange(h);if(!m)return;const g=ss(m);if(l.type.isTextblock){const{defaultType:b}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(m.start,b)}(g||g===0)&&e.lift(m,g)})}),!0},AM=t=>e=>t(e),MM=()=>({state:t,dispatch:e})=>$v(t,e),_M=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new He(r.doc.resolve(s-1))),!0},NM=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const l=i.before(o),a=i.after(o);t.delete(l,a).scrollIntoView()}return!0}return!1},PM=t=>({tr:e,state:n,dispatch:r})=>{const i=Wt(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const a=o.before(s),c=o.after(s);e.delete(a,c).scrollIntoView()}return!0}return!1},IM=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},DM=()=>({state:t,dispatch:e})=>zf(t,e),$M=()=>({commands:t})=>t.keyboardShortcut("Enter"),RM=()=>({state:t,dispatch:e})=>JA(t,e);function nc(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:Gf(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function zv(t,e,n={}){return t.find(r=>r.type===e&&nc(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function Fm(t,e,n={}){return!!zv(t,e,n)}function Yf(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!zv([...i.node.marks],e,n)))return;let s=i.index,l=t.start()+i.offset,a=s+1,c=l+i.node.nodeSize;for(;s>0&&Fm([...t.parent.child(s-1).marks],e,n);)s-=1,l-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&Fm([...t.parent.child(a).marks],e,n);)c+=t.parent.child(a).nodeSize,a+=1;return{from:l,to:c}}function Ni(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const BM=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=Ni(t,r.schema),{doc:s,selection:l}=n,{$from:a,from:c,to:u}=l;if(i){const d=Yf(a,o,e);if(d&&d.from<=c&&d.to>=u){const h=He.create(s,d.from,d.to);n.setSelection(h)}}return!0},LM=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function Kv(t){return t instanceof He}function Wi(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Uv(t,e=null){if(!e)return null;const n=Je.atStart(t),r=Je.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?He.create(t,Wi(0,i,o),Wi(t.content.size,i,o)):He.create(t,Wi(e,i,o),Wi(e,i,o))}function FM(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Xf(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const VM=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{(Xf()||FM())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!Kv(n.state.selection))return s(),!0;const l=Uv(i.doc,t)||n.state.selection,a=n.state.selection.eq(l);return o&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},jM=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),HM=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),Wv=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&Wv(r)}return t};function Wl(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return Wv(n)}function rc(t,e,n){if(t instanceof yi||t instanceof te)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return te.fromArray(t.map(l=>e.nodeFromJSON(l)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),rc("",e,n)}if(i){if(n.errorOnInvalidContent){let s=!1,l="";const a=new Mb({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,l=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?js.fromSchema(a).parseSlice(Wl(t),n.parseOptions):js.fromSchema(a).parse(Wl(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const o=js.fromSchema(e);return n.slice?o.parseSlice(Wl(t),n.parseOptions).content:o.parse(Wl(t),n.parseOptions)}return rc("",e,n)}function zM(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof zt||i instanceof Kt))return;const o=t.mapping.maps[r];let s=0;o.forEach((l,a,c,u)=>{s===0&&(s=u)}),t.setSelection(Je.near(t.doc.resolve(s),n))}const KM=t=>!("type"in t),UM=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var s;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;try{l=rc(e,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:o.options.enableContentCheck})}catch(g){return o.emit("contentError",{editor:o,error:g,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}}),!1}let{from:a,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},u=!0,d=!0;if((KM(l)?l:[l]).forEach(g=>{g.check(),u=u?g.isText&&g.marks.length===0:!1,d=d?g.isBlock:!1}),a===c&&d){const{parent:g}=r.doc.resolve(a);g.isTextblock&&!g.type.spec.code&&!g.childCount&&(a-=1,c+=1)}let m;if(u){if(Array.isArray(e))m=e.map(g=>g.text||"").join("");else if(e instanceof te){let g="";e.forEach(b=>{b.text&&(g+=b.text)}),m=g}else typeof e=="object"&&e&&e.text?m=e.text:m=e;r.insertText(m,a,c)}else m=l,r.replaceWith(a,c,m);n.updateSelection&&zM(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:a,text:m}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:a,text:m})}return!0},WM=()=>({state:t,dispatch:e})=>UA(t,e),qM=()=>({state:t,dispatch:e})=>WA(t,e),JM=()=>({state:t,dispatch:e})=>Av(t,e),GM=()=>({state:t,dispatch:e})=>Pv(t,e),YM=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Ec(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},XM=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Ec(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},ZM=()=>({state:t,dispatch:e})=>zA(t,e),QM=()=>({state:t,dispatch:e})=>KA(t,e);function qv(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function e_(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))Xf()||qv()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const t_=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=e_(t).split(/-(?!$)/),s=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),l=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,l))});return a==null||a.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function cl(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?Wt(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(d,h)=>{if(d.isText)return;const m=Math.max(r,h),g=Math.min(i,h+d.nodeSize);l.push({node:d,from:m,to:g})});const a=i-r,c=l.filter(d=>s?s.name===d.node.type.name:!0).filter(d=>nc(d.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((d,h)=>d+h.to-h.from,0)>=a}const n_=(t,e={})=>({state:n,dispatch:r})=>{const i=Wt(t,n.schema);return cl(n,i,e)?qA(n,r):!1},r_=()=>({state:t,dispatch:e})=>Rv(t,e),i_=t=>({state:e,dispatch:n})=>{const r=Wt(t,e.schema);return oM(r)(e,n)},o_=()=>({state:t,dispatch:e})=>Dv(t,e);function Bc(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Vm(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const s_=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=Bc(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=Wt(t,r.schema)),l==="mark"&&(s=Ni(t,r.schema)),i&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(c,u)=>{o&&o===c.type&&n.setNodeMarkup(u,void 0,Vm(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(d=>{s===d.type&&n.addMark(u,u+c.nodeSize,s.create(Vm(d.attrs,e)))})})}),!0):!1},l_=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),a_=()=>({tr:t,dispatch:e})=>{if(e){const n=new qn(t.doc);t.setSelection(n)}return!0},c_=()=>({state:t,dispatch:e})=>_v(t,e),u_=()=>({state:t,dispatch:e})=>Iv(t,e),d_=()=>({state:t,dispatch:e})=>XA(t,e),f_=()=>({state:t,dispatch:e})=>eM(t,e),h_=()=>({state:t,dispatch:e})=>QA(t,e);function Wd(t,e,n={},r={}){return rc(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const p_=(t,e=!1,n={},r={})=>({editor:i,tr:o,dispatch:s,commands:l})=>{var a,c;const{doc:u}=o;if(n.preserveWhitespace!=="full"){const d=Wd(t,i.schema,n,{errorOnInvalidContent:(a=r.errorOnInvalidContent)!==null&&a!==void 0?a:i.options.enableContentCheck});return s&&o.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return s&&o.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function Jv(t,e){const n=Ni(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,a=>{s.push(...a.marks)});const l=s.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function m_(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function g_(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Zf(t){return e=>g_(e.$from,t)}function y_(t,e){const n={from:0,to:t.content.size};return jv(t,n,e)}function b_(t,e){const n=Wt(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,l=>{o.push(l)});const s=o.reverse().find(l=>l.type.name===n.name);return s?{...s.attrs}:{}}function v_(t,e){const n=Bc(typeof e=="string"?e:e.name,t.schema);return n==="node"?b_(t,e):n==="mark"?Jv(t,e):{}}function Gv(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t),s=Yf(o,i.type);s&&r.push({mark:i,...s})}):n.nodesBetween(t,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function ba(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function qd(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?Ni(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>o?o.name===d.type.name:!0).find(d=>nc(d.attrs,n,{strict:!1}));let s=0;const l=[];if(i.forEach(({$from:d,$to:h})=>{const m=d.pos,g=h.pos;t.doc.nodesBetween(m,g,(b,S)=>{if(!b.isText&&!b.marks.length)return;const O=Math.max(m,S),A=Math.min(g,S+b.nodeSize),N=A-O;s+=N,l.push(...b.marks.map(R=>({mark:R,from:O,to:A})))})}),s===0)return!1;const a=l.filter(d=>o?o.name===d.mark.type.name:!0).filter(d=>nc(d.mark.attrs,n,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),c=l.filter(d=>o?d.mark.type!==o&&d.mark.type.excludes(o):!0).reduce((d,h)=>d+h.to-h.from,0);return(a>0?a+c:a)>=s}function w_(t,e,n={}){if(!e)return cl(t,null,n)||qd(t,null,n);const r=Bc(e,t.schema);return r==="node"?cl(t,e,n):r==="mark"?qd(t,e,n):!1}function jm(t,e){const{nodeExtensions:n}=Dc(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=Ye(Ce(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function Qf(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(Qf(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function k_(t){return t instanceof De}function S_(t,e,n){var r;const{selection:i}=e;let o=null;if(Kv(i)&&(o=i.$cursor),o){const l=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:s}=i;return s.some(({$from:l,$to:a})=>{let c=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(u,d,h)=>{if(c)return!1;if(u.isInline){const m=!h||h.type.allowsMarkType(n),g=!!n.isInSet(u.marks)||!u.marks.some(b=>b.type.excludes(n));c=m&&g}return!c}),c})}const x_=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:l}=o,a=Ni(t,r.schema);if(i)if(s){const c=Jv(r,a);n.addStoredMark(a.create({...c,...e}))}else l.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(h,m)=>{const g=Math.max(m,u),b=Math.min(m+h.nodeSize,d);h.marks.find(O=>O.type===a)?h.marks.forEach(O=>{a===O.type&&n.addMark(g,b,a.create({...O.attrs,...e}))}):n.addMark(g,b,a.create(e))})});return S_(r,n,a)},C_=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),O_=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=Wt(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:l})=>$m(o,{...s,...e})(n)?!0:l.clearNodes()).command(({state:l})=>$m(o,{...s,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},E_=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Wi(t,0,r.content.size),o=De.create(r,i);e.setSelection(o)}return!0},T_=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=He.atStart(r).from,l=He.atEnd(r).to,a=Wi(i,s,l),c=Wi(o,s,l),u=He.create(r,a,c);e.setSelection(u)}return!0},A_=t=>({state:e,dispatch:n})=>{const r=Wt(t,e.schema);return aM(r)(e,n)};function Hm(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const M_=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:l,$to:a}=o,c=i.extensionManager.attributes,u=ba(c,l.node().type.name,l.node().attrs);if(o instanceof De&&o.node.isBlock)return!l.parentOffset||!Wr(s,l.pos)?!1:(r&&(t&&Hm(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const d=a.parentOffset===a.parent.content.size,h=l.depth===0?void 0:m_(l.node(-1).contentMatchAt(l.indexAfter(-1)));let m=d&&h?[{type:h,attrs:u}]:void 0,g=Wr(e.doc,e.mapping.map(l.pos),1,m);if(!m&&!g&&Wr(e.doc,e.mapping.map(l.pos),1,h?[{type:h}]:void 0)&&(g=!0,m=h?[{type:h,attrs:u}]:void 0),r){if(g&&(o instanceof He&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,m),h&&!d&&!l.parentOffset&&l.parent.type!==h)){const b=e.mapping.map(l.before()),S=e.doc.resolve(b);l.node(-1).canReplaceWith(S.index(),S.index()+1,h)&&e.setNodeMarkup(e.mapping.map(l.before()),h)}t&&Hm(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return g},__=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var s;const l=Wt(t,r.schema),{$from:a,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(c))return!1;const d=a.node(-1);if(d.type!==l)return!1;const h=o.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let O=te.empty;const A=a.index(-1)?1:a.index(-2)?2:3;for(let K=a.depth-A;K>=a.depth-3;K-=1)O=te.from(a.node(K).copy(O));const N=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,R={...ba(h,a.node().type.name,a.node().attrs),...e},D=((s=l.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(R))||void 0;O=O.append(te.from(l.createAndFill(null,D)||void 0));const F=a.before(a.depth-(A-1));n.replace(F,a.after(-N),new ve(O,4-A,0));let j=-1;n.doc.nodesBetween(F,n.doc.content.size,(K,E)=>{if(j>-1)return!1;K.isTextblock&&K.content.size===0&&(j=E+1)}),j>-1&&n.setSelection(He.near(n.doc.resolve(j))),n.scrollIntoView()}return!0}const m=c.pos===a.end()?d.contentMatchAt(0).defaultType:null,g={...ba(h,d.type.name,d.attrs),...e},b={...ba(h,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,c.pos);const S=m?[{type:l,attrs:g},{type:m,attrs:b}]:[{type:l,attrs:g}];if(!Wr(n.doc,a.pos,2))return!1;if(i){const{selection:O,storedMarks:A}=r,{splittableMarks:N}=o.extensionManager,R=A||O.$to.parentOffset&&O.$from.marks();if(n.split(a.pos,2,S).scrollIntoView(),!R||!i)return!0;const D=R.filter(F=>N.includes(F.type.name));n.ensureMarks(D)}return!0},Du=(t,e)=>{const n=Zf(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Mi(t.doc,n.pos)&&t.join(n.pos),!0},$u=(t,e)=>{const n=Zf(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Mi(t.doc,r)&&t.join(r),!0},N_=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:l,chain:a,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=i.extensionManager,m=Wt(t,s.schema),g=Wt(e,s.schema),{selection:b,storedMarks:S}=s,{$from:O,$to:A}=b,N=O.blockRange(A),R=S||b.$to.parentOffset&&b.$from.marks();if(!N)return!1;const D=Zf(F=>jm(F.type.name,d))(b);if(N.depth>=1&&D&&N.depth-D.depth<=1){if(D.node.type===m)return c.liftListItem(g);if(jm(D.node.type.name,d)&&m.validContent(D.node.content)&&l)return a().command(()=>(o.setNodeMarkup(D.pos,m),!0)).command(()=>Du(o,m)).command(()=>$u(o,m)).run()}return!n||!R||!l?a().command(()=>u().wrapInList(m,r)?!0:c.clearNodes()).wrapInList(m,r).command(()=>Du(o,m)).command(()=>$u(o,m)).run():a().command(()=>{const F=u().wrapInList(m,r),j=R.filter(K=>h.includes(K.type.name));return o.ensureMarks(j),F?!0:c.clearNodes()}).wrapInList(m,r).command(()=>Du(o,m)).command(()=>$u(o,m)).run()},P_=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=Ni(t,r.schema);return qd(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},I_=(t,e,n={})=>({state:r,commands:i})=>{const o=Wt(t,r.schema),s=Wt(e,r.schema),l=cl(r,o,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?i.setNode(s,a):i.setNode(o,{...a,...n})},D_=(t,e={})=>({state:n,commands:r})=>{const i=Wt(t,n.schema);return cl(n,i,e)?r.lift(i):r.wrapIn(i,e)},$_=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const s=t.tr,l=o.transform;for(let a=l.steps.length-1;a>=0;a-=1)s.step(l.steps[a].invert(l.docs[a]));if(o.text){const a=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,a))}else s.delete(o.from,o.to)}return!0}}return!1},R_=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},B_=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:l}=n,a=Ni(t,r.schema),{$from:c,empty:u,ranges:d}=l;if(!i)return!0;if(u&&s){let{from:h,to:m}=l;const g=(o=c.marks().find(S=>S.type===a))===null||o===void 0?void 0:o.attrs,b=Yf(c,a,g);b&&(h=b.from,m=b.to),n.removeMark(h,m,a)}else d.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,a)});return n.removeStoredMark(a),!0},L_=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=Bc(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=Wt(t,r.schema)),l==="mark"&&(s=Ni(t,r.schema)),i&&n.selection.ranges.forEach(a=>{const c=a.$from.pos,u=a.$to.pos;let d,h,m,g;n.selection.empty?r.doc.nodesBetween(c,u,(b,S)=>{o&&o===b.type&&(m=Math.max(S,c),g=Math.min(S+b.nodeSize,u),d=S,h=b)}):r.doc.nodesBetween(c,u,(b,S)=>{S<c&&o&&o===b.type&&(m=Math.max(S,c),g=Math.min(S+b.nodeSize,u),d=S,h=b),S>=c&&S<=u&&(o&&o===b.type&&n.setNodeMarkup(S,void 0,{...b.attrs,...e}),s&&b.marks.length&&b.marks.forEach(O=>{if(s===O.type){const A=Math.max(S,c),N=Math.min(S+b.nodeSize,u);n.addMark(A,N,s.create({...O.attrs,...e}))}}))}),h&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...h.attrs,...e}),s&&h.marks.length&&h.marks.forEach(b=>{s===b.type&&n.addMark(m,g,s.create({...b.attrs,...e}))}))}),!0):!1},F_=(t,e={})=>({state:n,dispatch:r})=>{const i=Wt(t,n.schema);return tM(i,e)(n,r)},V_=(t,e={})=>({state:n,dispatch:r})=>{const i=Wt(t,n.schema);return nM(i,e)(n,r)};var j_=Object.freeze({__proto__:null,blur:OM,clearContent:EM,clearNodes:TM,command:AM,createParagraphNear:MM,cut:_M,deleteCurrentNode:NM,deleteNode:PM,deleteRange:IM,deleteSelection:DM,enter:$M,exitCode:RM,extendMarkRange:BM,first:LM,focus:VM,forEach:jM,insertContent:HM,insertContentAt:UM,joinBackward:JM,joinDown:qM,joinForward:GM,joinItemBackward:YM,joinItemForward:XM,joinTextblockBackward:ZM,joinTextblockForward:QM,joinUp:WM,keyboardShortcut:t_,lift:n_,liftEmptyBlock:r_,liftListItem:i_,newlineInCode:o_,resetAttributes:s_,scrollIntoView:l_,selectAll:a_,selectNodeBackward:c_,selectNodeForward:u_,selectParentNode:d_,selectTextblockEnd:f_,selectTextblockStart:h_,setContent:p_,setMark:x_,setMeta:C_,setNode:O_,setNodeSelection:E_,setTextSelection:T_,sinkListItem:A_,splitBlock:M_,splitListItem:__,toggleList:N_,toggleMark:P_,toggleNode:I_,toggleWrap:D_,undoInputRule:$_,unsetAllMarks:R_,unsetMark:B_,updateAttributes:L_,wrapIn:F_,wrapInList:V_});const H_=En.create({name:"commands",addCommands(){return{...j_}}}),z_=En.create({name:"drop",addProseMirrorPlugins(){return[new $n({key:new Nr("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),K_=En.create({name:"editable",addProseMirrorPlugins(){return[new $n({key:new Nr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),U_=En.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new $n({key:new Nr("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),W_=En.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:l})=>{const{selection:a,doc:c}=l,{empty:u,$anchor:d}=a,{pos:h,parent:m}=d,g=d.parent.isTextblock&&h>0?l.doc.resolve(h-1):d,b=g.parent.type.spec.isolating,S=d.pos-d.parentOffset,O=b&&g.parent.childCount===1?S===d.pos:Je.atStart(c).from===h;return!u||!m.type.isTextblock||m.textContent.length||!O||O&&d.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Xf()||qv()?o:i},addProseMirrorPlugins(){return[new $n({key:new Nr("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(b=>b.getMeta("composition")))return;const r=t.some(b=>b.docChanged)&&!e.doc.eq(n.doc),i=t.some(b=>b.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:s,to:l}=e.selection,a=Je.atStart(e.doc).from,c=Je.atEnd(e.doc).to;if(o||!(s===a&&l===c)||!Qf(n.doc))return;const h=n.tr,m=Pc({state:n,transaction:h}),{commands:g}=new Ic({editor:this.editor,state:m});if(g.clearNodes(),!!h.steps.length)return h}})]}}),q_=En.create({name:"paste",addProseMirrorPlugins(){return[new $n({key:new Nr("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),J_=En.create({name:"tabindex",addProseMirrorPlugins(){return[new $n({key:new Nr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Hi{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Hi(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Hi(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Hi(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,s=this.pos+r+(o?0:1),l=this.resolvedPos.doc.resolve(s);if(!i&&l.depth<=this.depth)return;const a=new Hi(l,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new Hi(l,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,s=Object.keys(n);for(let l=0;l<s.length;l+=1){const a=s[l];if(o[a]!==n[a])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&o.every(a=>n[a]===s.node.attrs[a])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const G_=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function Y_(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}let X_=class extends cM{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Y_(G_,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=Vv(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(o=>{const s=typeof o=="string"?`${o}$`:o.key;r=n.filter(l=>!l.key.startsWith(s))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[K_,CM.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),H_,U_,W_,J_,z_,q_].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new Io(i,this)}createCommandManager(){this.commandManager=new Ic({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=Wd(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(l=>l.name!=="collaboration"),this.createExtensionManager()}}),n=Wd(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=Uv(n,this.options.autofocus);this.view=new IA(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Po.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return v_(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return w_(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Jf(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return y_(this.state.doc,{blockSeparator:n,textSerializers:{...Hv(this.schema),...r}})}get isEmpty(){return Qf(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Hi(n,this)}get $doc(){return this.$pos(0)}};function ts(t){return new $c({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ye(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],l=r[0];if(s){const a=l.search(/\S/),c=n.from+l.indexOf(s),u=c+s.length;if(Gv(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(b=>b===t.type&&b!==m.mark.type)).filter(m=>m.to>c).length)return null;u<n.to&&o.delete(u,n.to),c>n.from&&o.delete(n.from+a,c);const h=n.from+a+s.length;o.addMark(n.from+a,h,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function Z_(t){return new $c({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ye(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from;let l=n.to;const a=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=s+c;u>l?u=l:l=u+r[1].length;const d=r[0][r[0].length-1];o.insertText(d,s+r[0].length-1),o.replaceWith(u,l,a)}else if(r[0]){const c=t.type.isInline?s:s-1;o.insert(c,t.type.create(i)).delete(o.mapping.map(s),o.mapping.map(l))}o.scrollIntoView()}})}function Jd(t){return new $c({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=Ye(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function ul(t){return new $c({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=Ye(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),a=s.doc.resolve(n.from).blockRange(),c=a&&Pf(a,t.type,o);if(!c)return null;if(s.wrap(a,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:h}=e,{splittableMarks:m}=t.editor.extensionManager,g=h||d.$to.parentOffset&&d.$from.marks();if(g){const b=g.filter(S=>m.includes(S.type.name));s.ensureMarks(b)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,o).run()}const u=s.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&Mi(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&s.join(n.from-1)}})}class Dn{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ye(Ce(this,"addOptions",{name:this.name}))),this.storage=Ye(Ce(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Dn(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Rc(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Dn(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ye(Ce(n,"addOptions",{name:n.name})),n.storage=Ye(Ce(n,"addStorage",{name:n.name,options:n.options})),n}}function ns(t){return new bM({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=Ye(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:s}=e,l=r[r.length-1],a=r[0];let c=n.to;if(l){const u=a.search(/\S/),d=n.from+a.indexOf(l),h=d+l.length;if(Gv(n.from,n.to,e.doc).filter(g=>g.mark.type.excluded.find(S=>S===t.type&&S!==g.mark.type)).filter(g=>g.to>d).length)return null;h<n.to&&s.delete(h,n.to),d>n.from&&s.delete(n.from+u,d),c=n.from+u+l.length,s.addMark(n.from+u,c,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}function zm(t){return jw((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class Q_ extends X_{constructor(e={}){return super(e),this.contentComponent=null,this.appContext=null,this.reactiveState=zm(this.view.state),this.reactiveExtensionStorage=zm(this.extensionStorage),this.on("beforeTransaction",({nextState:n})=>{this.reactiveState.value=n,this.reactiveExtensionStorage.value=this.extensionStorage}),wg(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,n){const r=super.registerPlugin(e,n);return this.reactiveState&&(this.reactiveState.value=r),r}unregisterPlugin(e){const n=super.unregisterPlugin(e);return this.reactiveState&&n&&(this.reactiveState.value=n),n}}const eN=Ag({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=sf(),n=vc();return Dk(()=>{const r=t.editor;r&&r.options.element&&e.value&&mc(()=>{if(!e.value||!r.options.element.firstChild)return;const i=yn(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,n&&(r.appContext={...n.appContext,provides:n.provides}),r.setOptions({element:i}),r.createNodeViews()})}),Ig(()=>{const r=t.editor;r&&(r.contentComponent=null,r.appContext=null)}),{rootEl:e}},render(){return ry("div",{ref:t=>{this.rootEl=t}})}}),tN=/^\s*>\s$/,nN=Dn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",On(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ul({find:tN,type:this.type})]}}),rN=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,iN=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,oN=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,sN=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,lN=Ei.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",On(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ts({find:rN,type:this.type}),ts({find:oN,type:this.type})]},addPasteRules(){return[ns({find:iN,type:this.type}),ns({find:sN,type:this.type})]}}),aN="listItem",Km="textStyle",Um=/^\s*([-+*])\s$/,cN=Dn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",On(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(aN,this.editor.getAttributes(Km)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=ul({find:Um,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ul({find:Um,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Km),editor:this.editor})),[t]}}),uN=/(^|[^`])`([^`]+)`(?!`)/,dN=/(^|[^`])`([^`]+)`(?!`)/g,fN=Ei.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",On(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ts({find:uN,type:this.type})]},addPasteRules(){return[ns({find:dN,type:this.type})]}}),hN=/^```([a-z]+)?[\s\n]$/,pN=/^~~~([a-z]+)?[\s\n]$/,mN=Dn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,o=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",On(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:c})=>(c.setSelection(Je.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[Jd({find:hN,type:this.type,getAttributes:t=>({language:t[1]})}),Jd({find:pN,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new $n({key:new Nr("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!n||!o)return!1;const{tr:s,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:o},a)),s.selection.$from.parent.type!==this.type&&s.setSelection(He.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),gN=Dn.create({name:"doc",topNode:!0,content:"block+"});function yN(t={}){return new $n({view(e){return new bN(e,t)}})}class bN{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let l=e.nodeBefore,a=e.nodeAfter;if(l||a){let c=this.editorView.nodeDOM(this.cursorPos-(l?l.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=l?u.bottom:u.top;l&&a&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let l=this.editorView.coordsAtPos(this.cursorPos);r={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let o,s;if(!i||i==document.body&&getComputedStyle(i).position=="static")o=-pageXOffset,s=-pageYOffset;else{let l=i.getBoundingClientRect();o=l.left-i.scrollLeft,s=l.top-i.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=Vb(this.editorView.state.doc,s,this.editorView.dragging.slice);l!=null&&(s=l)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const vN=En.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[yN(this.options)]}});class _t extends Je{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return _t.valid(r)?new _t(r):Je.near(r)}content(){return ve.empty}eq(e){return e instanceof _t&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new _t(e.resolve(n.pos))}getBookmark(){return new eh(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!wN(e)||!kN(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&_t.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let l=e.node(s);if(n>0?e.indexAfter(s)<l.childCount:e.index(s)>0){o=l.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let a=e.doc.resolve(i);if(_t.valid(a))return a}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!De.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let l=e.doc.resolve(i);if(_t.valid(l))return l}return null}}}_t.prototype.visible=!1;_t.findFrom=_t.findGapCursorFrom;Je.jsonID("gapcursor",_t);class eh{constructor(e){this.pos=e}map(e){return new eh(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return _t.valid(n)?new _t(n):Je.near(n)}}function wN(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function kN(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function SN(){return new $n({props:{decorations:EN,createSelectionBetween(t,e,n){return e.pos==n.pos&&_t.valid(n)?new _t(n):null},handleClick:CN,handleKeyDown:xN,handleDOMEvents:{beforeinput:ON}}})}const xN=Ev({ArrowLeft:ql("horiz",-1),ArrowRight:ql("horiz",1),ArrowUp:ql("vert",-1),ArrowDown:ql("vert",1)});function ql(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,l=e>0?s.$to:s.$from,a=s.empty;if(s instanceof He){if(!o.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let c=_t.findGapCursorFrom(l,e,a);return c?(i&&i(r.tr.setSelection(new _t(c))),!0):!1}}function CN(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!_t.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&De.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new _t(r))),!0)}function ON(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof _t))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=te.empty;for(let s=r.length-1;s>=0;s--)i=te.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new ve(i,0,0));return o.setSelection(He.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function EN(t){if(!(t.selection instanceof _t))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Vt.create(t.doc,[er.widget(t.selection.head,e,{key:"gapcursor"})])}const TN=En.create({name:"gapCursor",addProseMirrorPlugins(){return[SN()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Ye(Ce(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),AN=Dn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",On(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:l}=r.extensionManager,a=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&a&&s){const d=a.filter(h=>l.includes(h.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),MN=Dn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,On(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Jd({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var ic=200,Ut=function(){};Ut.prototype.append=function(e){return e.length?(e=Ut.from(e),!this.length&&e||e.length<ic&&this.leafAppend(e)||this.length<ic&&e.leafPrepend(this)||this.appendInner(e)):this};Ut.prototype.prepend=function(e){return e.length?Ut.from(e).append(this):this};Ut.prototype.appendInner=function(e){return new _N(this,e)};Ut.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Ut.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Ut.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ut.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Ut.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},n,r),i};Ut.from=function(e){return e instanceof Ut?e:e&&e.length?new Yv(e):Ut.empty};var Yv=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,l){for(var a=o;a<s;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,l){for(var a=o-1;a>=s;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=ic)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=ic)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Ut);Ut.empty=new Yv([]);var _N=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(o,l),s)===!1||o>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,o)-l,s+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(o,l)-l,s+l)===!1||o<l&&this.left.forEachInvertedInner(r,Math.min(i,l),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Ut);const NN=500;class cr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,l,a,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){i||(i=this.remapping(r,h+1),o=i.maps.length),o--,u.push(d);return}if(i){u.push(new vr(d.map));let m=d.step.map(i.slice(o)),g;m&&s.maybeStep(m).doc&&(g=s.mapping.maps[s.mapping.maps.length-1],c.push(new vr(g,void 0,void 0,c.length+u.length))),o--,g&&i.appendMap(g,o)}else s.maybeStep(d.step);if(d.selection)return l=i?d.selection.map(i.slice(o)):d.selection,a=new cr(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:s,selection:l}}addTransform(e,n,r,i){let o=[],s=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),h=new vr(e.mapping.maps[u],d,n),m;(m=a&&a.merge(h))&&(h=m,u?o.pop():l=l.slice(0,l.length-1)),o.push(h),n&&(s++,n=void 0),i||(a=h)}let c=s-r.depth;return c>IN&&(l=PN(l,c),s-=c),new cr(l.append(o),s)}remapping(e,n){let r=new il;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new cr(this.items.append(e.map(n=>new vr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,l=this.eventCount;this.items.forEach(h=>{h.selection&&l--},i);let a=n;this.items.forEach(h=>{let m=o.getMirror(--a);if(m==null)return;s=Math.min(s,m);let g=o.maps[m];if(h.step){let b=e.steps[m].invert(e.docs[m]),S=h.selection&&h.selection.map(o.slice(a+1,m));S&&l++,r.push(new vr(g,b,S))}else r.push(new vr(g))},i);let c=[];for(let h=n;h<s;h++)c.push(new vr(o.maps[h]));let u=this.items.slice(0,i).append(c).append(r),d=new cr(u,l);return d.emptyItemCount()>NN&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((s,l)=>{if(l>=e)i.push(s),s.selection&&o++;else if(s.step){let a=s.step.map(n.slice(r)),c=a&&a.getMap();if(r--,c&&n.appendMap(c,r),a){let u=s.selection&&s.selection.map(n.slice(r));u&&o++;let d=new vr(c.invert(),a,u),h,m=i.length-1;(h=i.length&&i[m].merge(d))?i[m]=h:i.push(d)}}else s.map&&r--},this.items.length,0),new cr(Ut.from(i.reverse()),o)}}cr.empty=new cr(Ut.empty,0);function PN(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class vr{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new vr(n.getMap().invert(),n,this.selection)}}}class ai{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const IN=20;function DN(t,e,n,r){let i=n.getMeta(eo),o;if(i)return i.historyState;n.getMeta(BN)&&(t=new ai(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(eo))return s.getMeta(eo).redo?new ai(t.done.addTransform(n,void 0,r,va(e)),t.undone,Wm(n.mapping.maps),t.prevTime,t.prevComposition):new ai(t.done,t.undone.addTransform(n,void 0,r,va(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!s&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!$N(n,t.prevRanges)),c=s?Ru(t.prevRanges,n.mapping):Wm(n.mapping.maps);return new ai(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,va(e)),cr.empty,c,n.time,l??t.prevComposition)}else return(o=n.getMeta("rebased"))?new ai(t.done.rebased(n,o),t.undone.rebased(n,o),Ru(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new ai(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Ru(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function $N(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function Wm(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,s)=>e.push(o,s));return e}function Ru(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function RN(t,e,n){let r=va(e),i=eo.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),l=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),a=new ai(n?l:o.remaining,n?o.remaining:l,null,0,-1);return o.transform.setSelection(s).setMeta(eo,{redo:n,historyState:a})}let Bu=!1,qm=null;function va(t){let e=t.plugins;if(qm!=e){Bu=!1,qm=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Bu=!0;break}}return Bu}const eo=new Nr("history"),BN=new Nr("closeHistory");function LN(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new $n({key:eo,state:{init(){return new ai(cr.empty,cr.empty,null,0,-1)},apply(e,n,r){return DN(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?Zv:r=="historyRedo"?Qv:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function Xv(t,e){return(n,r)=>{let i=eo.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=RN(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const Zv=Xv(!1,!0),Qv=Xv(!0,!0),FN=En.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>Zv(t,e),redo:()=>({state:t,dispatch:e})=>Qv(t,e)}},addProseMirrorPlugins(){return[LN(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),VN=Dn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",On(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:i}=n,o=t();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):k_(n)?o.insertContentAt(i.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:s,dispatch:l})=>{var a;if(l){const{$to:c}=s.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(He.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(De.create(s.doc,c.pos)):s.setSelection(He.create(s.doc,c.pos));else{const d=(a=c.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();d&&(s.insert(u,d),s.setSelection(He.create(s.doc,u+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Z_({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),jN=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,HN=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,zN=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,KN=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,UN=Ei.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",On(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ts({find:jN,type:this.type}),ts({find:zN,type:this.type})]},addPasteRules(){return[ns({find:HN,type:this.type}),ns({find:KN,type:this.type})]}}),WN=Dn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",On(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),qN="listItem",Jm="textStyle",Gm=/^(\d+)\.\s$/,JN=Dn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",On(this.options.HTMLAttributes,n),0]:["ol",On(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(qN,this.editor.getAttributes(Jm)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=ul({find:Gm,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ul({find:Gm,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Jm)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),GN=Dn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",On(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),YN=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,XN=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,ZN=Ei.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",On(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ts({find:YN,type:this.type})]},addPasteRules(){return[ns({find:XN,type:this.type})]}}),QN=Dn.create({name:"text",group:"inline"}),eP=En.create({name:"starterKit",addExtensions(){var t,e,n,r,i,o,s,l,a,c,u,d,h,m,g,b,S,O;const A=[];return this.options.bold!==!1&&A.push(lN.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&A.push(nN.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&A.push(cN.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&A.push(fN.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&A.push(mN.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&A.push(gN.configure((o=this.options)===null||o===void 0?void 0:o.document)),this.options.dropcursor!==!1&&A.push(vN.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&A.push(TN.configure((l=this.options)===null||l===void 0?void 0:l.gapcursor)),this.options.hardBreak!==!1&&A.push(AN.configure((a=this.options)===null||a===void 0?void 0:a.hardBreak)),this.options.heading!==!1&&A.push(MN.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&A.push(FN.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&A.push(VN.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&A.push(UN.configure((h=this.options)===null||h===void 0?void 0:h.italic)),this.options.listItem!==!1&&A.push(WN.configure((m=this.options)===null||m===void 0?void 0:m.listItem)),this.options.orderedList!==!1&&A.push(JN.configure((g=this.options)===null||g===void 0?void 0:g.orderedList)),this.options.paragraph!==!1&&A.push(GN.configure((b=this.options)===null||b===void 0?void 0:b.paragraph)),this.options.strike!==!1&&A.push(ZN.configure((S=this.options)===null||S===void 0?void 0:S.strike)),this.options.text!==!1&&A.push(QN.configure((O=this.options)===null||O===void 0?void 0:O.text)),A}}),tP={components:{EditorContent:eN},props:{content:{type:String,required:!0}},emits:["update:content"],data(){return{editor:null}},methods:{emitContent(){this.$emit("update:content",this.editor.getHTML())}},mounted(){this.editor=new Q_({content:this.content,extensions:[eP]}),this.editor.on("update",this.emitContent)},beforeUnmount(){this.editor&&this.editor.destroy()}};function nP(t,e,n,r,i,o){const s=nt("editor-content");return ie(),Tt(s,{class:"editor",editor:i.editor},null,8,["editor"])}const rP=ft(tP,[["render",nP]]),iP={components:{FileName:hb,TipTap:rP},methods:{handleChange(){this.$root.UpdateRecord("Files",this.myfile.uuid,this.myfile)},updateContent(t){this.myfile.content=t,console.log(t),this.handleChange()}},name:"FileEditor",data(){return{myfile:null}},async mounted(){this.myfile=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Files.get(this.$root.tools.writer.selectednode)))}},oP={style:{"text-align":"center"}};function sP(t,e,n,r,i,o){const s=nt("FileName"),l=nt("TipTap");return ie(),we(at,null,[I("div",oP,[(ie(),Tt(s,{myuuid:t.$root.tools.writer.selectednode,key:t.$root.tools.writer.selectednode,formmode:!0},null,8,["myuuid"]))]),i.myfile?(ie(),Tt(l,{content:i.myfile.content,"onUpdate:content":o.updateContent,key:i.myfile.uuid},null,8,["content","onUpdate:content"])):Ke("",!0)],64)}const lP=ft(iP,[["render",sP]]),aP={mounted(t){const e=()=>{t.style.height="auto",t.style.height=t.scrollHeight+"px"};t.style.height="auto",t.style.height=t.scrollHeight+"px",t.addEventListener("input",e),window.addEventListener("resize",e),t._onResize=e},updated(t){t.style.height="auto",t.style.height=t.scrollHeight+"px"},unmounted(t){window.removeEventListener("resize",t._onResize)}},e0=""+new URL("../resources/bookcover.png",import.meta.url).href,cP={props:{myimage:{type:String,default:""}},data(){return{base64Image:this.myimage}},methods:{onFileChange(t){const e=t.target.files[0];if(e){const n=new FileReader;n.onload=r=>{const i=new Image;i.src=r.target.result,i.onload=()=>{const o=document.createElement("canvas"),s=200,l=s/i.width;o.width=s,o.height=i.height*l,o.getContext("2d").drawImage(i,0,0,o.width,o.height),this.base64Image=o.toDataURL("image/jpeg"),this.$emit("image-changed",this.base64Image)}},n.readAsDataURL(e)}},triggerFileUpload(){this.$refs.fileInput.click()}}},uP=["src"];function dP(t,e,n,r,i,o){return ie(),we("div",null,[I("input",{type:"file",onChange:e[0]||(e[0]=(...s)=>o.onFileChange&&o.onFileChange(...s)),ref:"fileInput",style:{display:"none"}},null,544),i.base64Image?(ie(),we("img",{key:0,src:i.base64Image,alt:"Image Preview",class:"image-preview",onClick:e[1]||(e[1]=(...s)=>o.triggerFileUpload&&o.triggerFileUpload(...s))},null,8,uP)):Ke("",!0),i.base64Image?Ke("",!0):(ie(),we("img",{key:1,src:e0,alt:"Image Preview",class:"image-preview",onClick:e[2]||(e[2]=(...s)=>o.triggerFileUpload&&o.triggerFileUpload(...s))}))])}const fP=ft(cP,[["render",dP],["__scopeId","data-v-e0f8ef46"]]),hP={directives:{autosize:aP},components:{ImageUpload:fP},methods:{handleChange(){this.$root.UpdateRecord("Writer",this.$root.tools.writer.selected,this.mybook)},imageChanged(t){this.mybook.cover=t,this.handleChange()}},name:"BookEditor",data(){return{mybook:null}},async mounted(){this.mybook=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Writer.get(this.$root.tools.writer.selected)))}},pP={key:0,class:"infocontainer"},mP={class:"bookcover"};function gP(t,e,n,r,i,o){const s=nt("ImageUpload"),l=fk("autosize");return i.mybook?(ie(),we("div",pP,[I("div",mP,[wt(s,{myimage:i.mybook.cover,onImageChanged:o.imageChanged},null,8,["myimage","onImageChanged"])]),e[5]||(e[5]=I("label",null,"Book Title",-1)),Un(I("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>i.mybook.title=a),onBlur:e[1]||(e[1]=(...a)=>o.handleChange&&o.handleChange(...a))},null,544),[[nr,i.mybook.title]]),e[6]||(e[6]=I("label",null,"Author",-1)),Un(I("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>i.mybook.author=a),onBlur:e[3]||(e[3]=(...a)=>o.handleChange&&o.handleChange(...a))},null,544),[[nr,i.mybook.author]]),e[7]||(e[7]=I("label",null,"Description",-1)),Un(I("textarea",{"onUpdate:modelValue":e[4]||(e[4]=a=>i.mybook.description=a)},null,512),[[l],[nr,i.mybook.description]])])):Ke("",!0)}const yP=ft(hP,[["render",gP],["__scopeId","data-v-f94fd4d6"]]),bP={name:"WriterHome",components:{DocStructure:oE,FileEditor:lP,BookEditor:yP},data(){return{lhshidden:!1,rhshidden:!1}},computed:{displaylist(){return this.$root.syncdb.Writer.sort((t,e)=>new Date(e.lastupdated)-new Date(t.lastupdated))}},methods:{addNewBook(){let t=JSON.parse(JSON.stringify(this.$root.writerTemplate));t.uuid=this.$root.uuid(),this.$root.AddRecord("Writer",t)}}},vP={key:0},wP={class:"writer-home"},kP={class:"gridcard-grid"},SP=["onClick"],xP={class:"book-3d"},CP={class:"book-3d__inner"},OP=["src","alt"],EP=["alt"],TP={key:1};function AP(t,e,n,r,i,o){const s=nt("FileEditor"),l=nt("BookEditor"),a=nt("DocStructure");return ie(),we(at,null,[t.$root.tools.writer.selected?Ke("",!0):(ie(),we("div",vP,[I("div",wP,[I("button",{onClick:e[0]||(e[0]=(...c)=>o.addNewBook&&o.addNewBook(...c))},"Add a New Book"),I("div",kP,[(ie(!0),we(at,null,Jr(o.displaylist,(c,u)=>(ie(),we("div",{class:"gridcard",key:u,onClick:d=>t.$root.tools.writer.selected=c.uuid},[I("div",xP,[I("div",CP,[c.cover?(ie(),we("img",{key:0,src:c.cover,class:"book-3d__cover",alt:c.title},null,8,OP)):(ie(),we("img",{key:1,class:"book-3d__cover",src:e0,alt:c.title},null,8,EP))])]),I("h2",null,Nn(c.title),1),I("p",null,"by "+Nn(c.author),1),I("p",null,Nn(c.description),1),I("p",null,Nn(c.lastupdated),1)],8,SP))),128))])])])),t.$root.tools.writer.selected?(ie(),we("div",TP,[I("div",{class:dr(["main",{lhsmain:i.lhshidden,rhsmain:i.rhshidden}])},[t.$root.tools.writer.selectednode?(ie(),Tt(s,{key:t.$root.tools.writer.selectednode})):Ke("",!0),t.$root.tools.writer.selectednode?Ke("",!0):(ie(),Tt(l,{key:1}))],2),I("div",{class:dr(["lhs",{lhshidden:i.lhshidden}])},[I("button",{onClick:e[1]||(e[1]=c=>i.lhshidden=!i.lhshidden),class:"btn lhsbtn"},e[3]||(e[3]=[I("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[I("title",null,"menu"),I("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"})],-1)])),wt(a)],2),I("div",{class:dr(["rhs",{rhshidden:i.rhshidden}])},[I("button",{onClick:e[2]||(e[2]=c=>i.rhshidden=!i.rhshidden),class:"btn rhsbtn"},e[4]||(e[4]=[I("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[I("title",null,"menu"),I("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"})],-1)]))],2)])):Ke("",!0)],64)}const MP=ft(bP,[["render",AP],["__scopeId","data-v-b4ae90eb"]]),_P={name:"MindmapHome",data(){return{}},methods:{async update(){await this.$root.UpdateRecord("Mindmap",this.$root.tools.mindmap.selected.uuid,this.$root.tools.mindmap.selected)}}},NP={class:"flexcol"};function PP(t,e,n,r,i,o){return ie(),we(at,null,[I("div",NP,[Un(I("input",{onBlur:e[0]||(e[0]=s=>o.update()),type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>t.$root.tools.mindmap.selected.title=s)},null,544),[[nr,t.$root.tools.mindmap.selected.title]]),I("button",{onClick:e[2]||(e[2]=s=>t.$root.tools.mindmap.selected=null)},"close")]),e[3]||(e[3]=I("div",null," OK mindmap needs to go here ",-1))],64)}const IP=ft(_P,[["render",PP],["__scopeId","data-v-4a66ea3d"]]),DP={name:"MindmapHome",components:{MindmapEditor:IP}},$P={key:0},RP=["onClick"],BP={key:1};function LP(t,e,n,r,i,o){const s=nt("MindmapEditor");return ie(),we(at,null,[t.$root.tools.mindmap.selected?Ke("",!0):(ie(),we("div",$P,[I("button",{onClick:e[0]||(e[0]=l=>t.$root.makeMindmap("",""))},"Add"),(ie(!0),we(at,null,Jr(this.$root.syncdb.Mindmap,(l,a)=>(ie(),we("div",null,[I("button",{onClick:c=>t.$root.tools.mindmap.selected=l},Nn(l.title),9,RP)]))),256))])),t.$root.tools.mindmap.selected?(ie(),we("div",BP,[wt(s)])):Ke("",!0)],64)}const FP=ft(DP,[["render",LP]]),VP={name:"TimelineHome",components:{},methods:{}},jP={class:"timeline"};function HP(t,e,n,r,i,o){return ie(),we("div",jP,e[0]||(e[0]=[Wk('<ul data-v-65b4eb25><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>January 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>February 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>March 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>April 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>May 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>June 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>July 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>August 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>September 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>October 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>November 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>December 2018</h4></div></li><div style="clear:both;" data-v-65b4eb25></div></ul>',1)]))}const zP=ft(VP,[["render",HP],["__scopeId","data-v-65b4eb25"]]),KP={name:"SnowflakeEditor",data(){return{}},methods:{async update(){await this.$root.UpdateRecord("Snowflake",this.$root.tools.snowflake.selected.uuid,this.$root.tools.snowflake.selected)}}},UP={class:"flexcol"};function WP(t,e,n,r,i,o){return ie(),we(at,null,[I("div",UP,[Un(I("input",{onBlur:e[0]||(e[0]=s=>o.update()),type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>t.$root.tools.snowflake.selected.title=s)},null,544),[[nr,t.$root.tools.snowflake.selected.title]]),I("button",{onClick:e[2]||(e[2]=s=>t.$root.tools.snowflake.selected=null)},"close")]),e[3]||(e[3]=I("div",null," OK snowflake needs to go here ",-1))],64)}const qP=ft(KP,[["render",WP],["__scopeId","data-v-21f9e03e"]]),JP={name:"SnowflakeHome",components:{SnowflakeEditor:qP}},GP={key:0},YP=["onClick"],XP={key:1};function ZP(t,e,n,r,i,o){const s=nt("SnowflakeEditor");return ie(),we(at,null,[t.$root.tools.snowflake.selected?Ke("",!0):(ie(),we("div",GP,[I("button",{onClick:e[0]||(e[0]=l=>t.$root.makeSnowflake())},"Add"),(ie(!0),we(at,null,Jr(this.$root.syncdb.Snowflake,(l,a)=>(ie(),we("div",null,[I("button",{onClick:c=>t.$root.tools.snowflake.selected=l},Nn(l.title),9,YP)]))),256))])),t.$root.tools.snowflake.selected?(ie(),we("div",XP,[wt(s)])):Ke("",!0)],64)}const QP=ft(JP,[["render",ZP]]),eI={name:"GridplannerEditor",data(){return{}},methods:{async update(){await this.$root.UpdateRecord("Gridplanner",this.$root.tools.gridplanner.selected.uuid,this.$root.tools.gridplanner.selected)}}},tI={class:"flexcol"};function nI(t,e,n,r,i,o){return ie(),we(at,null,[I("div",tI,[Un(I("input",{onBlur:e[0]||(e[0]=s=>o.update()),type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>t.$root.tools.gridplanner.selected.title=s)},null,544),[[nr,t.$root.tools.gridplanner.selected.title]]),I("button",{onClick:e[2]||(e[2]=s=>t.$root.tools.gridplanner.selected=null)},"close")]),e[3]||(e[3]=I("div",null," OK gridplanner needs to go here ",-1))],64)}const rI=ft(eI,[["render",nI],["__scopeId","data-v-22703585"]]),iI={name:"GridplannerHome",components:{GridplannerEditor:rI}},oI={key:0},sI=["onClick"],lI={key:1};function aI(t,e,n,r,i,o){const s=nt("GridplannerEditor");return ie(),we(at,null,[t.$root.tools.gridplanner.selected?Ke("",!0):(ie(),we("div",oI,[I("button",{onClick:e[0]||(e[0]=l=>t.$root.makeGridplanner())},"Add"),(ie(!0),we(at,null,Jr(this.$root.syncdb.Gridplanner,(l,a)=>(ie(),we("div",null,[I("button",{onClick:c=>t.$root.tools.gridplanner.selected=l},Nn(l.title),9,sI)]))),256))])),t.$root.tools.gridplanner.selected?(ie(),we("div",lI,[wt(s)])):Ke("",!0)],64)}const cI=ft(iI,[["render",aI]]),uI={name:"CardViewer",components:{},props:{cardRef:{type:String}},data(){return{currentcard:null}},async mounted(){this.currentcard=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Cards.get(this.cardRef)))},methods:{editcard(t){this.$root.tools.cards.selected=this.currentcard,this.$root.modal=!0}}},dI={key:0,class:"card card-placeholder"},fI={class:"card-title"},hI={class:"card-description"};function pI(t,e,n,r,i,o){return ie(),we("div",{class:"",onClick:e[0]||(e[0]=s=>o.editcard(i.currentcard.uuid))},[i.currentcard?Ke("",!0):(ie(),we("div",dI,' No card ref provided so we need to have the "create" or "link" option ')),i.currentcard?(ie(),we("div",{key:1,class:dr(["card card-button",i.currentcard.color])},[I("h1",fI,Nn(i.currentcard.title),1),I("div",hI,Nn(i.currentcard.description),1)],2)):Ke("",!0)])}const mI=ft(uI,[["render",pI],["__scopeId","data-v-fef44b76"]]),gI={name:"CardsdatabaseHome",components:{CardViewer:mI},computed:{filteredCardList(){return this.$root.syncdb.Cards}},methods:{}},yI={class:"masonry-grid"};function bI(t,e,n,r,i,o){const s=nt("CardViewer");return ie(),we(at,null,[I("div",null,[I("button",{class:"btn",onClick:e[0]||(e[0]=l=>t.$root.makeNewCard())},e[1]||(e[1]=[I("svg",{class:"icon",viewBox:"0 0 24 24"},[I("path",{d:"M19,20H4C2.89,20 2,19.1 2,18V6C2,4.89 2.89,4 4,4H10L12,6H19A2,2 0 0,1 21,8H21L4,8V18L6.14,10H23.21L20.93,18.5C20.7,19.37 19.92,20 19,20Z"})],-1),I("span",null,"NEW",-1)]))]),I("div",yI,[(ie(!0),we(at,null,Jr(o.filteredCardList,(l,a)=>(ie(),Tt(s,{key:l.uuid,cardRef:l.uuid,class:"masonry-item"},null,8,["cardRef"]))),128))])],64)}const vI=ft(gI,[["render",bI],["__scopeId","data-v-bb69e9b1"]]),wI={name:"App Home",components:{ProjectHome:JC,WriterHome:MP,MindmapHome:FP,TimelineHome:zP,SnowflakeHome:QP,GridplannerHome:cI,CardsdatabaseHome:vI},data(){return{}}};function kI(t,e,n,r,i,o){const s=nt("ProjectHome"),l=nt("WriterHome"),a=nt("MindmapHome"),c=nt("TimelineHome"),u=nt("SnowflakeHome"),d=nt("GridplannerHome"),h=nt("CardsdatabaseHome");return ie(),we(at,null,[t.$root.currentTool?Ke("",!0):(ie(),Tt(s,{key:0})),t.$root.currentTool==="writer"?(ie(),Tt(l,{key:1})):Ke("",!0),t.$root.currentTool==="mindmap"?(ie(),Tt(a,{key:2})):Ke("",!0),t.$root.currentTool==="timeline"?(ie(),Tt(c,{key:3})):Ke("",!0),t.$root.currentTool==="snowflake"?(ie(),Tt(u,{key:4})):Ke("",!0),t.$root.currentTool==="gridplanner"?(ie(),Tt(d,{key:5})):Ke("",!0),t.$root.currentTool==="cardsdatabase"?(ie(),Tt(h,{key:6})):Ke("",!0)],64)}const SI=ft(wI,[["render",kI]]),xI={mixins:[Hx,zx,Kx,Ux],components:{TopToolbar:rC,ModalManager:fC,InstallPopup:wC,FooterBar:gC,ApplicationSections:SI,Welcome:TC},data(){return{modal:null,currentTool:null,FileManager:{fileHandle:null,jsonData:null},tools:{current:null,writer:{selected:null,selectednode:null,mybook:null},cards:{searchterms:null,selected:null},gridplanner:{selected:null},timeline:{selected:null},snowflake:{selected:null},mindmap:{selected:null},planningboard:{selected:null}}}},created(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(t=>{t.onupdatefound=()=>{const e=t.installing;e&&(e.onstatechange=()=>{e.state==="installed"&&navigator.serviceWorker.controller&&confirm("A new version of the app is available. Would you like to update?")&&window.location.reload()})}})},methods:{}},CI={id:"app"};function OI(t,e,n,r,i,o){const s=nt("TopToolbar"),l=nt("Welcome"),a=nt("ApplicationSections"),c=nt("FooterBar"),u=nt("ModalManager"),d=nt("InstallPopup");return ie(),we(at,null,[I("div",CI,[t.$root.mainwindow?(ie(),Tt(s,{key:0})):Ke("",!0),I("div",{class:dr(["container",{mainwindow:t.$root.mainwindow}])},[t.$root.dbRef?(ie(),Tt(a,{key:1})):(ie(),Tt(l,{key:0}))],2),t.$root.mainwindow?(ie(),Tt(c,{key:1})):Ke("",!0)]),t.$root.modal?(ie(),Tt(u,{key:0})):Ke("",!0),wt(d)],64)}const EI=ft(xI,[["render",OI]]);var ei=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function TI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var t0={exports:{}};/*!
* sweetalert2 v11.4.4
* Released under the MIT License.
*/(function(t,e){(function(n,r){t.exports=r()})(ei,function(){const n="SweetAlert2:",r=f=>{const p=[];for(let v=0;v<f.length;v++)p.indexOf(f[v])===-1&&p.push(f[v]);return p},i=f=>f.charAt(0).toUpperCase()+f.slice(1),o=f=>Array.prototype.slice.call(f),s=f=>{console.warn("".concat(n," ").concat(typeof f=="object"?f.join(" "):f))},l=f=>{console.error("".concat(n," ").concat(f))},a=[],c=f=>{a.includes(f)||(a.push(f),s(f))},u=(f,p)=>{c('"'.concat(f,'" is deprecated and will be removed in the next major release. Please use "').concat(p,'" instead.'))},d=f=>typeof f=="function"?f():f,h=f=>f&&typeof f.toPromise=="function",m=f=>h(f)?f.toPromise():Promise.resolve(f),g=f=>f&&Promise.resolve(f)===f,b={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},S=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],O={},A=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],N=f=>Object.prototype.hasOwnProperty.call(b,f),R=f=>S.indexOf(f)!==-1,D=f=>O[f],F=f=>{N(f)||s('Unknown parameter "'.concat(f,'"'))},j=f=>{A.includes(f)&&s('The parameter "'.concat(f,'" is incompatible with toasts'))},K=f=>{D(f)&&u(f,D(f))},E=f=>{!f.backdrop&&f.allowOutsideClick&&s('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const p in f)F(p),f.toast&&j(p),K(p)},k="swal2-",V=f=>{const p={};for(const v in f)p[f[v]]=k+f[v];return p},C=V(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),ue=V(["success","warning","info","question","error"]),Z=()=>document.body.querySelector(".".concat(C.container)),xe=f=>{const p=Z();return p?p.querySelector(f):null},ye=f=>xe(".".concat(f)),Q=()=>ye(C.popup),Ae=()=>ye(C.icon),Qe=()=>ye(C.title),Ue=()=>ye(C["html-container"]),rt=()=>ye(C.image),ht=()=>ye(C["progress-steps"]),Lt=()=>ye(C["validation-message"]),Me=()=>xe(".".concat(C.actions," .").concat(C.confirm)),et=()=>xe(".".concat(C.actions," .").concat(C.deny)),At=()=>ye(C["input-label"]),H=()=>xe(".".concat(C.loader)),z=()=>xe(".".concat(C.actions," .").concat(C.cancel)),q=()=>ye(C.actions),W=()=>ye(C.footer),ae=()=>ye(C["timer-progress-bar"]),T=()=>ye(C.close),_=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,B=()=>{const f=o(Q().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((v,M)=>{const se=parseInt(v.getAttribute("tabindex")),Ne=parseInt(M.getAttribute("tabindex"));return se>Ne?1:se<Ne?-1:0}),p=o(Q().querySelectorAll(_)).filter(v=>v.getAttribute("tabindex")!=="-1");return r(f.concat(p)).filter(v=>$(v))},L=()=>X(document.body,C.shown)&&!X(document.body,C["toast-shown"])&&!X(document.body,C["no-backdrop"]),U=()=>Q()&&X(Q(),C.toast),J=()=>Q().hasAttribute("data-loading"),re={previousBodyPadding:null},G=(f,p)=>{if(f.textContent="",p){const v=new DOMParser().parseFromString(p,"text/html");o(v.querySelector("head").childNodes).forEach(M=>{f.appendChild(M)}),o(v.querySelector("body").childNodes).forEach(M=>{f.appendChild(M)})}},X=(f,p)=>{if(!p)return!1;const v=p.split(/\s+/);for(let M=0;M<v.length;M++)if(!f.classList.contains(v[M]))return!1;return!0},Y=(f,p)=>{o(f.classList).forEach(v=>{!Object.values(C).includes(v)&&!Object.values(ue).includes(v)&&!Object.values(p.showClass).includes(v)&&f.classList.remove(v)})},me=(f,p,v)=>{if(Y(f,p),p.customClass&&p.customClass[v]){if(typeof p.customClass[v]!="string"&&!p.customClass[v].forEach)return s("Invalid type of customClass.".concat(v,'! Expected string or iterable object, got "').concat(typeof p.customClass[v],'"'));ee(f,p.customClass[v])}},le=(f,p)=>{if(!p)return null;switch(p){case"select":case"textarea":case"file":return f.querySelector(".".concat(C.popup," > .").concat(C[p]));case"checkbox":return f.querySelector(".".concat(C.popup," > .").concat(C.checkbox," input"));case"radio":return f.querySelector(".".concat(C.popup," > .").concat(C.radio," input:checked"))||f.querySelector(".".concat(C.popup," > .").concat(C.radio," input:first-child"));case"range":return f.querySelector(".".concat(C.popup," > .").concat(C.range," input"));default:return f.querySelector(".".concat(C.popup," > .").concat(C.input))}},fe=f=>{if(f.focus(),f.type!=="file"){const p=f.value;f.value="",f.value=p}},he=(f,p,v)=>{!f||!p||(typeof p=="string"&&(p=p.split(/\s+/).filter(Boolean)),p.forEach(M=>{Array.isArray(f)?f.forEach(se=>{v?se.classList.add(M):se.classList.remove(M)}):v?f.classList.add(M):f.classList.remove(M)}))},ee=(f,p)=>{he(f,p,!0)},Se=(f,p)=>{he(f,p,!1)},Te=(f,p)=>{const v=o(f.childNodes);for(let M=0;M<v.length;M++)if(X(v[M],p))return v[M]},pe=(f,p,v)=>{v==="".concat(parseInt(v))&&(v=parseInt(v)),v||parseInt(v)===0?f.style[p]=typeof v=="number"?"".concat(v,"px"):v:f.style.removeProperty(p)},w=function(f){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";f.style.display=p},y=f=>{f.style.display="none"},x=(f,p,v,M)=>{const se=f.querySelector(p);se&&(se.style[v]=M)},P=(f,p,v)=>{p?w(f,v):y(f)},$=f=>!!(f&&(f.offsetWidth||f.offsetHeight||f.getClientRects().length)),ne=()=>!$(Me())&&!$(et())&&!$(z()),oe=f=>f.scrollHeight>f.clientHeight,Oe=f=>{const p=window.getComputedStyle(f),v=parseFloat(p.getPropertyValue("animation-duration")||"0"),M=parseFloat(p.getPropertyValue("transition-duration")||"0");return v>0||M>0},be=function(f){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const v=ae();$(v)&&(p&&(v.style.transition="none",v.style.width="100%"),setTimeout(()=>{v.style.transition="width ".concat(f/1e3,"s linear"),v.style.width="0%"},10))},$e=()=>{const f=ae(),p=parseInt(window.getComputedStyle(f).width);f.style.removeProperty("transition"),f.style.width="100%";const v=parseInt(window.getComputedStyle(f).width),M=p/v*100;f.style.removeProperty("transition"),f.style.width="".concat(M,"%")},Ge=()=>typeof window>"u"||typeof document>"u",Xe=100,ge={},it=()=>{ge.previousActiveElement&&ge.previousActiveElement.focus?(ge.previousActiveElement.focus(),ge.previousActiveElement=null):document.body&&document.body.focus()},tt=f=>new Promise(p=>{if(!f)return p();const v=window.scrollX,M=window.scrollY;ge.restoreFocusTimeout=setTimeout(()=>{it(),p()},Xe),window.scrollTo(v,M)}),pt=`
 <div aria-labelledby="`.concat(C.title,'" aria-describedby="').concat(C["html-container"],'" class="').concat(C.popup,`" tabindex="-1">
   <button type="button" class="`).concat(C.close,`"></button>
   <ul class="`).concat(C["progress-steps"],`"></ul>
   <div class="`).concat(C.icon,`"></div>
   <img class="`).concat(C.image,`" />
   <h2 class="`).concat(C.title,'" id="').concat(C.title,`"></h2>
   <div class="`).concat(C["html-container"],'" id="').concat(C["html-container"],`"></div>
   <input class="`).concat(C.input,`" />
   <input type="file" class="`).concat(C.file,`" />
   <div class="`).concat(C.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(C.select,`"></select>
   <div class="`).concat(C.radio,`"></div>
   <label for="`).concat(C.checkbox,'" class="').concat(C.checkbox,`">
     <input type="checkbox" />
     <span class="`).concat(C.label,`"></span>
   </label>
   <textarea class="`).concat(C.textarea,`"></textarea>
   <div class="`).concat(C["validation-message"],'" id="').concat(C["validation-message"],`"></div>
   <div class="`).concat(C.actions,`">
     <div class="`).concat(C.loader,`"></div>
     <button type="button" class="`).concat(C.confirm,`"></button>
     <button type="button" class="`).concat(C.deny,`"></button>
     <button type="button" class="`).concat(C.cancel,`"></button>
   </div>
   <div class="`).concat(C.footer,`"></div>
   <div class="`).concat(C["timer-progress-bar-container"],`">
     <div class="`).concat(C["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),mt=()=>{const f=Z();return f?(f.remove(),Se([document.documentElement,document.body],[C["no-backdrop"],C["toast-shown"],C["has-column"]]),!0):!1},Le=()=>{ge.currentInstance.resetValidationMessage()},Ft=()=>{const f=Q(),p=Te(f,C.input),v=Te(f,C.file),M=f.querySelector(".".concat(C.range," input")),se=f.querySelector(".".concat(C.range," output")),Ne=Te(f,C.select),Nt=f.querySelector(".".concat(C.checkbox," input")),Ln=Te(f,C.textarea);p.oninput=Le,v.onchange=Le,Ne.onchange=Le,Nt.onchange=Le,Ln.oninput=Le,M.oninput=()=>{Le(),se.value=M.value},M.onchange=()=>{Le(),M.nextSibling.value=M.value}},Ee=f=>typeof f=="string"?document.querySelector(f):f,de=f=>{const p=Q();p.setAttribute("role",f.toast?"alert":"dialog"),p.setAttribute("aria-live",f.toast?"polite":"assertive"),f.toast||p.setAttribute("aria-modal","true")},Pe=f=>{window.getComputedStyle(f).direction==="rtl"&&ee(Z(),C.rtl)},_e=f=>{const p=mt();if(Ge()){l("SweetAlert2 requires document to initialize");return}const v=document.createElement("div");v.className=C.container,p&&ee(v,C["no-transition"]),G(v,pt);const M=Ee(f.target);M.appendChild(v),de(f),Pe(M),Ft()},Re=(f,p)=>{f instanceof HTMLElement?p.appendChild(f):typeof f=="object"?Ze(f,p):f&&G(p,f)},Ze=(f,p)=>{f.jquery?fn(p,f):G(p,f.toString())},fn=(f,p)=>{if(f.textContent="",0 in p)for(let v=0;v in p;v++)f.appendChild(p[v].cloneNode(!0));else f.appendChild(p.cloneNode(!0))},gt=(()=>{if(Ge())return!1;const f=document.createElement("div"),p={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const v in p)if(Object.prototype.hasOwnProperty.call(p,v)&&typeof f.style[v]<"u")return p[v];return!1})(),tn=()=>{const f=document.createElement("div");f.className=C["scrollbar-measure"],document.body.appendChild(f);const p=f.getBoundingClientRect().width-f.clientWidth;return document.body.removeChild(f),p},Tn=(f,p)=>{const v=q(),M=H();!p.showConfirmButton&&!p.showDenyButton&&!p.showCancelButton?y(v):w(v),me(v,p,"actions"),ct(v,M,p),G(M,p.loaderHtml),me(M,p,"loader")};function ct(f,p,v){const M=Me(),se=et(),Ne=z();dt(M,"confirm",v),dt(se,"deny",v),dt(Ne,"cancel",v),An(M,se,Ne,v),v.reverseButtons&&(v.toast?(f.insertBefore(Ne,M),f.insertBefore(se,M)):(f.insertBefore(Ne,p),f.insertBefore(se,p),f.insertBefore(M,p)))}function An(f,p,v,M){if(!M.buttonsStyling)return Se([f,p,v],C.styled);ee([f,p,v],C.styled),M.confirmButtonColor&&(f.style.backgroundColor=M.confirmButtonColor,ee(f,C["default-outline"])),M.denyButtonColor&&(p.style.backgroundColor=M.denyButtonColor,ee(p,C["default-outline"])),M.cancelButtonColor&&(v.style.backgroundColor=M.cancelButtonColor,ee(v,C["default-outline"]))}function dt(f,p,v){P(f,v["show".concat(i(p),"Button")],"inline-block"),G(f,v["".concat(p,"ButtonText")]),f.setAttribute("aria-label",v["".concat(p,"ButtonAriaLabel")]),f.className=C[p],me(f,v,"".concat(p,"Button")),ee(f,v["".concat(p,"ButtonClass")])}function hn(f,p){typeof p=="string"?f.style.background=p:p||ee([document.documentElement,document.body],C["no-backdrop"])}function qt(f,p){p in C?ee(f,C[p]):(s('The "position" parameter is not valid, defaulting to "center"'),ee(f,C.center))}function Rn(f,p){if(p&&typeof p=="string"){const v="grow-".concat(p);v in C&&ee(f,C[v])}}const Bn=(f,p)=>{const v=Z();v&&(hn(v,p.backdrop),qt(v,p.position),Rn(v,p.grow),me(v,p,"container"))};var We={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const fo=["input","file","range","select","radio","checkbox","textarea"],Qr=(f,p)=>{const v=Q(),M=We.innerParams.get(f),se=!M||p.input!==M.input;fo.forEach(Ne=>{const Nt=C[Ne],Ln=Te(v,Nt);Jt(Ne,p.inputAttributes),Ln.className=Nt,se&&y(Ln)}),p.input&&(se&&ls(p),or(p))},ls=f=>{if(!Mn[f.input])return l('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(f.input,'"'));const p=th(f.input),v=Mn[f.input](p,f);w(v),setTimeout(()=>{fe(v)})},mr=f=>{for(let p=0;p<f.attributes.length;p++){const v=f.attributes[p].name;["type","value","style"].includes(v)||f.removeAttribute(v)}},Jt=(f,p)=>{const v=le(Q(),f);if(v){mr(v);for(const M in p)v.setAttribute(M,p[M])}},or=f=>{const p=th(f.input);f.customClass&&ee(p,f.customClass.input)},sr=(f,p)=>{(!f.placeholder||p.inputPlaceholder)&&(f.placeholder=p.inputPlaceholder)},gr=(f,p,v)=>{if(v.inputLabel){f.id=C.input;const M=document.createElement("label"),se=C["input-label"];M.setAttribute("for",f.id),M.className=se,ee(M,v.customClass.inputLabel),M.innerText=v.inputLabel,p.insertAdjacentElement("beforebegin",M)}},th=f=>{const p=C[f]?C[f]:C.input;return Te(Q(),p)},Mn={};Mn.text=Mn.email=Mn.password=Mn.number=Mn.tel=Mn.url=(f,p)=>(typeof p.inputValue=="string"||typeof p.inputValue=="number"?f.value=p.inputValue:g(p.inputValue)||s('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof p.inputValue,'"')),gr(f,f,p),sr(f,p),f.type=p.input,f),Mn.file=(f,p)=>(gr(f,f,p),sr(f,p),f),Mn.range=(f,p)=>{const v=f.querySelector("input"),M=f.querySelector("output");return v.value=p.inputValue,v.type=p.input,M.value=p.inputValue,gr(v,f,p),f},Mn.select=(f,p)=>{if(f.textContent="",p.inputPlaceholder){const v=document.createElement("option");G(v,p.inputPlaceholder),v.value="",v.disabled=!0,v.selected=!0,f.appendChild(v)}return gr(f,f,p),f},Mn.radio=f=>(f.textContent="",f),Mn.checkbox=(f,p)=>{const v=le(Q(),"checkbox");v.value="1",v.id=C.checkbox,v.checked=!!p.inputValue;const M=f.querySelector("span");return G(M,p.inputPlaceholder),f},Mn.textarea=(f,p)=>{f.value=p.inputValue,sr(f,p),gr(f,f,p);const v=M=>parseInt(window.getComputedStyle(M).marginLeft)+parseInt(window.getComputedStyle(M).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const M=parseInt(window.getComputedStyle(Q()).width),se=()=>{const Ne=f.offsetWidth+v(f);Ne>M?Q().style.width="".concat(Ne,"px"):Q().style.width=null};new MutationObserver(se).observe(f,{attributes:!0,attributeFilter:["style"]})}}),f};const r0=(f,p)=>{const v=Ue();me(v,p,"htmlContainer"),p.html?(Re(p.html,v),w(v,"block")):p.text?(v.textContent=p.text,w(v,"block")):y(v),Qr(f,p)},i0=(f,p)=>{const v=W();P(v,p.footer),p.footer&&Re(p.footer,v),me(v,p,"footer")},o0=(f,p)=>{const v=T();G(v,p.closeButtonHtml),me(v,p,"closeButton"),P(v,p.showCloseButton),v.setAttribute("aria-label",p.closeButtonAriaLabel)},s0=(f,p)=>{const v=We.innerParams.get(f),M=Ae();if(v&&p.icon===v.icon){rh(M,p),nh(M,p);return}if(!p.icon&&!p.iconHtml)return y(M);if(p.icon&&Object.keys(ue).indexOf(p.icon)===-1)return l('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(p.icon,'"')),y(M);w(M),rh(M,p),nh(M,p),ee(M,p.showClass.icon)},nh=(f,p)=>{for(const v in ue)p.icon!==v&&Se(f,ue[v]);ee(f,ue[p.icon]),u0(f,p),l0(),me(f,p,"icon")},l0=()=>{const f=Q(),p=window.getComputedStyle(f).getPropertyValue("background-color"),v=f.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let M=0;M<v.length;M++)v[M].style.backgroundColor=p},a0=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,c0=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,rh=(f,p)=>{f.textContent="",p.iconHtml?G(f,ih(p.iconHtml)):p.icon==="success"?G(f,a0):p.icon==="error"?G(f,c0):G(f,ih({question:"?",warning:"!",info:"i"}[p.icon]))},u0=(f,p)=>{if(p.iconColor){f.style.color=p.iconColor,f.style.borderColor=p.iconColor;for(const v of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])x(f,v,"backgroundColor",p.iconColor);x(f,".swal2-success-ring","borderColor",p.iconColor)}},ih=f=>'<div class="'.concat(C["icon-content"],'">').concat(f,"</div>"),d0=(f,p)=>{const v=rt();if(!p.imageUrl)return y(v);w(v,""),v.setAttribute("src",p.imageUrl),v.setAttribute("alt",p.imageAlt),pe(v,"width",p.imageWidth),pe(v,"height",p.imageHeight),v.className=C.image,me(v,p,"image")},f0=f=>{const p=document.createElement("li");return ee(p,C["progress-step"]),G(p,f),p},h0=f=>{const p=document.createElement("li");return ee(p,C["progress-step-line"]),f.progressStepsDistance&&(p.style.width=f.progressStepsDistance),p},p0=(f,p)=>{const v=ht();if(!p.progressSteps||p.progressSteps.length===0)return y(v);w(v),v.textContent="",p.currentProgressStep>=p.progressSteps.length&&s("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),p.progressSteps.forEach((M,se)=>{const Ne=f0(M);if(v.appendChild(Ne),se===p.currentProgressStep&&ee(Ne,C["active-progress-step"]),se!==p.progressSteps.length-1){const Nt=h0(p);v.appendChild(Nt)}})},m0=(f,p)=>{const v=Qe();P(v,p.title||p.titleText,"block"),p.title&&Re(p.title,v),p.titleText&&(v.innerText=p.titleText),me(v,p,"title")},g0=(f,p)=>{const v=Z(),M=Q();p.toast?(pe(v,"width",p.width),M.style.width="100%",M.insertBefore(H(),Ae())):pe(M,"width",p.width),pe(M,"padding",p.padding),p.color&&(M.style.color=p.color),p.background&&(M.style.background=p.background),y(Lt()),y0(M,p)},y0=(f,p)=>{f.className="".concat(C.popup," ").concat($(f)?p.showClass.popup:""),p.toast?(ee([document.documentElement,document.body],C["toast-shown"]),ee(f,C.toast)):ee(f,C.modal),me(f,p,"popup"),typeof p.customClass=="string"&&ee(f,p.customClass),p.icon&&ee(f,C["icon-".concat(p.icon)])},oh=(f,p)=>{g0(f,p),Bn(f,p),p0(f,p),s0(f,p),d0(f,p),m0(f,p),o0(f,p),r0(f,p),Tn(f,p),i0(f,p),typeof p.didRender=="function"&&p.didRender(Q())},ho=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),b0=()=>{o(document.body.children).forEach(f=>{f===Z()||f.contains(Z())||(f.hasAttribute("aria-hidden")&&f.setAttribute("data-previous-aria-hidden",f.getAttribute("aria-hidden")),f.setAttribute("aria-hidden","true"))})},sh=()=>{o(document.body.children).forEach(f=>{f.hasAttribute("data-previous-aria-hidden")?(f.setAttribute("aria-hidden",f.getAttribute("data-previous-aria-hidden")),f.removeAttribute("data-previous-aria-hidden")):f.removeAttribute("aria-hidden")})},lh=["swal-title","swal-html","swal-footer"],v0=f=>{const p=typeof f.template=="string"?document.querySelector(f.template):f.template;if(!p)return{};const v=p.content;return E0(v),Object.assign(w0(v),k0(v),S0(v),x0(v),C0(v),O0(v,lh))},w0=f=>{const p={};return o(f.querySelectorAll("swal-param")).forEach(v=>{Pi(v,["name","value"]);const M=v.getAttribute("name"),se=v.getAttribute("value");typeof b[M]=="boolean"&&se==="false"&&(p[M]=!1),typeof b[M]=="object"&&(p[M]=JSON.parse(se))}),p},k0=f=>{const p={};return o(f.querySelectorAll("swal-button")).forEach(v=>{Pi(v,["type","color","aria-label"]);const M=v.getAttribute("type");p["".concat(M,"ButtonText")]=v.innerHTML,p["show".concat(i(M),"Button")]=!0,v.hasAttribute("color")&&(p["".concat(M,"ButtonColor")]=v.getAttribute("color")),v.hasAttribute("aria-label")&&(p["".concat(M,"ButtonAriaLabel")]=v.getAttribute("aria-label"))}),p},S0=f=>{const p={},v=f.querySelector("swal-image");return v&&(Pi(v,["src","width","height","alt"]),v.hasAttribute("src")&&(p.imageUrl=v.getAttribute("src")),v.hasAttribute("width")&&(p.imageWidth=v.getAttribute("width")),v.hasAttribute("height")&&(p.imageHeight=v.getAttribute("height")),v.hasAttribute("alt")&&(p.imageAlt=v.getAttribute("alt"))),p},x0=f=>{const p={},v=f.querySelector("swal-icon");return v&&(Pi(v,["type","color"]),v.hasAttribute("type")&&(p.icon=v.getAttribute("type")),v.hasAttribute("color")&&(p.iconColor=v.getAttribute("color")),p.iconHtml=v.innerHTML),p},C0=f=>{const p={},v=f.querySelector("swal-input");v&&(Pi(v,["type","label","placeholder","value"]),p.input=v.getAttribute("type")||"text",v.hasAttribute("label")&&(p.inputLabel=v.getAttribute("label")),v.hasAttribute("placeholder")&&(p.inputPlaceholder=v.getAttribute("placeholder")),v.hasAttribute("value")&&(p.inputValue=v.getAttribute("value")));const M=f.querySelectorAll("swal-input-option");return M.length&&(p.inputOptions={},o(M).forEach(se=>{Pi(se,["value"]);const Ne=se.getAttribute("value"),Nt=se.innerHTML;p.inputOptions[Ne]=Nt})),p},O0=(f,p)=>{const v={};for(const M in p){const se=p[M],Ne=f.querySelector(se);Ne&&(Pi(Ne,[]),v[se.replace(/^swal-/,"")]=Ne.innerHTML.trim())}return v},E0=f=>{const p=lh.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);o(f.children).forEach(v=>{const M=v.tagName.toLowerCase();p.indexOf(M)===-1&&s("Unrecognized element <".concat(M,">"))})},Pi=(f,p)=>{o(f.attributes).forEach(v=>{p.indexOf(v.name)===-1&&s(['Unrecognized attribute "'.concat(v.name,'" on <').concat(f.tagName.toLowerCase(),">."),"".concat(p.length?"Allowed attributes are: ".concat(p.join(", ")):"To set the value, use HTML within the element.")])})};var ah={email:(f,p)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(f)?Promise.resolve():Promise.resolve(p||"Invalid email address"),url:(f,p)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(f)?Promise.resolve():Promise.resolve(p||"Invalid URL")};function T0(f){f.inputValidator||Object.keys(ah).forEach(p=>{f.input===p&&(f.inputValidator=ah[p])})}function A0(f){(!f.target||typeof f.target=="string"&&!document.querySelector(f.target)||typeof f.target!="string"&&!f.target.appendChild)&&(s('Target parameter is not valid, defaulting to "body"'),f.target="body")}function M0(f){T0(f),f.showLoaderOnConfirm&&!f.preConfirm&&s(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),A0(f),typeof f.title=="string"&&(f.title=f.title.split(`
`).join("<br />")),_e(f)}class _0{constructor(p,v){this.callback=p,this.remaining=v,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(p){const v=this.running;return v&&this.stop(),this.remaining+=p,v&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const N0=()=>{re.previousBodyPadding===null&&document.body.scrollHeight>window.innerHeight&&(re.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(re.previousBodyPadding+tn(),"px"))},P0=()=>{re.previousBodyPadding!==null&&(document.body.style.paddingRight="".concat(re.previousBodyPadding,"px"),re.previousBodyPadding=null)},I0=()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!X(document.body,C.iosfix)){const f=document.body.scrollTop;document.body.style.top="".concat(f*-1,"px"),ee(document.body,C.iosfix),$0(),D0()}},D0=()=>{const f=navigator.userAgent,p=!!f.match(/iPad/i)||!!f.match(/iPhone/i),v=!!f.match(/WebKit/i);p&&v&&!f.match(/CriOS/i)&&Q().scrollHeight>window.innerHeight-44&&(Z().style.paddingBottom="".concat(44,"px"))},$0=()=>{const f=Z();let p;f.ontouchstart=v=>{p=R0(v)},f.ontouchmove=v=>{p&&(v.preventDefault(),v.stopPropagation())}},R0=f=>{const p=f.target,v=Z();return B0(f)||L0(f)?!1:p===v||!oe(v)&&p.tagName!=="INPUT"&&p.tagName!=="TEXTAREA"&&!(oe(Ue())&&Ue().contains(p))},B0=f=>f.touches&&f.touches.length&&f.touches[0].touchType==="stylus",L0=f=>f.touches&&f.touches.length>1,F0=()=>{if(X(document.body,C.iosfix)){const f=parseInt(document.body.style.top,10);Se(document.body,C.iosfix),document.body.style.top="",document.body.scrollTop=f*-1}},ch=10,V0=f=>{const p=Z(),v=Q();typeof f.willOpen=="function"&&f.willOpen(v);const M=window.getComputedStyle(document.body).overflowY;z0(p,v,f),setTimeout(()=>{j0(p,v)},ch),L()&&(H0(p,f.scrollbarPadding,M),b0()),!U()&&!ge.previousActiveElement&&(ge.previousActiveElement=document.activeElement),typeof f.didOpen=="function"&&setTimeout(()=>f.didOpen(v)),Se(p,C["no-transition"])},uh=f=>{const p=Q();if(f.target!==p)return;const v=Z();p.removeEventListener(gt,uh),v.style.overflowY="auto"},j0=(f,p)=>{gt&&Oe(p)?(f.style.overflowY="hidden",p.addEventListener(gt,uh)):f.style.overflowY="auto"},H0=(f,p,v)=>{I0(),p&&v!=="hidden"&&N0(),setTimeout(()=>{f.scrollTop=0})},z0=(f,p,v)=>{ee(f,v.showClass.backdrop),p.style.setProperty("opacity","0","important"),w(p,"grid"),setTimeout(()=>{ee(p,v.showClass.popup),p.style.removeProperty("opacity")},ch),ee([document.documentElement,document.body],C.shown),v.heightAuto&&v.backdrop&&!v.toast&&ee([document.documentElement,document.body],C["height-auto"])},po=f=>{let p=Q();p||new Cl,p=Q();const v=H();U()?y(Ae()):K0(p,f),w(v),p.setAttribute("data-loading",!0),p.setAttribute("aria-busy",!0),p.focus()},K0=(f,p)=>{const v=q(),M=H();!p&&$(Me())&&(p=Me()),w(v),p&&(y(p),M.setAttribute("data-button-to-replace",p.className)),M.parentNode.insertBefore(M,p),ee([f,v],C.loading)},U0=(f,p)=>{p.input==="select"||p.input==="radio"?Y0(f,p):["text","email","number","tel","textarea"].includes(p.input)&&(h(p.inputValue)||g(p.inputValue))&&(po(Me()),X0(f,p))},W0=(f,p)=>{const v=f.getInput();if(!v)return null;switch(p.input){case"checkbox":return q0(v);case"radio":return J0(v);case"file":return G0(v);default:return p.inputAutoTrim?v.value.trim():v.value}},q0=f=>f.checked?1:0,J0=f=>f.checked?f.value:null,G0=f=>f.files.length?f.getAttribute("multiple")!==null?f.files:f.files[0]:null,Y0=(f,p)=>{const v=Q(),M=se=>Z0[p.input](v,Lc(se),p);h(p.inputOptions)||g(p.inputOptions)?(po(Me()),m(p.inputOptions).then(se=>{f.hideLoading(),M(se)})):typeof p.inputOptions=="object"?M(p.inputOptions):l("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof p.inputOptions))},X0=(f,p)=>{const v=f.getInput();y(v),m(p.inputValue).then(M=>{v.value=p.input==="number"?parseFloat(M)||0:"".concat(M),w(v),v.focus(),f.hideLoading()}).catch(M=>{l("Error in inputValue promise: ".concat(M)),v.value="",w(v),v.focus(),f.hideLoading()})},Z0={select:(f,p,v)=>{const M=Te(f,C.select),se=(Ne,Nt,Ln)=>{const pn=document.createElement("option");pn.value=Ln,G(pn,Nt),pn.selected=dh(Ln,v.inputValue),Ne.appendChild(pn)};p.forEach(Ne=>{const Nt=Ne[0],Ln=Ne[1];if(Array.isArray(Ln)){const pn=document.createElement("optgroup");pn.label=Nt,pn.disabled=!1,M.appendChild(pn),Ln.forEach(go=>se(pn,go[1],go[0]))}else se(M,Ln,Nt)}),M.focus()},radio:(f,p,v)=>{const M=Te(f,C.radio);p.forEach(Ne=>{const Nt=Ne[0],Ln=Ne[1],pn=document.createElement("input"),go=document.createElement("label");pn.type="radio",pn.name=C.radio,pn.value=Nt,dh(Nt,v.inputValue)&&(pn.checked=!0);const Uc=document.createElement("span");G(Uc,Ln),Uc.className=C.label,go.appendChild(pn),go.appendChild(Uc),M.appendChild(go)});const se=M.querySelectorAll("input");se.length&&se[0].focus()}},Lc=f=>{const p=[];return typeof Map<"u"&&f instanceof Map?f.forEach((v,M)=>{let se=v;typeof se=="object"&&(se=Lc(se)),p.push([M,se])}):Object.keys(f).forEach(v=>{let M=f[v];typeof M=="object"&&(M=Lc(M)),p.push([v,M])}),p},dh=(f,p)=>p&&p.toString()===f.toString();function fh(){const f=We.innerParams.get(this);if(!f)return;const p=We.domCache.get(this);y(p.loader),U()?f.icon&&w(Ae()):Q0(p),Se([p.popup,p.actions],C.loading),p.popup.removeAttribute("aria-busy"),p.popup.removeAttribute("data-loading"),p.confirmButton.disabled=!1,p.denyButton.disabled=!1,p.cancelButton.disabled=!1}const Q0=f=>{const p=f.popup.getElementsByClassName(f.loader.getAttribute("data-button-to-replace"));p.length?w(p[0],"inline-block"):ne()&&y(f.actions)};function e1(f){const p=We.innerParams.get(f||this),v=We.domCache.get(f||this);return v?le(v.popup,p.input):null}var as={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};function hh(f,p,v,M){U()?ph(f,M):(tt(v).then(()=>ph(f,M)),ge.keydownTarget.removeEventListener("keydown",ge.keydownHandler,{capture:ge.keydownListenerCapture}),ge.keydownHandlerAdded=!1),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(p.setAttribute("style","display:none !important"),p.removeAttribute("class"),p.innerHTML=""):p.remove(),L()&&(P0(),F0(),sh()),t1()}function t1(){Se([document.documentElement,document.body],[C.shown,C["height-auto"],C["no-backdrop"],C["toast-shown"]])}function Sl(f){f=o1(f);const p=as.swalPromiseResolve.get(this),v=r1(this);this.isAwaitingPromise()?f.isDismissed||(cs(this),p(f)):v&&p(f)}function n1(){return!!We.awaitingPromise.get(this)}const r1=f=>{const p=Q();if(!p)return!1;const v=We.innerParams.get(f);if(!v||X(p,v.hideClass.popup))return!1;Se(p,v.showClass.popup),ee(p,v.hideClass.popup);const M=Z();return Se(M,v.showClass.backdrop),ee(M,v.hideClass.backdrop),s1(f,p,v),!0};function i1(f){const p=as.swalPromiseReject.get(this);cs(this),p&&p(f)}const cs=f=>{f.isAwaitingPromise()&&(We.awaitingPromise.delete(f),We.innerParams.get(f)||f._destroy())},o1=f=>typeof f>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},f),s1=(f,p,v)=>{const M=Z(),se=gt&&Oe(p);typeof v.willClose=="function"&&v.willClose(p),se?l1(f,p,M,v.returnFocus,v.didClose):hh(f,M,v.returnFocus,v.didClose)},l1=(f,p,v,M,se)=>{ge.swalCloseEventFinishedCallback=hh.bind(null,f,v,M,se),p.addEventListener(gt,function(Ne){Ne.target===p&&(ge.swalCloseEventFinishedCallback(),delete ge.swalCloseEventFinishedCallback)})},ph=(f,p)=>{setTimeout(()=>{typeof p=="function"&&p.bind(f.params)(),f._destroy()})};function mh(f,p,v){const M=We.domCache.get(f);p.forEach(se=>{M[se].disabled=v})}function gh(f,p){if(!f)return!1;if(f.type==="radio"){const v=f.parentNode.parentNode.querySelectorAll("input");for(let M=0;M<v.length;M++)v[M].disabled=p}else f.disabled=p}function a1(){mh(this,["confirmButton","denyButton","cancelButton"],!1)}function c1(){mh(this,["confirmButton","denyButton","cancelButton"],!0)}function u1(){return gh(this.getInput(),!1)}function d1(){return gh(this.getInput(),!0)}function f1(f){const p=We.domCache.get(this),v=We.innerParams.get(this);G(p.validationMessage,f),p.validationMessage.className=C["validation-message"],v.customClass&&v.customClass.validationMessage&&ee(p.validationMessage,v.customClass.validationMessage),w(p.validationMessage);const M=this.getInput();M&&(M.setAttribute("aria-invalid",!0),M.setAttribute("aria-describedby",C["validation-message"]),fe(M),ee(M,C.inputerror))}function h1(){const f=We.domCache.get(this);f.validationMessage&&y(f.validationMessage);const p=this.getInput();p&&(p.removeAttribute("aria-invalid"),p.removeAttribute("aria-describedby"),Se(p,C.inputerror))}function p1(){return We.domCache.get(this).progressSteps}function m1(f){const p=Q(),v=We.innerParams.get(this);if(!p||X(p,v.hideClass.popup))return s("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const M=g1(f),se=Object.assign({},v,M);oh(this,se),We.innerParams.set(this,se),Object.defineProperties(this,{params:{value:Object.assign({},this.params,f),writable:!1,enumerable:!0}})}const g1=f=>{const p={};return Object.keys(f).forEach(v=>{R(v)?p[v]=f[v]:s('Invalid parameter to update: "'.concat(v,`". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js

If you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md`))}),p};function y1(){const f=We.domCache.get(this),p=We.innerParams.get(this);if(!p){yh(this);return}f.popup&&ge.swalCloseEventFinishedCallback&&(ge.swalCloseEventFinishedCallback(),delete ge.swalCloseEventFinishedCallback),ge.deferDisposalTimer&&(clearTimeout(ge.deferDisposalTimer),delete ge.deferDisposalTimer),typeof p.didDestroy=="function"&&p.didDestroy(),b1(this)}const b1=f=>{yh(f),delete f.params,delete ge.keydownHandler,delete ge.keydownTarget,delete ge.currentInstance},yh=f=>{f.isAwaitingPromise()?(Fc(We,f),We.awaitingPromise.set(f,!0)):(Fc(as,f),Fc(We,f))},Fc=(f,p)=>{for(const v in f)f[v].delete(p)};var bh=Object.freeze({hideLoading:fh,disableLoading:fh,getInput:e1,close:Sl,isAwaitingPromise:n1,rejectPromise:i1,handleAwaitingPromise:cs,closePopup:Sl,closeModal:Sl,closeToast:Sl,enableButtons:a1,disableButtons:c1,enableInput:u1,disableInput:d1,showValidationMessage:f1,resetValidationMessage:h1,getProgressSteps:p1,update:m1,_destroy:y1});const v1=f=>{const p=We.innerParams.get(f);f.disableButtons(),p.input?vh(f,"confirm"):jc(f,!0)},w1=f=>{const p=We.innerParams.get(f);f.disableButtons(),p.returnInputValueOnDeny?vh(f,"deny"):Vc(f,!1)},k1=(f,p)=>{f.disableButtons(),p(ho.cancel)},vh=(f,p)=>{const v=We.innerParams.get(f);if(!v.input)return l('The "input" parameter is needed to be set when using returnInputValueOn'.concat(i(p)));const M=W0(f,v);v.inputValidator?S1(f,M,p):f.getInput().checkValidity()?p==="deny"?Vc(f,M):jc(f,M):(f.enableButtons(),f.showValidationMessage(v.validationMessage))},S1=(f,p,v)=>{const M=We.innerParams.get(f);f.disableInput(),Promise.resolve().then(()=>m(M.inputValidator(p,M.validationMessage))).then(se=>{f.enableButtons(),f.enableInput(),se?f.showValidationMessage(se):v==="deny"?Vc(f,p):jc(f,p)})},Vc=(f,p)=>{const v=We.innerParams.get(f||void 0);v.showLoaderOnDeny&&po(et()),v.preDeny?(We.awaitingPromise.set(f||void 0,!0),Promise.resolve().then(()=>m(v.preDeny(p,v.validationMessage))).then(M=>{M===!1?(f.hideLoading(),cs(f)):f.closePopup({isDenied:!0,value:typeof M>"u"?p:M})}).catch(M=>kh(f||void 0,M))):f.closePopup({isDenied:!0,value:p})},wh=(f,p)=>{f.closePopup({isConfirmed:!0,value:p})},kh=(f,p)=>{f.rejectPromise(p)},jc=(f,p)=>{const v=We.innerParams.get(f||void 0);v.showLoaderOnConfirm&&po(),v.preConfirm?(f.resetValidationMessage(),We.awaitingPromise.set(f||void 0,!0),Promise.resolve().then(()=>m(v.preConfirm(p,v.validationMessage))).then(M=>{$(Lt())||M===!1?(f.hideLoading(),cs(f)):wh(f,typeof M>"u"?p:M)}).catch(M=>kh(f||void 0,M))):wh(f,p)},x1=(f,p,v)=>{We.innerParams.get(f).toast?C1(f,p,v):(E1(p),T1(p),A1(f,p,v))},C1=(f,p,v)=>{p.popup.onclick=()=>{const M=We.innerParams.get(f);M&&(O1(M)||M.timer||M.input)||v(ho.close)}},O1=f=>f.showConfirmButton||f.showDenyButton||f.showCancelButton||f.showCloseButton;let xl=!1;const E1=f=>{f.popup.onmousedown=()=>{f.container.onmouseup=function(p){f.container.onmouseup=void 0,p.target===f.container&&(xl=!0)}}},T1=f=>{f.container.onmousedown=()=>{f.popup.onmouseup=function(p){f.popup.onmouseup=void 0,(p.target===f.popup||f.popup.contains(p.target))&&(xl=!0)}}},A1=(f,p,v)=>{p.container.onclick=M=>{const se=We.innerParams.get(f);if(xl){xl=!1;return}M.target===p.container&&d(se.allowOutsideClick)&&v(ho.backdrop)}},M1=()=>$(Q()),Sh=()=>Me()&&Me().click(),_1=()=>et()&&et().click(),N1=()=>z()&&z().click(),P1=(f,p,v,M)=>{p.keydownTarget&&p.keydownHandlerAdded&&(p.keydownTarget.removeEventListener("keydown",p.keydownHandler,{capture:p.keydownListenerCapture}),p.keydownHandlerAdded=!1),v.toast||(p.keydownHandler=se=>D1(f,se,M),p.keydownTarget=v.keydownListenerCapture?window:Q(),p.keydownListenerCapture=v.keydownListenerCapture,p.keydownTarget.addEventListener("keydown",p.keydownHandler,{capture:p.keydownListenerCapture}),p.keydownHandlerAdded=!0)},Hc=(f,p,v)=>{const M=B();if(M.length)return p=p+v,p===M.length?p=0:p===-1&&(p=M.length-1),M[p].focus();Q().focus()},xh=["ArrowRight","ArrowDown"],I1=["ArrowLeft","ArrowUp"],D1=(f,p,v)=>{const M=We.innerParams.get(f);M&&(p.isComposing||p.keyCode===229||(M.stopKeydownPropagation&&p.stopPropagation(),p.key==="Enter"?$1(f,p,M):p.key==="Tab"?R1(p,M):[...xh,...I1].includes(p.key)?B1(p.key):p.key==="Escape"&&L1(p,M,v)))},$1=(f,p,v)=>{if(d(v.allowEnterKey)&&p.target&&f.getInput()&&p.target.outerHTML===f.getInput().outerHTML){if(["textarea","file"].includes(v.input))return;Sh(),p.preventDefault()}},R1=(f,p)=>{const v=f.target,M=B();let se=-1;for(let Ne=0;Ne<M.length;Ne++)if(v===M[Ne]){se=Ne;break}f.shiftKey?Hc(p,se,-1):Hc(p,se,1),f.stopPropagation(),f.preventDefault()},B1=f=>{const p=Me(),v=et(),M=z();if(![p,v,M].includes(document.activeElement))return;const se=xh.includes(f)?"nextElementSibling":"previousElementSibling";let Ne=document.activeElement;for(let Nt=0;Nt<q().children.length;Nt++){if(Ne=Ne[se],!Ne)return;if($(Ne)&&Ne instanceof HTMLButtonElement)break}Ne instanceof HTMLButtonElement&&Ne.focus()},L1=(f,p,v)=>{d(p.allowEscapeKey)&&(f.preventDefault(),v(ho.esc))},F1=f=>typeof f=="object"&&f.jquery,Ch=f=>f instanceof Element||F1(f),V1=f=>{const p={};return typeof f[0]=="object"&&!Ch(f[0])?Object.assign(p,f[0]):["title","html","icon"].forEach((v,M)=>{const se=f[M];typeof se=="string"||Ch(se)?p[v]=se:se!==void 0&&l("Unexpected type of ".concat(v,'! Expected "string" or "Element", got ').concat(typeof se))}),p};function j1(){const f=this;for(var p=arguments.length,v=new Array(p),M=0;M<p;M++)v[M]=arguments[M];return new f(...v)}function H1(f){class p extends this{_main(M,se){return super._main(M,Object.assign({},f,se))}}return p}const z1=()=>ge.timeout&&ge.timeout.getTimerLeft(),Oh=()=>{if(ge.timeout)return $e(),ge.timeout.stop()},Eh=()=>{if(ge.timeout){const f=ge.timeout.start();return be(f),f}},K1=()=>{const f=ge.timeout;return f&&(f.running?Oh():Eh())},U1=f=>{if(ge.timeout){const p=ge.timeout.increase(f);return be(p,!0),p}},W1=()=>ge.timeout&&ge.timeout.isRunning();let Th=!1;const zc={};function q1(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";zc[f]=this,Th||(document.body.addEventListener("click",J1),Th=!0)}const J1=f=>{for(let p=f.target;p&&p!==document;p=p.parentNode)for(const v in zc){const M=p.getAttribute(v);if(M){zc[v].fire({template:M});return}}};var G1=Object.freeze({isValidParameter:N,isUpdatableParameter:R,isDeprecatedParameter:D,argsToParams:V1,isVisible:M1,clickConfirm:Sh,clickDeny:_1,clickCancel:N1,getContainer:Z,getPopup:Q,getTitle:Qe,getHtmlContainer:Ue,getImage:rt,getIcon:Ae,getInputLabel:At,getCloseButton:T,getActions:q,getConfirmButton:Me,getDenyButton:et,getCancelButton:z,getLoader:H,getFooter:W,getTimerProgressBar:ae,getFocusableElements:B,getValidationMessage:Lt,isLoading:J,fire:j1,mixin:H1,showLoading:po,enableLoading:po,getTimerLeft:z1,stopTimer:Oh,resumeTimer:Eh,toggleTimer:K1,increaseTimer:U1,isTimerRunning:W1,bindClickHandler:q1});let Kc;class mo{constructor(){if(typeof window>"u")return;Kc=this;for(var p=arguments.length,v=new Array(p),M=0;M<p;M++)v[M]=arguments[M];const se=Object.freeze(this.constructor.argsToParams(v));Object.defineProperties(this,{params:{value:se,writable:!1,enumerable:!0,configurable:!0}});const Ne=this._main(this.params);We.promise.set(this,Ne)}_main(p){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};E(Object.assign({},v,p)),ge.currentInstance&&(ge.currentInstance._destroy(),L()&&sh()),ge.currentInstance=this;const M=X1(p,v);M0(M),Object.freeze(M),ge.timeout&&(ge.timeout.stop(),delete ge.timeout),clearTimeout(ge.restoreFocusTimeout);const se=Z1(this);return oh(this,M),We.innerParams.set(this,M),Y1(this,se,M)}then(p){return We.promise.get(this).then(p)}finally(p){return We.promise.get(this).finally(p)}}const Y1=(f,p,v)=>new Promise((M,se)=>{const Ne=Nt=>{f.closePopup({isDismissed:!0,dismiss:Nt})};as.swalPromiseResolve.set(f,M),as.swalPromiseReject.set(f,se),p.confirmButton.onclick=()=>v1(f),p.denyButton.onclick=()=>w1(f),p.cancelButton.onclick=()=>k1(f,Ne),p.closeButton.onclick=()=>Ne(ho.close),x1(f,p,Ne),P1(f,ge,v,Ne),U0(f,v),V0(v),Q1(ge,v,Ne),ew(p,v),setTimeout(()=>{p.container.scrollTop=0})}),X1=(f,p)=>{const v=v0(f),M=Object.assign({},b,p,v,f);return M.showClass=Object.assign({},b.showClass,M.showClass),M.hideClass=Object.assign({},b.hideClass,M.hideClass),M},Z1=f=>{const p={popup:Q(),container:Z(),actions:q(),confirmButton:Me(),denyButton:et(),cancelButton:z(),loader:H(),closeButton:T(),validationMessage:Lt(),progressSteps:ht()};return We.domCache.set(f,p),p},Q1=(f,p,v)=>{const M=ae();y(M),p.timer&&(f.timeout=new _0(()=>{v("timer"),delete f.timeout},p.timer),p.timerProgressBar&&(w(M),me(M,p,"timerProgressBar"),setTimeout(()=>{f.timeout&&f.timeout.running&&be(p.timer)})))},ew=(f,p)=>{if(!p.toast){if(!d(p.allowEnterKey))return nw();tw(f,p)||Hc(p,-1,1)}},tw=(f,p)=>p.focusDeny&&$(f.denyButton)?(f.denyButton.focus(),!0):p.focusCancel&&$(f.cancelButton)?(f.cancelButton.focus(),!0):p.focusConfirm&&$(f.confirmButton)?(f.confirmButton.focus(),!0):!1,nw=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Object.assign(mo.prototype,bh),Object.assign(mo,G1),Object.keys(bh).forEach(f=>{mo[f]=function(){if(Kc)return Kc[f](...arguments)}}),mo.DismissReason=ho,mo.version="11.4.4";const Cl=mo;return Cl.default=Cl,Cl}),typeof ei<"u"&&ei.Sweetalert2&&(ei.swal=ei.sweetAlert=ei.Swal=ei.SweetAlert=ei.Sweetalert2)})(t0);var AI=t0.exports;const Jl=TI(AI);class MI{static install(e,n={}){var r;const i=Jl.mixin(n),o=function(...s){return i.fire.call(i,...s)};Object.assign(o,Jl),Object.keys(Jl).filter(s=>typeof Jl[s]=="function").forEach(s=>{o[s]=i[s].bind(i)}),(r=e.config)!=null&&r.globalProperties&&!e.config.globalProperties.$swal?(e.config.globalProperties.$swal=o,e.provide("$swal",o)):Object.prototype.hasOwnProperty.call(e,"$swal")||(e.prototype.$swal=o,e.swal=o)}}const n0=AS(EI);n0.use(MI);n0.mount("#app");
