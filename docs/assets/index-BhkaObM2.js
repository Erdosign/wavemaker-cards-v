(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ff(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const bt={},Ui=[],Mr=()=>{},Lw=()=>!1,gc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),hf=t=>t.startsWith("onUpdate:"),Jt=Object.assign,pf=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Bw=Object.prototype.hasOwnProperty,ft=(t,e)=>Bw.call(t,e),Ie=Array.isArray,Ki=t=>Cl(t)==="[object Map]",yc=t=>Cl(t)==="[object Set]",Jh=t=>Cl(t)==="[object Date]",Ke=t=>typeof t=="function",Dt=t=>typeof t=="string",_r=t=>typeof t=="symbol",Ct=t=>t!==null&&typeof t=="object",Sg=t=>(Ct(t)||Ke(t))&&Ke(t.then)&&Ke(t.catch),xg=Object.prototype.toString,Cl=t=>xg.call(t),Vw=t=>Cl(t).slice(8,-1),Tg=t=>Cl(t)==="[object Object]",mf=t=>Dt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,$s=ff(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),bc=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Rw=/-(\w)/g,ar=bc(t=>t.replace(Rw,(e,n)=>n?n.toUpperCase():"")),Hw=/\B([A-Z])/g,vi=bc(t=>t.replace(Hw,"-$1").toLowerCase()),vc=bc(t=>t.charAt(0).toUpperCase()+t.slice(1)),ou=bc(t=>t?`on${vc(t)}`:""),So=(t,e)=>!Object.is(t,e),la=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Eg=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Qu=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Fw=t=>{const e=Dt(t)?Number(t):NaN;return isNaN(e)?t:e};let Gh;const wc=()=>Gh||(Gh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function rr(t){if(Ie(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],o=Dt(r)?Kw(r):rr(r);if(o)for(const i in o)e[i]=o[i]}return e}else if(Dt(t)||Ct(t))return t}const jw=/;(?![^(]*\))/g,zw=/:([^]+)/,Uw=/\/\*[^]*?\*\//g;function Kw(t){const e={};return t.replace(Uw,"").split(jw).forEach(n=>{if(n){const r=n.split(zw);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function mr(t){let e="";if(Dt(t))e=t;else if(Ie(t))for(let n=0;n<t.length;n++){const r=mr(t[n]);r&&(e+=r+" ")}else if(Ct(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Ww="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",qw=ff(Ww);function Og(t){return!!t||t===""}function Jw(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Cc(t[r],e[r]);return n}function Cc(t,e){if(t===e)return!0;let n=Jh(t),r=Jh(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=_r(t),r=_r(e),n||r)return t===e;if(n=Ie(t),r=Ie(e),n||r)return n&&r?Jw(t,e):!1;if(n=Ct(t),r=Ct(e),n||r){if(!n||!r)return!1;const o=Object.keys(t).length,i=Object.keys(e).length;if(o!==i)return!1;for(const s in t){const l=t.hasOwnProperty(s),a=e.hasOwnProperty(s);if(l&&!a||!l&&a||!Cc(t[s],e[s]))return!1}}return String(t)===String(e)}function Mg(t,e){return t.findIndex(n=>Cc(n,e))}const Ag=t=>!!(t&&t.__v_isRef===!0),xn=t=>Dt(t)?t:t==null?"":Ie(t)||Ct(t)&&(t.toString===xg||!Ke(t.toString))?Ag(t)?xn(t.value):JSON.stringify(t,_g,2):String(t),_g=(t,e)=>Ag(e)?_g(t,e.value):Ki(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,o],i)=>(n[iu(r,i)+" =>"]=o,n),{})}:yc(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>iu(n))}:_r(e)?iu(e):Ct(e)&&!Ie(e)&&!Tg(e)?String(e):e,iu=(t,e="")=>{var n;return _r(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Cn;class Gw{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Cn,!e&&Cn&&(this.index=(Cn.scopes||(Cn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Cn;try{return Cn=this,e()}finally{Cn=n}}}on(){Cn=this}off(){Cn=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Ng(){return Cn}function Yw(t,e=!1){Cn&&Cn.cleanups.push(t)}let kt;const su=new WeakSet;class $g{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Cn&&Cn.active&&Cn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,su.has(this)&&(su.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Dg(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Yh(this),Ig(this);const e=kt,n=gr;kt=this,gr=!0;try{return this.fn()}finally{Lg(this),kt=e,gr=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)bf(e);this.deps=this.depsTail=void 0,Yh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?su.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ed(this)&&this.run()}get dirty(){return ed(this)}}let Pg=0,Ps,Ds;function Dg(t,e=!1){if(t.flags|=8,e){t.next=Ds,Ds=t;return}t.next=Ps,Ps=t}function gf(){Pg++}function yf(){if(--Pg>0)return;if(Ds){let e=Ds;for(Ds=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ps;){let e=Ps;for(Ps=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Ig(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Lg(t){let e,n=t.depsTail,r=n;for(;r;){const o=r.prevDep;r.version===-1?(r===n&&(n=o),bf(r),Xw(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=o}t.deps=e,t.depsTail=n}function ed(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Bg(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Bg(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Zs))return;t.globalVersion=Zs;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!ed(t)){t.flags&=-3;return}const n=kt,r=gr;kt=t,gr=!0;try{Ig(t);const o=t.fn(t._value);(e.version===0||So(o,t._value))&&(t._value=o,e.version++)}catch(o){throw e.version++,o}finally{kt=n,gr=r,Lg(t),t.flags&=-3}}function bf(t,e=!1){const{dep:n,prevSub:r,nextSub:o}=t;if(r&&(r.nextSub=o,t.prevSub=void 0),o&&(o.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)bf(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Xw(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let gr=!0;const Vg=[];function Io(){Vg.push(gr),gr=!1}function Lo(){const t=Vg.pop();gr=t===void 0?!0:t}function Yh(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=kt;kt=void 0;try{e()}finally{kt=n}}}let Zs=0;class Zw{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class kc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!kt||!gr||kt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==kt)n=this.activeLink=new Zw(kt,this),kt.deps?(n.prevDep=kt.depsTail,kt.depsTail.nextDep=n,kt.depsTail=n):kt.deps=kt.depsTail=n,Rg(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=kt.depsTail,n.nextDep=void 0,kt.depsTail.nextDep=n,kt.depsTail=n,kt.deps===n&&(kt.deps=r)}return n}trigger(e){this.version++,Zs++,this.notify(e)}notify(e){gf();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{yf()}}}function Rg(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Rg(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Na=new WeakMap,oi=Symbol(""),td=Symbol(""),Qs=Symbol("");function cn(t,e,n){if(gr&&kt){let r=Na.get(t);r||Na.set(t,r=new Map);let o=r.get(n);o||(r.set(n,o=new kc),o.map=r,o.key=n),o.track()}}function zr(t,e,n,r,o,i){const s=Na.get(t);if(!s){Zs++;return}const l=a=>{a&&a.trigger()};if(gf(),e==="clear")s.forEach(l);else{const a=Ie(t),c=a&&mf(n);if(a&&n==="length"){const u=Number(r);s.forEach((d,h)=>{(h==="length"||h===Qs||!_r(h)&&h>=u)&&l(d)})}else switch((n!==void 0||s.has(void 0))&&l(s.get(n)),c&&l(s.get(Qs)),e){case"add":a?c&&l(s.get("length")):(l(s.get(oi)),Ki(t)&&l(s.get(td)));break;case"delete":a||(l(s.get(oi)),Ki(t)&&l(s.get(td)));break;case"set":Ki(t)&&l(s.get(oi));break}}yf()}function Qw(t,e){const n=Na.get(t);return n&&n.get(e)}function Oi(t){const e=at(t);return e===t?e:(cn(e,"iterate",Qs),sr(t)?e:e.map(un))}function Sc(t){return cn(t=at(t),"iterate",Qs),t}const eC={__proto__:null,[Symbol.iterator](){return lu(this,Symbol.iterator,un)},concat(...t){return Oi(this).concat(...t.map(e=>Ie(e)?Oi(e):e))},entries(){return lu(this,"entries",t=>(t[1]=un(t[1]),t))},every(t,e){return Lr(this,"every",t,e,void 0,arguments)},filter(t,e){return Lr(this,"filter",t,e,n=>n.map(un),arguments)},find(t,e){return Lr(this,"find",t,e,un,arguments)},findIndex(t,e){return Lr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Lr(this,"findLast",t,e,un,arguments)},findLastIndex(t,e){return Lr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Lr(this,"forEach",t,e,void 0,arguments)},includes(...t){return au(this,"includes",t)},indexOf(...t){return au(this,"indexOf",t)},join(t){return Oi(this).join(t)},lastIndexOf(...t){return au(this,"lastIndexOf",t)},map(t,e){return Lr(this,"map",t,e,void 0,arguments)},pop(){return bs(this,"pop")},push(...t){return bs(this,"push",t)},reduce(t,...e){return Xh(this,"reduce",t,e)},reduceRight(t,...e){return Xh(this,"reduceRight",t,e)},shift(){return bs(this,"shift")},some(t,e){return Lr(this,"some",t,e,void 0,arguments)},splice(...t){return bs(this,"splice",t)},toReversed(){return Oi(this).toReversed()},toSorted(t){return Oi(this).toSorted(t)},toSpliced(...t){return Oi(this).toSpliced(...t)},unshift(...t){return bs(this,"unshift",t)},values(){return lu(this,"values",un)}};function lu(t,e,n){const r=Sc(t),o=r[e]();return r!==t&&!sr(t)&&(o._next=o.next,o.next=()=>{const i=o._next();return i.value&&(i.value=n(i.value)),i}),o}const tC=Array.prototype;function Lr(t,e,n,r,o,i){const s=Sc(t),l=s!==t&&!sr(t),a=s[e];if(a!==tC[e]){const d=a.apply(t,i);return l?un(d):d}let c=n;s!==t&&(l?c=function(d,h){return n.call(this,un(d),h,t)}:n.length>2&&(c=function(d,h){return n.call(this,d,h,t)}));const u=a.call(s,c,r);return l&&o?o(u):u}function Xh(t,e,n,r){const o=Sc(t);let i=n;return o!==t&&(sr(t)?n.length>3&&(i=function(s,l,a){return n.call(this,s,l,a,t)}):i=function(s,l,a){return n.call(this,s,un(l),a,t)}),o[e](i,...r)}function au(t,e,n){const r=at(t);cn(r,"iterate",Qs);const o=r[e](...n);return(o===-1||o===!1)&&Cf(n[0])?(n[0]=at(n[0]),r[e](...n)):o}function bs(t,e,n=[]){Io(),gf();const r=at(t)[e].apply(t,n);return yf(),Lo(),r}const nC=ff("__proto__,__v_isRef,__isVue"),Hg=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(_r));function rC(t){_r(t)||(t=String(t));const e=at(this);return cn(e,"has",t),e.hasOwnProperty(t)}class Fg{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const o=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(o?i?hC:Kg:i?Ug:zg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const s=Ie(e);if(!o){let a;if(s&&(a=eC[n]))return a;if(n==="hasOwnProperty")return rC}const l=Reflect.get(e,n,Vt(e)?e:r);return(_r(n)?Hg.has(n):nC(n))||(o||cn(e,"get",n),i)?l:Vt(l)?s&&mf(n)?l:l.value:Ct(l)?o?Wg(l):xc(l):l}}class jg extends Fg{constructor(e=!1){super(!1,e)}set(e,n,r,o){let i=e[n];if(!this._isShallow){const a=fi(i);if(!sr(r)&&!fi(r)&&(i=at(i),r=at(r)),!Ie(e)&&Vt(i)&&!Vt(r))return a?!1:(i.value=r,!0)}const s=Ie(e)&&mf(n)?Number(n)<e.length:ft(e,n),l=Reflect.set(e,n,r,Vt(e)?e:o);return e===at(o)&&(s?So(r,i)&&zr(e,"set",n,r):zr(e,"add",n,r)),l}deleteProperty(e,n){const r=ft(e,n);e[n];const o=Reflect.deleteProperty(e,n);return o&&r&&zr(e,"delete",n,void 0),o}has(e,n){const r=Reflect.has(e,n);return(!_r(n)||!Hg.has(n))&&cn(e,"has",n),r}ownKeys(e){return cn(e,"iterate",Ie(e)?"length":oi),Reflect.ownKeys(e)}}class oC extends Fg{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const iC=new jg,sC=new oC,lC=new jg(!0);const nd=t=>t,Ll=t=>Reflect.getPrototypeOf(t);function aC(t,e,n){return function(...r){const o=this.__v_raw,i=at(o),s=Ki(i),l=t==="entries"||t===Symbol.iterator&&s,a=t==="keys"&&s,c=o[t](...r),u=n?nd:e?rd:un;return!e&&cn(i,"iterate",a?td:oi),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:l?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function Bl(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function cC(t,e){const n={get(o){const i=this.__v_raw,s=at(i),l=at(o);t||(So(o,l)&&cn(s,"get",o),cn(s,"get",l));const{has:a}=Ll(s),c=e?nd:t?rd:un;if(a.call(s,o))return c(i.get(o));if(a.call(s,l))return c(i.get(l));i!==s&&i.get(o)},get size(){const o=this.__v_raw;return!t&&cn(at(o),"iterate",oi),Reflect.get(o,"size",o)},has(o){const i=this.__v_raw,s=at(i),l=at(o);return t||(So(o,l)&&cn(s,"has",o),cn(s,"has",l)),o===l?i.has(o):i.has(o)||i.has(l)},forEach(o,i){const s=this,l=s.__v_raw,a=at(l),c=e?nd:t?rd:un;return!t&&cn(a,"iterate",oi),l.forEach((u,d)=>o.call(i,c(u),c(d),s))}};return Jt(n,t?{add:Bl("add"),set:Bl("set"),delete:Bl("delete"),clear:Bl("clear")}:{add(o){!e&&!sr(o)&&!fi(o)&&(o=at(o));const i=at(this);return Ll(i).has.call(i,o)||(i.add(o),zr(i,"add",o,o)),this},set(o,i){!e&&!sr(i)&&!fi(i)&&(i=at(i));const s=at(this),{has:l,get:a}=Ll(s);let c=l.call(s,o);c||(o=at(o),c=l.call(s,o));const u=a.call(s,o);return s.set(o,i),c?So(i,u)&&zr(s,"set",o,i):zr(s,"add",o,i),this},delete(o){const i=at(this),{has:s,get:l}=Ll(i);let a=s.call(i,o);a||(o=at(o),a=s.call(i,o)),l&&l.call(i,o);const c=i.delete(o);return a&&zr(i,"delete",o,void 0),c},clear(){const o=at(this),i=o.size!==0,s=o.clear();return i&&zr(o,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=aC(o,t,e)}),n}function vf(t,e){const n=cC(t,e);return(r,o,i)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?r:Reflect.get(ft(n,o)&&o in r?n:r,o,i)}const uC={get:vf(!1,!1)},dC={get:vf(!1,!0)},fC={get:vf(!0,!1)};const zg=new WeakMap,Ug=new WeakMap,Kg=new WeakMap,hC=new WeakMap;function pC(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mC(t){return t.__v_skip||!Object.isExtensible(t)?0:pC(Vw(t))}function xc(t){return fi(t)?t:wf(t,!1,iC,uC,zg)}function gC(t){return wf(t,!1,lC,dC,Ug)}function Wg(t){return wf(t,!0,sC,fC,Kg)}function wf(t,e,n,r,o){if(!Ct(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=o.get(t);if(i)return i;const s=mC(t);if(s===0)return t;const l=new Proxy(t,s===2?r:n);return o.set(t,l),l}function Wi(t){return fi(t)?Wi(t.__v_raw):!!(t&&t.__v_isReactive)}function fi(t){return!!(t&&t.__v_isReadonly)}function sr(t){return!!(t&&t.__v_isShallow)}function Cf(t){return t?!!t.__v_raw:!1}function at(t){const e=t&&t.__v_raw;return e?at(e):t}function qg(t){return!ft(t,"__v_skip")&&Object.isExtensible(t)&&Eg(t,"__v_skip",!0),t}const un=t=>Ct(t)?xc(t):t,rd=t=>Ct(t)?Wg(t):t;function Vt(t){return t?t.__v_isRef===!0:!1}function kf(t){return yC(t,!1)}function yC(t,e){return Vt(t)?t:new bC(t,e)}class bC{constructor(e,n){this.dep=new kc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:at(e),this._value=n?e:un(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||sr(e)||fi(e);e=r?e:at(e),So(e,n)&&(this._rawValue=e,this._value=r?e:un(e),this.dep.trigger())}}function wn(t){return Vt(t)?t.value:t}const vC={get:(t,e,n)=>e==="__v_raw"?t:wn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const o=t[e];return Vt(o)&&!Vt(n)?(o.value=n,!0):Reflect.set(t,e,n,r)}};function Jg(t){return Wi(t)?t:new Proxy(t,vC)}class wC{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new kc,{get:r,set:o}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=o}get value(){return this._value=this._get()}set value(e){this._set(e)}}function CC(t){return new wC(t)}function kC(t){const e=Ie(t)?new Array(t.length):{};for(const n in t)e[n]=xC(t,n);return e}class SC{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Qw(at(this._object),this._key)}}function xC(t,e,n){const r=t[e];return Vt(r)?r:new SC(t,e,n)}class TC{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new kc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Zs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&kt!==this)return Dg(this,!0),!0}get value(){const e=this.dep.track();return Bg(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function EC(t,e,n=!1){let r,o;return Ke(t)?r=t:(r=t.get,o=t.set),new TC(r,o,n)}const Vl={},$a=new WeakMap;let Jo;function OC(t,e=!1,n=Jo){if(n){let r=$a.get(n);r||$a.set(n,r=[]),r.push(t)}}function MC(t,e,n=bt){const{immediate:r,deep:o,once:i,scheduler:s,augmentJob:l,call:a}=n,c=L=>o?L:sr(L)||o===!1||o===0?Ur(L,1):Ur(L);let u,d,h,m,g=!1,y=!1;if(Vt(t)?(d=()=>t.value,g=sr(t)):Wi(t)?(d=()=>c(t),g=!0):Ie(t)?(y=!0,g=t.some(L=>Wi(L)||sr(L)),d=()=>t.map(L=>{if(Vt(L))return L.value;if(Wi(L))return c(L);if(Ke(L))return a?a(L,2):L()})):Ke(t)?e?d=a?()=>a(t,2):t:d=()=>{if(h){Io();try{h()}finally{Lo()}}const L=Jo;Jo=u;try{return a?a(t,3,[m]):t(m)}finally{Jo=L}}:d=Mr,e&&o){const L=d,D=o===!0?1/0:o;d=()=>Ur(L(),D)}const x=Ng(),O=()=>{u.stop(),x&&x.active&&pf(x.effects,u)};if(i&&e){const L=e;e=(...D)=>{L(...D),O()}}let A=y?new Array(t.length).fill(Vl):Vl;const N=L=>{if(!(!(u.flags&1)||!u.dirty&&!L))if(e){const D=u.run();if(o||g||(y?D.some((R,F)=>So(R,A[F])):So(D,A))){h&&h();const R=Jo;Jo=u;try{const F=[D,A===Vl?void 0:y&&A[0]===Vl?[]:A,m];a?a(e,3,F):e(...F),A=D}finally{Jo=R}}}else u.run()};return l&&l(N),u=new $g(d),u.scheduler=s?()=>s(N,!1):N,m=L=>OC(L,!1,u),h=u.onStop=()=>{const L=$a.get(u);if(L){if(a)a(L,4);else for(const D of L)D();$a.delete(u)}},e?r?N(!0):A=u.run():s?s(N.bind(null,!0),!0):u.run(),O.pause=u.pause.bind(u),O.resume=u.resume.bind(u),O.stop=O,O}function Ur(t,e=1/0,n){if(e<=0||!Ct(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Vt(t))Ur(t.value,e,n);else if(Ie(t))for(let r=0;r<t.length;r++)Ur(t[r],e,n);else if(yc(t)||Ki(t))t.forEach(r=>{Ur(r,e,n)});else if(Tg(t)){for(const r in t)Ur(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Ur(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function kl(t,e,n,r){try{return r?t(...r):t()}catch(o){Tc(o,e,n)}}function br(t,e,n,r){if(Ke(t)){const o=kl(t,e,n,r);return o&&Sg(o)&&o.catch(i=>{Tc(i,e,n)}),o}if(Ie(t)){const o=[];for(let i=0;i<t.length;i++)o.push(br(t[i],e,n,r));return o}}function Tc(t,e,n,r=!0){const o=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:s}=e&&e.appContext.config||bt;if(e){let l=e.parent;const a=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const u=l.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,a,c)===!1)return}l=l.parent}if(i){Io(),kl(i,null,10,[t,a,c]),Lo();return}}AC(t,n,o,r,s)}function AC(t,e,n,r=!0,o=!1){if(o)throw t;console.error(t)}const kn=[];let Sr=-1;const qi=[];let ao=null,Di=0;const Gg=Promise.resolve();let Pa=null;function Ec(t){const e=Pa||Gg;return t?e.then(this?t.bind(this):t):e}function _C(t){let e=Sr+1,n=kn.length;for(;e<n;){const r=e+n>>>1,o=kn[r],i=el(o);i<t||i===t&&o.flags&2?e=r+1:n=r}return e}function Sf(t){if(!(t.flags&1)){const e=el(t),n=kn[kn.length-1];!n||!(t.flags&2)&&e>=el(n)?kn.push(t):kn.splice(_C(e),0,t),t.flags|=1,Yg()}}function Yg(){Pa||(Pa=Gg.then(Zg))}function NC(t){Ie(t)?qi.push(...t):ao&&t.id===-1?ao.splice(Di+1,0,t):t.flags&1||(qi.push(t),t.flags|=1),Yg()}function Zh(t,e,n=Sr+1){for(;n<kn.length;n++){const r=kn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;kn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Xg(t){if(qi.length){const e=[...new Set(qi)].sort((n,r)=>el(n)-el(r));if(qi.length=0,ao){ao.push(...e);return}for(ao=e,Di=0;Di<ao.length;Di++){const n=ao[Di];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ao=null,Di=0}}const el=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Zg(t){try{for(Sr=0;Sr<kn.length;Sr++){const e=kn[Sr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),kl(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Sr<kn.length;Sr++){const e=kn[Sr];e&&(e.flags&=-2)}Sr=-1,kn.length=0,Xg(),Pa=null,(kn.length||qi.length)&&Zg()}}let Ln=null,Qg=null;function Da(t){const e=Ln;return Ln=t,Qg=t&&t.type.__scopeId||null,e}function hi(t,e=Ln,n){if(!e||t._n)return t;const r=(...o)=>{r._d&&cp(-1);const i=Da(e);let s;try{s=t(...o)}finally{Da(i),r._d&&cp(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function Tt(t,e){if(Ln===null)return t;const n=Nc(Ln),r=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[i,s,l,a=bt]=e[o];i&&(Ke(i)&&(i={mounted:i,updated:i}),i.deep&&Ur(s),r.push({dir:i,instance:n,value:s,oldValue:void 0,arg:l,modifiers:a}))}return t}function Fo(t,e,n,r){const o=t.dirs,i=e&&e.dirs;for(let s=0;s<o.length;s++){const l=o[s];i&&(l.oldValue=i[s].value);let a=l.dir[r];a&&(Io(),br(a,n,8,[t.el,l,t,e]),Lo())}}const $C=Symbol("_vte"),ey=t=>t.__isTeleport,co=Symbol("_leaveCb"),Rl=Symbol("_enterCb");function PC(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return xf(()=>{t.isMounted=!0}),Tf(()=>{t.isUnmounting=!0}),t}const Zn=[Function,Array],ty={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Zn,onEnter:Zn,onAfterEnter:Zn,onEnterCancelled:Zn,onBeforeLeave:Zn,onLeave:Zn,onAfterLeave:Zn,onLeaveCancelled:Zn,onBeforeAppear:Zn,onAppear:Zn,onAfterAppear:Zn,onAppearCancelled:Zn},ny=t=>{const e=t.subTree;return e.component?ny(e.component):e},DC={name:"BaseTransition",props:ty,setup(t,{slots:e}){const n=Sl(),r=PC();return()=>{const o=e.default&&iy(e.default(),!0);if(!o||!o.length)return;const i=ry(o),s=at(t),{mode:l}=s;if(r.isLeaving)return cu(i);const a=Qh(i);if(!a)return cu(i);let c=od(a,s,r,n,d=>c=d);a.type!==In&&tl(a,c);let u=n.subTree&&Qh(n.subTree);if(u&&u.type!==In&&!Yo(a,u)&&ny(n).type!==In){let d=od(u,s,r,n);if(tl(u,d),l==="out-in"&&a.type!==In)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,u=void 0},cu(i);l==="in-out"&&a.type!==In?d.delayLeave=(h,m,g)=>{const y=oy(r,u);y[String(u.key)]=u,h[co]=()=>{m(),h[co]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{g(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function ry(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==In){e=n;break}}return e}const IC=DC;function oy(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function od(t,e,n,r,o){const{appear:i,mode:s,persisted:l=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:h,onLeave:m,onAfterLeave:g,onLeaveCancelled:y,onBeforeAppear:x,onAppear:O,onAfterAppear:A,onAppearCancelled:N}=e,L=String(t.key),D=oy(n,t),R=(T,C)=>{T&&br(T,r,9,C)},F=(T,C)=>{const B=C[1];R(T,C),Ie(T)?T.every(w=>w.length<=1)&&B():T.length<=1&&B()},U={mode:s,persisted:l,beforeEnter(T){let C=a;if(!n.isMounted)if(i)C=x||a;else return;T[co]&&T[co](!0);const B=D[L];B&&Yo(t,B)&&B.el[co]&&B.el[co](),R(C,[T])},enter(T){let C=c,B=u,w=d;if(!n.isMounted)if(i)C=O||c,B=A||u,w=N||d;else return;let te=!1;const J=T[Rl]=we=>{te||(te=!0,we?R(w,[T]):R(B,[T]),U.delayedLeave&&U.delayedLeave(),T[Rl]=void 0)};C?F(C,[T,J]):J()},leave(T,C){const B=String(t.key);if(T[Rl]&&T[Rl](!0),n.isUnmounting)return C();R(h,[T]);let w=!1;const te=T[co]=J=>{w||(w=!0,C(),J?R(y,[T]):R(g,[T]),T[co]=void 0,D[B]===t&&delete D[B])};D[B]=t,m?F(m,[T,te]):te()},clone(T){const C=od(T,e,n,r,o);return o&&o(C),C}};return U}function cu(t){if(Oc(t))return t=Mo(t),t.children=null,t}function Qh(t){if(!Oc(t))return ey(t.type)&&t.children?ry(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Ke(n.default))return n.default()}}function tl(t,e){t.shapeFlag&6&&t.component?(t.transition=e,tl(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function iy(t,e=!1,n){let r=[],o=0;for(let i=0;i<t.length;i++){let s=t[i];const l=n==null?s.key:String(n)+String(s.key!=null?s.key:i);s.type===Ge?(s.patchFlag&128&&o++,r=r.concat(iy(s.children,e,l))):(e||s.type!==In)&&r.push(l!=null?Mo(s,{key:l}):s)}if(o>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function sy(t,e){return Ke(t)?Jt({name:t.name},e,{setup:t}):t}function ly(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Ia(t,e,n,r,o=!1){if(Ie(t)){t.forEach((g,y)=>Ia(g,e&&(Ie(e)?e[y]:e),n,r,o));return}if(Is(r)&&!o){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Ia(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?Nc(r.component):r.el,s=o?null:i,{i:l,r:a}=t,c=e&&e.r,u=l.refs===bt?l.refs={}:l.refs,d=l.setupState,h=at(d),m=d===bt?()=>!1:g=>ft(h,g);if(c!=null&&c!==a&&(Dt(c)?(u[c]=null,m(c)&&(d[c]=null)):Vt(c)&&(c.value=null)),Ke(a))kl(a,l,12,[s,u]);else{const g=Dt(a),y=Vt(a);if(g||y){const x=()=>{if(t.f){const O=g?m(a)?d[a]:u[a]:a.value;o?Ie(O)&&pf(O,i):Ie(O)?O.includes(i)||O.push(i):g?(u[a]=[i],m(a)&&(d[a]=u[a])):(a.value=[i],t.k&&(u[t.k]=a.value))}else g?(u[a]=s,m(a)&&(d[a]=s)):y&&(a.value=s,t.k&&(u[t.k]=s))};s?(x.id=-1,Kn(x,n)):x()}}}wc().requestIdleCallback;wc().cancelIdleCallback;const Is=t=>!!t.type.__asyncLoader,Oc=t=>t.type.__isKeepAlive;function LC(t,e){ay(t,"a",e)}function BC(t,e){ay(t,"da",e)}function ay(t,e,n=rn){const r=t.__wdc||(t.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(Mc(e,r,n),n){let o=n.parent;for(;o&&o.parent;)Oc(o.parent.vnode)&&VC(r,e,n,o),o=o.parent}}function VC(t,e,n,r){const o=Mc(e,t,r,!0);Ef(()=>{pf(r[e],o)},n)}function Mc(t,e,n=rn,r=!1){if(n){const o=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...s)=>{Io();const l=xl(n),a=br(e,n,t,s);return l(),Lo(),a});return r?o.unshift(i):o.push(i),i}}const to=t=>(e,n=rn)=>{(!rl||t==="sp")&&Mc(t,(...r)=>e(...r),n)},RC=to("bm"),xf=to("m"),HC=to("bu"),FC=to("u"),Tf=to("bum"),Ef=to("um"),jC=to("sp"),zC=to("rtg"),UC=to("rtc");function KC(t,e=rn){Mc("ec",t,e)}const cy="components",WC="directives";function Je(t,e){return uy(cy,t,!0,e)||t}const qC=Symbol.for("v-ndc");function Of(t){return uy(WC,t)}function uy(t,e,n=!0,r=!1){const o=Ln||rn;if(o){const i=o.type;if(t===cy){const l=Ik(i,!1);if(l&&(l===e||l===ar(e)||l===vc(ar(e))))return i}const s=ep(o[t]||i[t],e)||ep(o.appContext[t],e);return!s&&r?i:s}}function ep(t,e){return t&&(t[e]||t[ar(e)]||t[vc(ar(e))])}function on(t,e,n,r){let o;const i=n,s=Ie(t);if(s||Dt(t)){const l=s&&Wi(t);let a=!1;l&&(a=!sr(t),t=Sc(t)),o=new Array(t.length);for(let c=0,u=t.length;c<u;c++)o[c]=e(a?un(t[c]):t[c],c,void 0,i)}else if(typeof t=="number"){o=new Array(t);for(let l=0;l<t;l++)o[l]=e(l+1,l,void 0,i)}else if(Ct(t))if(t[Symbol.iterator])o=Array.from(t,(l,a)=>e(l,a,void 0,i));else{const l=Object.keys(t);o=new Array(l.length);for(let a=0,c=l.length;a<c;a++){const u=l[a];o[a]=e(t[u],u,a,i)}}else o=[];return o}const id=t=>t?_y(t)?Nc(t):id(t.parent):null,Ls=Jt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>id(t.parent),$root:t=>id(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>fy(t),$forceUpdate:t=>t.f||(t.f=()=>{Sf(t.update)}),$nextTick:t=>t.n||(t.n=Ec.bind(t.proxy)),$watch:t=>gk.bind(t)}),uu=(t,e)=>t!==bt&&!t.__isScriptSetup&&ft(t,e),JC={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:o,props:i,accessCache:s,type:l,appContext:a}=t;let c;if(e[0]!=="$"){const m=s[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return o[e];case 4:return n[e];case 3:return i[e]}else{if(uu(r,e))return s[e]=1,r[e];if(o!==bt&&ft(o,e))return s[e]=2,o[e];if((c=t.propsOptions[0])&&ft(c,e))return s[e]=3,i[e];if(n!==bt&&ft(n,e))return s[e]=4,n[e];sd&&(s[e]=0)}}const u=Ls[e];let d,h;if(u)return e==="$attrs"&&cn(t.attrs,"get",""),u(t);if((d=l.__cssModules)&&(d=d[e]))return d;if(n!==bt&&ft(n,e))return s[e]=4,n[e];if(h=a.config.globalProperties,ft(h,e))return h[e]},set({_:t},e,n){const{data:r,setupState:o,ctx:i}=t;return uu(o,e)?(o[e]=n,!0):r!==bt&&ft(r,e)?(r[e]=n,!0):ft(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:i}},s){let l;return!!n[s]||t!==bt&&ft(t,s)||uu(e,s)||(l=i[0])&&ft(l,s)||ft(r,s)||ft(Ls,s)||ft(o.config.globalProperties,s)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ft(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function tp(t){return Ie(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let sd=!0;function GC(t){const e=fy(t),n=t.proxy,r=t.ctx;sd=!1,e.beforeCreate&&np(e.beforeCreate,t,"bc");const{data:o,computed:i,methods:s,watch:l,provide:a,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:m,updated:g,activated:y,deactivated:x,beforeDestroy:O,beforeUnmount:A,destroyed:N,unmounted:L,render:D,renderTracked:R,renderTriggered:F,errorCaptured:U,serverPrefetch:T,expose:C,inheritAttrs:B,components:w,directives:te,filters:J}=e;if(c&&YC(c,r,null),s)for(const ne in s){const Me=s[ne];Ke(Me)&&(r[ne]=Me.bind(n))}if(o){const ne=o.call(n,n);Ct(ne)&&(t.data=xc(ne))}if(sd=!0,i)for(const ne in i){const Me=i[ne],nt=Ke(Me)?Me.bind(n,n):Ke(Me.get)?Me.get.bind(n,n):Mr,We=!Ke(Me)&&Ke(Me.set)?Me.set.bind(n):Mr,it=ud({get:nt,set:We});Object.defineProperty(r,ne,{enumerable:!0,configurable:!0,get:()=>it.value,set:pt=>it.value=pt})}if(l)for(const ne in l)dy(l[ne],r,n,ne);if(a){const ne=Ke(a)?a.call(n):a;Reflect.ownKeys(ne).forEach(Me=>{nk(Me,ne[Me])})}u&&np(u,t,"c");function ge(ne,Me){Ie(Me)?Me.forEach(nt=>ne(nt.bind(n))):Me&&ne(Me.bind(n))}if(ge(RC,d),ge(xf,h),ge(HC,m),ge(FC,g),ge(LC,y),ge(BC,x),ge(KC,U),ge(UC,R),ge(zC,F),ge(Tf,A),ge(Ef,L),ge(jC,T),Ie(C))if(C.length){const ne=t.exposed||(t.exposed={});C.forEach(Me=>{Object.defineProperty(ne,Me,{get:()=>n[Me],set:nt=>n[Me]=nt})})}else t.exposed||(t.exposed={});D&&t.render===Mr&&(t.render=D),B!=null&&(t.inheritAttrs=B),w&&(t.components=w),te&&(t.directives=te),T&&ly(t)}function YC(t,e,n=Mr){Ie(t)&&(t=ld(t));for(const r in t){const o=t[r];let i;Ct(o)?"default"in o?i=aa(o.from||r,o.default,!0):i=aa(o.from||r):i=aa(o),Vt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:s=>i.value=s}):e[r]=i}}function np(t,e,n){br(Ie(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function dy(t,e,n,r){let o=r.includes(".")?Ty(n,r):()=>n[r];if(Dt(t)){const i=e[t];Ke(i)&&ca(o,i)}else if(Ke(t))ca(o,t.bind(n));else if(Ct(t))if(Ie(t))t.forEach(i=>dy(i,e,n,r));else{const i=Ke(t.handler)?t.handler.bind(n):e[t.handler];Ke(i)&&ca(o,i,t)}}function fy(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:o,optionsCache:i,config:{optionMergeStrategies:s}}=t.appContext,l=i.get(e);let a;return l?a=l:!o.length&&!n&&!r?a=e:(a={},o.length&&o.forEach(c=>La(a,c,s,!0)),La(a,e,s)),Ct(e)&&i.set(e,a),a}function La(t,e,n,r=!1){const{mixins:o,extends:i}=e;i&&La(t,i,n,!0),o&&o.forEach(s=>La(t,s,n,!0));for(const s in e)if(!(r&&s==="expose")){const l=XC[s]||n&&n[s];t[s]=l?l(t[s],e[s]):e[s]}return t}const XC={data:rp,props:op,emits:op,methods:ks,computed:ks,beforeCreate:bn,created:bn,beforeMount:bn,mounted:bn,beforeUpdate:bn,updated:bn,beforeDestroy:bn,beforeUnmount:bn,destroyed:bn,unmounted:bn,activated:bn,deactivated:bn,errorCaptured:bn,serverPrefetch:bn,components:ks,directives:ks,watch:QC,provide:rp,inject:ZC};function rp(t,e){return e?t?function(){return Jt(Ke(t)?t.call(this,this):t,Ke(e)?e.call(this,this):e)}:e:t}function ZC(t,e){return ks(ld(t),ld(e))}function ld(t){if(Ie(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function bn(t,e){return t?[...new Set([].concat(t,e))]:e}function ks(t,e){return t?Jt(Object.create(null),t,e):e}function op(t,e){return t?Ie(t)&&Ie(e)?[...new Set([...t,...e])]:Jt(Object.create(null),tp(t),tp(e??{})):e}function QC(t,e){if(!t)return e;if(!e)return t;const n=Jt(Object.create(null),t);for(const r in e)n[r]=bn(t[r],e[r]);return n}function hy(){return{app:null,config:{isNativeTag:Lw,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ek=0;function tk(t,e){return function(r,o=null){Ke(r)||(r=Jt({},r)),o!=null&&!Ct(o)&&(o=null);const i=hy(),s=new WeakSet,l=[];let a=!1;const c=i.app={_uid:ek++,_component:r,_props:o,_container:null,_context:i,_instance:null,version:Bk,get config(){return i.config},set config(u){},use(u,...d){return s.has(u)||(u&&Ke(u.install)?(s.add(u),u.install(c,...d)):Ke(u)&&(s.add(u),u(c,...d))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,d){return d?(i.components[u]=d,c):i.components[u]},directive(u,d){return d?(i.directives[u]=d,c):i.directives[u]},mount(u,d,h){if(!a){const m=c._ceVNode||tt(r,o);return m.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),t(m,u,h),a=!0,c._container=u,u.__vue_app__=c,Nc(m.component)}},onUnmount(u){l.push(u)},unmount(){a&&(br(l,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,d){return i.provides[u]=d,c},runWithContext(u){const d=Ji;Ji=c;try{return u()}finally{Ji=d}}};return c}}let Ji=null;function nk(t,e){if(rn){let n=rn.provides;const r=rn.parent&&rn.parent.provides;r===n&&(n=rn.provides=Object.create(r)),n[t]=e}}function aa(t,e,n=!1){const r=rn||Ln;if(r||Ji){const o=Ji?Ji._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(o&&t in o)return o[t];if(arguments.length>1)return n&&Ke(e)?e.call(r&&r.proxy):e}}const py={},my=()=>Object.create(py),gy=t=>Object.getPrototypeOf(t)===py;function rk(t,e,n,r=!1){const o={},i=my();t.propsDefaults=Object.create(null),yy(t,e,o,i);for(const s in t.propsOptions[0])s in o||(o[s]=void 0);n?t.props=r?o:gC(o):t.type.props?t.props=o:t.props=i,t.attrs=i}function ok(t,e,n,r){const{props:o,attrs:i,vnode:{patchFlag:s}}=t,l=at(o),[a]=t.propsOptions;let c=!1;if((r||s>0)&&!(s&16)){if(s&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(Ac(t.emitsOptions,h))continue;const m=e[h];if(a)if(ft(i,h))m!==i[h]&&(i[h]=m,c=!0);else{const g=ar(h);o[g]=ad(a,l,g,m,t,!1)}else m!==i[h]&&(i[h]=m,c=!0)}}}else{yy(t,e,o,i)&&(c=!0);let u;for(const d in l)(!e||!ft(e,d)&&((u=vi(d))===d||!ft(e,u)))&&(a?n&&(n[d]!==void 0||n[u]!==void 0)&&(o[d]=ad(a,l,d,void 0,t,!0)):delete o[d]);if(i!==l)for(const d in i)(!e||!ft(e,d))&&(delete i[d],c=!0)}c&&zr(t.attrs,"set","")}function yy(t,e,n,r){const[o,i]=t.propsOptions;let s=!1,l;if(e)for(let a in e){if($s(a))continue;const c=e[a];let u;o&&ft(o,u=ar(a))?!i||!i.includes(u)?n[u]=c:(l||(l={}))[u]=c:Ac(t.emitsOptions,a)||(!(a in r)||c!==r[a])&&(r[a]=c,s=!0)}if(i){const a=at(n),c=l||bt;for(let u=0;u<i.length;u++){const d=i[u];n[d]=ad(o,a,d,c[d],t,!ft(c,d))}}return s}function ad(t,e,n,r,o,i){const s=t[n];if(s!=null){const l=ft(s,"default");if(l&&r===void 0){const a=s.default;if(s.type!==Function&&!s.skipFactory&&Ke(a)){const{propsDefaults:c}=o;if(n in c)r=c[n];else{const u=xl(o);r=c[n]=a.call(null,e),u()}}else r=a;o.ce&&o.ce._setProp(n,r)}s[0]&&(i&&!l?r=!1:s[1]&&(r===""||r===vi(n))&&(r=!0))}return r}const ik=new WeakMap;function by(t,e,n=!1){const r=n?ik:e.propsCache,o=r.get(t);if(o)return o;const i=t.props,s={},l=[];let a=!1;if(!Ke(t)){const u=d=>{a=!0;const[h,m]=by(d,e,!0);Jt(s,h),m&&l.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!a)return Ct(t)&&r.set(t,Ui),Ui;if(Ie(i))for(let u=0;u<i.length;u++){const d=ar(i[u]);ip(d)&&(s[d]=bt)}else if(i)for(const u in i){const d=ar(u);if(ip(d)){const h=i[u],m=s[d]=Ie(h)||Ke(h)?{type:h}:Jt({},h),g=m.type;let y=!1,x=!0;if(Ie(g))for(let O=0;O<g.length;++O){const A=g[O],N=Ke(A)&&A.name;if(N==="Boolean"){y=!0;break}else N==="String"&&(x=!1)}else y=Ke(g)&&g.name==="Boolean";m[0]=y,m[1]=x,(y||ft(m,"default"))&&l.push(d)}}const c=[s,l];return Ct(t)&&r.set(t,c),c}function ip(t){return t[0]!=="$"&&!$s(t)}const vy=t=>t[0]==="_"||t==="$stable",Mf=t=>Ie(t)?t.map(Er):[Er(t)],sk=(t,e,n)=>{if(e._n)return e;const r=hi((...o)=>Mf(e(...o)),n);return r._c=!1,r},wy=(t,e,n)=>{const r=t._ctx;for(const o in t){if(vy(o))continue;const i=t[o];if(Ke(i))e[o]=sk(o,i,r);else if(i!=null){const s=Mf(i);e[o]=()=>s}}},Cy=(t,e)=>{const n=Mf(e);t.slots.default=()=>n},ky=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},lk=(t,e,n)=>{const r=t.slots=my();if(t.vnode.shapeFlag&32){const o=e._;o?(ky(r,e,n),n&&Eg(r,"_",o,!0)):wy(e,r)}else e&&Cy(t,e)},ak=(t,e,n)=>{const{vnode:r,slots:o}=t;let i=!0,s=bt;if(r.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:ky(o,e,n):(i=!e.$stable,wy(e,o)),s=e}else e&&(Cy(t,e),s={default:1});if(i)for(const l in o)!vy(l)&&s[l]==null&&delete o[l]},Kn=Sk;function ck(t){return uk(t)}function uk(t,e){const n=wc();n.__VUE__=!0;const{insert:r,remove:o,patchProp:i,createElement:s,createText:l,createComment:a,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:m=Mr,insertStaticContent:g}=t,y=(M,$,V,H=null,W=null,Y=null,se=void 0,X=null,ee=!!$.dynamicChildren)=>{if(M===$)return;M&&!Yo(M,$)&&(H=j(M),pt(M,W,Y,!0),M=null),$.patchFlag===-2&&(ee=!1,$.dynamicChildren=null);const{type:Q,ref:ye,shapeFlag:ce}=$;switch(Q){case _c:x(M,$,V,H);break;case In:O(M,$,V,H);break;case fu:M==null&&A($,V,H,se);break;case Ge:w(M,$,V,H,W,Y,se,X,ee);break;default:ce&1?D(M,$,V,H,W,Y,se,X,ee):ce&6?te(M,$,V,H,W,Y,se,X,ee):(ce&64||ce&128)&&Q.process(M,$,V,H,W,Y,se,X,ee,q)}ye!=null&&W&&Ia(ye,M&&M.ref,Y,$||M,!$)},x=(M,$,V,H)=>{if(M==null)r($.el=l($.children),V,H);else{const W=$.el=M.el;$.children!==M.children&&c(W,$.children)}},O=(M,$,V,H)=>{M==null?r($.el=a($.children||""),V,H):$.el=M.el},A=(M,$,V,H)=>{[M.el,M.anchor]=g(M.children,$,V,H,M.el,M.anchor)},N=({el:M,anchor:$},V,H)=>{let W;for(;M&&M!==$;)W=h(M),r(M,V,H),M=W;r($,V,H)},L=({el:M,anchor:$})=>{let V;for(;M&&M!==$;)V=h(M),o(M),M=V;o($)},D=(M,$,V,H,W,Y,se,X,ee)=>{$.type==="svg"?se="svg":$.type==="math"&&(se="mathml"),M==null?R($,V,H,W,Y,se,X,ee):T(M,$,W,Y,se,X,ee)},R=(M,$,V,H,W,Y,se,X)=>{let ee,Q;const{props:ye,shapeFlag:ce,transition:he,dirs:pe}=M;if(ee=M.el=s(M.type,Y,ye&&ye.is,ye),ce&8?u(ee,M.children):ce&16&&U(M.children,ee,null,H,W,du(M,Y),se,X),pe&&Fo(M,null,H,"created"),F(ee,M,M.scopeId,se,H),ye){for(const Se in ye)Se!=="value"&&!$s(Se)&&i(ee,Se,null,ye[Se],Y,H);"value"in ye&&i(ee,"value",null,ye.value,Y),(Q=ye.onVnodeBeforeMount)&&kr(Q,H,M)}pe&&Fo(M,null,H,"beforeMount");const re=dk(W,he);re&&he.beforeEnter(ee),r(ee,$,V),((Q=ye&&ye.onVnodeMounted)||re||pe)&&Kn(()=>{Q&&kr(Q,H,M),re&&he.enter(ee),pe&&Fo(M,null,H,"mounted")},W)},F=(M,$,V,H,W)=>{if(V&&m(M,V),H)for(let Y=0;Y<H.length;Y++)m(M,H[Y]);if(W){let Y=W.subTree;if($===Y||Oy(Y.type)&&(Y.ssContent===$||Y.ssFallback===$)){const se=W.vnode;F(M,se,se.scopeId,se.slotScopeIds,W.parent)}}},U=(M,$,V,H,W,Y,se,X,ee=0)=>{for(let Q=ee;Q<M.length;Q++){const ye=M[Q]=X?uo(M[Q]):Er(M[Q]);y(null,ye,$,V,H,W,Y,se,X)}},T=(M,$,V,H,W,Y,se)=>{const X=$.el=M.el;let{patchFlag:ee,dynamicChildren:Q,dirs:ye}=$;ee|=M.patchFlag&16;const ce=M.props||bt,he=$.props||bt;let pe;if(V&&jo(V,!1),(pe=he.onVnodeBeforeUpdate)&&kr(pe,V,$,M),ye&&Fo($,M,V,"beforeUpdate"),V&&jo(V,!0),(ce.innerHTML&&he.innerHTML==null||ce.textContent&&he.textContent==null)&&u(X,""),Q?C(M.dynamicChildren,Q,X,V,H,du($,W),Y):se||Me(M,$,X,null,V,H,du($,W),Y,!1),ee>0){if(ee&16)B(X,ce,he,V,W);else if(ee&2&&ce.class!==he.class&&i(X,"class",null,he.class,W),ee&4&&i(X,"style",ce.style,he.style,W),ee&8){const re=$.dynamicProps;for(let Se=0;Se<re.length;Se++){const Oe=re[Se],me=ce[Oe],k=he[Oe];(k!==me||Oe==="value")&&i(X,Oe,me,k,W,V)}}ee&1&&M.children!==$.children&&u(X,$.children)}else!se&&Q==null&&B(X,ce,he,V,W);((pe=he.onVnodeUpdated)||ye)&&Kn(()=>{pe&&kr(pe,V,$,M),ye&&Fo($,M,V,"updated")},H)},C=(M,$,V,H,W,Y,se)=>{for(let X=0;X<$.length;X++){const ee=M[X],Q=$[X],ye=ee.el&&(ee.type===Ge||!Yo(ee,Q)||ee.shapeFlag&70)?d(ee.el):V;y(ee,Q,ye,null,H,W,Y,se,!0)}},B=(M,$,V,H,W)=>{if($!==V){if($!==bt)for(const Y in $)!$s(Y)&&!(Y in V)&&i(M,Y,$[Y],null,W,H);for(const Y in V){if($s(Y))continue;const se=V[Y],X=$[Y];se!==X&&Y!=="value"&&i(M,Y,X,se,W,H)}"value"in V&&i(M,"value",$.value,V.value,W)}},w=(M,$,V,H,W,Y,se,X,ee)=>{const Q=$.el=M?M.el:l(""),ye=$.anchor=M?M.anchor:l("");let{patchFlag:ce,dynamicChildren:he,slotScopeIds:pe}=$;pe&&(X=X?X.concat(pe):pe),M==null?(r(Q,V,H),r(ye,V,H),U($.children||[],V,ye,W,Y,se,X,ee)):ce>0&&ce&64&&he&&M.dynamicChildren?(C(M.dynamicChildren,he,V,W,Y,se,X),($.key!=null||W&&$===W.subTree)&&Sy(M,$,!0)):Me(M,$,V,ye,W,Y,se,X,ee)},te=(M,$,V,H,W,Y,se,X,ee)=>{$.slotScopeIds=X,M==null?$.shapeFlag&512?W.ctx.activate($,V,H,se,ee):J($,V,H,W,Y,se,ee):we(M,$,ee)},J=(M,$,V,H,W,Y,se)=>{const X=M.component=_k(M,H,W);if(Oc(M)&&(X.ctx.renderer=q),Nk(X,!1,se),X.asyncDep){if(W&&W.registerDep(X,ge,se),!M.el){const ee=X.subTree=tt(In);O(null,ee,$,V)}}else ge(X,M,$,V,W,Y,se)},we=(M,$,V)=>{const H=$.component=M.component;if(Ck(M,$,V))if(H.asyncDep&&!H.asyncResolved){ne(H,$,V);return}else H.next=$,H.update();else $.el=M.el,H.vnode=$},ge=(M,$,V,H,W,Y,se)=>{const X=()=>{if(M.isMounted){let{next:ce,bu:he,u:pe,parent:re,vnode:Se}=M;{const E=xy(M);if(E){ce&&(ce.el=Se.el,ne(M,ce,se)),E.asyncDep.then(()=>{M.isUnmounted||X()});return}}let Oe=ce,me;jo(M,!1),ce?(ce.el=Se.el,ne(M,ce,se)):ce=Se,he&&la(he),(me=ce.props&&ce.props.onVnodeBeforeUpdate)&&kr(me,re,ce,Se),jo(M,!0);const k=lp(M),b=M.subTree;M.subTree=k,y(b,k,d(b.el),j(b),M,W,Y),ce.el=k.el,Oe===null&&kk(M,k.el),pe&&Kn(pe,W),(me=ce.props&&ce.props.onVnodeUpdated)&&Kn(()=>kr(me,re,ce,Se),W)}else{let ce;const{el:he,props:pe}=$,{bm:re,m:Se,parent:Oe,root:me,type:k}=M,b=Is($);jo(M,!1),re&&la(re),!b&&(ce=pe&&pe.onVnodeBeforeMount)&&kr(ce,Oe,$),jo(M,!0);{me.ce&&me.ce._injectChildStyle(k);const E=M.subTree=lp(M);y(null,E,V,H,M,W,Y),$.el=E.el}if(Se&&Kn(Se,W),!b&&(ce=pe&&pe.onVnodeMounted)){const E=$;Kn(()=>kr(ce,Oe,E),W)}($.shapeFlag&256||Oe&&Is(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&M.a&&Kn(M.a,W),M.isMounted=!0,$=V=H=null}};M.scope.on();const ee=M.effect=new $g(X);M.scope.off();const Q=M.update=ee.run.bind(ee),ye=M.job=ee.runIfDirty.bind(ee);ye.i=M,ye.id=M.uid,ee.scheduler=()=>Sf(ye),jo(M,!0),Q()},ne=(M,$,V)=>{$.component=M;const H=M.vnode.props;M.vnode=$,M.next=null,ok(M,$.props,H,V),ak(M,$.children,V),Io(),Zh(M),Lo()},Me=(M,$,V,H,W,Y,se,X,ee=!1)=>{const Q=M&&M.children,ye=M?M.shapeFlag:0,ce=$.children,{patchFlag:he,shapeFlag:pe}=$;if(he>0){if(he&128){We(Q,ce,V,H,W,Y,se,X,ee);return}else if(he&256){nt(Q,ce,V,H,W,Y,se,X,ee);return}}pe&8?(ye&16&&_t(Q,W,Y),ce!==Q&&u(V,ce)):ye&16?pe&16?We(Q,ce,V,H,W,Y,se,X,ee):_t(Q,W,Y,!0):(ye&8&&u(V,""),pe&16&&U(ce,V,H,W,Y,se,X,ee))},nt=(M,$,V,H,W,Y,se,X,ee)=>{M=M||Ui,$=$||Ui;const Q=M.length,ye=$.length,ce=Math.min(Q,ye);let he;for(he=0;he<ce;he++){const pe=$[he]=ee?uo($[he]):Er($[he]);y(M[he],pe,V,null,W,Y,se,X,ee)}Q>ye?_t(M,W,Y,!0,!1,ce):U($,V,H,W,Y,se,X,ee,ce)},We=(M,$,V,H,W,Y,se,X,ee)=>{let Q=0;const ye=$.length;let ce=M.length-1,he=ye-1;for(;Q<=ce&&Q<=he;){const pe=M[Q],re=$[Q]=ee?uo($[Q]):Er($[Q]);if(Yo(pe,re))y(pe,re,V,null,W,Y,se,X,ee);else break;Q++}for(;Q<=ce&&Q<=he;){const pe=M[ce],re=$[he]=ee?uo($[he]):Er($[he]);if(Yo(pe,re))y(pe,re,V,null,W,Y,se,X,ee);else break;ce--,he--}if(Q>ce){if(Q<=he){const pe=he+1,re=pe<ye?$[pe].el:H;for(;Q<=he;)y(null,$[Q]=ee?uo($[Q]):Er($[Q]),V,re,W,Y,se,X,ee),Q++}}else if(Q>he)for(;Q<=ce;)pt(M[Q],W,Y,!0),Q++;else{const pe=Q,re=Q,Se=new Map;for(Q=re;Q<=he;Q++){const ie=$[Q]=ee?uo($[Q]):Er($[Q]);ie.key!=null&&Se.set(ie.key,Q)}let Oe,me=0;const k=he-re+1;let b=!1,E=0;const P=new Array(k);for(Q=0;Q<k;Q++)P[Q]=0;for(Q=pe;Q<=ce;Q++){const ie=M[Q];if(me>=k){pt(ie,W,Y,!0);continue}let le;if(ie.key!=null)le=Se.get(ie.key);else for(Oe=re;Oe<=he;Oe++)if(P[Oe-re]===0&&Yo(ie,$[Oe])){le=Oe;break}le===void 0?pt(ie,W,Y,!0):(P[le-re]=Q+1,le>=E?E=le:b=!0,y(ie,$[le],V,null,W,Y,se,X,ee),me++)}const I=b?fk(P):Ui;for(Oe=I.length-1,Q=k-1;Q>=0;Q--){const ie=re+Q,le=$[ie],Te=ie+1<ye?$[ie+1].el:H;P[Q]===0?y(null,le,V,Te,W,Y,se,X,ee):b&&(Oe<0||Q!==I[Oe]?it(le,V,Te,2):Oe--)}}},it=(M,$,V,H,W=null)=>{const{el:Y,type:se,transition:X,children:ee,shapeFlag:Q}=M;if(Q&6){it(M.component.subTree,$,V,H);return}if(Q&128){M.suspense.move($,V,H);return}if(Q&64){se.move(M,$,V,q);return}if(se===Ge){r(Y,$,V);for(let ce=0;ce<ee.length;ce++)it(ee[ce],$,V,H);r(M.anchor,$,V);return}if(se===fu){N(M,$,V);return}if(H!==2&&Q&1&&X)if(H===0)X.beforeEnter(Y),r(Y,$,V),Kn(()=>X.enter(Y),W);else{const{leave:ce,delayLeave:he,afterLeave:pe}=X,re=()=>r(Y,$,V),Se=()=>{ce(Y,()=>{re(),pe&&pe()})};he?he(Y,re,Se):Se()}else r(Y,$,V)},pt=(M,$,V,H=!1,W=!1)=>{const{type:Y,props:se,ref:X,children:ee,dynamicChildren:Q,shapeFlag:ye,patchFlag:ce,dirs:he,cacheIndex:pe}=M;if(ce===-2&&(W=!1),X!=null&&Ia(X,null,V,M,!0),pe!=null&&($.renderCache[pe]=void 0),ye&256){$.ctx.deactivate(M);return}const re=ye&1&&he,Se=!Is(M);let Oe;if(Se&&(Oe=se&&se.onVnodeBeforeUnmount)&&kr(Oe,$,M),ye&6)rt(M.component,V,H);else{if(ye&128){M.suspense.unmount(V,H);return}re&&Fo(M,null,$,"beforeUnmount"),ye&64?M.type.remove(M,$,V,q,H):Q&&!Q.hasOnce&&(Y!==Ge||ce>0&&ce&64)?_t(Q,$,V,!1,!0):(Y===Ge&&ce&384||!W&&ye&16)&&_t(ee,$,V),H&&Ht(M)}(Se&&(Oe=se&&se.onVnodeUnmounted)||re)&&Kn(()=>{Oe&&kr(Oe,$,M),re&&Fo(M,null,$,"unmounted")},V)},Ht=M=>{const{type:$,el:V,anchor:H,transition:W}=M;if($===Ge){Ae(V,H);return}if($===fu){L(M);return}const Y=()=>{o(V),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(M.shapeFlag&1&&W&&!W.persisted){const{leave:se,delayLeave:X}=W,ee=()=>se(V,Y);X?X(M.el,Y,ee):ee()}else Y()},Ae=(M,$)=>{let V;for(;M!==$;)V=h(M),o(M),M=V;o($)},rt=(M,$,V)=>{const{bum:H,scope:W,job:Y,subTree:se,um:X,m:ee,a:Q}=M;sp(ee),sp(Q),H&&la(H),W.stop(),Y&&(Y.flags|=8,pt(se,M,$,V)),X&&Kn(X,$),Kn(()=>{M.isUnmounted=!0},$),$&&$.pendingBranch&&!$.isUnmounted&&M.asyncDep&&!M.asyncResolved&&M.suspenseId===$.pendingId&&($.deps--,$.deps===0&&$.resolve())},_t=(M,$,V,H=!1,W=!1,Y=0)=>{for(let se=Y;se<M.length;se++)pt(M[se],$,V,H,W)},j=M=>{if(M.shapeFlag&6)return j(M.component.subTree);if(M.shapeFlag&128)return M.suspense.next();const $=h(M.anchor||M.el),V=$&&$[$C];return V?h(V):$};let K=!1;const G=(M,$,V)=>{M==null?$._vnode&&pt($._vnode,null,null,!0):y($._vnode||null,M,$,null,null,null,V),$._vnode=M,K||(K=!0,Zh(),Xg(),K=!1)},q={p:y,um:pt,m:it,r:Ht,mt:J,mc:U,pc:Me,pbc:C,n:j,o:t};return{render:G,hydrate:void 0,createApp:tk(G)}}function du({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function jo({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function dk(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Sy(t,e,n=!1){const r=t.children,o=e.children;if(Ie(r)&&Ie(o))for(let i=0;i<r.length;i++){const s=r[i];let l=o[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=o[i]=uo(o[i]),l.el=s.el),!n&&l.patchFlag!==-2&&Sy(s,l)),l.type===_c&&(l.el=s.el)}}function fk(t){const e=t.slice(),n=[0];let r,o,i,s,l;const a=t.length;for(r=0;r<a;r++){const c=t[r];if(c!==0){if(o=n[n.length-1],t[o]<c){e[r]=o,n.push(r);continue}for(i=0,s=n.length-1;i<s;)l=i+s>>1,t[n[l]]<c?i=l+1:s=l;c<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,s=n[i-1];i-- >0;)n[i]=s,s=e[s];return n}function xy(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:xy(e)}function sp(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const hk=Symbol.for("v-scx"),pk=()=>aa(hk);function mk(t,e){return Af(t,null,e)}function ca(t,e,n){return Af(t,e,n)}function Af(t,e,n=bt){const{immediate:r,deep:o,flush:i,once:s}=n,l=Jt({},n),a=e&&r||!e&&i!=="post";let c;if(rl){if(i==="sync"){const m=pk();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!a){const m=()=>{};return m.stop=Mr,m.resume=Mr,m.pause=Mr,m}}const u=rn;l.call=(m,g,y)=>br(m,u,g,y);let d=!1;i==="post"?l.scheduler=m=>{Kn(m,u&&u.suspense)}:i!=="sync"&&(d=!0,l.scheduler=(m,g)=>{g?m():Sf(m)}),l.augmentJob=m=>{e&&(m.flags|=4),d&&(m.flags|=2,u&&(m.id=u.uid,m.i=u))};const h=MC(t,e,l);return rl&&(c?c.push(h):a&&h()),h}function gk(t,e,n){const r=this.proxy,o=Dt(t)?t.includes(".")?Ty(r,t):()=>r[t]:t.bind(r,r);let i;Ke(e)?i=e:(i=e.handler,n=e);const s=xl(this),l=Af(o,i.bind(r),n);return s(),l}function Ty(t,e){const n=e.split(".");return()=>{let r=t;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}const yk=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${ar(e)}Modifiers`]||t[`${vi(e)}Modifiers`];function bk(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||bt;let o=n;const i=e.startsWith("update:"),s=i&&yk(r,e.slice(7));s&&(s.trim&&(o=n.map(u=>Dt(u)?u.trim():u)),s.number&&(o=n.map(Qu)));let l,a=r[l=ou(e)]||r[l=ou(ar(e))];!a&&i&&(a=r[l=ou(vi(e))]),a&&br(a,t,6,o);const c=r[l+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,br(c,t,6,o)}}function Ey(t,e,n=!1){const r=e.emitsCache,o=r.get(t);if(o!==void 0)return o;const i=t.emits;let s={},l=!1;if(!Ke(t)){const a=c=>{const u=Ey(c,e,!0);u&&(l=!0,Jt(s,u))};!n&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!i&&!l?(Ct(t)&&r.set(t,null),null):(Ie(i)?i.forEach(a=>s[a]=null):Jt(s,i),Ct(t)&&r.set(t,s),s)}function Ac(t,e){return!t||!gc(e)?!1:(e=e.slice(2).replace(/Once$/,""),ft(t,e[0].toLowerCase()+e.slice(1))||ft(t,vi(e))||ft(t,e))}function lp(t){const{type:e,vnode:n,proxy:r,withProxy:o,propsOptions:[i],slots:s,attrs:l,emit:a,render:c,renderCache:u,props:d,data:h,setupState:m,ctx:g,inheritAttrs:y}=t,x=Da(t);let O,A;try{if(n.shapeFlag&4){const L=o||r,D=L;O=Er(c.call(D,L,u,d,m,h,g)),A=l}else{const L=e;O=Er(L.length>1?L(d,{attrs:l,slots:s,emit:a}):L(d,null)),A=e.props?l:vk(l)}}catch(L){Bs.length=0,Tc(L,t,1),O=tt(In)}let N=O;if(A&&y!==!1){const L=Object.keys(A),{shapeFlag:D}=N;L.length&&D&7&&(i&&L.some(hf)&&(A=wk(A,i)),N=Mo(N,A,!1,!0))}return n.dirs&&(N=Mo(N,null,!1,!0),N.dirs=N.dirs?N.dirs.concat(n.dirs):n.dirs),n.transition&&tl(N,n.transition),O=N,Da(x),O}const vk=t=>{let e;for(const n in t)(n==="class"||n==="style"||gc(n))&&((e||(e={}))[n]=t[n]);return e},wk=(t,e)=>{const n={};for(const r in t)(!hf(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Ck(t,e,n){const{props:r,children:o,component:i}=t,{props:s,children:l,patchFlag:a}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return r?ap(r,s,c):!!s;if(a&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(s[h]!==r[h]&&!Ac(c,h))return!0}}}else return(o||l)&&(!l||!l.$stable)?!0:r===s?!1:r?s?ap(r,s,c):!0:!!s;return!1}function ap(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let o=0;o<r.length;o++){const i=r[o];if(e[i]!==t[i]&&!Ac(n,i))return!0}return!1}function kk({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Oy=t=>t.__isSuspense;function Sk(t,e){e&&e.pendingBranch?Ie(t)?e.effects.push(...t):e.effects.push(t):NC(t)}const Ge=Symbol.for("v-fgt"),_c=Symbol.for("v-txt"),In=Symbol.for("v-cmt"),fu=Symbol.for("v-stc"),Bs=[];let Gn=null;function z(t=!1){Bs.push(Gn=t?null:[])}function xk(){Bs.pop(),Gn=Bs[Bs.length-1]||null}let nl=1;function cp(t,e=!1){nl+=t,t<0&&Gn&&e&&(Gn.hasOnce=!0)}function My(t){return t.dynamicChildren=nl>0?Gn||Ui:null,xk(),nl>0&&Gn&&Gn.push(t),t}function Z(t,e,n,r,o,i){return My(S(t,e,n,r,o,i,!0))}function St(t,e,n,r,o){return My(tt(t,e,n,r,o,!0))}function Ba(t){return t?t.__v_isVNode===!0:!1}function Yo(t,e){return t.type===e.type&&t.key===e.key}const Ay=({key:t})=>t??null,ua=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Dt(t)||Vt(t)||Ke(t)?{i:Ln,r:t,k:e,f:!!n}:t:null);function S(t,e=null,n=null,r=0,o=null,i=t===Ge?0:1,s=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ay(e),ref:e&&ua(e),scopeId:Qg,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Ln};return l?(_f(a,n),i&128&&t.normalize(a)):n&&(a.shapeFlag|=Dt(n)?8:16),nl>0&&!s&&Gn&&(a.patchFlag>0||i&6)&&a.patchFlag!==32&&Gn.push(a),a}const tt=Tk;function Tk(t,e=null,n=null,r=0,o=null,i=!1){if((!t||t===qC)&&(t=In),Ba(t)){const l=Mo(t,e,!0);return n&&_f(l,n),nl>0&&!i&&Gn&&(l.shapeFlag&6?Gn[Gn.indexOf(t)]=l:Gn.push(l)),l.patchFlag=-2,l}if(Lk(t)&&(t=t.__vccOpts),e){e=Ek(e);let{class:l,style:a}=e;l&&!Dt(l)&&(e.class=mr(l)),Ct(a)&&(Cf(a)&&!Ie(a)&&(a=Jt({},a)),e.style=rr(a))}const s=Dt(t)?1:Oy(t)?128:ey(t)?64:Ct(t)?4:Ke(t)?2:0;return S(t,e,n,r,o,s,i,!0)}function Ek(t){return t?Cf(t)||gy(t)?Jt({},t):t:null}function Mo(t,e,n=!1,r=!1){const{props:o,ref:i,patchFlag:s,children:l,transition:a}=t,c=e?Ok(o||{},e):o,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Ay(c),ref:e&&e.ref?n&&i?Ie(i)?i.concat(ua(e)):[i,ua(e)]:ua(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ge?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Mo(t.ssContent),ssFallback:t.ssFallback&&Mo(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&r&&tl(u,a.clone(u)),u}function nr(t=" ",e=0){return tt(_c,null,t,e)}function $e(t="",e=!1){return e?(z(),St(In,null,t)):tt(In,null,t)}function Er(t){return t==null||typeof t=="boolean"?tt(In):Ie(t)?tt(Ge,null,t.slice()):Ba(t)?uo(t):tt(_c,null,String(t))}function uo(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Mo(t)}function _f(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ie(e))n=16;else if(typeof e=="object")if(r&65){const o=e.default;o&&(o._c&&(o._d=!1),_f(t,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!gy(e)?e._ctx=Ln:o===3&&Ln&&(Ln.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ke(e)?(e={default:e,_ctx:Ln},n=32):(e=String(e),r&64?(n=16,e=[nr(e)]):n=8);t.children=e,t.shapeFlag|=n}function Ok(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const o in r)if(o==="class")e.class!==r.class&&(e.class=mr([e.class,r.class]));else if(o==="style")e.style=rr([e.style,r.style]);else if(gc(o)){const i=e[o],s=r[o];s&&i!==s&&!(Ie(i)&&i.includes(s))&&(e[o]=i?[].concat(i,s):s)}else o!==""&&(e[o]=r[o])}return e}function kr(t,e,n,r=null){br(t,e,7,[n,r])}const Mk=hy();let Ak=0;function _k(t,e,n){const r=t.type,o=(e?e.appContext:t.appContext)||Mk,i={uid:Ak++,vnode:t,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Gw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:by(r,o),emitsOptions:Ey(r,o),emit:null,emitted:null,propsDefaults:bt,inheritAttrs:r.inheritAttrs,ctx:bt,data:bt,props:bt,attrs:bt,slots:bt,refs:bt,setupState:bt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=bk.bind(null,i),t.ce&&t.ce(i),i}let rn=null;const Sl=()=>rn||Ln;let Va,cd;{const t=wc(),e=(n,r)=>{let o;return(o=t[n])||(o=t[n]=[]),o.push(r),i=>{o.length>1?o.forEach(s=>s(i)):o[0](i)}};Va=e("__VUE_INSTANCE_SETTERS__",n=>rn=n),cd=e("__VUE_SSR_SETTERS__",n=>rl=n)}const xl=t=>{const e=rn;return Va(t),t.scope.on(),()=>{t.scope.off(),Va(e)}},up=()=>{rn&&rn.scope.off(),Va(null)};function _y(t){return t.vnode.shapeFlag&4}let rl=!1;function Nk(t,e=!1,n=!1){e&&cd(e);const{props:r,children:o}=t.vnode,i=_y(t);rk(t,r,i,e),lk(t,o,n);const s=i?$k(t,e):void 0;return e&&cd(!1),s}function $k(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,JC);const{setup:r}=n;if(r){Io();const o=t.setupContext=r.length>1?Dk(t):null,i=xl(t),s=kl(r,t,0,[t.props,o]),l=Sg(s);if(Lo(),i(),(l||t.sp)&&!Is(t)&&ly(t),l){if(s.then(up,up),e)return s.then(a=>{dp(t,a)}).catch(a=>{Tc(a,t,0)});t.asyncDep=s}else dp(t,s)}else Ny(t)}function dp(t,e,n){Ke(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ct(e)&&(t.setupState=Jg(e)),Ny(t)}function Ny(t,e,n){const r=t.type;t.render||(t.render=r.render||Mr);{const o=xl(t);Io();try{GC(t)}finally{Lo(),o()}}}const Pk={get(t,e){return cn(t,"get",""),t[e]}};function Dk(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Pk),slots:t.slots,emit:t.emit,expose:e}}function Nc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Jg(qg(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ls)return Ls[n](t)},has(e,n){return n in e||n in Ls}})):t.proxy}function Ik(t,e=!0){return Ke(t)?t.displayName||t.name:t.name||e&&t.__name}function Lk(t){return Ke(t)&&"__vccOpts"in t}const ud=(t,e)=>EC(t,e,rl);function Nf(t,e,n){const r=arguments.length;return r===2?Ct(e)&&!Ie(e)?Ba(e)?tt(t,null,[e]):tt(t,e):tt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ba(n)&&(n=[n]),tt(t,e,n))}const Bk="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let dd;const fp=typeof window<"u"&&window.trustedTypes;if(fp)try{dd=fp.createPolicy("vue",{createHTML:t=>t})}catch{}const $y=dd?t=>dd.createHTML(t):t=>t,Vk="http://www.w3.org/2000/svg",Rk="http://www.w3.org/1998/Math/MathML",Hr=typeof document<"u"?document:null,hp=Hr&&Hr.createElement("template"),Hk={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const o=e==="svg"?Hr.createElementNS(Vk,t):e==="mathml"?Hr.createElementNS(Rk,t):n?Hr.createElement(t,{is:n}):Hr.createElement(t);return t==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:t=>Hr.createTextNode(t),createComment:t=>Hr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Hr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,o,i){const s=n?n.previousSibling:e.lastChild;if(o&&(o===i||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===i||!(o=o.nextSibling)););else{hp.innerHTML=$y(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const l=hp.content;if(r==="svg"||r==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,n)}return[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},oo="transition",vs="animation",ol=Symbol("_vtc"),Py={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Fk=Jt({},ty,Py),jk=t=>(t.displayName="Transition",t.props=Fk,t),zk=jk((t,{slots:e})=>Nf(IC,Uk(t),e)),zo=(t,e=[])=>{Ie(t)?t.forEach(n=>n(...e)):t&&t(...e)},pp=t=>t?Ie(t)?t.some(e=>e.length>1):t.length>1:!1;function Uk(t){const e={};for(const w in t)w in Py||(e[w]=t[w]);if(t.css===!1)return e;const{name:n="v",type:r,duration:o,enterFromClass:i=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:a=i,appearActiveClass:c=s,appearToClass:u=l,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,g=Kk(o),y=g&&g[0],x=g&&g[1],{onBeforeEnter:O,onEnter:A,onEnterCancelled:N,onLeave:L,onLeaveCancelled:D,onBeforeAppear:R=O,onAppear:F=A,onAppearCancelled:U=N}=e,T=(w,te,J,we)=>{w._enterCancelled=we,Uo(w,te?u:l),Uo(w,te?c:s),J&&J()},C=(w,te)=>{w._isLeaving=!1,Uo(w,d),Uo(w,m),Uo(w,h),te&&te()},B=w=>(te,J)=>{const we=w?F:A,ge=()=>T(te,w,J);zo(we,[te,ge]),mp(()=>{Uo(te,w?a:i),Br(te,w?u:l),pp(we)||gp(te,r,y,ge)})};return Jt(e,{onBeforeEnter(w){zo(O,[w]),Br(w,i),Br(w,s)},onBeforeAppear(w){zo(R,[w]),Br(w,a),Br(w,c)},onEnter:B(!1),onAppear:B(!0),onLeave(w,te){w._isLeaving=!0;const J=()=>C(w,te);Br(w,d),w._enterCancelled?(Br(w,h),vp()):(vp(),Br(w,h)),mp(()=>{w._isLeaving&&(Uo(w,d),Br(w,m),pp(L)||gp(w,r,x,J))}),zo(L,[w,J])},onEnterCancelled(w){T(w,!1,void 0,!0),zo(N,[w])},onAppearCancelled(w){T(w,!0,void 0,!0),zo(U,[w])},onLeaveCancelled(w){C(w),zo(D,[w])}})}function Kk(t){if(t==null)return null;if(Ct(t))return[hu(t.enter),hu(t.leave)];{const e=hu(t);return[e,e]}}function hu(t){return Fw(t)}function Br(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[ol]||(t[ol]=new Set)).add(e)}function Uo(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[ol];n&&(n.delete(e),n.size||(t[ol]=void 0))}function mp(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Wk=0;function gp(t,e,n,r){const o=t._endId=++Wk,i=()=>{o===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:s,timeout:l,propCount:a}=qk(t,e);if(!s)return r();const c=s+"end";let u=0;const d=()=>{t.removeEventListener(c,h),i()},h=m=>{m.target===t&&++u>=a&&d()};setTimeout(()=>{u<a&&d()},l+1),t.addEventListener(c,h)}function qk(t,e){const n=window.getComputedStyle(t),r=g=>(n[g]||"").split(", "),o=r(`${oo}Delay`),i=r(`${oo}Duration`),s=yp(o,i),l=r(`${vs}Delay`),a=r(`${vs}Duration`),c=yp(l,a);let u=null,d=0,h=0;e===oo?s>0&&(u=oo,d=s,h=i.length):e===vs?c>0&&(u=vs,d=c,h=a.length):(d=Math.max(s,c),u=d>0?s>c?oo:vs:null,h=u?u===oo?i.length:a.length:0);const m=u===oo&&/\b(transform|all)(,|$)/.test(r(`${oo}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:m}}function yp(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>bp(n)+bp(t[r])))}function bp(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function vp(){return document.body.offsetHeight}function Jk(t,e,n){const r=t[ol];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const wp=Symbol("_vod"),Gk=Symbol("_vsh"),Yk=Symbol(""),Xk=/(^|;)\s*display\s*:/;function Zk(t,e,n){const r=t.style,o=Dt(n);let i=!1;if(n&&!o){if(e)if(Dt(e))for(const s of e.split(";")){const l=s.slice(0,s.indexOf(":")).trim();n[l]==null&&da(r,l,"")}else for(const s in e)n[s]==null&&da(r,s,"");for(const s in n)s==="display"&&(i=!0),da(r,s,n[s])}else if(o){if(e!==n){const s=r[Yk];s&&(n+=";"+s),r.cssText=n,i=Xk.test(n)}}else e&&t.removeAttribute("style");wp in t&&(t[wp]=i?r.display:"",t[Gk]&&(r.display="none"))}const Cp=/\s*!important$/;function da(t,e,n){if(Ie(n))n.forEach(r=>da(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Qk(t,e);Cp.test(n)?t.setProperty(vi(r),n.replace(Cp,""),"important"):t[r]=n}}const kp=["Webkit","Moz","ms"],pu={};function Qk(t,e){const n=pu[e];if(n)return n;let r=ar(e);if(r!=="filter"&&r in t)return pu[e]=r;r=vc(r);for(let o=0;o<kp.length;o++){const i=kp[o]+r;if(i in t)return pu[e]=i}return e}const Sp="http://www.w3.org/1999/xlink";function xp(t,e,n,r,o,i=qw(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Sp,e.slice(6,e.length)):t.setAttributeNS(Sp,e,n):n==null||i&&!Og(n)?t.removeAttribute(e):t.setAttribute(e,i?"":_r(n)?String(n):n)}function Tp(t,e,n,r,o){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?$y(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,a=n==null?t.type==="checkbox"?"on":"":String(n);(l!==a||!("_value"in t))&&(t.value=a),n==null&&t.removeAttribute(e),t._value=n;return}let s=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Og(n):n==null&&l==="string"?(n="",s=!0):l==="number"&&(n=0,s=!0)}try{t[e]=n}catch{}s&&t.removeAttribute(o||e)}function Xo(t,e,n,r){t.addEventListener(e,n,r)}function eS(t,e,n,r){t.removeEventListener(e,n,r)}const Ep=Symbol("_vei");function tS(t,e,n,r,o=null){const i=t[Ep]||(t[Ep]={}),s=i[e];if(r&&s)s.value=r;else{const[l,a]=nS(e);if(r){const c=i[e]=iS(r,o);Xo(t,l,c,a)}else s&&(eS(t,l,s,a),i[e]=void 0)}}const Op=/(?:Once|Passive|Capture)$/;function nS(t){let e;if(Op.test(t)){e={};let r;for(;r=t.match(Op);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):vi(t.slice(2)),e]}let mu=0;const rS=Promise.resolve(),oS=()=>mu||(rS.then(()=>mu=0),mu=Date.now());function iS(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;br(sS(r,n.value),e,5,[r])};return n.value=t,n.attached=oS(),n}function sS(t,e){if(Ie(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>o=>!o._stopped&&r&&r(o))}else return e}const Mp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,lS=(t,e,n,r,o,i)=>{const s=o==="svg";e==="class"?Jk(t,r,s):e==="style"?Zk(t,n,r):gc(e)?hf(e)||tS(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):aS(t,e,r,s))?(Tp(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&xp(t,e,r,s,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Dt(r))?Tp(t,ar(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),xp(t,e,r,s))};function aS(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Mp(e)&&Ke(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const o=t.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Mp(e)&&Dt(n)?!1:e in t}const Ra=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ie(e)?n=>la(e,n):e};function cS(t){t.target.composing=!0}function Ap(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Gi=Symbol("_assign"),Mt={created(t,{modifiers:{lazy:e,trim:n,number:r}},o){t[Gi]=Ra(o);const i=r||o.props&&o.props.type==="number";Xo(t,e?"change":"input",s=>{if(s.target.composing)return;let l=t.value;n&&(l=l.trim()),i&&(l=Qu(l)),t[Gi](l)}),n&&Xo(t,"change",()=>{t.value=t.value.trim()}),e||(Xo(t,"compositionstart",cS),Xo(t,"compositionend",Ap),Xo(t,"change",Ap))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:o,number:i}},s){if(t[Gi]=Ra(s),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?Qu(t.value):t.value,a=e??"";l!==a&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||o&&t.value.trim()===a)||(t.value=a))}},uS={deep:!0,created(t,e,n){t[Gi]=Ra(n),Xo(t,"change",()=>{const r=t._modelValue,o=dS(t),i=t.checked,s=t[Gi];if(Ie(r)){const l=Mg(r,o),a=l!==-1;if(i&&!a)s(r.concat(o));else if(!i&&a){const c=[...r];c.splice(l,1),s(c)}}else if(yc(r)){const l=new Set(r);i?l.add(o):l.delete(o),s(l)}else s(Dy(t,i))})},mounted:_p,beforeUpdate(t,e,n){t[Gi]=Ra(n),_p(t,e,n)}};function _p(t,{value:e,oldValue:n},r){t._modelValue=e;let o;if(Ie(e))o=Mg(e,r.props.value)>-1;else if(yc(e))o=e.has(r.props.value);else{if(e===n)return;o=Cc(e,Dy(t,!0))}t.checked!==o&&(t.checked=o)}function dS(t){return"_value"in t?t._value:t.value}function Dy(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const fS=Jt({patchProp:lS},Hk);let Np;function hS(){return Np||(Np=ck(fS))}const pS=(...t)=>{const e=hS().createApp(...t),{mount:n}=e;return e.mount=r=>{const o=gS(r);if(!o)return;const i=e._component;!Ke(i)&&!i.render&&!i.template&&(i.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const s=n(o,!1,mS(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),s},e};function mS(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function gS(t){return Dt(t)?document.querySelector(t):t}const xt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Rt=Object.keys,fn=Array.isArray;function Tn(t,e){return typeof e!="object"||Rt(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||xt.Promise||(xt.Promise=Promise);const il=Object.getPrototypeOf,yS={}.hasOwnProperty;function Xn(t,e){return yS.call(t,e)}function ns(t,e){typeof e=="function"&&(e=e(il(t))),(typeof Reflect>"u"?Rt:Reflect.ownKeys)(e).forEach(n=>{Jr(t,n,e[n])})}const Iy=Object.defineProperty;function Jr(t,e,n,r){Iy(t,e,Tn(n&&Xn(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Yi(t){return{from:function(e){return t.prototype=Object.create(e.prototype),Jr(t.prototype,"constructor",t),{extend:ns.bind(null,t.prototype)}}}}const bS=Object.getOwnPropertyDescriptor;function $f(t,e){let n;return bS(t,e)||(n=il(t))&&$f(n,e)}const vS=[].slice;function Ha(t,e,n){return vS.call(t,e,n)}function Ly(t,e){return e(t)}function Ss(t){if(!t)throw new Error("Assertion Failed")}function By(t){xt.setImmediate?setImmediate(t):setTimeout(t,0)}function Vy(t,e){return t.reduce((n,r,o)=>{var i=e(r,o);return i&&(n[i[0]]=i[1]),n},{})}function Gr(t,e){if(typeof e=="string"&&Xn(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,o=e.length;r<o;++r){var i=Gr(t,e[r]);n.push(i)}return n}var s=e.indexOf(".");if(s!==-1){var l=t[e.substr(0,s)];return l==null?void 0:Gr(l,e.substr(s+1))}}function yr(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){Ss(typeof n!="string"&&"length"in n);for(var r=0,o=e.length;r<o;++r)yr(t,e[r],n[r])}else{var i=e.indexOf(".");if(i!==-1){var s=e.substr(0,i),l=e.substr(i+1);if(l==="")n===void 0?fn(t)&&!isNaN(parseInt(s))?t.splice(s,1):delete t[s]:t[s]=n;else{var a=t[s];a&&Xn(t,s)||(a=t[s]={}),yr(a,l,n)}}else n===void 0?fn(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function Ry(t){var e={};for(var n in t)Xn(t,n)&&(e[n]=t[n]);return e}const wS=[].concat;function Hy(t){return wS.apply([],t)}const Fy="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Hy([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>xt[t]),CS=Fy.map(t=>xt[t]);Vy(Fy,t=>[t,!0]);let fo=null;function Tl(t){fo=typeof WeakMap<"u"&&new WeakMap;const e=fd(t);return fo=null,e}function fd(t){if(!t||typeof t!="object")return t;let e=fo&&fo.get(t);if(e)return e;if(fn(t)){e=[],fo&&fo.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(fd(t[n]))}else if(CS.indexOf(t.constructor)>=0)e=t;else{const i=il(t);for(var o in e=i===Object.prototype?{}:Object.create(i),fo&&fo.set(t,e),t)Xn(t,o)&&(e[o]=fd(t[o]))}return e}const{toString:kS}={};function hd(t){return kS.call(t).slice(8,-1)}const pd=typeof Symbol<"u"?Symbol.iterator:"@@iterator",SS=typeof pd=="symbol"?function(t){var e;return t!=null&&(e=t[pd])&&e.apply(t)}:function(){return null},Ii={};function Kr(t){var e,n,r,o;if(arguments.length===1){if(fn(t))return t.slice();if(this===Ii&&typeof t=="string")return[t];if(o=SS(t)){for(n=[];!(r=o.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const Pf=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Dr=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function jy(t,e){Dr=t,zy=e}var zy=()=>!0;const xS=!new Error("").stack;function wi(){if(xS)try{throw wi.arguments,new Error}catch(t){return t}return new Error}function md(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(zy).map(r=>`
`+r).join("")):""}var Uy=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Df=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Uy),TS={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Xi(t,e){this._e=wi(),this.name=t,this.message=e}function Ky(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,o)=>o.indexOf(n)===r).join(`
`)}function Fa(t,e,n,r){this._e=wi(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=Ky(t,e)}function Vs(t,e){this._e=wi(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=Ky(t,e)}Yi(Xi).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+md(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Yi(Fa).from(Xi),Yi(Vs).from(Xi);var If=Df.reduce((t,e)=>(t[e]=e+"Error",t),{});const ES=Xi;var je=Df.reduce((t,e)=>{var n=e+"Error";function r(o,i){this._e=wi(),this.name=n,o?typeof o=="string"?(this.message=`${o}${i?`
 `+i:""}`,this.inner=i||null):typeof o=="object"&&(this.message=`${o.name} ${o.message}`,this.inner=o):(this.message=TS[e]||n,this.inner=null)}return Yi(r).from(ES),t[e]=r,t},{});je.Syntax=SyntaxError,je.Type=TypeError,je.Range=RangeError;var $p=Uy.reduce((t,e)=>(t[e+"Error"]=je[e],t),{}),fa=Df.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=je[e]),t),{});function vt(){}function sl(t){return t}function OS(t,e){return t==null||t===sl?e:function(n){return e(t(n))}}function pi(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function MS(t,e){return t===vt?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?pi(r,this.onsuccess):r),o&&(this.onerror=this.onerror?pi(o,this.onerror):o),i!==void 0?i:n}}function AS(t,e){return t===vt?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?pi(n,this.onsuccess):n),r&&(this.onerror=this.onerror?pi(r,this.onerror):r)}}function _S(t,e){return t===vt?e:function(n){var r=t.apply(this,arguments);Tn(n,r);var o=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?pi(o,this.onsuccess):o),i&&(this.onerror=this.onerror?pi(i,this.onerror):i),r===void 0?s===void 0?void 0:s:Tn(r,s)}}function NS(t,e){return t===vt?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function Lf(t,e){return t===vt?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return n.then(function(){return e.apply(r,i)})}return e.apply(this,arguments)}}fa.ModifyError=Fa,fa.DexieError=Xi,fa.BulkError=Vs;var ll={};const Wy=100,[gd,ja,yd]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,il(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,il(e),t]})(),qy=ja&&ja.then,ha=gd&&gd.constructor,Bf=!!yd;var bd=!1,$S=yd?()=>{yd.then(Hl)}:xt.setImmediate?setImmediate.bind(null,Hl):xt.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Hl(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Hl,0)},Rs=function(t,e){xs.push([t,e]),za&&($S(),za=!1)},vd=!0,za=!0,ii=[],pa=[],wd=null,Cd=sl,Zi={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ip,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{Ip(t[0],t[1])}catch{}})}},De=Zi,xs=[],si=0,ma=[];function ke(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=vt,this._lib=!1;var e=this._PSD=De;if(Dr&&(this._stackHolder=wi(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==ll)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Sd(this,this._value))}this._state=null,this._value=null,++e.ref,Gy(this,t)}const kd={get:function(){var t=De,e=Ua;function n(r,o){var i=!t.global&&(t!==De||e!==Ua);const s=i&&!Qr();var l=new ke((a,c)=>{Vf(this,new Jy(Ka(r,t,i,s),Ka(o,t,i,s),a,c,t))});return Dr&&Zy(l,this),l}return n.prototype=ll,n},set:function(t){Jr(this,"then",t&&t.prototype===ll?kd:{get:function(){return t},set:kd.set})}};function Jy(t,e,n,r,o){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=o}function Gy(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&El();n&&typeof n.then=="function"?Gy(t,(o,i)=>{n instanceof ke?n._then(o,i):n.then(o,i)}):(t._state=!0,t._value=n,Yy(t)),r&&Ol()}},Sd.bind(null,t))}catch(n){Sd(t,n)}}function Sd(t,e){if(pa.push(e),t._state===null){var n=t._lib&&El();e=Cd(e),t._state=!1,t._value=e,Dr&&e!==null&&typeof e=="object"&&!e._promise&&function(r,o,i){try{r.apply(null,i)}catch{}}(()=>{var r=$f(e,"stack");e._promise=t,Jr(e,"stack",{get:()=>bd?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){ii.some(o=>o._value===r._value)||ii.push(r)}(t),Yy(t),n&&Ol()}}function Yy(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Vf(t,e[n]);var o=t._PSD;--o.ref||o.finalize(),si===0&&(++si,Rs(()=>{--si==0&&Rf()},[]))}function Vf(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++si,Rs(PS,[n,t,e])}else t._listeners.push(e)}function PS(t,e,n){try{wd=e;var r,o=e._value;e._state?r=t(o):(pa.length&&(pa=[]),r=t(o),pa.indexOf(o)===-1&&function(i){for(var s=ii.length;s;)if(ii[--s]._value===i._value)return void ii.splice(s,1)}(e)),n.resolve(r)}catch(i){n.reject(i)}finally{wd=null,--si==0&&Rf(),--n.psd.ref||n.psd.finalize()}}function Xy(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var o,i,s=t._value;s!=null?(o=s.name||"Error",i=s.message||s,r=md(s,0)):(o=s,i=""),e.push(o+(i?": "+i:"")+r)}return Dr&&((r=md(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&Xy(t._prev,e,n)),e}function Zy(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Hl(){El()&&Ol()}function El(){var t=vd;return vd=!1,za=!1,t}function Ol(){var t,e,n;do for(;xs.length>0;)for(t=xs,xs=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(xs.length>0);vd=!0,za=!0}function Rf(){var t=ii;ii=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=ma.slice(0),n=e.length;n;)e[--n]()}function Fl(t){return new ke(ll,!1,t)}function Ot(t,e){var n=De;return function(){var r=El(),o=De;try{return _o(n,!0),t.apply(this,arguments)}catch(i){e&&e(i)}finally{_o(o,!1),r&&Ol()}}}ns(ke.prototype,{then:kd,_then:function(t,e){Vf(this,new Jy(null,null,t,e,De))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):Fl(r)):this.then(null,r=>r&&r.name===e?n(r):Fl(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),Fl(e)))},stack:{get:function(){if(this._stack)return this._stack;try{bd=!0;var t=Xy(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{bd=!1}}},timeout:function(t,e){return t<1/0?new ke((n,r)=>{var o=setTimeout(()=>r(new je.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,o))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Jr(ke.prototype,Symbol.toStringTag,"Dexie.Promise"),Zi.env=Qy(),ns(ke,{all:function(){var t=Kr.apply(null,arguments).map(jl);return new ke(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((o,i)=>ke.resolve(o).then(s=>{t[i]=s,--r||e(t)},n))})},resolve:t=>{if(t instanceof ke)return t;if(t&&typeof t.then=="function")return new ke((n,r)=>{t.then(n,r)});var e=new ke(ll,!0,t);return Zy(e,wd),e},reject:Fl,race:function(){var t=Kr.apply(null,arguments).map(jl);return new ke((e,n)=>{t.map(r=>ke.resolve(r).then(e,n))})},PSD:{get:()=>De,set:t=>De=t},totalEchoes:{get:()=>Ua},newPSD:Ao,usePSD:hs,scheduler:{get:()=>Rs,set:t=>{Rs=t}},rejectionMapper:{get:()=>Cd,set:t=>{Cd=t}},follow:(t,e)=>new ke((n,r)=>Ao((o,i)=>{var s=De;s.unhandleds=[],s.onunhandled=i,s.finalize=pi(function(){(function(l){function a(){l(),ma.splice(ma.indexOf(a),1)}ma.push(a),++si,Rs(()=>{--si==0&&Rf()},[])})(()=>{this.unhandleds.length===0?o():i(this.unhandleds[0])})},s.finalize),t()},e,n,r))}),ha&&(ha.allSettled&&Jr(ke,"allSettled",function(){const t=Kr.apply(null,arguments).map(jl);return new ke(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((o,i)=>ke.resolve(o).then(s=>r[i]={status:"fulfilled",value:s},s=>r[i]={status:"rejected",reason:s}).then(()=>--n||e(r)))})}),ha.any&&typeof AggregateError<"u"&&Jr(ke,"any",function(){const t=Kr.apply(null,arguments).map(jl);return new ke((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const o=new Array(r);t.forEach((i,s)=>ke.resolve(i).then(l=>e(l),l=>{o[s]=l,--r||n(new AggregateError(o))}))})}));const dn={awaits:0,echoes:0,id:0};var DS=0,ga=[],gu=0,Ua=0,IS=0;function Ao(t,e,n,r){var o=De,i=Object.create(o);i.parent=o,i.ref=0,i.global=!1,i.id=++IS;var s=Zi.env;i.env=Bf?{Promise:ke,PromiseProp:{value:ke,configurable:!0,writable:!0},all:ke.all,race:ke.race,allSettled:ke.allSettled,any:ke.any,resolve:ke.resolve,reject:ke.reject,nthen:Pp(s.nthen,i),gthen:Pp(s.gthen,i)}:{},e&&Tn(i,e),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=hs(i,t,n,r);return i.ref===0&&i.finalize(),l}function fs(){return dn.id||(dn.id=++DS),++dn.awaits,dn.echoes+=Wy,dn.id}function Qr(){return!!dn.awaits&&(--dn.awaits==0&&(dn.id=0),dn.echoes=dn.awaits*Wy,!0)}function jl(t){return dn.echoes&&t&&t.constructor===ha?(fs(),t.then(e=>(Qr(),e),e=>(Qr(),Ut(e)))):t}function LS(t){++Ua,dn.echoes&&--dn.echoes!=0||(dn.echoes=dn.id=0),ga.push(De),_o(t,!0)}function BS(){var t=ga[ga.length-1];ga.pop(),_o(t,!1)}function _o(t,e){var n=De;if((e?!dn.echoes||gu++&&t===De:!gu||--gu&&t===De)||e1(e?LS.bind(null,t):BS),t!==De&&(De=t,n===Zi&&(Zi.env=Qy()),Bf)){var r=Zi.env.Promise,o=t.env;ja.then=o.nthen,r.prototype.then=o.gthen,(n.global||t.global)&&(Object.defineProperty(xt,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject,o.allSettled&&(r.allSettled=o.allSettled),o.any&&(r.any=o.any))}}function Qy(){var t=xt.Promise;return Bf?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(xt,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:ja.then,gthen:t.prototype.then}:{}}function hs(t,e,n,r,o){var i=De;try{return _o(t,!0),e(n,r,o)}finally{_o(i,!1)}}function e1(t){qy.call(gd,t)}function Ka(t,e,n,r){return typeof t!="function"?t:function(){var o=De;n&&fs(),_o(e,!0);try{return t.apply(this,arguments)}finally{_o(o,!1),r&&e1(Qr)}}}function Pp(t,e){return function(n,r){return t.call(this,Ka(n,e),Ka(r,e))}}(""+qy).indexOf("[native code]")===-1&&(fs=Qr=vt);const Dp="unhandledrejection";function Ip(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,o={promise:e,reason:t};if(xt.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Dp,!0,!0),Tn(r,o)):xt.CustomEvent&&Tn(r=new CustomEvent(Dp,{detail:o}),o),r&&xt.dispatchEvent&&(dispatchEvent(r),!xt.PromiseRejectionEvent&&xt.onunhandledrejection))try{xt.onunhandledrejection(r)}catch{}Dr&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var Ut=ke.reject;function xd(t,e,n,r){if(t.idbdb&&(t._state.openComplete||De.letThrough||t._vip)){var o=t._createTransaction(e,n,t._dbSchema);try{o.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===If.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>xd(t,e,n,r))):Ut(i)}return o._promise(e,(i,s)=>Ao(()=>(De.trans=o,r(i,s,o)))).then(i=>o._completion.then(()=>i))}if(t._state.openComplete)return Ut(new je.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return Ut(new je.DatabaseClosed);t.open().catch(vt)}return t._state.dbReadyPromise.then(()=>xd(t,e,n,r))}const Lp="3.2.7",ei="￿",Td=-1/0,Vr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",t1="String expected.",Hs=[],$c=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),VS=$c,RS=$c,n1=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),Pc="__dbnames",yu="readonly",bu="readwrite";function mi(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const r1={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function zl(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=Tl(e))[t],e)}let HS=class{_trans(e,n,r){const o=this._tx||De.trans,i=this.name;function s(a,c,u){if(!u.schema[i])throw new je.NotFound("Table "+i+" not part of transaction");return n(u.idbtrans,u)}const l=El();try{return o&&o.db===this.db?o===De.trans?o._promise(e,s,r):Ao(()=>o._promise(e,s,r),{trans:o,transless:De.transless||De}):xd(this.db,e,[this.name],s)}finally{l&&Ol()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(o=>this.hook.reading.fire(o))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(fn(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=Rt(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(c=>{if(c.compound&&n.every(u=>c.keyPath.indexOf(u)>=0)){for(let u=0;u<n.length;++u)if(n.indexOf(c.keyPath[u])===-1)return!1;return!0}return!1}).sort((c,u)=>c.keyPath.length-u.keyPath.length)[0];if(r&&this.db._maxKey!==ei){const c=r.keyPath.slice(0,n.length);return this.where(c).equals(c.map(u=>e[u]))}!r&&Dr&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:o}=this.schema,i=this.db._deps.indexedDB;function s(c,u){try{return i.cmp(c,u)===0}catch{return!1}}const[l,a]=n.reduce(([c,u],d)=>{const h=o[d],m=e[d];return[c||h,c||!h?mi(u,h&&h.multi?g=>{const y=Gr(g,d);return fn(y)&&y.some(x=>s(m,x))}:g=>s(m,Gr(g,d))):u]},[null,null]);return l?this.where(l.name).equals(e[l.keyPath]).filter(a):r?this.filter(a):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,fn(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const o=Object.create(e.prototype);for(var i in r)if(Xn(r,i))try{o[i]=r[i]}catch{}return o};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){Tn(this,e)})}add(e,n){const{auto:r,keyPath:o}=this.schema.primKey;let i=e;return o&&r&&(i=zl(o)(e)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[i]})).then(s=>s.numFailures?ke.reject(s.failures[0]):s.lastResult).then(s=>{if(o)try{yr(e,o,s)}catch{}return s})}update(e,n){if(typeof e!="object"||fn(e))return this.where(":id").equals(e).modify(n);{const r=Gr(e,this.schema.primKey.keyPath);if(r===void 0)return Ut(new je.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?Rt(n).forEach(o=>{yr(e,o,n[o])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:o}=this.schema.primKey;let i=e;return o&&r&&(i=zl(o)(e)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"put",values:[i],keys:n!=null?[n]:null})).then(s=>s.numFailures?ke.reject(s.failures[0]):s.lastResult).then(s=>{if(o)try{yr(e,o,s)}catch{}return s})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?ke.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:r1})).then(e=>e.numFailures?ke.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(o=>this.hook.reading.fire(o))))}bulkAdd(e,n,r){const o=Array.isArray(n)?n:void 0,i=(r=r||(o?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:l,keyPath:a}=this.schema.primKey;if(a&&o)throw new je.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new je.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=a&&l?e.map(zl(a)):e;return this.core.mutate({trans:s,type:"add",keys:o,values:u,wantResults:i}).then(({numFailures:d,results:h,lastResult:m,failures:g})=>{if(d===0)return i?h:m;throw new Vs(`${this.name}.bulkAdd(): ${d} of ${c} operations failed`,g)})})}bulkPut(e,n,r){const o=Array.isArray(n)?n:void 0,i=(r=r||(o?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:l,keyPath:a}=this.schema.primKey;if(a&&o)throw new je.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new je.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=a&&l?e.map(zl(a)):e;return this.core.mutate({trans:s,type:"put",keys:o,values:u,wantResults:i}).then(({numFailures:d,results:h,lastResult:m,failures:g})=>{if(d===0)return i?h:m;throw new Vs(`${this.name}.bulkPut(): ${d} of ${c} operations failed`,g)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:o,failures:i})=>{if(r===0)return o;throw new Vs(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,i)})}};function Fs(t){var e={},n=function(s,l){if(l){for(var a=arguments.length,c=new Array(a-1);--a;)c[a-1]=arguments[a];return e[s].subscribe.apply(null,c),t}if(typeof s=="string")return e[s]};n.addEventType=i;for(var r=1,o=arguments.length;r<o;++r)i(arguments[r]);return n;function i(s,l,a){if(typeof s!="object"){var c;l||(l=NS),a||(a=vt);var u={subscribers:[],fire:a,subscribe:function(d){u.subscribers.indexOf(d)===-1&&(u.subscribers.push(d),u.fire=l(u.fire,d))},unsubscribe:function(d){u.subscribers=u.subscribers.filter(function(h){return h!==d}),u.fire=u.subscribers.reduce(l,a)}};return e[s]=n[s]=u,u}Rt(c=s).forEach(function(d){var h=c[d];if(fn(h))i(d,c[d][0],c[d][1]);else{if(h!=="asap")throw new je.InvalidArgument("Invalid event config");var m=i(d,sl,function(){for(var g=arguments.length,y=new Array(g);g--;)y[g]=arguments[g];m.subscribers.forEach(function(x){By(function(){x.apply(null,y)})})})}})}}function ws(t,e){return Yi(e).from({prototype:t}),e}function Mi(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function vu(t,e){t.filter=mi(t.filter,e)}function wu(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>mi(r(),e()):e,t.justLimit=n&&!r}function ya(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new je.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Bp(t,e,n){const r=ya(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function Ul(t,e,n,r){const o=t.replayFilter?mi(t.filter,t.replayFilter()):t.filter;if(t.or){const i={},s=(l,a,c)=>{if(!o||o(a,c,h=>a.stop(h),h=>a.fail(h))){var u=a.primaryKey,d=""+u;d==="[object ArrayBuffer]"&&(d=""+new Uint8Array(u)),Xn(i,d)||(i[d]=!0,e(l,a,c))}};return Promise.all([t.or._iterate(s,n),Vp(Bp(t,r,n),t.algorithm,s,!t.keysOnly&&t.valueMapper)])}return Vp(Bp(t,r,n),mi(t.algorithm,o),e,!t.keysOnly&&t.valueMapper)}function Vp(t,e,n,r){var o=Ot(r?(i,s,l)=>n(r(i),s,l):n);return t.then(i=>{if(i)return i.start(()=>{var s=()=>i.continue();e&&!e(i,l=>s=l,l=>{i.stop(l),s=vt},l=>{i.fail(l),s=vt})||o(i.value,i,l=>s=l),s()})})}function Sn(t,e){try{const n=Rp(t),r=Rp(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(o,i){const s=o.length,l=i.length,a=s<l?s:l;for(let c=0;c<a;++c)if(o[c]!==i[c])return o[c]<i[c]?-1:1;return s===l?0:s<l?-1:1}(Hp(t),Hp(e));case"Array":return function(o,i){const s=o.length,l=i.length,a=s<l?s:l;for(let c=0;c<a;++c){const u=Sn(o[c],i[c]);if(u!==0)return u}return s===l?0:s<l?-1:1}(t,e)}}catch{}return NaN}function Rp(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=hd(t);return n==="ArrayBuffer"?"binary":n}function Hp(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}let FS=class{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,Ut.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,Ut.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=mi(n.algorithm,e)}_iterate(e,n){return Ul(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&Tn(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>Ul(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,o=r.table.core;if(Mi(r,!0))return o.count({trans:n,query:{index:ya(r,o.schema),range:r.range}}).then(s=>Math.min(s,r.limit));var i=0;return Ul(r,()=>(++i,!1),n,o).then(()=>i)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),o=r[0],i=r.length-1;function s(c,u){return u?s(c[r[u]],u-1):c[o]}var l=this._ctx.dir==="next"?1:-1;function a(c,u){var d=s(c,i),h=s(u,i);return d<h?-l:d>h?l:0}return this.toArray(function(c){return c.sort(a)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&Mi(r,!0)&&r.limit>0){const{valueMapper:o}=r,i=ya(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then(({result:s})=>o?s.map(o):s)}{const o=[];return Ul(r,i=>o.push(i),n,r.table.core).then(()=>o)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,Mi(n)?wu(n,()=>{var r=e;return(o,i)=>r===0||(r===1?(--r,!1):(i(()=>{o.advance(r),r=0}),!1))}):wu(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),wu(this._ctx,()=>{var n=e;return function(r,o,i){return--n<=0&&o(i),n>=0}},!0),this}until(e,n){return vu(this._ctx,function(r,o,i){return!e(r.value)||(o(i),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return vu(this._ctx,function(o){return e(o.value)}),n=this._ctx,r=e,n.isMatch=mi(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,o){e(o.key,o)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,o){e(o.primaryKey,o)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(o,i){r.push(i.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&Mi(n,!0)&&n.limit>0)return this._read(o=>{var i=ya(n,n.table.core.schema);return n.table.core.query({trans:o,values:!1,limit:n.limit,query:{index:i,range:n.range}})}).then(({result:o})=>o).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(o,i){r.push(i.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return vu(this._ctx,function(o){var i=o.primaryKey.toString(),s=Xn(r,i);return r[i]=!0,!s}),this}modify(e){var n=this._ctx;return this._write(r=>{var o;if(typeof e=="function")o=e;else{var i=Rt(e),s=i.length;o=function(y){for(var x=!1,O=0;O<s;++O){var A=i[O],N=e[A];Gr(y,A)!==N&&(yr(y,A,N),x=!0)}return x}}const l=n.table.core,{outbound:a,extractKey:c}=l.schema.primaryKey,u=this.db._options.modifyChunkSize||200,d=[];let h=0;const m=[],g=(y,x)=>{const{failures:O,numFailures:A}=x;h+=y-A;for(let N of Rt(O))d.push(O[N])};return this.clone().primaryKeys().then(y=>{const x=O=>{const A=Math.min(u,y.length-O);return l.getMany({trans:r,keys:y.slice(O,O+A),cache:"immutable"}).then(N=>{const L=[],D=[],R=a?[]:null,F=[];for(let T=0;T<A;++T){const C=N[T],B={value:Tl(C),primKey:y[O+T]};o.call(B,B.value,B)!==!1&&(B.value==null?F.push(y[O+T]):a||Sn(c(C),c(B.value))===0?(D.push(B.value),a&&R.push(y[O+T])):(F.push(y[O+T]),L.push(B.value)))}const U=Mi(n)&&n.limit===1/0&&(typeof e!="function"||e===Cu)&&{index:n.index,range:n.range};return Promise.resolve(L.length>0&&l.mutate({trans:r,type:"add",values:L}).then(T=>{for(let C in T.failures)F.splice(parseInt(C),1);g(L.length,T)})).then(()=>(D.length>0||U&&typeof e=="object")&&l.mutate({trans:r,type:"put",keys:R,values:D,criteria:U,changeSpec:typeof e!="function"&&e}).then(T=>g(D.length,T))).then(()=>(F.length>0||U&&e===Cu)&&l.mutate({trans:r,type:"delete",keys:F,criteria:U}).then(T=>g(F.length,T))).then(()=>y.length>O+A&&x(O+u))})};return x(0).then(()=>{if(d.length>0)throw new Fa("Error modifying one or more objects",d,h,m);return y.length})})})}delete(){var e=this._ctx,n=e.range;return Mi(e)&&(e.isPrimKey&&!RS||n.type===3)?this._write(r=>{const{primaryKey:o}=e.table.core.schema,i=n;return e.table.core.count({trans:r,query:{index:o,range:i}}).then(s=>e.table.core.mutate({trans:r,type:"deleteRange",range:i}).then(({failures:l,lastResult:a,results:c,numFailures:u})=>{if(u)throw new Fa("Could not delete some values",Object.keys(l).map(d=>l[d]),s-u);return s-u}))}):this.modify(Cu)}};const Cu=(t,e)=>e.value=null;function jS(t,e){return t<e?-1:t===e?0:1}function zS(t,e){return t>e?-1:t===e?0:1}function zn(t,e,n){var r=t instanceof i1?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function Ai(t){return new t.Collection(t,()=>o1("")).limit(0)}function US(t,e,n,r,o,i){for(var s=Math.min(t.length,r.length),l=-1,a=0;a<s;++a){var c=e[a];if(c!==r[a])return o(t[a],n[a])<0?t.substr(0,a)+n[a]+n.substr(a+1):o(t[a],r[a])<0?t.substr(0,a)+r[a]+n.substr(a+1):l>=0?t.substr(0,l)+e[l]+n.substr(l+1):null;o(t[a],c)<0&&(l=a)}return s<r.length&&i==="next"?t+n.substr(t.length):s<t.length&&i==="prev"?t.substr(0,n.length):l<0?null:t.substr(0,l)+r[l]+n.substr(l+1)}function Kl(t,e,n,r){var o,i,s,l,a,c,u,d=n.length;if(!n.every(y=>typeof y=="string"))return zn(t,t1);function h(y){o=function(O){return O==="next"?A=>A.toUpperCase():A=>A.toLowerCase()}(y),i=function(O){return O==="next"?A=>A.toLowerCase():A=>A.toUpperCase()}(y),s=y==="next"?jS:zS;var x=n.map(function(O){return{lower:i(O),upper:o(O)}}).sort(function(O,A){return s(O.lower,A.lower)});l=x.map(function(O){return O.upper}),a=x.map(function(O){return O.lower}),c=y,u=y==="next"?"":r}h("next");var m=new t.Collection(t,()=>so(l[0],a[d-1]+r));m._ondirectionchange=function(y){h(y)};var g=0;return m._addAlgorithm(function(y,x,O){var A=y.key;if(typeof A!="string")return!1;var N=i(A);if(e(N,a,g))return!0;for(var L=null,D=g;D<d;++D){var R=US(A,N,l[D],a[D],s,c);R===null&&L===null?g=D+1:(L===null||s(L,R)>0)&&(L=R)}return x(L!==null?function(){y.continue(L+u)}:O),!1}),m}function so(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function o1(t){return{type:1,lower:t,upper:t}}let i1=class{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,o){r=r!==!1,o=o===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||o)&&(!r||!o)?Ai(this):new this.Collection(this,()=>so(e,n,!r,!o))}catch{return zn(this,Vr)}}equals(e){return e==null?zn(this,Vr):new this.Collection(this,()=>o1(e))}above(e){return e==null?zn(this,Vr):new this.Collection(this,()=>so(e,void 0,!0))}aboveOrEqual(e){return e==null?zn(this,Vr):new this.Collection(this,()=>so(e,void 0,!1))}below(e){return e==null?zn(this,Vr):new this.Collection(this,()=>so(void 0,e,!1,!0))}belowOrEqual(e){return e==null?zn(this,Vr):new this.Collection(this,()=>so(void 0,e))}startsWith(e){return typeof e!="string"?zn(this,t1):this.between(e,e+ei,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):Kl(this,(n,r)=>n.indexOf(r[0])===0,[e],ei)}equalsIgnoreCase(e){return Kl(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=Kr.apply(Ii,arguments);return e.length===0?Ai(this):Kl(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=Kr.apply(Ii,arguments);return e.length===0?Ai(this):Kl(this,(n,r)=>r.some(o=>n.indexOf(o)===0),e,ei)}anyOf(){const e=Kr.apply(Ii,arguments);let n=this._cmp;try{e.sort(n)}catch{return zn(this,Vr)}if(e.length===0)return Ai(this);const r=new this.Collection(this,()=>so(e[0],e[e.length-1]));r._ondirectionchange=i=>{n=i==="next"?this._ascending:this._descending,e.sort(n)};let o=0;return r._addAlgorithm((i,s,l)=>{const a=i.key;for(;n(a,e[o])>0;)if(++o,o===e.length)return s(l),!1;return n(a,e[o])===0||(s(()=>{i.continue(e[o])}),!1)}),r}notEqual(e){return this.inAnyRange([[Td,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=Kr.apply(Ii,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return zn(this,Vr)}const n=e.reduce((r,o)=>r?r.concat([[r[r.length-1][1],o]]):[[Td,o]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,o=this._ascending,i=this._descending,s=this._min,l=this._max;if(e.length===0)return Ai(this);if(!e.every(A=>A[0]!==void 0&&A[1]!==void 0&&o(A[0],A[1])<=0))return zn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",je.InvalidArgument);const a=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let u,d=o;function h(A,N){return d(A[0],N[0])}try{u=e.reduce(function(A,N){let L=0,D=A.length;for(;L<D;++L){const R=A[L];if(r(N[0],R[1])<0&&r(N[1],R[0])>0){R[0]=s(R[0],N[0]),R[1]=l(R[1],N[1]);break}}return L===D&&A.push(N),A},[]),u.sort(h)}catch{return zn(this,Vr)}let m=0;const g=c?A=>o(A,u[m][1])>0:A=>o(A,u[m][1])>=0,y=a?A=>i(A,u[m][0])>0:A=>i(A,u[m][0])>=0;let x=g;const O=new this.Collection(this,()=>so(u[0][0],u[u.length-1][1],!a,!c));return O._ondirectionchange=A=>{A==="next"?(x=g,d=o):(x=y,d=i),u.sort(h)},O._addAlgorithm((A,N,L)=>{for(var D=A.key;x(D);)if(++m,m===u.length)return N(L),!1;return!!function(R){return!g(R)&&!y(R)}(D)||(this._cmp(D,u[m][1])===0||this._cmp(D,u[m][0])===0||N(()=>{d===o?A.continue(u[m][0]):A.continue(u[m][1])}),!1)}),O}startsWithAnyOf(){const e=Kr.apply(Ii,arguments);return e.every(n=>typeof n=="string")?e.length===0?Ai(this):this.inAnyRange(e.map(n=>[n,n+ei])):zn(this,"startsWithAnyOf() only works with strings")}};function Tr(t){return Ot(function(e){return al(e),t(e.target.error),!1})}function al(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const cl="storagemutated",go="x-storagemutated-1",No=Fs(null,cl);class KS{_lock(){return Ss(!De.global),++this._reculock,this._reculock!==1||De.global||(De.lockOwnerFor=this),this}_unlock(){if(Ss(!De.global),--this._reculock==0)for(De.global||(De.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{hs(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&De.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(Ss(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new je.DatabaseClosed(r);case"MissingAPIError":throw new je.MissingAPI(r.message,r);default:throw new je.OpenFailed(r)}if(!this.active)throw new je.TransactionInactive;return Ss(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Ot(o=>{al(o),this._reject(e.error)}),e.onabort=Ot(o=>{al(o),this.active&&this._reject(new je.Abort(e.error)),this.active=!1,this.on("abort").fire(o)}),e.oncomplete=Ot(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&No.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return Ut(new je.ReadOnly("Transaction is readonly"));if(!this.active)return Ut(new je.TransactionInactive);if(this._locked())return new ke((i,s)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(i,s)},De])});if(r)return Ao(()=>{var i=new ke((s,l)=>{this._lock();const a=n(s,l,this);a&&a.then&&a.then(s,l)});return i.finally(()=>this._unlock()),i._lib=!0,i});var o=new ke((i,s)=>{var l=n(i,s,this);l&&l.then&&l.then(i,s)});return o._lib=!0,o}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=ke.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var o=n.idbtrans.objectStore(n.storeNames[0]);(function s(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(o.get(-1/0).onsuccess=s)})()}var i=n._waitingFor;return new ke((s,l)=>{r.then(a=>n._waitingQueue.push(Ot(s.bind(null,a))),a=>n._waitingQueue.push(Ot(l.bind(null,a)))).finally(()=>{n._waitingFor===i&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new je.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(Xn(n,e))return n[e];const r=this.schema[e];if(!r)throw new je.NotFound("Table "+e+" not part of transaction");const o=new this.db.Table(e,r,this);return o.core=this.db.core.table(e),n[e]=o,o}}function Ed(t,e,n,r,o,i,s){return{name:t,keyPath:e,unique:n,multi:r,auto:o,compound:i,src:(n&&!s?"&":"")+(r?"*":"")+(o?"++":"")+s1(e)}}function s1(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function l1(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:Vy(n,r=>[r.name,r])}}let ul=t=>{try{return t.only([[]]),ul=()=>[[]],[[]]}catch{return ul=()=>ei,ei}};function Od(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>Gr(r,e)}(t):e=>Gr(e,t)}function Fp(t){return[].slice.call(t)}let WS=0;function js(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function qS(t,e,n){function r(a){if(a.type===3)return null;if(a.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:u,lowerOpen:d,upperOpen:h}=a;return c===void 0?u===void 0?null:e.upperBound(u,!!h):u===void 0?e.lowerBound(c,!!d):e.bound(c,u,!!d,!!h)}const{schema:o,hasGetAll:i}=function(a,c){const u=Fp(a.objectStoreNames);return{schema:{name:a.name,tables:u.map(d=>c.objectStore(d)).map(d=>{const{keyPath:h,autoIncrement:m}=d,g=fn(h),y=h==null,x={},O={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:y,compound:g,keyPath:h,autoIncrement:m,unique:!0,extractKey:Od(h)},indexes:Fp(d.indexNames).map(A=>d.index(A)).map(A=>{const{name:N,unique:L,multiEntry:D,keyPath:R}=A,F={name:N,compound:fn(R),keyPath:R,unique:L,multiEntry:D,extractKey:Od(R)};return x[js(R)]=F,F}),getIndexByKeyPath:A=>x[js(A)]};return x[":id"]=O.primaryKey,h!=null&&(x[js(h)]=O.primaryKey),O})},hasGetAll:u.length>0&&"getAll"in c.objectStore(u[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),s=o.tables.map(a=>function(c){const u=c.name;return{name:u,schema:c,mutate:function({trans:d,type:h,keys:m,values:g,range:y}){return new Promise((x,O)=>{x=Ot(x);const A=d.objectStore(u),N=A.keyPath==null,L=h==="put"||h==="add";if(!L&&h!=="delete"&&h!=="deleteRange")throw new Error("Invalid operation type: "+h);const{length:D}=m||g||{length:1};if(m&&g&&m.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(D===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});let R;const F=[],U=[];let T=0;const C=w=>{++T,al(w)};if(h==="deleteRange"){if(y.type===4)return x({numFailures:T,failures:U,results:[],lastResult:void 0});y.type===3?F.push(R=A.clear()):F.push(R=A.delete(r(y)))}else{const[w,te]=L?N?[g,m]:[g,null]:[m,null];if(L)for(let J=0;J<D;++J)F.push(R=te&&te[J]!==void 0?A[h](w[J],te[J]):A[h](w[J])),R.onerror=C;else for(let J=0;J<D;++J)F.push(R=A[h](w[J])),R.onerror=C}const B=w=>{const te=w.target.result;F.forEach((J,we)=>J.error!=null&&(U[we]=J.error)),x({numFailures:T,failures:U,results:h==="delete"?m:F.map(J=>J.result),lastResult:te})};R.onerror=w=>{C(w),B(w)},R.onsuccess=B})},getMany:({trans:d,keys:h})=>new Promise((m,g)=>{m=Ot(m);const y=d.objectStore(u),x=h.length,O=new Array(x);let A,N=0,L=0;const D=F=>{const U=F.target;O[U._pos]=U.result,++L===N&&m(O)},R=Tr(g);for(let F=0;F<x;++F)h[F]!=null&&(A=y.get(h[F]),A._pos=F,A.onsuccess=D,A.onerror=R,++N);N===0&&m(O)}),get:({trans:d,key:h})=>new Promise((m,g)=>{m=Ot(m);const y=d.objectStore(u).get(h);y.onsuccess=x=>m(x.target.result),y.onerror=Tr(g)}),query:function(d){return h=>new Promise((m,g)=>{m=Ot(m);const{trans:y,values:x,limit:O,query:A}=h,N=O===1/0?void 0:O,{index:L,range:D}=A,R=y.objectStore(u),F=L.isPrimaryKey?R:R.index(L.name),U=r(D);if(O===0)return m({result:[]});if(d){const T=x?F.getAll(U,N):F.getAllKeys(U,N);T.onsuccess=C=>m({result:C.target.result}),T.onerror=Tr(g)}else{let T=0;const C=x||!("openKeyCursor"in F)?F.openCursor(U):F.openKeyCursor(U),B=[];C.onsuccess=w=>{const te=C.result;return te?(B.push(x?te.value:te.primaryKey),++T===O?m({result:B}):void te.continue()):m({result:B})},C.onerror=Tr(g)}})}(i),openCursor:function({trans:d,values:h,query:m,reverse:g,unique:y}){return new Promise((x,O)=>{x=Ot(x);const{index:A,range:N}=m,L=d.objectStore(u),D=A.isPrimaryKey?L:L.index(A.name),R=g?y?"prevunique":"prev":y?"nextunique":"next",F=h||!("openKeyCursor"in D)?D.openCursor(r(N),R):D.openKeyCursor(r(N),R);F.onerror=Tr(O),F.onsuccess=Ot(U=>{const T=F.result;if(!T)return void x(null);T.___id=++WS,T.done=!1;const C=T.continue.bind(T);let B=T.continuePrimaryKey;B&&(B=B.bind(T));const w=T.advance.bind(T),te=()=>{throw new Error("Cursor not stopped")};T.trans=d,T.stop=T.continue=T.continuePrimaryKey=T.advance=()=>{throw new Error("Cursor not started")},T.fail=Ot(O),T.next=function(){let J=1;return this.start(()=>J--?this.continue():this.stop()).then(()=>this)},T.start=J=>{const we=new Promise((ne,Me)=>{ne=Ot(ne),F.onerror=Tr(Me),T.fail=Me,T.stop=nt=>{T.stop=T.continue=T.continuePrimaryKey=T.advance=te,ne(nt)}}),ge=()=>{if(F.result)try{J()}catch(ne){T.fail(ne)}else T.done=!0,T.start=()=>{throw new Error("Cursor behind last entry")},T.stop()};return F.onsuccess=Ot(ne=>{F.onsuccess=ge,ge()}),T.continue=C,T.continuePrimaryKey=B,T.advance=w,ge(),we},x(T)},O)})},count({query:d,trans:h}){const{index:m,range:g}=d;return new Promise((y,x)=>{const O=h.objectStore(u),A=m.isPrimaryKey?O:O.index(m.name),N=r(g),L=N?A.count(N):A.count();L.onsuccess=Ot(D=>y(D.target.result)),L.onerror=Tr(x)})}}}(a)),l={};return s.forEach(a=>l[a.name]=a),{stack:"dbcore",transaction:t.transaction.bind(t),table(a){if(!l[a])throw new Error(`Table '${a}' not found`);return l[a]},MIN_KEY:-1/0,MAX_KEY:ul(e),schema:o}}function Md({_novip:t},e){const n=e.db,r=function(o,i,{IDBKeyRange:s,indexedDB:l},a){return{dbcore:function(u,d){return d.reduce((h,{create:m})=>({...h,...m(h)}),u)}(qS(i,s,a),o.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(o=>{const i=o.name;t.core.schema.tables.some(s=>s.name===i)&&(o.core=t.core.table(i),t[i]instanceof t.Table&&(t[i].core=o.core))})}function Wa({_novip:t},e,n,r){n.forEach(o=>{const i=r[o];e.forEach(s=>{const l=$f(s,o);(!l||"value"in l&&l.value===void 0)&&(s===t.Transaction.prototype||s instanceof t.Transaction?Jr(s,o,{get(){return this.table(o)},set(a){Iy(this,o,{value:a,writable:!0,configurable:!0,enumerable:!0})}}):s[o]=new t.Table(o,i))})})}function Ad({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function JS(t,e){return t._cfg.version-e._cfg.version}function GS(t,e,n,r){const o=t._dbSchema,i=t._createTransaction("readwrite",t._storeNames,o);i.create(n),i._completion.catch(r);const s=i._reject.bind(i),l=De.transless||De;Ao(()=>{De.trans=i,De.transless=l,e===0?(Rt(o).forEach(a=>{ku(n,a,o[a].primKey,o[a].indexes)}),Md(t,n),ke.follow(()=>t.on.populate.fire(i)).catch(s)):function({_novip:a},c,u,d){const h=[],m=a._versions;let g=a._dbSchema=Nd(a,a.idbdb,d),y=!1;const x=m.filter(A=>A._cfg.version>=c);function O(){return h.length?ke.resolve(h.shift()(u.idbtrans)).then(O):ke.resolve()}return x.forEach(A=>{h.push(()=>{const N=g,L=A._cfg.dbschema;$d(a,N,d),$d(a,L,d),g=a._dbSchema=L;const D=a1(N,L);D.add.forEach(F=>{ku(d,F[0],F[1].primKey,F[1].indexes)}),D.change.forEach(F=>{if(F.recreate)throw new je.Upgrade("Not yet support for changing primary key");{const U=d.objectStore(F.name);F.add.forEach(T=>_d(U,T)),F.change.forEach(T=>{U.deleteIndex(T.name),_d(U,T)}),F.del.forEach(T=>U.deleteIndex(T))}});const R=A._cfg.contentUpgrade;if(R&&A._cfg.version>c){Md(a,d),u._memoizedTables={},y=!0;let F=Ry(L);D.del.forEach(B=>{F[B]=N[B]}),Ad(a,[a.Transaction.prototype]),Wa(a,[a.Transaction.prototype],Rt(F),F),u.schema=F;const U=Pf(R);let T;U&&fs();const C=ke.follow(()=>{if(T=R(u),T&&U){var B=Qr.bind(null,null);T.then(B,B)}});return T&&typeof T.then=="function"?ke.resolve(T):C.then(()=>T)}}),h.push(N=>{(!y||!VS)&&function(L,D){[].slice.call(D.db.objectStoreNames).forEach(R=>L[R]==null&&D.db.deleteObjectStore(R))}(A._cfg.dbschema,N),Ad(a,[a.Transaction.prototype]),Wa(a,[a.Transaction.prototype],a._storeNames,a._dbSchema),u.schema=a._dbSchema})}),O().then(()=>{var A,N;N=d,Rt(A=g).forEach(L=>{N.db.objectStoreNames.contains(L)||ku(N,L,A[L].primKey,A[L].indexes)})})}(t,e,i,n).catch(s)})}function a1(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const o=t[r],i=e[r];if(o){const s={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||o.primKey.auto!==i.primKey.auto&&!$c)s.recreate=!0,n.change.push(s);else{const l=o.idxByName,a=i.idxByName;let c;for(c in l)a[c]||s.del.push(c);for(c in a){const u=l[c],d=a[c];u?u.src!==d.src&&s.change.push(d):s.add.push(d)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}else n.add.push([r,i])}return n}function ku(t,e,n,r){const o=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(i=>_d(o,i)),o}function _d(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function Nd(t,e,n){const r={};return Ha(e.objectStoreNames,0).forEach(o=>{const i=n.objectStore(o);let s=i.keyPath;const l=Ed(s1(s),s||"",!1,!1,!!i.autoIncrement,s&&typeof s!="string",!0),a=[];for(let u=0;u<i.indexNames.length;++u){const d=i.index(i.indexNames[u]);s=d.keyPath;var c=Ed(d.name,s,!!d.unique,!!d.multiEntry,!1,s&&typeof s!="string",!1);a.push(c)}r[o]=l1(o,l,a)}),r}function $d({_novip:t},e,n){const r=n.db.objectStoreNames;for(let o=0;o<r.length;++o){const i=r[o],s=n.objectStore(i);t._hasGetAll="getAll"in s;for(let l=0;l<s.indexNames.length;++l){const a=s.indexNames[l],c=s.index(a).keyPath,u=typeof c=="string"?c:"["+Ha(c).join("+")+"]";if(e[i]){const d=e[i].idxByName[u];d&&(d.name=a,delete e[i].idxByName[u],e[i].idxByName[a]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&xt.WorkerGlobalScope&&xt instanceof xt.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}let YS=class{_parseStoresSpec(e,n){Rt(e).forEach(r=>{if(e[r]!==null){var o=e[r].split(",").map((s,l)=>{const a=(s=s.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return Ed(a,c||null,/\&/.test(s),/\*/.test(s),/\+\+/.test(s),fn(c),l===0)}),i=o.shift();if(i.multi)throw new je.Schema("Primary key cannot be multi-valued");o.forEach(s=>{if(s.auto)throw new je.Schema("Only primary key can be marked as autoIncrement (++)");if(!s.keyPath)throw new je.Schema("Index must have a name and cannot be an empty string")}),n[r]=l1(r,i,o)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?Tn(this._cfg.storesSource,e):e;const r=n._versions,o={};let i={};return r.forEach(s=>{Tn(o,s._cfg.storesSource),i=s._cfg.dbschema={},s._parseStoresSpec(o,i)}),n._dbSchema=i,Ad(n,[n._allTables,n,n.Transaction.prototype]),Wa(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],Rt(i),i),n._storeNames=Rt(i),this}upgrade(e){return this._cfg.contentUpgrade=Lf(this._cfg.contentUpgrade||vt,e),this}};function Hf(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new zt(Pc,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Ff(t){return t&&typeof t.databases=="function"}function Pd(t){return Ao(function(){return De.letThrough=!0,t()})}function XS(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function ZS(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?Ut(e.dbOpenError):t);Dr&&(e.openCanceller._stackHolder=wi()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function o(){if(e.openCanceller!==r)throw new je.DatabaseClosed("db.open() was cancelled")}let i=e.dbReadyResolve,s=null,l=!1;const a=()=>new ke((c,u)=>{if(o(),!n)throw new je.MissingAPI;const d=t.name,h=e.autoSchema?n.open(d):n.open(d,Math.round(10*t.verno));if(!h)throw new je.MissingAPI;h.onerror=Tr(u),h.onblocked=Ot(t._fireOnBlocked),h.onupgradeneeded=Ot(m=>{if(s=h.transaction,e.autoSchema&&!t._options.allowEmptyDB){h.onerror=al,s.abort(),h.result.close();const y=n.deleteDatabase(d);y.onsuccess=y.onerror=Ot(()=>{u(new je.NoSuchDatabase(`Database ${d} doesnt exist`))})}else{s.onerror=Tr(u);var g=m.oldVersion>Math.pow(2,62)?0:m.oldVersion;l=g<1,t._novip.idbdb=h.result,GS(t,g/10,s,u)}},u),h.onsuccess=Ot(()=>{s=null;const m=t._novip.idbdb=h.result,g=Ha(m.objectStoreNames);if(g.length>0)try{const x=m.transaction((y=g).length===1?y[0]:y,"readonly");e.autoSchema?function({_novip:O},A,N){O.verno=A.version/10;const L=O._dbSchema=Nd(0,A,N);O._storeNames=Ha(A.objectStoreNames,0),Wa(O,[O._allTables],Rt(L),L)}(t,m,x):($d(t,t._dbSchema,x),function(O,A){const N=a1(Nd(0,O.idbdb,A),O._dbSchema);return!(N.add.length||N.change.some(L=>L.add.length||L.change.length))}(t,x)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Md(t,x)}catch{}var y;Hs.push(t),m.onversionchange=Ot(x=>{e.vcFired=!0,t.on("versionchange").fire(x)}),m.onclose=Ot(x=>{t.on("close").fire(x)}),l&&function({indexedDB:x,IDBKeyRange:O},A){!Ff(x)&&A!==Pc&&Hf(x,O).put({name:A}).catch(vt)}(t._deps,d),c()},u)}).catch(c=>c&&c.name==="UnknownError"&&e.PR1398_maxLoop>0?(e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),a()):ke.reject(c));return ke.race([r,(typeof navigator>"u"?ke.resolve():XS()).then(a)]).then(()=>(o(),e.onReadyBeingFired=[],ke.resolve(Pd(()=>t.on.ready.fire(t.vip))).then(function c(){if(e.onReadyBeingFired.length>0){let u=e.onReadyBeingFired.reduce(Lf,vt);return e.onReadyBeingFired=[],ke.resolve(Pd(()=>u(t.vip))).then(c)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(c=>{e.dbOpenError=c;try{s&&s.abort()}catch{}return r===e.openCanceller&&t._close(),Ut(c)}).finally(()=>{e.openComplete=!0,i()})}function Dd(t){var e=i=>t.next(i),n=o(e),r=o(i=>t.throw(i));function o(i){return s=>{var l=i(s),a=l.value;return l.done?a:a&&typeof a.then=="function"?a.then(n,r):fn(a)?Promise.all(a).then(n,r):n(a)}}return o(e)()}function QS(t,e,n){var r=arguments.length;if(r<2)throw new je.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];return n=o.pop(),[t,Hy(o),n]}function c1(t,e,n,r,o){return ke.resolve().then(()=>{const i=De.transless||De,s=t._createTransaction(e,n,t._dbSchema,r),l={trans:s,transless:i};if(r)s.idbtrans=r.idbtrans;else try{s.create(),t._state.PR1398_maxLoop=3}catch(d){return d.name===If.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>c1(t,e,n,null,o))):Ut(d)}const a=Pf(o);let c;a&&fs();const u=ke.follow(()=>{if(c=o.call(s,s),c)if(a){var d=Qr.bind(null,null);c.then(d,d)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=Dd(c))},l);return(c&&typeof c.then=="function"?ke.resolve(c).then(d=>s.active?d:Ut(new je.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>c)).then(d=>(r&&s._resolve(),s._completion.then(()=>d))).catch(d=>(s._reject(d),Ut(d)))})}function Wl(t,e,n){const r=fn(t)?t.slice():[t];for(let o=0;o<n;++o)r.push(e);return r}const ex={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,o={},i=[];function s(u,d,h){const m=js(u),g=o[m]=o[m]||[],y=u==null?0:typeof u=="string"?1:u.length,x=d>0,O={...h,isVirtual:x,keyTail:d,keyLength:y,extractKey:Od(u),unique:!x&&h.unique};return g.push(O),O.isPrimaryKey||i.push(O),y>1&&s(y===2?u[0]:u.slice(0,y-1),d+1,h),g.sort((A,N)=>A.keyTail-N.keyTail),O}const l=s(r.primaryKey.keyPath,0,r.primaryKey);o[":id"]=[l];for(const u of r.indexes)s(u.keyPath,0,u);function a(u){const d=u.query.index;return d.isVirtual?{...u,query:{index:d,range:(h=u.query.range,m=d.keyTail,{type:h.type===1?2:h.type,lower:Wl(h.lower,h.lowerOpen?t.MAX_KEY:t.MIN_KEY,m),lowerOpen:!0,upper:Wl(h.upper,h.upperOpen?t.MIN_KEY:t.MAX_KEY,m),upperOpen:!0})}}:u;var h,m}return{...n,schema:{...r,primaryKey:l,indexes:i,getIndexByKeyPath:function(u){const d=o[js(u)];return d&&d[0]}},count:u=>n.count(a(u)),query:u=>n.query(a(u)),openCursor(u){const{keyTail:d,isVirtual:h,keyLength:m}=u.query.index;return h?n.openCursor(a(u)).then(g=>g&&function(y){return Object.create(y,{continue:{value:function(O){O!=null?y.continue(Wl(O,u.reverse?t.MAX_KEY:t.MIN_KEY,d)):u.unique?y.continue(y.key.slice(0,m).concat(u.reverse?t.MIN_KEY:t.MAX_KEY,d)):y.continue()}},continuePrimaryKey:{value(O,A){y.continuePrimaryKey(Wl(O,t.MAX_KEY,d),A)}},primaryKey:{get:()=>y.primaryKey},key:{get(){const O=y.key;return m===1?O[0]:O.slice(0,m)}},value:{get:()=>y.value}})}(g)):n.openCursor(u)}}}}}};function jf(t,e,n,r){return n=n||{},r=r||"",Rt(t).forEach(o=>{if(Xn(e,o)){var i=t[o],s=e[o];if(typeof i=="object"&&typeof s=="object"&&i&&s){const l=hd(i);l!==hd(s)?n[r+o]=e[o]:l==="Object"?jf(i,s,n,r+o+"."):i!==s&&(n[r+o]=e[o])}else i!==s&&(n[r+o]=e[o])}else n[r+o]=void 0}),Rt(e).forEach(o=>{Xn(t,o)||(n[r+o]=e[o])}),n}const tx={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(i){const s=De.trans,{deleting:l,creating:a,updating:c}=s.table(e).hook;switch(i.type){case"add":if(a.fire===vt)break;return s._promise("readwrite",()=>u(i),!0);case"put":if(a.fire===vt&&c.fire===vt)break;return s._promise("readwrite",()=>u(i),!0);case"delete":if(l.fire===vt)break;return s._promise("readwrite",()=>u(i),!0);case"deleteRange":if(l.fire===vt)break;return s._promise("readwrite",()=>function(h){return d(h.trans,h.range,1e4)}(i),!0)}return n.mutate(i);function u(h){const m=De.trans,g=h.keys||function(y,x){return x.type==="delete"?x.keys:x.keys||x.values.map(y.extractKey)}(r,h);if(!g)throw new Error("Keys missing");return(h=h.type==="add"||h.type==="put"?{...h,keys:g}:{...h}).type!=="delete"&&(h.values=[...h.values]),h.keys&&(h.keys=[...h.keys]),function(y,x,O){return x.type==="add"?Promise.resolve([]):y.getMany({trans:x.trans,keys:O,cache:"immutable"})}(n,h,g).then(y=>{const x=g.map((O,A)=>{const N=y[A],L={onerror:null,onsuccess:null};if(h.type==="delete")l.fire.call(L,O,N,m);else if(h.type==="add"||N===void 0){const D=a.fire.call(L,O,h.values[A],m);O==null&&D!=null&&(O=D,h.keys[A]=O,r.outbound||yr(h.values[A],r.keyPath,O))}else{const D=jf(N,h.values[A]),R=c.fire.call(L,D,O,N,m);if(R){const F=h.values[A];Object.keys(R).forEach(U=>{Xn(F,U)?F[U]=R[U]:yr(F,U,R[U])})}}return L});return n.mutate(h).then(({failures:O,results:A,numFailures:N,lastResult:L})=>{for(let D=0;D<g.length;++D){const R=A?A[D]:g[D],F=x[D];R==null?F.onerror&&F.onerror(O[D]):F.onsuccess&&F.onsuccess(h.type==="put"&&y[D]?h.values[D]:R)}return{failures:O,results:A,numFailures:N,lastResult:L}}).catch(O=>(x.forEach(A=>A.onerror&&A.onerror(O)),Promise.reject(O)))})}function d(h,m,g){return n.query({trans:h,values:!1,query:{index:r,range:m},limit:g}).then(({result:y})=>u({type:"delete",keys:y,trans:h}).then(x=>x.numFailures>0?Promise.reject(x.failures[0]):y.length<g?{failures:[],numFailures:0,lastResult:void 0}:d(h,{...m,lower:y[y.length-1],lowerOpen:!0},g)))}}}}})};function u1(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let o=0,i=0;o<e.keys.length&&i<t.length;++o)Sn(e.keys[o],t[i])===0&&(r.push(n?Tl(e.values[o]):e.values[o]),++i);return r.length===t.length?r:null}catch{return null}}const nx={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const o=u1(r.keys,r.trans._cache,r.cache==="clone");return o?ke.resolve(o):n.getMany(r).then(i=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?Tl(i):i},i))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function zf(t){return!("from"in t)}const jr=function(t,e){if(!this){const n=new jr;return t&&"d"in t&&Tn(n,t),n}Tn(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function dl(t,e,n){const r=Sn(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(zf(t))return Tn(t,{from:e,to:n,d:1});const o=t.l,i=t.r;if(Sn(n,t.from)<0)return o?dl(o,e,n):t.l={from:e,to:n,d:1,l:null,r:null},jp(t);if(Sn(e,t.to)>0)return i?dl(i,e,n):t.r={from:e,to:n,d:1,l:null,r:null},jp(t);Sn(e,t.from)<0&&(t.from=e,t.l=null,t.d=i?i.d+1:1),Sn(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const s=!t.r;o&&!t.l&&qa(t,o),i&&s&&qa(t,i)}function qa(t,e){zf(e)||function n(r,{from:o,to:i,l:s,r:l}){dl(r,o,i),s&&n(r,s),l&&n(r,l)}(t,e)}function rx(t,e){const n=Id(e);let r=n.next();if(r.done)return!1;let o=r.value;const i=Id(t);let s=i.next(o.from),l=s.value;for(;!r.done&&!s.done;){if(Sn(l.from,o.to)<=0&&Sn(l.to,o.from)>=0)return!0;Sn(o.from,l.from)<0?o=(r=n.next(l.from)).value:l=(s=i.next(o.from)).value}return!1}function Id(t){let e=zf(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&Sn(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||Sn(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function jp(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),o=r>1?"r":r<-1?"l":"";if(o){const i=o==="r"?"l":"r",s={...t},l=t[o];t.from=l.from,t.to=l.to,t[o]=l[o],s[o]=l[i],t[i]=s,s.d=zp(s)}t.d=zp(t)}function zp({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}ns(jr.prototype,{add(t){return qa(this,t),this},addKey(t){return dl(this,t,t),this},addKeys(t){return t.forEach(e=>dl(this,e,e)),this},[pd](){return Id(this)}});const ox={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new jr(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const o=t.table(r),{schema:i}=o,{primaryKey:s}=i,{extractKey:l,outbound:a}=s,c={...o,mutate:h=>{const m=h.trans,g=m.mutatedParts||(m.mutatedParts={}),y=R=>{const F=`idb://${e}/${r}/${R}`;return g[F]||(g[F]=new jr)},x=y(""),O=y(":dels"),{type:A}=h;let[N,L]=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[];const D=h.trans._cache;return o.mutate(h).then(R=>{if(fn(N)){A!=="delete"&&(N=R.results),x.addKeys(N);const F=u1(N,D);F||A==="add"||O.addKeys(N),(F||L)&&function(U,T,C,B){function w(te){const J=U(te.name||"");function we(ne){return ne!=null?te.extractKey(ne):null}const ge=ne=>te.multiEntry&&fn(ne)?ne.forEach(Me=>J.addKey(Me)):J.addKey(ne);(C||B).forEach((ne,Me)=>{const nt=C&&we(C[Me]),We=B&&we(B[Me]);Sn(nt,We)!==0&&(nt!=null&&ge(nt),We!=null&&ge(We))})}T.indexes.forEach(w)}(y,i,F,L)}else if(N){const F={from:N.lower,to:N.upper};O.add(F),x.add(F)}else x.add(n),O.add(n),i.indexes.forEach(F=>y(F.name).add(n));return R})}},u=({query:{index:h,range:m}})=>{var g,y;return[h,new jr((g=m.lower)!==null&&g!==void 0?g:t.MIN_KEY,(y=m.upper)!==null&&y!==void 0?y:t.MAX_KEY)]},d={get:h=>[s,new jr(h.key)],getMany:h=>[s,new jr().addKeys(h.keys)],count:u,query:u,openCursor:u};return Rt(d).forEach(h=>{c[h]=function(m){const{subscr:g}=De;if(g){const y=L=>{const D=`idb://${e}/${r}/${L}`;return g[D]||(g[D]=new jr)},x=y(""),O=y(":dels"),[A,N]=d[h](m);if(y(A.name||"").add(N),!A.isPrimaryKey){if(h!=="count"){const L=h==="query"&&a&&m.values&&o.query({...m,values:!1});return o[h].apply(this,arguments).then(D=>{if(h==="query"){if(a&&m.values)return L.then(({result:F})=>(x.addKeys(F),D));const R=m.values?D.result.map(l):D.result;m.values?x.addKeys(R):O.addKeys(R)}else if(h==="openCursor"){const R=D,F=m.values;return R&&Object.create(R,{key:{get:()=>(O.addKey(R.primaryKey),R.key)},primaryKey:{get(){const U=R.primaryKey;return O.addKey(U),U}},value:{get:()=>(F&&x.addKey(R.primaryKey),R.value)}})}return D})}O.add(n)}}return o[h].apply(this,arguments)}}),c}}}};let zt=class ba{constructor(e,n){this._middlewares={},this.verno=0;const r=ba.dependencies;this._options=n={addons:ba.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:o}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:vt,dbReadyPromise:null,cancelOpen:vt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var s;i.dbReadyPromise=new ke(l=>{i.dbReadyResolve=l}),i.openCanceller=new ke((l,a)=>{i.cancelOpen=a}),this._state=i,this.name=e,this.on=Fs(this,"populate","blocked","versionchange","close",{ready:[Lf,vt]}),this.on.ready.subscribe=Ly(this.on.ready.subscribe,l=>(a,c)=>{ba.vip(()=>{const u=this._state;if(u.openComplete)u.dbOpenError||ke.resolve().then(a),c&&l(a);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(a),c&&l(a);else{l(a);const d=this;c||l(function h(){d.on.ready.unsubscribe(a),d.on.ready.unsubscribe(h)})}})}),this.Collection=(s=this,ws(FS.prototype,function(l,a){this.db=s;let c=r1,u=null;if(a)try{c=a()}catch(g){u=g}const d=l._ctx,h=d.table,m=h.hook.reading.fire;this._ctx={table:h,index:d.index,isPrimKey:!d.index||h.schema.primKey.keyPath&&d.index===h.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:u,or:d.or,valueMapper:m!==sl?m:null}})),this.Table=function(l){return ws(HS.prototype,function(a,c,u){this.db=l,this._tx=u,this.name=a,this.schema=c,this.hook=l._allTables[a]?l._allTables[a].hook:Fs(null,{creating:[MS,vt],reading:[OS,sl],updating:[_S,vt],deleting:[AS,vt]})})}(this),this.Transaction=function(l){return ws(KS.prototype,function(a,c,u,d,h){this.db=l,this.mode=a,this.storeNames=c,this.schema=u,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=Fs(this,"complete","error","abort"),this.parent=h||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ke((m,g)=>{this._resolve=m,this._reject=g}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},m=>{var g=this.active;return this.active=!1,this.on.error.fire(m),this.parent?this.parent._reject(m):g&&this.idbtrans&&this.idbtrans.abort(),Ut(m)})})}(this),this.Version=function(l){return ws(YS.prototype,function(a){this.db=l,this._cfg={version:a,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(l){return ws(i1.prototype,function(a,c,u){this.db=l,this._ctx={table:a,index:c===":id"?null:c,or:u};const d=l._deps.indexedDB;if(!d)throw new je.MissingAPI;this._cmp=this._ascending=d.cmp.bind(d),this._descending=(h,m)=>d.cmp(m,h),this._max=(h,m)=>d.cmp(h,m)>0?h:m,this._min=(h,m)=>d.cmp(h,m)<0?h:m,this._IDBKeyRange=l._deps.IDBKeyRange})}(this),this.on("versionchange",l=>{l.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",l=>{!l.newVersion||l.newVersion<l.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${l.oldVersion/10}`)}),this._maxKey=ul(n.IDBKeyRange),this._createTransaction=(l,a,c,u)=>new this.Transaction(l,a,c,this._options.chromeTransactionDurability,u),this._fireOnBlocked=l=>{this.on("blocked").fire(l),Hs.filter(a=>a.name===this.name&&a!==this&&!a._state.vcFired).map(a=>a.on("versionchange").fire(l))},this.use(ex),this.use(tx),this.use(ox),this.use(nx),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach(l=>l(this))}version(e){if(isNaN(e)||e<.1)throw new je.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new je.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(o=>o._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(JS),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||De.letThrough||this._vip)?e():new ke((n,r)=>{if(this._state.openComplete)return r(new je.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new je.DatabaseClosed);this.open().catch(vt)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:o}){o&&this.unuse({stack:e,name:o});const i=this._middlewares[e]||(this._middlewares[e]=[]);return i.push({stack:e,create:n,level:r??10,name:o}),i.sort((s,l)=>s.level-l.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(o=>r?o.create!==r:!!n&&o.name!==n)),this}open(){return ZS(this)}_close(){const e=this._state,n=Hs.indexOf(this);if(n>=0&&Hs.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new ke(r=>{e.dbReadyResolve=r}),e.openCanceller=new ke((r,o)=>{e.cancelOpen=o})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new je.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new ke((r,o)=>{const i=()=>{this.close();var s=this._deps.indexedDB.deleteDatabase(this.name);s.onsuccess=Ot(()=>{(function({indexedDB:l,IDBKeyRange:a},c){!Ff(l)&&c!==Pc&&Hf(l,a).delete(c).catch(vt)})(this._deps,this.name),r()}),s.onerror=Tr(o),s.onblocked=this._fireOnBlocked};if(e)throw new je.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(i):i()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Rt(this._allTables).map(e=>this._allTables[e])}transaction(){const e=QS.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let o=De.trans;o&&o.db===this&&e.indexOf("!")===-1||(o=null);const i=e.indexOf("?")!==-1;let s,l;e=e.replace("!","").replace("?","");try{if(l=n.map(c=>{var u=c instanceof this.Table?c.name:c;if(typeof u!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),e=="r"||e===yu)s=yu;else{if(e!="rw"&&e!=bu)throw new je.InvalidArgument("Invalid transaction mode: "+e);s=bu}if(o){if(o.mode===yu&&s===bu){if(!i)throw new je.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&l.forEach(c=>{if(o&&o.storeNames.indexOf(c)===-1){if(!i)throw new je.SubTransaction("Table "+c+" not included in parent transaction.");o=null}}),i&&o&&!o.active&&(o=null)}}catch(c){return o?o._promise(null,(u,d)=>{d(c)}):Ut(c)}const a=c1.bind(null,this,s,l,o,r);return o?o._promise(s,a,"lock"):De.trans?hs(De.transless,()=>this._whenReady(a)):this._whenReady(a)}table(e){if(!Xn(this._allTables,e))throw new je.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}};const ix=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";let sx=class{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[ix](){return this}};function d1(t,e){return Rt(e).forEach(n=>{qa(t[n]||(t[n]=new jr),e[n])}),t}function f1(t){let e,n=!1;const r=new sx(o=>{const i=Pf(t);let s=!1,l={},a={};const c={get closed(){return s},unsubscribe:()=>{s=!0,No.storagemutated.unsubscribe(m)}};o.start&&o.start(c);let u=!1,d=!1;function h(){return Rt(a).some(y=>l[y]&&rx(l[y],a[y]))}const m=y=>{d1(l,y),h()&&g()},g=()=>{if(u||s)return;l={};const y={},x=function(O){i&&fs();const A=()=>Ao(t,{subscr:O,trans:null}),N=De.trans?hs(De.transless,A):A();return i&&N.then(Qr,Qr),N}(y);d||(No(cl,m),d=!0),u=!0,Promise.resolve(x).then(O=>{n=!0,e=O,u=!1,s||(h()?g():(l={},a=y,o.next&&o.next(O)))},O=>{u=!1,n=!1,o.error&&o.error(O),c.unsubscribe()})};return g(),c});return r.hasValue=()=>n,r.getValue=()=>e,r}let Ld;try{Ld={indexedDB:xt.indexedDB||xt.mozIndexedDB||xt.webkitIndexedDB||xt.msIndexedDB,IDBKeyRange:xt.IDBKeyRange||xt.webkitIDBKeyRange}}catch{Ld={indexedDB:null,IDBKeyRange:null}}const Ko=zt;function va(t){let e=Wr;try{Wr=!0,No.storagemutated.fire(t)}finally{Wr=e}}ns(Ko,{...fa,delete:t=>new Ko(t,{addons:[]}).delete(),exists:t=>new Ko(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return Ff(e)?Promise.resolve(e.databases()).then(r=>r.map(o=>o.name).filter(o=>o!==Pc)):Hf(e,n).toCollection().primaryKeys()}(Ko.dependencies).then(t)}catch{return Ut(new je.MissingAPI)}},defineClass:()=>function(t){Tn(this,t)},ignoreTransaction:t=>De.trans?hs(De.transless,t):t(),vip:Pd,async:function(t){return function(){try{var e=Dd(t.apply(this,arguments));return e&&typeof e.then=="function"?e:ke.resolve(e)}catch(n){return Ut(n)}}},spawn:function(t,e,n){try{var r=Dd(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:ke.resolve(r)}catch(o){return Ut(o)}},currentTransaction:{get:()=>De.trans||null},waitFor:function(t,e){const n=ke.resolve(typeof t=="function"?Ko.ignoreTransaction(t):t).timeout(e||6e4);return De.trans?De.trans.waitFor(n):n},Promise:ke,debug:{get:()=>Dr,set:t=>{jy(t,t==="dexie"?()=>!0:n1)}},derive:Yi,extend:Tn,props:ns,override:Ly,Events:Fs,on:No,liveQuery:f1,extendObservabilitySet:d1,getByKeyPath:Gr,setByKeyPath:yr,delByKeyPath:function(t,e){typeof e=="string"?yr(t,e,void 0):"length"in e&&[].map.call(e,function(n){yr(t,n,void 0)})},shallowClone:Ry,deepClone:Tl,getObjectDiff:jf,cmp:Sn,asap:By,minKey:Td,addons:[],connections:Hs,errnames:If,dependencies:Ld,semVer:Lp,version:Lp.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),Ko.maxKey=ul(Ko.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(No(cl,t=>{if(!Wr){let e;$c?(e=document.createEvent("CustomEvent"),e.initCustomEvent(go,!0,!0,t)):e=new CustomEvent(go,{detail:t}),Wr=!0,dispatchEvent(e),Wr=!1}}),addEventListener(go,({detail:t})=>{Wr||va(t)}));let Wr=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(go);typeof t.unref=="function"&&t.unref(),No(cl,e=>{Wr||t.postMessage(e)}),t.onmessage=e=>{e.data&&va(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){No(cl,e=>{try{Wr||(typeof localStorage<"u"&&localStorage.setItem(go,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:go,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===go){const n=JSON.parse(e.newValue);n&&va(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===go&&va(e.changedParts)})}ke.rejectionMapper=function(t,e){if(!t||t instanceof Xi||t instanceof TypeError||t instanceof SyntaxError||!t.name||!$p[t.name])return t;var n=new $p[t.name](e||t.message,t);return"stack"in t&&Jr(n,"stack",{get:function(){return this.inner.stack}}),n},jy(Dr,n1);var Up={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ja=function(){return Ja=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ja.apply(this,arguments)};function $o(t,e,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function l(u){try{c(r.next(u))}catch(d){s(d)}}function a(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):o(u.value).then(l,a)}c((r=r.apply(t,[])).next())})}function pr(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(u){return a([c,u])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(i=c[0]&2?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,o=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],o=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function lx(t){var e=[t.schema.primKey].concat(t.schema.indexes);return e.map(function(n){return n.src}).join(",")}function ax(t){for(var e={},n=0,r=t.tables;n<r.length;n++){var o=r[n];e[o.name]=o.schema}return e}function h1(t,e){return new Promise(function(n,r){var o=new FileReader;o.onabort=function(i){return r(new Error("file read aborted"))},o.onerror=function(i){return r(i.target.error)},o.onload=function(i){return n(i.target.result)},e==="binary"?o.readAsArrayBuffer(t):o.readAsText(t)})}function p1(t,e){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync,r=e==="binary"?n.readAsArrayBuffer(t):n.readAsText(t);return r}var Bd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uf(t,e){return e={exports:{}},t(e,e.exports),e.exports}var Dc=Uf(function(t,e){(function(n,r){t.exports=r()})(Bd,function(){function n(j){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(K){return typeof K}:n=function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},n(j)}function r(j,K,G,q,ue,M,$){try{var V=j[M]($),H=V.value}catch(W){G(W);return}V.done?K(H):Promise.resolve(H).then(q,ue)}function o(j){return function(){var K=this,G=arguments;return new Promise(function(q,ue){var M=j.apply(K,G);function $(H){r(M,q,ue,$,V,"next",H)}function V(H){r(M,q,ue,$,V,"throw",H)}$(void 0)})}}function i(j,K){if(!(j instanceof K))throw new TypeError("Cannot call a class as a function")}function s(j,K){for(var G=0;G<K.length;G++){var q=K[G];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(j,q.key,q)}}function l(j,K,G){return K&&s(j.prototype,K),j}function a(j,K,G){return K in j?Object.defineProperty(j,K,{value:G,enumerable:!0,configurable:!0,writable:!0}):j[K]=G,j}function c(j,K){var G=Object.keys(j);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(j);K&&(q=q.filter(function(ue){return Object.getOwnPropertyDescriptor(j,ue).enumerable})),G.push.apply(G,q)}return G}function u(j){for(var K=1;K<arguments.length;K++){var G=arguments[K]!=null?arguments[K]:{};K%2?c(Object(G),!0).forEach(function(q){a(j,q,G[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(G)):c(Object(G)).forEach(function(q){Object.defineProperty(j,q,Object.getOwnPropertyDescriptor(G,q))})}return j}function d(j,K){return g(j)||x(j,K)||A()}function h(j){return m(j)||y(j)||O()}function m(j){if(Array.isArray(j)){for(var K=0,G=new Array(j.length);K<j.length;K++)G[K]=j[K];return G}}function g(j){if(Array.isArray(j))return j}function y(j){if(Symbol.iterator in Object(j)||Object.prototype.toString.call(j)==="[object Arguments]")return Array.from(j)}function x(j,K){if(Symbol.iterator in Object(j)||Object.prototype.toString.call(j)==="[object Arguments]"){var G=[],q=!0,ue=!1,M=void 0;try{for(var $=j[Symbol.iterator](),V;!(q=(V=$.next()).done)&&(G.push(V.value),!(K&&G.length===K));q=!0);}catch(H){ue=!0,M=H}finally{try{!q&&$.return!=null&&$.return()}finally{if(ue)throw M}}return G}}function O(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function A(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var N=function j(K){i(this,j),this.p=new Promise(K)};N.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(N.prototype[Symbol.toStringTag]="TypesonPromise"),N.prototype.then=function(j,K){var G=this;return new N(function(q,ue){G.p.then(function(M){q(j?j(M):M)}).catch(function(M){return K?K(M):Promise.reject(M)}).then(q,ue)})},N.prototype.catch=function(j){return this.then(null,j)},N.resolve=function(j){return new N(function(K){K(j)})},N.reject=function(j){return new N(function(K,G){G(j)})},["all","race"].forEach(function(j){N[j]=function(K){return new N(function(G,q){Promise[j](K.map(function(ue){return ue&&ue.constructor&&ue.constructor.__typeson__type__==="TypesonPromise"?ue.p:ue})).then(G,q)})}});var L={},D=L.toString,R={}.hasOwnProperty,F=Object.getPrototypeOf,U=R.toString;function T(j,K){return J(j)&&typeof j.then=="function"&&(!K||typeof j.catch=="function")}function C(j){return D.call(j).slice(8,-1)}function B(j,K){if(!j||n(j)!=="object")return!1;var G=F(j);if(!G)return K===null;var q=R.call(G,"constructor")&&G.constructor;return typeof q!="function"?K===null:K===q||K!==null&&U.call(q)===U.call(K)||typeof K=="function"&&typeof q.__typeson__type__=="string"&&q.__typeson__type__===K.__typeson__type__}function w(j){if(!j||C(j)!=="Object")return!1;var K=F(j);return K?B(j,Object):!0}function te(j){if(!j||C(j)!=="Object")return!1;var K=F(j);return K?B(j,Object)||te(K):!0}function J(j){return j&&n(j)==="object"}function we(j){return j.replace(/~/g,"~0").replace(/\./g,"~1")}function ge(j){return j.replace(/~1/g,".").replace(/~0/g,"~")}function ne(j,K){if(K==="")return j;var G=K.indexOf(".");if(G>-1){var q=j[ge(K.slice(0,G))];return q===void 0?void 0:ne(q,K.slice(G+1))}return j[ge(K)]}function Me(j,K,G){if(K==="")return G;var q=K.indexOf(".");if(q>-1){var ue=j[ge(K.slice(0,q))];return Me(ue,K.slice(q+1),G)}return j[ge(K)]=G,j}function nt(j){return j===null?"null":Array.isArray(j)?"array":n(j)}var We=Object.keys,it=Array.isArray,pt={}.hasOwnProperty,Ht=["type","replaced","iterateIn","iterateUnsetNumeric"];function Ae(j,K){if(j.keypath==="")return-1;var G=j.keypath.match(/\./g)||0,q=K.keypath.match(/\./g)||0;return G&&(G=G.length),q&&(q=q.length),G>q?-1:G<q?1:j.keypath<K.keypath?-1:j.keypath>K.keypath}var rt=function(){function j(K){i(this,j),this.options=K,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return l(j,[{key:"stringify",value:function(G,q,ue,M){M=u({},this.options,{},M,{stringification:!0});var $=this.encapsulate(G,null,M);return it($)?JSON.stringify($[0],q,ue):$.then(function(V){return JSON.stringify(V,q,ue)})}},{key:"stringifySync",value:function(G,q,ue,M){return this.stringify(G,q,ue,u({throwOnBadSyncType:!0},M,{sync:!0}))}},{key:"stringifyAsync",value:function(G,q,ue,M){return this.stringify(G,q,ue,u({throwOnBadSyncType:!0},M,{sync:!1}))}},{key:"parse",value:function(G,q,ue){return ue=u({},this.options,{},ue,{parse:!0}),this.revive(JSON.parse(G,q),ue)}},{key:"parseSync",value:function(G,q,ue){return this.parse(G,q,u({throwOnBadSyncType:!0},ue,{sync:!0}))}},{key:"parseAsync",value:function(G,q,ue){return this.parse(G,q,u({throwOnBadSyncType:!0},ue,{sync:!1}))}},{key:"specialTypeNames",value:function(G,q){var ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ue.returnTypeNames=!0,this.encapsulate(G,q,ue)}},{key:"rootTypeName",value:function(G,q){var ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ue.iterateNone=!0,this.encapsulate(G,q,ue)}},{key:"encapsulate",value:function(G,q,ue){ue=u({sync:!0},this.options,{},ue);var M=ue,$=M.sync,V=this,H={},W=[],Y=[],se=[],X="cyclic"in ue?ue.cyclic:!0,ee=ue,Q=ee.encapsulateObserver,ye=Se("",G,X,q||{},se);function ce(me){var k=Object.values(H);if(ue.iterateNone)return k.length?k[0]:j.getJSONType(me);if(k.length){if(ue.returnTypeNames)return h(new Set(k));!me||!w(me)||pt.call(me,"$types")?me={$:me,$types:{$:H}}:me.$types=H}else J(me)&&pt.call(me,"$types")&&(me={$:me,$types:!0});return ue.returnTypeNames?!1:me}function he(me,k){return pe.apply(this,arguments)}function pe(){return pe=o(regeneratorRuntime.mark(function me(k,b){var E;return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,Promise.all(b.map(function(ie){return ie[1].p}));case 2:return E=I.sent,I.next=5,Promise.all(E.map(function(){var ie=o(regeneratorRuntime.mark(function le(Te){var ve,Be,Xe,Qe,be,st,ot,mt,gt,Re,Ft,Ee,fe,Pe;return regeneratorRuntime.wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:if(ve=[],Be=b.splice(0,1),Xe=d(Be,1),Qe=Xe[0],be=d(Qe,7),st=be[0],ot=be[2],mt=be[3],gt=be[4],Re=be[5],Ft=be[6],Ee=Se(st,Te,ot,mt,ve,!0,Ft),fe=B(Ee,N),!(st&&fe)){Ve.next=11;break}return Ve.next=8,Ee.p;case 8:return Pe=Ve.sent,gt[Re]=Pe,Ve.abrupt("return",he(k,ve));case 11:return st?gt[Re]=Ee:fe?k=Ee.p:k=Ee,Ve.abrupt("return",he(k,ve));case 13:case"end":return Ve.stop()}},le)}));return function(le){return ie.apply(this,arguments)}}()));case 5:return I.abrupt("return",k);case 6:case"end":return I.stop()}},me)})),pe.apply(this,arguments)}function re(me,k,b){Object.assign(me,k);var E=Ht.map(function(P){var I=me[P];return delete me[P],I});b(),Ht.forEach(function(P,I){me[P]=E[I]})}function Se(me,k,b,E,P,I,ie){var le,Te={},ve=n(k),Be=Q?function(fe){var Pe=ie||E.type||j.getJSONType(k);Q(Object.assign(fe||Te,{keypath:me,value:k,cyclic:b,stateObj:E,promisesData:P,resolvingTypesonPromise:I,awaitingTypesonPromise:B(k,N)},{type:Pe}))}:null;if(["string","boolean","number","undefined"].includes(ve))return k===void 0||ve==="number"&&(isNaN(k)||k===-1/0||k===1/0)?(E.replaced?le=k:le=Oe(me,k,E,P,!1,I,Be),le!==k&&(Te={replaced:le})):le=k,Be&&Be(),le;if(k===null)return Be&&Be(),k;if(b&&!E.iterateIn&&!E.iterateUnsetNumeric&&k&&n(k)==="object"){var Xe=W.indexOf(k);if(Xe<0)b===!0&&(W.push(k),Y.push(me));else return H[me]="#",Be&&Be({cyclicKeypath:Y[Xe]}),"#"+Y[Xe]}var Qe=w(k),be=it(k),st=(Qe||be)&&(!V.plainObjectReplacers.length||E.replaced)||E.iterateIn?k:Oe(me,k,E,P,Qe||be,null,Be),ot;if(st!==k?(le=st,Te={replaced:st}):me===""&&B(k,N)?(P.push([me,k,b,E,void 0,void 0,E.type]),le=k):be&&E.iterateIn!=="object"||E.iterateIn==="array"?(ot=new Array(k.length),Te={clone:ot}):!["function","symbol"].includes(n(k))&&!("toJSON"in k)&&!B(k,N)&&!B(k,Promise)&&!B(k,ArrayBuffer)||Qe||E.iterateIn==="object"?(ot={},E.addLength&&(ot.length=k.length),Te={clone:ot}):le=k,Be&&Be(),ue.iterateNone)return ot||le;if(!ot)return le;if(E.iterateIn){var mt=function(Pe){var _e={ownKeys:pt.call(k,Pe)};re(E,_e,function(){var Ve=me+(me?".":"")+we(Pe),et=Se(Ve,k[Pe],!!b,E,P,I);B(et,N)?P.push([Ve,et,!!b,E,ot,Pe,E.type]):et!==void 0&&(ot[Pe]=et)})};for(var gt in k)mt(gt);Be&&Be({endIterateIn:!0,end:!0})}else We(k).forEach(function(fe){var Pe=me+(me?".":"")+we(fe),_e={ownKeys:!0};re(E,_e,function(){var Ve=Se(Pe,k[fe],!!b,E,P,I);B(Ve,N)?P.push([Pe,Ve,!!b,E,ot,fe,E.type]):Ve!==void 0&&(ot[fe]=Ve)})}),Be&&Be({endIterateOwn:!0,end:!0});if(E.iterateUnsetNumeric){for(var Re=k.length,Ft=function(Pe){if(!(Pe in k)){var _e=me+(me?".":"")+Pe,Ve={ownKeys:!1};re(E,Ve,function(){var et=Se(_e,void 0,!!b,E,P,I);B(et,N)?P.push([_e,et,!!b,E,ot,Pe,E.type]):et!==void 0&&(ot[Pe]=et)})}},Ee=0;Ee<Re;Ee++)Ft(Ee);Be&&Be({endIterateUnsetNumeric:!0,end:!0})}return ot}function Oe(me,k,b,E,P,I,ie){for(var le=P?V.plainObjectReplacers:V.nonplainObjectReplacers,Te=le.length;Te--;){var ve=le[Te];if(ve.test(k,b)){var Be=ve.type;if(V.revivers[Be]){var Xe=H[me];H[me]=Xe?[Be].concat(Xe):Be}if(Object.assign(b,{type:Be,replaced:!0}),($||!ve.replaceAsync)&&!ve.replace)return ie&&ie({typeDetected:!0}),Se(me,k,X&&"readonly",b,E,I,Be);ie&&ie({replacing:!0});var Qe=$||!ve.replaceAsync?"replace":"replaceAsync";return Se(me,ve[Qe](k,b),X&&"readonly",b,E,I,Be)}}return k}return se.length?$&&ue.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(he(ye,se)).then(ce):!$&&ue.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():ue.stringification&&$?[ce(ye)]:$?ce(ye):Promise.resolve(ce(ye))}},{key:"encapsulateSync",value:function(G,q,ue){return this.encapsulate(G,q,u({throwOnBadSyncType:!0},ue,{sync:!0}))}},{key:"encapsulateAsync",value:function(G,q,ue){return this.encapsulate(G,q,u({throwOnBadSyncType:!0},ue,{sync:!1}))}},{key:"revive",value:function(G,q){var ue=G&&G.$types;if(!ue)return G;if(ue===!0)return G.$;q=u({sync:!0},this.options,{},q);var M=q,$=M.sync,V=[],H={},W=!0;ue.$&&w(ue.$)&&(G=G.$,ue=ue.$,W=!1);var Y=this;function se(pe,re){var Se=Y.revivers[pe]||[],Oe=d(Se,1),me=Oe[0];if(!me)throw new Error("Unregistered type: "+pe);return $&&!("revive"in me)?re:me[$&&me.revive?"revive":!$&&me.reviveAsync?"reviveAsync":"revive"](re,H)}function X(){var pe=[];if(Object.entries(ue).forEach(function(re){var Se=d(re,2),Oe=Se[0],me=Se[1];me!=="#"&&[].concat(me).forEach(function(k){var b=Y.revivers[k]||[null,{}],E=d(b,2),P=E[1].plain;P&&(pe.push({keypath:Oe,type:k}),delete ue[Oe])})}),!!pe.length)return pe.sort(Ae).reduce(function re(Se,Oe){var me=Oe.keypath,k=Oe.type;if(T(Se))return Se.then(function(P){return re(P,{keypath:me,type:k})});var b=ne(G,me);if(b=se(k,b),B(b,N))return b.then(function(P){var I=Me(G,me,P);I===P&&(G=I)});var E=Me(G,me,b);E===b&&(G=E)},void 0)}var ee=[];function Q(pe,re,Se,Oe,me){if(!(W&&pe==="$types")){var k=ue[pe],b=it(re);if(b||w(re)){var E=b?new Array(re.length):{};for(We(re).forEach(function(Xe){var Qe=Q(pe+(pe?".":"")+we(Xe),re[Xe],Se||E,E,Xe),be=function(ot){return B(ot,_t)?E[Xe]=void 0:ot!==void 0&&(E[Xe]=ot),ot};B(Qe,N)?ee.push(Qe.then(function(st){return be(st)})):be(Qe)}),re=E;V.length;){var P=d(V[0],4),I=P[0],ie=P[1],le=P[2],Te=P[3],ve=ne(I,ie);if(ve!==void 0)le[Te]=ve;else break;V.splice(0,1)}}if(!k)return re;if(k==="#"){var Be=ne(Se,re.slice(1));return Be===void 0&&V.push([Se,re.slice(1),Oe,me]),Be}return[].concat(k).reduce(function Xe(Qe,be){return B(Qe,N)?Qe.then(function(st){return Xe(st,be)}):se(be,Qe)},re)}}function ye(pe){return B(pe,_t)?void 0:pe}var ce=X(),he;return B(ce,N)?he=ce.then(function(){return G}):(he=Q("",G,null),ee.length&&(he=N.resolve(he).then(function(pe){return N.all([pe].concat(ee))}).then(function(pe){var re=d(pe,1),Se=re[0];return Se}))),T(he)?$&&q.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():B(he,N)?he.p.then(ye):he:!$&&q.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():$?ye(he):Promise.resolve(ye(he))}},{key:"reviveSync",value:function(G,q){return this.revive(G,u({throwOnBadSyncType:!0},q,{sync:!0}))}},{key:"reviveAsync",value:function(G,q){return this.revive(G,u({throwOnBadSyncType:!0},q,{sync:!1}))}},{key:"register",value:function(G,q){return q=q||{},[].concat(G).forEach(function ue(M){var $=this;if(it(M))return M.map(function(V){return ue.call($,V)});M&&We(M).forEach(function(V){if(V==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(j.JSON_TYPES.includes(V))throw new TypeError("Plain JSON object types are reserved as type names");var H=M[V],W=H&&H.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Y=W.filter(function(Se){return Se.type===V});if(Y.length&&(W.splice(W.indexOf(Y[0]),1),delete this.revivers[V],delete this.types[V]),typeof H=="function"){var se=H;H={test:function(Oe){return Oe&&Oe.constructor===se},replace:function(Oe){return u({},Oe)},revive:function(Oe){return Object.assign(Object.create(se.prototype),Oe)}}}else if(it(H)){var X=H,ee=d(X,3),Q=ee[0],ye=ee[1],ce=ee[2];H={test:Q,replace:ye,revive:ce}}if(!(!H||!H.test)){var he={type:V,test:H.test.bind(H)};H.replace&&(he.replace=H.replace.bind(H)),H.replaceAsync&&(he.replaceAsync=H.replaceAsync.bind(H));var pe=typeof q.fallback=="number"?q.fallback:q.fallback?0:1/0;if(H.testPlainObjects?this.plainObjectReplacers.splice(pe,0,he):this.nonplainObjectReplacers.splice(pe,0,he),H.revive||H.reviveAsync){var re={};H.revive&&(re.revive=H.revive.bind(H)),H.reviveAsync&&(re.reviveAsync=H.reviveAsync.bind(H)),this.revivers[V]=[re,{plain:H.testPlainObjects}]}this.types[V]=H}},this)},this),this}}]),j}(),_t=function j(){i(this,j)};return _t.__typeson__type__="TypesonUndefined",rt.Undefined=_t,rt.Promise=N,rt.isThenable=T,rt.toStringTag=C,rt.hasConstructorOf=B,rt.isObject=J,rt.isPlainObject=w,rt.isUserObject=te,rt.escapeKeyPathComponent=we,rt.unescapeKeyPathComponent=ge,rt.getByKeyPath=ne,rt.getJSONType=nt,rt.JSON_TYPES=["null","boolean","number","string","array","object"],rt})}),cx=Uf(function(t,e){(function(n,r){t.exports=r()})(Bd,function(){function n(k){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(k)}function r(k,b){if(!(k instanceof b))throw new TypeError("Cannot call a class as a function")}function o(k,b){for(var E=0;E<b.length;E++){var P=b[E];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(k,P.key,P)}}function i(k,b,E){return b in k?Object.defineProperty(k,b,{value:E,enumerable:!0,configurable:!0,writable:!0}):k[b]=E,k}function s(k,b){var E=Object.keys(k);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(k);b&&(P=P.filter(function(I){return Object.getOwnPropertyDescriptor(k,I).enumerable})),E.push.apply(E,P)}return E}function l(k){return function(E){if(Array.isArray(E))return a(E)}(k)||function(E){if(typeof Symbol<"u"&&Symbol.iterator in Object(E))return Array.from(E)}(k)||function(E,P){if(E){if(typeof E=="string")return a(E,P);var I=Object.prototype.toString.call(E).slice(8,-1);if(I==="Object"&&E.constructor&&(I=E.constructor.name),I==="Map"||I==="Set")return Array.from(E);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return a(E,P)}}(k)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function a(k,b){(b==null||b>k.length)&&(b=k.length);for(var E=0,P=new Array(b);E<b;E++)P[E]=k[E];return P}function c(k){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(k)}function u(k,b){if(!(k instanceof b))throw new TypeError("Cannot call a class as a function")}function d(k,b){for(var E=0;E<b.length;E++){var P=b[E];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(k,P.key,P)}}function h(k,b,E){return b in k?Object.defineProperty(k,b,{value:E,enumerable:!0,configurable:!0,writable:!0}):k[b]=E,k}function m(k,b){var E=Object.keys(k);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(k);b&&(P=P.filter(function(I){return Object.getOwnPropertyDescriptor(k,I).enumerable})),E.push.apply(E,P)}return E}function g(k){for(var b=1;b<arguments.length;b++){var E=arguments[b]!=null?arguments[b]:{};b%2?m(Object(E),!0).forEach(function(P){h(k,P,E[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(E)):m(Object(E)).forEach(function(P){Object.defineProperty(k,P,Object.getOwnPropertyDescriptor(E,P))})}return k}function y(k,b){return function(P){if(Array.isArray(P))return P}(k)||function(P,I){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(P)))){var ie=[],le=!0,Te=!1,ve=void 0;try{for(var Be,Xe=P[Symbol.iterator]();!(le=(Be=Xe.next()).done)&&(ie.push(Be.value),!I||ie.length!==I);le=!0);}catch(Qe){Te=!0,ve=Qe}finally{try{le||Xe.return==null||Xe.return()}finally{if(Te)throw ve}}return ie}}(k,b)||O(k,b)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function x(k){return function(E){if(Array.isArray(E))return A(E)}(k)||function(E){if(typeof Symbol<"u"&&Symbol.iterator in Object(E))return Array.from(E)}(k)||O(k)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function O(k,b){if(k){if(typeof k=="string")return A(k,b);var E=Object.prototype.toString.call(k).slice(8,-1);return E==="Object"&&k.constructor&&(E=k.constructor.name),E==="Map"||E==="Set"?Array.from(k):E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E)?A(k,b):void 0}}function A(k,b){(b==null||b>k.length)&&(b=k.length);for(var E=0,P=new Array(b);E<b;E++)P[E]=k[E];return P}var N=function k(b){u(this,k),this.p=new Promise(b)};N.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(N.prototype[Symbol.toStringTag]="TypesonPromise"),N.prototype.then=function(k,b){var E=this;return new N(function(P,I){E.p.then(function(ie){P(k?k(ie):ie)}).catch(function(ie){return b?b(ie):Promise.reject(ie)}).then(P,I)})},N.prototype.catch=function(k){return this.then(null,k)},N.resolve=function(k){return new N(function(b){b(k)})},N.reject=function(k){return new N(function(b,E){E(k)})},["all","race"].forEach(function(k){N[k]=function(b){return new N(function(E,P){Promise[k](b.map(function(I){return I&&I.constructor&&I.constructor.__typeson__type__==="TypesonPromise"?I.p:I})).then(E,P)})}});var L={}.toString,D={}.hasOwnProperty,R=Object.getPrototypeOf,F=D.toString;function U(k,b){return w(k)&&typeof k.then=="function"&&(!b||typeof k.catch=="function")}function T(k){return L.call(k).slice(8,-1)}function C(k,b){if(!k||c(k)!=="object")return!1;var E=R(k);if(!E)return b===null;var P=D.call(E,"constructor")&&E.constructor;return typeof P!="function"?b===null:b===P||b!==null&&F.call(P)===F.call(b)||typeof b=="function"&&typeof P.__typeson__type__=="string"&&P.__typeson__type__===b.__typeson__type__}function B(k){return!(!k||T(k)!=="Object")&&(!R(k)||C(k,Object))}function w(k){return k&&c(k)==="object"}function te(k){return k.replace(/~/g,"~0").replace(/\./g,"~1")}function J(k){return k.replace(/~1/g,".").replace(/~0/g,"~")}function we(k,b){if(b==="")return k;var E=b.indexOf(".");if(E>-1){var P=k[J(b.slice(0,E))];return P===void 0?void 0:we(P,b.slice(E+1))}return k[J(b)]}function ge(k,b,E){if(b==="")return E;var P=b.indexOf(".");return P>-1?ge(k[J(b.slice(0,P))],b.slice(P+1),E):(k[J(b)]=E,k)}function ne(k,b,E){return E?b?b(k):k:(k&&k.then||(k=Promise.resolve(k)),b?k.then(b):k)}var Me=Object.keys,nt=Array.isArray,We={}.hasOwnProperty,it=["type","replaced","iterateIn","iterateUnsetNumeric"];function pt(k){return function(){for(var b=[],E=0;E<arguments.length;E++)b[E]=arguments[E];try{return Promise.resolve(k.apply(this,b))}catch(P){return Promise.reject(P)}}}function Ht(k,b){if(k.keypath==="")return-1;var E=k.keypath.match(/\./g)||0,P=b.keypath.match(/\./g)||0;return E&&(E=E.length),P&&(P=P.length),E>P?-1:E<P?1:k.keypath<b.keypath?-1:k.keypath>b.keypath}var Ae=function(){function k(b){u(this,k),this.options=b,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(E,P,I){return P&&d(E.prototype,P),E}(k,[{key:"stringify",value:function(E,P,I,ie){ie=g(g(g({},this.options),ie),{},{stringification:!0});var le=this.encapsulate(E,null,ie);return nt(le)?JSON.stringify(le[0],P,I):le.then(function(Te){return JSON.stringify(Te,P,I)})}},{key:"stringifySync",value:function(E,P,I,ie){return this.stringify(E,P,I,g(g({throwOnBadSyncType:!0},ie),{},{sync:!0}))}},{key:"stringifyAsync",value:function(E,P,I,ie){return this.stringify(E,P,I,g(g({throwOnBadSyncType:!0},ie),{},{sync:!1}))}},{key:"parse",value:function(E,P,I){return I=g(g(g({},this.options),I),{},{parse:!0}),this.revive(JSON.parse(E,P),I)}},{key:"parseSync",value:function(E,P,I){return this.parse(E,P,g(g({throwOnBadSyncType:!0},I),{},{sync:!0}))}},{key:"parseAsync",value:function(E,P,I){return this.parse(E,P,g(g({throwOnBadSyncType:!0},I),{},{sync:!1}))}},{key:"specialTypeNames",value:function(E,P){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return I.returnTypeNames=!0,this.encapsulate(E,P,I)}},{key:"rootTypeName",value:function(E,P){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return I.iterateNone=!0,this.encapsulate(E,P,I)}},{key:"encapsulate",value:function(E,P,I){var ie=pt(function(Ee,fe){return ne(Promise.all(fe.map(function(Pe){return Pe[1].p})),function(Pe){return ne(Promise.all(Pe.map(pt(function(_e){var Ve=!1,et=[],mn=y(fe.splice(0,1),1),yt=y(mn[0],7),sn=yt[0],Nn=yt[2],dt=yt[3],$n=yt[4],ht=yt[5],gn=yt[6],Yt=Re(sn,_e,Nn,dt,et,!0,gn),Hn=C(Yt,N);return function(qe,ki){var ro=qe();return ro&&ro.then?ro.then(ki):ki(ro)}(function(){if(sn&&Hn)return ne(Yt.p,function(Fn){return $n[ht]=Fn,Ve=!0,ie(Ee,et)})},function(Fn){return Ve?Fn:(sn?$n[ht]=Yt:Ee=Hn?Yt.p:Yt,ie(Ee,et))})}))),function(){return Ee})})}),le=(I=g(g({sync:!0},this.options),I)).sync,Te=this,ve={},Be=[],Xe=[],Qe=[],be=!("cyclic"in I)||I.cyclic,st=I.encapsulateObserver,ot=Re("",E,be,P||{},Qe);function mt(Ee){var fe=Object.values(ve);if(I.iterateNone)return fe.length?fe[0]:k.getJSONType(Ee);if(fe.length){if(I.returnTypeNames)return x(new Set(fe));Ee&&B(Ee)&&!We.call(Ee,"$types")?Ee.$types=ve:Ee={$:Ee,$types:{$:ve}}}else w(Ee)&&We.call(Ee,"$types")&&(Ee={$:Ee,$types:!0});return!I.returnTypeNames&&Ee}function gt(Ee,fe,Pe){Object.assign(Ee,fe);var _e=it.map(function(Ve){var et=Ee[Ve];return delete Ee[Ve],et});Pe(),it.forEach(function(Ve,et){Ee[Ve]=_e[et]})}function Re(Ee,fe,Pe,_e,Ve,et,mn){var yt,sn={},Nn=c(fe),dt=st?function(wr){var Xt=mn||_e.type||k.getJSONType(fe);st(Object.assign(wr||sn,{keypath:Ee,value:fe,cyclic:Pe,stateObj:_e,promisesData:Ve,resolvingTypesonPromise:et,awaitingTypesonPromise:C(fe,N)},{type:Xt}))}:null;if(["string","boolean","number","undefined"].includes(Nn))return fe===void 0||Number.isNaN(fe)||fe===Number.NEGATIVE_INFINITY||fe===Number.POSITIVE_INFINITY?(yt=_e.replaced?fe:Ft(Ee,fe,_e,Ve,!1,et,dt))!==fe&&(sn={replaced:yt}):yt=fe,dt&&dt(),yt;if(fe===null)return dt&&dt(),fe;if(Pe&&!_e.iterateIn&&!_e.iterateUnsetNumeric&&fe&&c(fe)==="object"){var $n=Be.indexOf(fe);if(!($n<0))return ve[Ee]="#",dt&&dt({cyclicKeypath:Xe[$n]}),"#"+Xe[$n];Pe===!0&&(Be.push(fe),Xe.push(Ee))}var ht,gn=B(fe),Yt=nt(fe),Hn=(gn||Yt)&&(!Te.plainObjectReplacers.length||_e.replaced)||_e.iterateIn?fe:Ft(Ee,fe,_e,Ve,gn||Yt,null,dt);if(Hn!==fe?(yt=Hn,sn={replaced:Hn}):Ee===""&&C(fe,N)?(Ve.push([Ee,fe,Pe,_e,void 0,void 0,_e.type]),yt=fe):Yt&&_e.iterateIn!=="object"||_e.iterateIn==="array"?(ht=new Array(fe.length),sn={clone:ht}):(["function","symbol"].includes(c(fe))||"toJSON"in fe||C(fe,N)||C(fe,Promise)||C(fe,ArrayBuffer))&&!gn&&_e.iterateIn!=="object"?yt=fe:(ht={},_e.addLength&&(ht.length=fe.length),sn={clone:ht}),dt&&dt(),I.iterateNone)return ht||yt;if(!ht)return yt;if(_e.iterateIn){var Fn=function(Xt){var cr={ownKeys:We.call(fe,Xt)};gt(_e,cr,function(){var ur=Ee+(Ee?".":"")+te(Xt),Cr=Re(ur,fe[Xt],!!Pe,_e,Ve,et);C(Cr,N)?Ve.push([ur,Cr,!!Pe,_e,ht,Xt,_e.type]):Cr!==void 0&&(ht[Xt]=Cr)})};for(var qe in fe)Fn(qe);dt&&dt({endIterateIn:!0,end:!0})}else Me(fe).forEach(function(wr){var Xt=Ee+(Ee?".":"")+te(wr);gt(_e,{ownKeys:!0},function(){var cr=Re(Xt,fe[wr],!!Pe,_e,Ve,et);C(cr,N)?Ve.push([Xt,cr,!!Pe,_e,ht,wr,_e.type]):cr!==void 0&&(ht[wr]=cr)})}),dt&&dt({endIterateOwn:!0,end:!0});if(_e.iterateUnsetNumeric){for(var ki=fe.length,ro=function(Xt){if(!(Xt in fe)){var cr=Ee+(Ee?".":"")+Xt;gt(_e,{ownKeys:!1},function(){var ur=Re(cr,void 0,!!Pe,_e,Ve,et);C(ur,N)?Ve.push([cr,ur,!!Pe,_e,ht,Xt,_e.type]):ur!==void 0&&(ht[Xt]=ur)})}},ms=0;ms<ki;ms++)ro(ms);dt&&dt({endIterateUnsetNumeric:!0,end:!0})}return ht}function Ft(Ee,fe,Pe,_e,Ve,et,mn){for(var yt=Ve?Te.plainObjectReplacers:Te.nonplainObjectReplacers,sn=yt.length;sn--;){var Nn=yt[sn];if(Nn.test(fe,Pe)){var dt=Nn.type;if(Te.revivers[dt]){var $n=ve[Ee];ve[Ee]=$n?[dt].concat($n):dt}return Object.assign(Pe,{type:dt,replaced:!0}),!le&&Nn.replaceAsync||Nn.replace?(mn&&mn({replacing:!0}),Re(Ee,Nn[le||!Nn.replaceAsync?"replace":"replaceAsync"](fe,Pe),be&&"readonly",Pe,_e,et,dt)):(mn&&mn({typeDetected:!0}),Re(Ee,fe,be&&"readonly",Pe,_e,et,dt))}}return fe}return Qe.length?le&&I.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(ie(ot,Qe)).then(mt):!le&&I.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():I.stringification&&le?[mt(ot)]:le?mt(ot):Promise.resolve(mt(ot))}},{key:"encapsulateSync",value:function(E,P,I){return this.encapsulate(E,P,g(g({throwOnBadSyncType:!0},I),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(E,P,I){return this.encapsulate(E,P,g(g({throwOnBadSyncType:!0},I),{},{sync:!1}))}},{key:"revive",value:function(E,P){var I=E&&E.$types;if(!I)return E;if(I===!0)return E.$;var ie=(P=g(g({sync:!0},this.options),P)).sync,le=[],Te={},ve=!0;I.$&&B(I.$)&&(E=E.$,I=I.$,ve=!1);var Be=this;function Xe(mt,gt){var Re=y(Be.revivers[mt]||[],1)[0];if(!Re)throw new Error("Unregistered type: "+mt);return ie&&!("revive"in Re)?gt:Re[ie&&Re.revive?"revive":!ie&&Re.reviveAsync?"reviveAsync":"revive"](gt,Te)}var Qe=[];function be(mt){return C(mt,rt)?void 0:mt}var st,ot=function(){var gt=[];if(Object.entries(I).forEach(function(Re){var Ft=y(Re,2),Ee=Ft[0],fe=Ft[1];fe!=="#"&&[].concat(fe).forEach(function(Pe){y(Be.revivers[Pe]||[null,{}],2)[1].plain&&(gt.push({keypath:Ee,type:Pe}),delete I[Ee])})}),gt.length)return gt.sort(Ht).reduce(function Re(Ft,Ee){var fe=Ee.keypath,Pe=Ee.type;if(U(Ft))return Ft.then(function(et){return Re(et,{keypath:fe,type:Pe})});var _e=we(E,fe);if(C(_e=Xe(Pe,_e),N))return _e.then(function(et){var mn=ge(E,fe,et);mn===et&&(E=mn)});var Ve=ge(E,fe,_e);Ve===_e&&(E=Ve)},void 0)}();return C(ot,N)?st=ot.then(function(){return E}):(st=function mt(gt,Re,Ft,Ee,fe){if(!ve||gt!=="$types"){var Pe=I[gt],_e=nt(Re);if(_e||B(Re)){var Ve=_e?new Array(Re.length):{};for(Me(Re).forEach(function(ht){var gn=mt(gt+(gt?".":"")+te(ht),Re[ht],Ft||Ve,Ve,ht),Yt=function(Fn){return C(Fn,rt)?Ve[ht]=void 0:Fn!==void 0&&(Ve[ht]=Fn),Fn};C(gn,N)?Qe.push(gn.then(function(Hn){return Yt(Hn)})):Yt(gn)}),Re=Ve;le.length;){var et=y(le[0],4),mn=et[0],yt=et[1],sn=et[2],Nn=et[3],dt=we(mn,yt);if(dt===void 0)break;sn[Nn]=dt,le.splice(0,1)}}if(!Pe)return Re;if(Pe==="#"){var $n=we(Ft,Re.slice(1));return $n===void 0&&le.push([Ft,Re.slice(1),Ee,fe]),$n}return[].concat(Pe).reduce(function ht(gn,Yt){return C(gn,N)?gn.then(function(Hn){return ht(Hn,Yt)}):Xe(Yt,gn)},Re)}}("",E,null),Qe.length&&(st=N.resolve(st).then(function(mt){return N.all([mt].concat(Qe))}).then(function(mt){return y(mt,1)[0]}))),U(st)?ie&&P.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():C(st,N)?st.p.then(be):st:!ie&&P.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():ie?be(st):Promise.resolve(be(st))}},{key:"reviveSync",value:function(E,P){return this.revive(E,g(g({throwOnBadSyncType:!0},P),{},{sync:!0}))}},{key:"reviveAsync",value:function(E,P){return this.revive(E,g(g({throwOnBadSyncType:!0},P),{},{sync:!1}))}},{key:"register",value:function(E,P){return P=P||{},[].concat(E).forEach(function I(ie){var le=this;if(nt(ie))return ie.map(function(Te){return I.call(le,Te)});ie&&Me(ie).forEach(function(Te){if(Te==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(k.JSON_TYPES.includes(Te))throw new TypeError("Plain JSON object types are reserved as type names");var ve=ie[Te],Be=ve&&ve.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Xe=Be.filter(function(gt){return gt.type===Te});if(Xe.length&&(Be.splice(Be.indexOf(Xe[0]),1),delete this.revivers[Te],delete this.types[Te]),typeof ve=="function"){var Qe=ve;ve={test:function(Re){return Re&&Re.constructor===Qe},replace:function(Re){return g({},Re)},revive:function(Re){return Object.assign(Object.create(Qe.prototype),Re)}}}else if(nt(ve)){var be=y(ve,3);ve={test:be[0],replace:be[1],revive:be[2]}}if(ve&&ve.test){var st={type:Te,test:ve.test.bind(ve)};ve.replace&&(st.replace=ve.replace.bind(ve)),ve.replaceAsync&&(st.replaceAsync=ve.replaceAsync.bind(ve));var ot=typeof P.fallback=="number"?P.fallback:P.fallback?0:Number.POSITIVE_INFINITY;if(ve.testPlainObjects?this.plainObjectReplacers.splice(ot,0,st):this.nonplainObjectReplacers.splice(ot,0,st),ve.revive||ve.reviveAsync){var mt={};ve.revive&&(mt.revive=ve.revive.bind(ve)),ve.reviveAsync&&(mt.reviveAsync=ve.reviveAsync.bind(ve)),this.revivers[Te]=[mt,{plain:ve.testPlainObjects}]}this.types[Te]=ve}},this)},this),this}}]),k}(),rt=function k(){u(this,k)};rt.__typeson__type__="TypesonUndefined",Ae.Undefined=rt,Ae.Promise=N,Ae.isThenable=U,Ae.toStringTag=T,Ae.hasConstructorOf=C,Ae.isObject=w,Ae.isPlainObject=B,Ae.isUserObject=function k(b){if(!b||T(b)!=="Object")return!1;var E=R(b);return!E||C(b,Object)||k(E)},Ae.escapeKeyPathComponent=te,Ae.unescapeKeyPathComponent=J,Ae.getByKeyPath=we,Ae.getJSONType=function(b){return b===null?"null":Array.isArray(b)?"array":c(b)},Ae.JSON_TYPES=["null","boolean","number","string","array","object"];for(var _t={userObject:{test:function(b,E){return Ae.isUserObject(b)},replace:function(b){return function(P){for(var I=1;I<arguments.length;I++){var ie=arguments[I]!=null?arguments[I]:{};I%2?s(Object(ie),!0).forEach(function(le){i(P,le,ie[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(ie)):s(Object(ie)).forEach(function(le){Object.defineProperty(P,le,Object.getOwnPropertyDescriptor(ie,le))})}return P}({},b)},revive:function(b){return b}}},j=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(b,E){return!!Array.isArray(b)&&(Object.keys(b).some(function(P){return String(Number.parseInt(P))!==P})&&(E.iterateIn="object",E.addLength=!0),!0)},replace:function(b,E){return E.iterateUnsetNumeric=!0,b},revive:function(b){if(Array.isArray(b))return b;var E=[];return Object.keys(b).forEach(function(P){var I=b[P];E[P]=I}),E}}},{sparseUndefined:{test:function(b,E){return b===void 0&&E.ownKeys===!1},replace:function(b){return 0},revive:function(b){}}}],K={undef:{test:function(b,E){return b===void 0&&(E.ownKeys||!("ownKeys"in E))},replace:function(b){return 0},revive:function(b){return new Ae.Undefined}}},G={StringObject:{test:function(b){return Ae.toStringTag(b)==="String"&&n(b)==="object"},replace:function(b){return String(b)},revive:function(b){return new String(b)}},BooleanObject:{test:function(b){return Ae.toStringTag(b)==="Boolean"&&n(b)==="object"},replace:function(b){return!!b},revive:function(b){return new Boolean(b)}},NumberObject:{test:function(b){return Ae.toStringTag(b)==="Number"&&n(b)==="object"},replace:function(b){return Number(b)},revive:function(b){return new Number(b)}}},q=[{nan:{test:function(b){return Number.isNaN(b)},replace:function(b){return"NaN"},revive:function(b){return Number.NaN}}},{infinity:{test:function(b){return b===Number.POSITIVE_INFINITY},replace:function(b){return"Infinity"},revive:function(b){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(b){return b===Number.NEGATIVE_INFINITY},replace:function(b){return"-Infinity"},revive:function(b){return Number.NEGATIVE_INFINITY}}}],ue={date:{test:function(b){return Ae.toStringTag(b)==="Date"},replace:function(b){var E=b.getTime();return Number.isNaN(E)?"NaN":E},revive:function(b){return b==="NaN"?new Date(Number.NaN):new Date(b)}}},M={regexp:{test:function(b){return Ae.toStringTag(b)==="RegExp"},replace:function(b){return{source:b.source,flags:(b.global?"g":"")+(b.ignoreCase?"i":"")+(b.multiline?"m":"")+(b.sticky?"y":"")+(b.unicode?"u":"")}},revive:function(b){var E=b.source,P=b.flags;return new RegExp(E,P)}}},$={map:{test:function(b){return Ae.toStringTag(b)==="Map"},replace:function(b){return l(b.entries())},revive:function(b){return new Map(b)}}},V={set:{test:function(b){return Ae.toStringTag(b)==="Set"},replace:function(b){return l(b.values())},revive:function(b){return new Set(b)}}},H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",W=new Uint8Array(256),Y=0;Y<H.length;Y++)W[H.charCodeAt(Y)]=Y;var se=function(b,E,P){P==null&&(P=b.byteLength);for(var I=new Uint8Array(b,0,P),ie=I.length,le="",Te=0;Te<ie;Te+=3)le+=H[I[Te]>>2],le+=H[(3&I[Te])<<4|I[Te+1]>>4],le+=H[(15&I[Te+1])<<2|I[Te+2]>>6],le+=H[63&I[Te+2]];return ie%3==2?le=le.slice(0,-1)+"=":ie%3==1&&(le=le.slice(0,-2)+"=="),le},X=function(b){var E,P,I,ie,le=b.length,Te=.75*b.length,ve=0;b[b.length-1]==="="&&(Te--,b[b.length-2]==="="&&Te--);for(var Be=new ArrayBuffer(Te),Xe=new Uint8Array(Be),Qe=0;Qe<le;Qe+=4)E=W[b.charCodeAt(Qe)],P=W[b.charCodeAt(Qe+1)],I=W[b.charCodeAt(Qe+2)],ie=W[b.charCodeAt(Qe+3)],Xe[ve++]=E<<2|P>>4,Xe[ve++]=(15&P)<<4|I>>2,Xe[ve++]=(3&I)<<6|63&ie;return Be},ee={arraybuffer:{test:function(b){return Ae.toStringTag(b)==="ArrayBuffer"},replace:function(b,E){E.buffers||(E.buffers=[]);var P=E.buffers.indexOf(b);return P>-1?{index:P}:(E.buffers.push(b),se(b))},revive:function(b,E){if(E.buffers||(E.buffers=[]),n(b)==="object")return E.buffers[b.index];var P=X(b);return E.buffers.push(P),P}}},Q=typeof self>"u"?Bd:self,ye={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(k){var b=k,E=Q[b];E&&(ye[k.toLowerCase()]={test:function(I){return Ae.toStringTag(I)===b},replace:function(I,ie){var le=I.buffer,Te=I.byteOffset,ve=I.length;ie.buffers||(ie.buffers=[]);var Be=ie.buffers.indexOf(le);return Be>-1?{index:Be,byteOffset:Te,length:ve}:(ie.buffers.push(le),{encoded:se(le),byteOffset:Te,length:ve})},revive:function(I,ie){ie.buffers||(ie.buffers=[]);var le,Te=I.byteOffset,ve=I.length,Be=I.encoded,Xe=I.index;return"index"in I?le=ie.buffers[Xe]:(le=X(Be),ie.buffers.push(le)),new E(le,Te,ve)}})});var ce={dataview:{test:function(b){return Ae.toStringTag(b)==="DataView"},replace:function(b,E){var P=b.buffer,I=b.byteOffset,ie=b.byteLength;E.buffers||(E.buffers=[]);var le=E.buffers.indexOf(P);return le>-1?{index:le,byteOffset:I,byteLength:ie}:(E.buffers.push(P),{encoded:se(P),byteOffset:I,byteLength:ie})},revive:function(b,E){E.buffers||(E.buffers=[]);var P,I=b.byteOffset,ie=b.byteLength,le=b.encoded,Te=b.index;return"index"in b?P=E.buffers[Te]:(P=X(le),E.buffers.push(P)),new DataView(P,I,ie)}}},he={IntlCollator:{test:function(b){return Ae.hasConstructorOf(b,Intl.Collator)},replace:function(b){return b.resolvedOptions()},revive:function(b){return new Intl.Collator(b.locale,b)}},IntlDateTimeFormat:{test:function(b){return Ae.hasConstructorOf(b,Intl.DateTimeFormat)},replace:function(b){return b.resolvedOptions()},revive:function(b){return new Intl.DateTimeFormat(b.locale,b)}},IntlNumberFormat:{test:function(b){return Ae.hasConstructorOf(b,Intl.NumberFormat)},replace:function(b){return b.resolvedOptions()},revive:function(b){return new Intl.NumberFormat(b.locale,b)}}};function pe(k){for(var b=new Uint8Array(k.length),E=0;E<k.length;E++)b[E]=k.charCodeAt(E);return b.buffer}var re={file:{test:function(b){return Ae.toStringTag(b)==="File"},replace:function(b){var E=new XMLHttpRequest;if(E.overrideMimeType("text/plain; charset=x-user-defined"),E.open("GET",URL.createObjectURL(b),!1),E.send(),E.status!==200&&E.status!==0)throw new Error("Bad File access: "+E.status);return{type:b.type,stringContents:E.responseText,name:b.name,lastModified:b.lastModified}},revive:function(b){var E=b.name,P=b.type,I=b.stringContents,ie=b.lastModified;return new File([pe(I)],E,{type:P,lastModified:ie})},replaceAsync:function(b){return new Ae.Promise(function(E,P){var I=new FileReader;I.addEventListener("load",function(){E({type:b.type,stringContents:I.result,name:b.name,lastModified:b.lastModified})}),I.addEventListener("error",function(){P(I.error)}),I.readAsBinaryString(b)})}}},Se={bigint:{test:function(b){return typeof b=="bigint"},replace:function(b){return String(b)},revive:function(b){return BigInt(b)}}},Oe={bigintObject:{test:function(b){return n(b)==="object"&&Ae.hasConstructorOf(b,BigInt)},replace:function(b){return String(b)},revive:function(b){return new Object(BigInt(b))}}},me={cryptokey:{test:function(b){return Ae.toStringTag(b)==="CryptoKey"&&b.extractable},replaceAsync:function(b){return new Ae.Promise(function(E,P){crypto.subtle.exportKey("jwk",b).catch(function(I){P(I)}).then(function(I){E({jwk:I,algorithm:b.algorithm,usages:b.usages})})})},revive:function(b){var E=b.jwk,P=b.algorithm,I=b.usages;return crypto.subtle.importKey("jwk",E,P,!0,I)}}};return[_t,K,j,G,q,ue,M,{imagedata:{test:function(b){return Ae.toStringTag(b)==="ImageData"},replace:function(b){return{array:l(b.data),width:b.width,height:b.height}},revive:function(b){return new ImageData(new Uint8ClampedArray(b.array),b.width,b.height)}}},{imagebitmap:{test:function(b){return Ae.toStringTag(b)==="ImageBitmap"||b&&b.dataset&&b.dataset.toStringTag==="ImageBitmap"},replace:function(b){var E=document.createElement("canvas");return E.getContext("2d").drawImage(b,0,0),E.toDataURL()},revive:function(b){var E=document.createElement("canvas"),P=E.getContext("2d"),I=document.createElement("img");return I.addEventListener("load",function(){P.drawImage(I,0,0)}),I.src=b,E},reviveAsync:function(b){var E=document.createElement("canvas"),P=E.getContext("2d"),I=document.createElement("img");return I.addEventListener("load",function(){P.drawImage(I,0,0)}),I.src=b,createImageBitmap(E)}}},re,{file:re.file,filelist:{test:function(b){return Ae.toStringTag(b)==="FileList"},replace:function(b){for(var E=[],P=0;P<b.length;P++)E[P]=b.item(P);return E},revive:function(b){return new(function(){function E(){r(this,E),this._files=arguments[0],this.length=this._files.length}return function(I,ie,le){return ie&&o(I.prototype,ie),I}(E,[{key:"item",value:function(I){return this._files[I]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),E}())(b)}}},{blob:{test:function(b){return Ae.toStringTag(b)==="Blob"},replace:function(b){var E=new XMLHttpRequest;if(E.overrideMimeType("text/plain; charset=x-user-defined"),E.open("GET",URL.createObjectURL(b),!1),E.send(),E.status!==200&&E.status!==0)throw new Error("Bad Blob access: "+E.status);return{type:b.type,stringContents:E.responseText}},revive:function(b){var E=b.type,P=b.stringContents;return new Blob([pe(P)],{type:E})},replaceAsync:function(b){return new Ae.Promise(function(E,P){var I=new FileReader;I.addEventListener("load",function(){E({type:b.type,stringContents:I.result})}),I.addEventListener("error",function(){P(I.error)}),I.readAsBinaryString(b)})}}}].concat(typeof Map=="function"?$:[],typeof Set=="function"?V:[],typeof ArrayBuffer=="function"?ee:[],typeof Uint8Array=="function"?ye:[],typeof DataView=="function"?ce:[],typeof Intl<"u"?he:[],typeof crypto<"u"?me:[],typeof BigInt<"u"?[Se,Oe]:[])})}),Ri="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ts=new Uint8Array(256);for(var ql=0;ql<Ri.length;ql++)Ts[Ri.codePointAt(ql)]=ql;var Vd=function(e,n,r){r==null&&(r=e.byteLength);for(var o=new Uint8Array(e,0,r),i=o.length,s="",l=0;l<i;l+=3)s+=Ri[o[l]>>2],s+=Ri[(o[l]&3)<<4|o[l+1]>>4],s+=Ri[(o[l+1]&15)<<2|o[l+2]>>6],s+=Ri[o[l+2]&63];return i%3===2?s=s.slice(0,-1)+"=":i%3===1&&(s=s.slice(0,-2)+"=="),s},m1=function(e){var n=e.length,r=e.length*.75,o=0,i,s,l,a;e[e.length-1]==="="&&(r--,e[e.length-2]==="="&&r--);for(var c=new ArrayBuffer(r),u=new Uint8Array(c),d=0;d<n;d+=4)i=Ts[e.codePointAt(d)],s=Ts[e.codePointAt(d+1)],l=Ts[e.codePointAt(d+2)],a=Ts[e.codePointAt(d+3)],u[o++]=i<<2|s>>4,u[o++]=(s&15)<<4|l>>2,u[o++]=(l&3)<<6|a&63;return c},ux=typeof self>"u"?global:self,g1={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(t){var e=t,n=ux[e];n&&(g1[t.toLowerCase()+"2"]={test:function(r){return Dc.toStringTag(r)===e},replace:function(r){var o=r.buffer,i=r.byteOffset,s=r.length;return{buffer:o,byteOffset:i,length:s}},revive:function(r){var o=r.buffer,i=r.byteOffset,s=r.length;return new n(o,i,s)}})});var dx={arraybuffer:{test:function(t){return Dc.toStringTag(t)==="ArrayBuffer"},replace:function(t){return Vd(t,0,t.byteLength)},revive:function(t){var e=m1(t);return e}}},er=new Dc().register(cx),fx="FileReaderSync"in self,Ga=[],wa=0;er.register([dx,g1,{blob2:{test:function(t){return Dc.toStringTag(t)==="Blob"},replace:function(t){if(t.isClosed)throw new Error("The Blob is closed");if(fx){var e=p1(t,"binary"),n=Vd(e,0,e.byteLength);return{type:t.type,data:n}}else{Ga.push(t);var r={type:t.type,data:{start:wa,end:wa+t.size}};return wa+=t.size,r}},finalize:function(t,e){t.data=Vd(e,0,e.byteLength)},revive:function(t){var e=t.type,n=t.data;return new Blob([m1(n)],{type:e})}}}]);er.mustFinalize=function(){return Ga.length>0};er.finalize=function(t){return $o(void 0,void 0,void 0,function(){var e,n,r,o,i,s,l,a,c,u,d,h;return pr(this,function(m){switch(m.label){case 0:return[4,h1(new Blob(Ga),"binary")];case 1:if(e=m.sent(),t){for(n=0,r=t;n<r.length;n++)if(o=r[n],o.$types){i=o.$types,s=i.$,s&&(i=i.$);for(l in i)a=i[l],c=er.types[a],c&&c.finalize&&(u=zt.getByKeyPath(o,s?"$."+l:l),c.finalize(u,e.slice((d=u.data)===null||d===void 0?void 0:d.start,(h=u.data)===null||h===void 0?void 0:h.end)))}}return Ga=[],wa=0,[2]}})})};var hx=2e3;function px(t,e){return $o(this,void 0,void 0,function(){function n(){return $o(this,void 0,void 0,function(){var d,h,m,g,y,x,O,A,N,L;return pr(this,function(D){switch(D.label){case 0:return[4,Promise.all(o.map(function(R){return R.count()}))];case 1:d=D.sent(),d.forEach(function(R,F){return s[F].rowCount=R}),u.totalRows=d.reduce(function(R,F){return R+F}),h=JSON.stringify(a,void 0,l?2:void 0),m=h.lastIndexOf("]"),g=h.substring(0,m),i.push(g),y=e.filter,x=e.transform,O=function(R){var F,U,T,C,B,w,te,J,we,ge,ne,Me;return pr(this,function(nt){switch(nt.label){case 0:F=t.table(R),U=F.schema.primKey,T=!!U.keyPath,C=e.numRowsPerChunk||hx,B=T?{tableName:F.name,inbound:!0,rows:[]}:{tableName:F.name,inbound:!1,rows:[]},w=JSON.stringify(B,void 0,l?2:void 0),l&&(w=w.split(`
`).join(`
    `)),te=w.lastIndexOf("]"),i.push(w.substring(0,te)),J=null,we=0,ge=!0,ne=function(){var We,it,pt,Ht,Ae,K,rt,_t,j,K;return pr(this,function(G){switch(G.label){case 0:return c&&zt.ignoreTransaction(function(){return c(u)}),We=J==null?F.limit(C):F.where(":id").above(J).limit(C),[4,We.toArray()];case 1:return it=G.sent(),it.length===0?[2,"break"]:(J!=null&&we>0&&(i.push(","),l&&i.push(`
      `)),ge=it.length===C,T?(pt=y?it.filter(function(q){return y(R,q)}):it,Ht=x?pt.map(function(q){return x(R,q).value}):pt,Ae=Ht.map(function(q){return er.encapsulate(q)}),er.mustFinalize()?[4,zt.waitFor(er.finalize(Ae))]:[3,3]):[3,4]);case 2:G.sent(),G.label=3;case 3:return K=JSON.stringify(Ae,void 0,l?2:void 0),l&&(K=K.split(`
`).join(`
      `)),i.push(new Blob([K.substring(1,K.length-1)])),we=Ht.length,J=it.length>0?zt.getByKeyPath(it[it.length-1],U.keyPath):null,[3,8];case 4:return[4,We.primaryKeys()];case 5:return rt=G.sent(),_t=rt.map(function(q,ue){return[q,it[ue]]}),y&&(_t=_t.filter(function(q){var ue=q[0],M=q[1];return y(R,M,ue)})),x&&(_t=_t.map(function(q){var ue=q[0],M=q[1],$=x(R,M,ue);return[$.key,$.value]})),j=_t.map(function(q){return er.encapsulate(q)}),er.mustFinalize()?[4,zt.waitFor(er.finalize(j))]:[3,7];case 6:G.sent(),G.label=7;case 7:K=JSON.stringify(j,void 0,l?2:void 0),l&&(K=K.split(`
`).join(`
      `)),i.push(new Blob([K.substring(1,K.length-1)])),we=_t.length,J=rt.length>0?rt[rt.length-1]:null,G.label=8;case 8:return u.completedRows+=it.length,[2]}})},nt.label=1;case 1:return ge?[5,ne()]:[3,3];case 2:return Me=nt.sent(),Me==="break"?[3,3]:[3,1];case 3:return i.push(w.substr(te)),u.completedTables+=1,u.completedTables<u.totalTables&&i.push(","),[2]}})},A=0,N=s,D.label=2;case 2:return A<N.length?(L=N[A].name,[5,O(L)]):[3,5];case 3:D.sent(),D.label=4;case 4:return A++,[3,2];case 5:return i.push(h.substr(m)),u.done=!0,c&&zt.ignoreTransaction(function(){return c(u)}),[2]}})})}var r,o,i,s,l,a,c,u;return pr(this,function(d){switch(d.label){case 0:e=e||{},r=e.skipTables?e.skipTables:[],o=t.tables.filter(function(h){return!r.includes(h.name)}),i=[],s=o.map(function(h){return{name:h.name,schema:lx(h),rowCount:0}}),l=e.prettyJson,a={formatName:"dexie",formatVersion:1,data:{databaseName:t.name,databaseVersion:t.verno,tables:s,data:[]}},c=e.progressCallback,u={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:s.length},d.label=1;case 1:return d.trys.push([1,,6,7]),e.noTransaction?[4,n()]:[3,3];case 2:return d.sent(),[3,5];case 3:return[4,t.transaction("r",t.tables,n)];case 4:d.sent(),d.label=5;case 5:return[3,7];case 6:return er.finalize(),[7];case 7:return[2,new Blob(i,{type:"text/json"})]}})})}var mx=1,gx={Stream:function(){}},yx=Uf(function(t,e){(function(n){var r=typeof process=="object"&&Up?Up:self;n.parser=function(T){return new m(T)},n.CParser=m,n.CStream=y,n.createStream=g,n.MAX_BUFFER_LENGTH=10*1024*1024,n.DEBUG=r.CDEBUG==="debug",n.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",n.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var o={textNode:void 0,numberNode:""},i=n.EVENTS.filter(function(T){return T!=="error"&&T!=="end"}),s=0,l;n.STATE={BEGIN:s++,VALUE:s++,OPEN_OBJECT:s++,CLOSE_OBJECT:s++,OPEN_ARRAY:s++,CLOSE_ARRAY:s++,TEXT_ESCAPE:s++,STRING:s++,BACKSLASH:s++,END:s++,OPEN_KEY:s++,CLOSE_KEY:s++,TRUE:s++,TRUE2:s++,TRUE3:s++,FALSE:s++,FALSE2:s++,FALSE3:s++,FALSE4:s++,NULL:s++,NULL2:s++,NULL3:s++,NUMBER_DECIMAL_POINT:s++,NUMBER_DIGIT:s++};for(var a in n.STATE)n.STATE[n.STATE[a]]=a;s=n.STATE;const c={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(T){function C(){this.__proto__=T}return C.prototype=T,new C}),Object.getPrototypeOf||(Object.getPrototypeOf=function(T){return T.__proto__}),Object.keys||(Object.keys=function(T){var C=[];for(var B in T)T.hasOwnProperty(B)&&C.push(B);return C});function u(T){var C=Math.max(n.MAX_BUFFER_LENGTH,10),B=0;for(var w in o){var te=T[w]===void 0?0:T[w].length;if(te>C)switch(w){case"text":closeText(T);break;default:D(T,"Max buffer length exceeded: "+w)}B=Math.max(B,te)}T.bufferCheckPosition=n.MAX_BUFFER_LENGTH-B+T.position}function d(T){for(var C in o)T[C]=o[C]}var h=/[\\"\n]/g;function m(T){if(!(this instanceof m))return new m(T);var C=this;d(C),C.bufferCheckPosition=n.MAX_BUFFER_LENGTH,C.q=C.c=C.p="",C.opt=T||{},C.closed=C.closedRoot=C.sawRoot=!1,C.tag=C.error=null,C.state=s.BEGIN,C.stack=new Array,C.position=C.column=0,C.line=1,C.slashed=!1,C.unicodeI=0,C.unicodeS=null,C.depth=0,x(C,"onready")}m.prototype={end:function(){R(this)},write:U,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{l=gx.Stream}catch{l=function(){}}function g(T){return new y(T)}function y(T){if(!(this instanceof y))return new y(T);this._parser=new m(T),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var C=this;l.apply(C),this._parser.onend=function(){C.emit("end")},this._parser.onerror=function(B){C.emit("error",B),C._parser.error=null},i.forEach(function(B){Object.defineProperty(C,"on"+B,{get:function(){return C._parser["on"+B]},set:function(w){if(!w)return C.removeAllListeners(B),C._parser["on"+B]=w,w;C.on(B,w)},enumerable:!0,configurable:!1})})}y.prototype=Object.create(l.prototype,{constructor:{value:y}}),y.prototype.write=function(T){T=new Buffer(T);for(var C=0;C<T.length;C++){var B=T[C];if(this.bytes_remaining>0){for(var w=0;w<this.bytes_remaining;w++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+w]=T[w];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,C=C+w-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&B>=128)if(B>=194&&B<=223&&(this.bytes_in_sequence=2),B>=224&&B<=239&&(this.bytes_in_sequence=3),B>=240&&B<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+C>T.length){for(var te=0;te<=T.length-1-C;te++)this.temp_buffs[this.bytes_in_sequence][te]=T[C+te];return this.bytes_remaining=C+this.bytes_in_sequence-T.length,!0}else{this.string=T.slice(C,C+this.bytes_in_sequence).toString(),C=C+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var J=C;J<T.length&&!(T[J]>=128);J++);this.string=T.slice(C,J).toString(),this._parser.write(this.string),this.emit("data",this.string),C=J-1}},y.prototype.end=function(T){return T&&T.length&&this._parser.write(T.toString()),this._parser.end(),!0},y.prototype.on=function(T,C){var B=this;return!B._parser["on"+T]&&i.indexOf(T)!==-1&&(B._parser["on"+T]=function(){var w=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);w.splice(0,0,T),B.emit.apply(B,w)}),l.prototype.on.call(B,T,C)},y.prototype.destroy=function(){d(this._parser),this.emit("close")};function x(T,C,B){n.INFO&&console.log("-- emit",C,B),T[C]&&T[C](B)}function O(T,C,B){A(T),x(T,C,B)}function A(T,C){T.textNode=L(T.opt,T.textNode),T.textNode!==void 0&&x(T,C||"onvalue",T.textNode),T.textNode=void 0}function N(T){T.numberNode&&x(T,"onvalue",parseFloat(T.numberNode)),T.numberNode=""}function L(T,C){return C===void 0||(T.trim&&(C=C.trim()),T.normalize&&(C=C.replace(/\s+/g," "))),C}function D(T,C){return A(T),C+=`
Line: `+T.line+`
Column: `+T.column+`
Char: `+T.c,C=new Error(C),T.error=C,x(T,"onerror",C),T}function R(T){return(T.state!==s.VALUE||T.depth!==0)&&D(T,"Unexpected end"),A(T),T.c="",T.closed=!0,x(T,"onend"),m.call(T,T.opt),T}function F(T){return T===c.carriageReturn||T===c.lineFeed||T===c.space||T===c.tab}function U(T){var C=this;if(this.error)throw this.error;if(C.closed)return D(C,"Cannot write after close. Assign an onready handler.");if(T===null)return R(C);var B=0,w=T.charCodeAt(0),te=C.p;for(n.DEBUG&&console.log("write -> ["+T+"]");w&&(te=w,C.c=w=T.charCodeAt(B++),te!==w?C.p=te:te=C.p,!!w);)switch(n.DEBUG&&console.log(B,w,n.STATE[C.state]),C.position++,w===c.lineFeed?(C.line++,C.column=0):C.column++,C.state){case s.BEGIN:w===c.openBrace?C.state=s.OPEN_OBJECT:w===c.openBracket?C.state=s.OPEN_ARRAY:F(w)||D(C,"Non-whitespace before {[.");continue;case s.OPEN_KEY:case s.OPEN_OBJECT:if(F(w))continue;if(C.state===s.OPEN_KEY)C.stack.push(s.CLOSE_KEY);else if(w===c.closeBrace){x(C,"onopenobject"),this.depth++,x(C,"oncloseobject"),this.depth--,C.state=C.stack.pop()||s.VALUE;continue}else C.stack.push(s.CLOSE_OBJECT);w===c.doubleQuote?C.state=s.STRING:D(C,'Malformed object key should start with "');continue;case s.CLOSE_KEY:case s.CLOSE_OBJECT:if(F(w))continue;C.state,s.CLOSE_KEY,w===c.colon?(C.state===s.CLOSE_OBJECT?(C.stack.push(s.CLOSE_OBJECT),A(C,"onopenobject"),this.depth++):A(C,"onkey"),C.state=s.VALUE):w===c.closeBrace?(O(C,"oncloseobject"),this.depth--,C.state=C.stack.pop()||s.VALUE):w===c.comma?(C.state===s.CLOSE_OBJECT&&C.stack.push(s.CLOSE_OBJECT),A(C),C.state=s.OPEN_KEY):D(C,"Bad object");continue;case s.OPEN_ARRAY:case s.VALUE:if(F(w))continue;if(C.state===s.OPEN_ARRAY)if(x(C,"onopenarray"),this.depth++,C.state=s.VALUE,w===c.closeBracket){x(C,"onclosearray"),this.depth--,C.state=C.stack.pop()||s.VALUE;continue}else C.stack.push(s.CLOSE_ARRAY);w===c.doubleQuote?C.state=s.STRING:w===c.openBrace?C.state=s.OPEN_OBJECT:w===c.openBracket?C.state=s.OPEN_ARRAY:w===c.t?C.state=s.TRUE:w===c.f?C.state=s.FALSE:w===c.n?C.state=s.NULL:w===c.minus?C.numberNode+="-":c._0<=w&&w<=c._9?(C.numberNode+=String.fromCharCode(w),C.state=s.NUMBER_DIGIT):D(C,"Bad value");continue;case s.CLOSE_ARRAY:if(w===c.comma)C.stack.push(s.CLOSE_ARRAY),A(C,"onvalue"),C.state=s.VALUE;else if(w===c.closeBracket)O(C,"onclosearray"),this.depth--,C.state=C.stack.pop()||s.VALUE;else{if(F(w))continue;D(C,"Bad array")}continue;case s.STRING:C.textNode===void 0&&(C.textNode="");var J=B-1,we=C.slashed,ge=C.unicodeI;e:for(;;){for(n.DEBUG&&console.log(B,w,n.STATE[C.state],we);ge>0;)if(C.unicodeS+=String.fromCharCode(w),w=T.charCodeAt(B++),C.position++,ge===4?(C.textNode+=String.fromCharCode(parseInt(C.unicodeS,16)),ge=0,J=B-1):ge++,!w)break e;if(w===c.doubleQuote&&!we){C.state=C.stack.pop()||s.VALUE,C.textNode+=T.substring(J,B-1),C.position+=B-1-J;break}if(w===c.backslash&&!we&&(we=!0,C.textNode+=T.substring(J,B-1),C.position+=B-1-J,w=T.charCodeAt(B++),C.position++,!w))break;if(we){if(we=!1,w===c.n?C.textNode+=`
`:w===c.r?C.textNode+="\r":w===c.t?C.textNode+="	":w===c.f?C.textNode+="\f":w===c.b?C.textNode+="\b":w===c.u?(ge=1,C.unicodeS=""):C.textNode+=String.fromCharCode(w),w=T.charCodeAt(B++),C.position++,J=B-1,w)continue;break}h.lastIndex=B;var ne=h.exec(T);if(ne===null){B=T.length+1,C.textNode+=T.substring(J,B-1),C.position+=B-1-J;break}if(B=ne.index+1,w=T.charCodeAt(ne.index),!w){C.textNode+=T.substring(J,B-1),C.position+=B-1-J;break}}C.slashed=we,C.unicodeI=ge;continue;case s.TRUE:w===c.r?C.state=s.TRUE2:D(C,"Invalid true started with t"+w);continue;case s.TRUE2:w===c.u?C.state=s.TRUE3:D(C,"Invalid true started with tr"+w);continue;case s.TRUE3:w===c.e?(x(C,"onvalue",!0),C.state=C.stack.pop()||s.VALUE):D(C,"Invalid true started with tru"+w);continue;case s.FALSE:w===c.a?C.state=s.FALSE2:D(C,"Invalid false started with f"+w);continue;case s.FALSE2:w===c.l?C.state=s.FALSE3:D(C,"Invalid false started with fa"+w);continue;case s.FALSE3:w===c.s?C.state=s.FALSE4:D(C,"Invalid false started with fal"+w);continue;case s.FALSE4:w===c.e?(x(C,"onvalue",!1),C.state=C.stack.pop()||s.VALUE):D(C,"Invalid false started with fals"+w);continue;case s.NULL:w===c.u?C.state=s.NULL2:D(C,"Invalid null started with n"+w);continue;case s.NULL2:w===c.l?C.state=s.NULL3:D(C,"Invalid null started with nu"+w);continue;case s.NULL3:w===c.l?(x(C,"onvalue",null),C.state=C.stack.pop()||s.VALUE):D(C,"Invalid null started with nul"+w);continue;case s.NUMBER_DECIMAL_POINT:w===c.period?(C.numberNode+=".",C.state=s.NUMBER_DIGIT):D(C,"Leading zero not followed by .");continue;case s.NUMBER_DIGIT:c._0<=w&&w<=c._9?C.numberNode+=String.fromCharCode(w):w===c.period?(C.numberNode.indexOf(".")!==-1&&D(C,"Invalid number has two dots"),C.numberNode+="."):w===c.e||w===c.E?((C.numberNode.indexOf("e")!==-1||C.numberNode.indexOf("E")!==-1)&&D(C,"Invalid number has two exponential"),C.numberNode+="e"):w===c.plus||w===c.minus?(te===c.e||te===c.E||D(C,"Invalid symbol in number"),C.numberNode+=String.fromCharCode(w)):(N(C),B--,C.state=C.stack.pop()||s.VALUE);continue;default:D(C,"Unknown state: "+C.state)}return C.position>=C.bufferCheckPosition&&u(C),C}})(e)});function bx(t){var e=0,n=vx(),r={pullAsync:function(o){return $o(this,void 0,void 0,function(){var i,s,l;return pr(this,function(a){switch(a.label){case 0:return i=t.slice(e,e+o),e+=o,[4,h1(i,"text")];case 1:return s=a.sent(),l=n.write(s),r.result=l||{},[2,l]}})})},pullSync:function(o){var i=t.slice(e,e+o);e+=o;var s=p1(i,"text"),l=n.write(s);return r.result=l||{},l},done:function(){return n.done()},eof:function(){return e>=t.size},result:{}};return r}function vx(t){var e=yx.parser(),n=0,r,o=[],i,s,l=!1,a=!1;return e.onopenobject=function(c){var u={};u.incomplete=!0,r||(r=u),i&&(o.push([s,i,a]),a?i.push(u):i[s]=u),i=u,s=c,a=!1,++n},e.onkey=function(c){return s=c},e.onvalue=function(c){return a?i.push(c):i[s]=c},e.oncloseobject=function(){var c;delete i.incomplete,s=null,--n===0?l=!0:(c=o.pop(),s=c[0],i=c[1],a=c[2])},e.onopenarray=function(){var c=[];c.incomplete=!0,r||(r=c),i&&(o.push([s,i,a]),a?i.push(c):i[s]=c),i=c,a=!0,s=null,++n},e.onclosearray=function(){var c;delete i.incomplete,s=null,--n===0?l=!0:(c=o.pop(),s=c[0],i=c[1],a=c[2])},{write:function(c){return e.write(c),r},done:function(){return l}}}var y1=1024;function b1(t,e){return $o(this,void 0,void 0,function(){var n,r,o,i;return pr(this,function(s){switch(s.label){case 0:return e=e||{},n=e.chunkSizeBytes||y1*1024,[4,w1(t,n)];case 1:return r=s.sent(),o=r.result.data,i=new zt(e.name!==void 0?e.name:o.databaseName),i.version(o.databaseVersion).stores(ax(o)),[4,v1(i,r,e.name!==void 0?Ja(Ja({},e),{acceptNameDiff:!0}):e)];case 2:return s.sent(),[2,i]}})})}function v1(t,e,n){return $o(this,void 0,void 0,function(){function r(){return $o(this,void 0,void 0,function(){var y,x,O,A,N;return pr(this,function(L){switch(L.label){case 0:y=function(D){var R,F,U,T,C,B,w,te,J,we,ge,ne,Me;return pr(this,function(nt){switch(nt.label){case 0:if(c.includes(D.tableName))return[2,"continue"];if(!D.rows)return[2,"break"];if(!D.rows.incomplete&&D.rows.length===0)return[2,"continue"];if(u&&zt.ignoreTransaction(function(){return u(d)}),R=D.tableName,F=t.table(R),U=a.tables.filter(function(We){return We.name===R})[0].schema,!F){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(D.tableName," is missing in installed database"))}if(!n.acceptChangedPrimaryKey&&U.split(",")[0]!=F.schema.primKey.src)throw new Error("Primary key differs for table ".concat(D.tableName,". "));for(T=D.rows,C=[],B=0;B<T.length&&(w=T[B],!w.incomplete);B++)C.push(er.revive(w));return te=n.filter,J=n.transform,we=te?D.inbound?C.filter(function(We){return te(R,We)}):C.filter(function(We){var it=We[0],pt=We[1];return te(R,pt,it)}):C,J&&(we=we.map(D.inbound?function(We){return J(R,We).value}:function(We){var it=We[0],pt=We[1],Ht=J(R,pt,it);return[Ht.key,Ht.value]})),ge=D.inbound?[void 0,we]:[we.map(function(We){return We[0]}),C.map(function(We){return We[1]})],ne=ge[0],Me=ge[1],n.overwriteValues?[4,F.bulkPut(Me,ne)]:[3,2];case 1:return nt.sent(),[3,4];case 2:return[4,F.bulkAdd(Me,ne)];case 3:nt.sent(),nt.label=4;case 4:return d.completedRows+=C.length,C.incomplete||(d.completedTables+=1),T.splice(0,C.length),[2]}})},x=0,O=a.data,L.label=1;case 1:return x<O.length?(A=O[x],[5,y(A)]):[3,4];case 2:if(N=L.sent(),N==="break")return[3,4];L.label=3;case 3:return x++,[3,1];case 4:for(;a.data.length>0&&a.data[0].rows&&!a.data[0].rows.incomplete;)a.data.splice(0,1);return!i.done()&&!i.eof()?l?(i.pullSync(o),[3,7]):[3,5]:[3,8];case 5:return[4,zt.waitFor(i.pullAsync(o))];case 6:L.sent(),L.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var o,i,s,l,a,c,u,d,h,m,g;return pr(this,function(y){switch(y.label){case 0:return n=n||{},o=n.chunkSizeBytes||y1*1024,[4,w1(e,o)];case 1:if(i=y.sent(),s=i.result,l="FileReaderSync"in self,a=s.data,c=n.skipTables?n.skipTables:[],!n.acceptNameDiff&&t.name!==a.databaseName)throw new Error("Name differs. Current database name is ".concat(t.name," but export is ").concat(a.databaseName));if(!n.acceptVersionDiff&&t.verno!==a.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(t.verno," but export is ").concat(a.databaseVersion));if(u=n.progressCallback,d={done:!1,completedRows:0,completedTables:0,totalRows:a.tables.reduce(function(x,O){return x+O.rowCount},0),totalTables:a.tables.length},u&&zt.ignoreTransaction(function(){return u(d)}),!n.clearTablesBeforeImport)return[3,5];h=0,m=t.tables,y.label=2;case 2:return h<m.length?(g=m[h],c.includes(g.name)?[3,4]:[4,g.clear()]):[3,5];case 3:y.sent(),y.label=4;case 4:return h++,[3,2];case 5:return n.noTransaction?[4,r()]:[3,7];case 6:return y.sent(),[3,9];case 7:return[4,t.transaction("rw",t.tables,r)];case 8:y.sent(),y.label=9;case 9:return d.done=!0,u&&zt.ignoreTransaction(function(){return u(d)}),[2]}})})}function w1(t,e){return $o(this,void 0,void 0,function(){var n,r;return pr(this,function(o){switch(o.label){case 0:n="slice"in t?bx(t):t,o.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(e)];case 2:return o.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(r=n.result,!r||r.formatName!="dexie")throw new Error("Given file is not a dexie export");if(r.formatVersion>mx)throw new Error("Format version ".concat(r.formatVersion," not supported"));if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}})})}zt.prototype.export=function(t){return px(this,t)};zt.prototype.import=function(t,e){return v1(this,t,e)};zt.import=function(t,e){return b1(t,e)};function wx(t){return Ng()?(Yw(t),!0):!1}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function Cx(t,e){const n=kf(e==null?void 0:e.initialValue),r=t.subscribe({next:o=>n.value=o,error:e==null?void 0:e.onError});return wx(()=>{r.unsubscribe()}),n}let Jl;const kx=new Uint8Array(16);function Sx(){if(!Jl&&(Jl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Jl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Jl(kx)}const Zt=[];for(let t=0;t<256;++t)Zt.push((t+256).toString(16).slice(1));function xx(t,e=0){return Zt[t[e+0]]+Zt[t[e+1]]+Zt[t[e+2]]+Zt[t[e+3]]+"-"+Zt[t[e+4]]+Zt[t[e+5]]+"-"+Zt[t[e+6]]+Zt[t[e+7]]+"-"+Zt[t[e+8]]+Zt[t[e+9]]+"-"+Zt[t[e+10]]+Zt[t[e+11]]+Zt[t[e+12]]+Zt[t[e+13]]+Zt[t[e+14]]+Zt[t[e+15]]}const Tx=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Kp={randomUUID:Tx};function Ex(t,e,n){if(Kp.randomUUID&&!e&&!t)return Kp.randomUUID();t=t||{};const r=t.random||(t.rng||Sx)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let o=0;o<16;++o)e[n+o]=r[o];return e}return xx(r)}const Ox=async t=>await t.export(),Mx={data(){return{dbRef:null,db:null,databaseName:null,dblist:[],useObservable:Cx,liveQuery:f1,uuid:Ex,syncdb:{},DBstores:{Settings:"uuid, settings, lastupdated",Writer:"uuid, title, description, files, lastupdated",Cards:"uuid, title,description,content,style,labels,options,lastupdated",Files:"uuid, writerid, title, content, lastupdated",Snowflake:"uuid, title, description,content,lastupdated",Timeline:"uuid, title, description,content,lastupdated",Gridplanner:"uuid, title, description,content,lastupdated",Mindmap:"uuid, title, description,content,lastupdated",ImageLibrary:"uuid, title, base64"}}},methods:{async getDatabases(){},async initDatabase(){console.log(this.databaseName),this.databaseName||(console.log("New Db Created"),this.databaseName=this.uuid()),this.db||(console.log("Creating new database"),this.db=await new zt(this.databaseName),console.log("Creating new stores"),this.db.version(1).stores(this.DBstores));let t=await this.db.Settings.toArray(),e={};if(t){if(t.length)e=t[0],this.dbRef=e.uuid;else{let n=JSON.parse(JSON.stringify(this.$root.SettingsTemplate));n.uuid=this.$root.uuid(),n.ProjectName="New Project",await this.$root.AddRecord("Settings",n),this.dbRef=n.uuid}if(this.syncdb.Settings=await this.useObservable(this.liveQuery(async()=>await this.db.Settings.get(this.dbRef))),this.syncdb.Cards=await this.useObservable(this.liveQuery(async()=>await this.db.Cards.toArray())),this.syncdb.Files=await this.useObservable(this.liveQuery(async()=>await this.db.Files.toArray())),this.syncdb.Gridplanner=await this.useObservable(this.liveQuery(async()=>await this.db.Gridplanner.toArray())),this.syncdb.ImageLibrary=await this.useObservable(this.liveQuery(async()=>await this.db.ImageLibrary.toArray())),this.syncdb.Mindmap=await this.useObservable(this.liveQuery(async()=>await this.db.Mindmap.toArray())),this.syncdb.Snowflake=await this.useObservable(this.liveQuery(async()=>await this.db.Snowflake.toArray())),this.syncdb.Timeline=await this.useObservable(this.liveQuery(async()=>await this.db.Timeline.toArray())),this.syncdb.Writer=await this.useObservable(this.liveQuery(async()=>await this.db.Writer.toArray())),console.log(this.$root.currentTool,this.$root.urlSelected),this.$root.currentTool){console.log("New Window link");const n=this.$root.currentTool,r=n.charAt(0).toUpperCase()+n.slice(1);this.$root.urlSelected&&(this.$root.tools[this.$root.currentTool].selected=await this.db[r].get(this.$root.urlSelected))}}},async dbImport(t){this.databaseName=t.data.databaseName;const e=new Blob([JSON.stringify(t)],{type:"text/json;charset=utf-8"});this.db=await b1(e,{clearTablesBeforeImport:!0}),await this.initDatabase()},async dbExport(){const t=await new zt(this.databaseName).open(),e=await Ox(t);return t.close(),e},async getImage(t){return await this.$root.db.ImageLibrary.get(t)},async AddRecord(t,e){return e.lastupdated=Date.now(),await this.db[t].add(e)},async UpdateRecord(t,e,n){return n.uuid=e,n.lastupdated=Date.now(),await this.db[t].put(JSON.parse(JSON.stringify(n)))},async DeleteRecord(t,e){return await this.db[t].delete(e)},clearDatabase(){this.$root.db.Settings.clear(),this.$root.db.Writer.clear(),this.$root.db.Cards.clear(),this.$root.db.Files.clear(),this.$root.db.Mindmap.clear(),this.$root.db.ImageLibrary.clear(),this.$root.db.Gridplanner.clear(),this.$root.db.Snowflake.clear(),this.$root.db.Timeline.clear()},async closeProject(){this.$swal({title:"Are you sure?",text:"This will close the project any unsaved changes will be lost!",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, close it!"}).then(async t=>{t.isConfirmed&&(window.removeEventListener("beforeunload",this.$root.unloadEvent),this.dbRef=null,this.$root.clearDatabase(),await this.$root.db.delete(),location.reload())})},async closeAndDeleteDatabase(){this.db&&(await this.db.close(),await zt.delete(this.databaseName),console.log(`Database ${this.databaseName} closed and deleted.`))}},async mounted(){this.databaseName?await this.initDatabase():this.getDatabases(),console.log("closing db",this.$root.mainwindow),this.$root.mainwindow&&(console.log("closing db"),window.addEventListener("beforeunload",this.closeAndDeleteDatabase))},beforeDestroy(){console.log("closing db",this.$root.mainwindow),this.$root.mainwindow&&(console.log("closing db"),window.addEventListener("beforeunload",this.closeAndDeleteDatabase))}},Ax={data(){return{SettingsTemplate:{documentprefs:{align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-align")),fontsize:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-fontsize")),lspacing:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-lspacing")),indentation:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-indentation")),pspacing:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-pspacing")),page:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-page")),font:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-font")),color:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-color")),bgcolor:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-bgcolor")),h1align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h1align")),h2align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h2align")),h3align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h3align")),h4align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h4align")),distractionfree_font:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--distractionfree-font")),distractionfree_bg:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--distractionfree-bg")),distractionfree_fg:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--distractionfree-fg")),typesound:!1,caretfocus:!1}},writerTemplate:{title:"Another Great Novel",author:"A.N. Author",description:" ... ",files:[]},fileTemplate:{title:"New Section",content:"",notes:[]}}},methods:{dotrim(t){return t[0]===" "&&(t=t.substring(1)),t},async makeNewCard(t){let e=this.$root.uuid();t&&(e=t);let n={};n.uuid=e,n.title="",n.description="",n.showdesc=!1,n.content="",n.labels=[],n.images=[],n.style="",n.options={},n.color="cardcolor0",console.log(n),await this.$root.AddRecord("Cards",n),this.$root.modal=!0,this.$root.tools.cards.selected=n},async makeMindmap(){let t=this.$root.uuid(),e={};e.uuid=t,e.title="New Mindmap",e.description="",e.content={links:[],nodes:{}},await this.$root.AddRecord("Mindmap",e),this.$root.tools.mindmap.selected=e},async makeTimeline(){let t=this.$root.uuid(),e={};e.uuid=t,e.title="New Timeline",e.description="",e.content={items:[]},await this.$root.AddRecord("Timeline",e),this.$root.tools.timeline.selected=e},async makeGridplanner(){let t=this.$root.uuid(),e={};e.uuid=t,e.title="New Gridplanner",e.description="",e.content={headers:[],rows:[]},await this.$root.AddRecord("Gridplanner",e),this.$root.tools.gridplanner.selected=e},async makeSnowflake(){let t=this.$root.uuid(),e={};e.uuid=t,e.title="",e.description="",e.content=[],await this.$root.AddRecord("Snowflake",e),this.$root.tools.snowflake.selected=e}}},_x={data(){return{}},methods:{handleKeyPress(t){this.$root.databaseName&&t.keyCode==83&&(navigator.userAgent.includes("Mac")?t.metaKey:t.ctrlKey)&&(t.preventDefault(),this.saveFile())},async openFile(){try{[this.$root.fileHandle]=await window.showOpenFilePicker({types:[{description:"Wavemaker Cards File",accept:{"application/json":[".wmc"]},extensions:["wmc"]}]});const e=await(await this.$root.fileHandle.getFile()).text();this.$root.jsonData=JSON.parse(e),this.$root.dbImport(this.$root.jsonData)}catch(t){console.error("Error opening file:",t)}},async snapShot(){let t=this.sanitizeFilename(this.$root.syncdb.Settings.ProjectName);const n=await(await this.$root.dbExport()).text();this.$root.jsonData=JSON.parse(n);const r=new Blob([JSON.stringify(this.$root.jsonData,null,2)],{type:"application/json"}),o=URL.createObjectURL(r),i=document.createElement("a");i.href=o,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)},sanitizeFilename(t){const e=new Date,n=`${e.getDate()}-${e.getMonth()+1}-${e.getFullYear()}-${e.getHours()}-${e.getMinutes()}-${e.getSeconds()}`;return t.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")+`-${n}.wmc`},async saveFile(){const e=await(await this.$root.dbExport()).text();this.$root.jsonData=JSON.parse(e);try{this.$root.fileHandle||(this.$root.fileHandle=await window.showSaveFilePicker({suggestedName:"untitled.wmc",types:[{description:"Wavemaker Cards File",accept:{"application/json":[".wmc"]}}]}));const n=await this.$root.fileHandle.createWritable();await n.write(JSON.stringify(this.$root.jsonData,null,2)),await n.close(),this.$swal({title:"Your File Was saved",text:"The file was saved successfully",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK"})}catch{this.$swal({title:"Your file was not saved",text:"Please try again, or use other export tools to make a backup.",icon:"error",confirmButtonColor:"#3085d6",confirmButtonText:"OK"})}},async clearFile(){this.$root.closeProject()}},created(){"launchQueue"in window&&"files"in window.LaunchParams.prototype&&window.launchQueue.setConsumer(async t=>{if(!t.files.length)return;this.$root.fileHandle=t.files[0];const n=await(await this.$root.fileHandle.getFile()).text();this.$root.jsonData=JSON.parse(n),await this.$root.dbImport(this.$root.jsonData)})},mounted(){window.addEventListener("keydown",this.handleKeyPress)},beforeDestroy(){window.removeEventListener("keydown",this.handleKeyPress)}},Nx={data(){return{windowID:null,parentID:null,mainwindow:!0,childWindows:[]}},methods:{openNewWindow(){let t="",e="";this.$root.currentTool&&(t=this.$root.currentTool,this.$root.tools[this.$root.currentTool].selected&&(e=this.$root.tools[this.$root.currentTool].selected.uuid,console.log(e)));let n=window.location.href;n=n+"?parentid="+this.windowID,n=n+"&dbname="+this.$root.databaseName,n=n+"&tool="+t,n=n+"&selected="+e;const r=window.open(n,"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=800,height=600");this.childWindows.push(r),r.onload=function(){new URL(r.location)}},closeChildWindows(){this.childWindows.forEach(t=>{t&&!t.closed&&t.close()}),this.childWindows=[]}},async created(){const t=new URLSearchParams(window.location.search);for(const[e,n]of t.entries())console.log(`${e}: ${n}`);this.parentID=t.get("parentid"),this.$root.databaseName=t.get("dbname"),this.$root.currentTool=t.get("tool"),this.$root.urlSelected=t.get("selected"),console.log("SubWindow",this.parentID),this.parentID&&(this.mainwindow=!1),this.windowID=this.uuid(),window.addEventListener("beforeunload",this.closeChildWindows)},beforeDestroy(){window.removeEventListener("beforeunload",this.closeChildWindows)}},ct=(t,e)=>{const n=t.__vccOpts||t;for(const[r,o]of e)n[r]=o;return n},$x={},Px={xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 453.543 453.543","xml:space":"preserve",class:"logo"};function Dx(t,e){return z(),Z("svg",Px,e[0]||(e[0]=[S("path",{d:"M464.632 212.901 337.566 83.292a55.653 55.653 0 0 0-79.771 0l-126.63 129.386a19.322 19.322 0 0 0 0 27.122l38.359 39.127 25.5 24.232c7.628 7.114 19.18 7.114 26.808 0l51.219-48.242c14.167-13.338 35.744-13.338 49.693 0l51.219 48.242c7.629 7.114 19.18 7.114 26.809 0l25.501-24.232 38.359-38.904c7.193-7.337 7.193-19.563 0-27.122z",class:"logotop",transform:"matrix(.6795 0 0 .6795 21.648 1.33)"},null,-1),S("path",{d:"m58.804 367.853 198.991 202.973a55.657 55.657 0 0 0 79.771 0l198.991-202.973c34.437-35.125 10.244-45.574-15.039-70.029L490.35 267.59c-7.409-7.336-19.18-7.113-26.808 0l-51.218 48.242c-14.169 13.339-35.744 13.339-49.694 0l-51.219-48.242a19.508 19.508 0 0 0-26.809 0l-51.219 48.242c-14.167 13.339-35.744 13.339-49.693 0l-51.219-48.242a19.508 19.508 0 0 0-26.809 0l-28.77 27.123c-26.37 24.899-54.05 36.236-18.088 73.14z",class:"logobtm",transform:"matrix(.6795 0 0 .6795 21.648 1.33)"},null,-1)]))}const Kf=ct($x,[["render",Dx],["__scopeId","data-v-c0fdd851"]]),Ix={components:{Logo:Kf},methods:{}},Lx={class:"toptoolbar"},Bx={class:"floatRight"},Vx={key:3};function Rx(t,e,n,r,o,i){const s=Je("Logo");return z(),Z("div",Lx,[S("div",null,[S("button",{onClick:e[0]||(e[0]=l=>t.$root.currentTool=null),class:"titlebtn"},[tt(s,{style:{width:"30px",height:"30px"}})]),S("button",{onClick:e[1]||(e[1]=l=>t.$root.currentTool="writer")},e[14]||(e[14]=[S("svg",{"data-v-92328502":"",version:"1.1",viewBox:"0 0 24 24"},[S("path",{"data-v-92328502":"",d:"M19 2L14 6.5V17.5L19 13V2M6.5 5C4.55 5 2.45 5.4 1 6.5V21.16C1 21.41 1.25 21.66 1.5 21.66C1.6 21.66 1.65 21.59 1.75 21.59C3.1 20.94 5.05 20.5 6.5 20.5C8.45 20.5 10.55 20.9 12 22C13.35 21.15 15.8 20.5 17.5 20.5C19.15 20.5 20.85 20.81 22.25 21.56C22.35 21.61 22.4 21.59 22.5 21.59C22.75 21.59 23 21.34 23 21.09V6.5C22.4 6.05 21.75 5.75 21 5.5V19C19.9 18.65 18.7 18.5 17.5 18.5C15.8 18.5 13.35 19.15 12 20V6.5C10.55 5.4 8.45 5 6.5 5Z"})],-1)])),S("button",{onClick:e[2]||(e[2]=l=>t.$root.currentTool="gridplanner")},e[15]||(e[15]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"view-grid"),S("path",{d:"M3,11H11V3H3M3,21H11V13H3M13,21H21V13H13M13,3V11H21V3"})],-1)])),S("button",{onClick:e[3]||(e[3]=l=>t.$root.currentTool="mindmap")},e[16]||(e[16]=[S("svg",{"data-v-92328502":"",version:"1.1",viewBox:"0 0 24 24"},[S("path",{"data-v-92328502":"",d:"M21 16V13C21 11.89 20.11 11 19 11H13V8H15V2H9V8H11V11H5C3.89 11 3 11.89 3 13V16H1V22H7V16H5V13H11V16H9V22H15V16H13V13H19V16H17V22H23V16H21M11 4H13V6H11V4M5 20H3V18H5V20M13 20H11V18H13V20M21 20H19V18H21V20Z"})],-1)])),S("button",{onClick:e[4]||(e[4]=l=>t.$root.currentTool="timeline")},e[17]||(e[17]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"timeline-outline"),S("path",{d:"M4 2V8H2V2H4M2 22V16H4V22H2M5 12C5 13.11 4.11 14 3 14C1.9 14 1 13.11 1 12C1 10.9 1.9 10 3 10C4.11 10 5 10.9 5 12M24 6V18C24 19.11 23.11 20 22 20H10C8.9 20 8 19.11 8 18V14L6 12L8 10V6C8 4.89 8.9 4 10 4H22C23.11 4 24 4.89 24 6M10 6V18H22V6H10Z"})],-1)])),S("button",{onClick:e[5]||(e[5]=l=>t.$root.currentTool="snowflake")},e[18]||(e[18]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"snowflake"),S("path",{d:"M20.79,13.95L18.46,14.57L16.46,13.44V10.56L18.46,9.43L20.79,10.05L21.31,8.12L19.54,7.65L20,5.88L18.07,5.36L17.45,7.69L15.45,8.82L13,7.38V5.12L14.71,3.41L13.29,2L12,3.29L10.71,2L9.29,3.41L11,5.12V7.38L8.5,8.82L6.5,7.69L5.92,5.36L4,5.88L4.47,7.65L2.7,8.12L3.22,10.05L5.55,9.43L7.55,10.56V13.45L5.55,14.58L3.22,13.96L2.7,15.89L4.47,16.36L4,18.12L5.93,18.64L6.55,16.31L8.55,15.18L11,16.62V18.88L9.29,20.59L10.71,22L12,20.71L13.29,22L14.7,20.59L13,18.88V16.62L15.5,15.17L17.5,16.3L18.12,18.63L20,18.12L19.53,16.35L21.3,15.88L20.79,13.95M9.5,10.56L12,9.11L14.5,10.56V13.44L12,14.89L9.5,13.44V10.56Z"})],-1)])),S("button",{onClick:e[6]||(e[6]=l=>t.$root.currentTool="cardsdatabase")},e[19]||(e[19]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"cards-outline"),S("path",{d:"M11.19,2.25C10.93,2.25 10.67,2.31 10.42,2.4L3.06,5.45C2.04,5.87 1.55,7.04 1.97,8.05L6.93,20C7.24,20.77 7.97,21.23 8.74,21.25C9,21.25 9.27,21.22 9.53,21.1L16.9,18.05C17.65,17.74 18.11,17 18.13,16.25C18.14,16 18.09,15.71 18,15.45L13,3.5C12.71,2.73 11.97,2.26 11.19,2.25M14.67,2.25L18.12,10.6V4.25A2,2 0 0,0 16.12,2.25M20.13,3.79V12.82L22.56,6.96C22.97,5.94 22.5,4.78 21.47,4.36M11.19,4.22L16.17,16.24L8.78,19.3L3.8,7.29"})],-1)]))]),S("span",Bx,[t.$root.dbRef?$e("",!0):(z(),Z("button",{key:0,onClick:e[7]||(e[7]=(...l)=>t.$root.openFileFromGoogleDrive&&t.$root.openFileFromGoogleDrive(...l))},e[20]||(e[20]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"Google Drive"),S("path",{d:"M7.71,3.5L1.15,15L4.58,21L11.13,9.5M9.73,15L6.3,21H19.42L22.85,15M22.28,14L15.42,2H8.58L8.57,2L15.43,14H22.28Z"})],-1)]))),t.$root.dbRef?$e("",!0):(z(),Z("button",{key:1,onClick:e[8]||(e[8]=(...l)=>t.$root.openFileFromDropBox&&t.$root.openFileFromDropBox(...l))},e[21]||(e[21]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"Dropbox"),S("path",{d:"M3 6.2L8 9.39L13 6.2L8 3L3 6.2M13 6.2L18 9.39L23 6.2L18 3L13 6.2M3 12.55L8 15.74L13 12.55L8 9.35L3 12.55M18 9.35L13 12.55L18 15.74L23 12.55L18 9.35M8.03 16.8L13.04 20L18.04 16.8L13.04 13.61L8.03 16.8Z"})],-1)]))),t.$root.dbRef?$e("",!0):(z(),Z("button",{key:2,onClick:e[9]||(e[9]=l=>t.$root.openFile())},e[22]||(e[22]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"Load your Project"),S("path",{d:"M20 18H4V8H20M20 6H12L10 4H4A2 2 0 0 0 2 6V18A2 2 0 0 0 4 20H20A2 2 0 0 0 22 18V8A2 2 0 0 0 20 6M16 17H14V13H11L15 9L19 13H16Z"})],-1)]))),t.$root.dbRef?(z(),Z("span",Vx,[S("button",{title:"Open in a new window",onClick:e[10]||(e[10]=l=>t.$root.openNewWindow())},e[23]||(e[23]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"Open New Window"),S("path",{d:"M12,10L8,14H11V20H13V14H16M19,4H5C3.89,4 3,4.9 3,6V18A2,2 0 0,0 5,20H9V18H5V8H19V18H15V20H19A2,2 0 0,0 21,18V6A2,2 0 0,0 19,4Z"})],-1)])),S("button",{onClick:e[11]||(e[11]=l=>t.$root.snapShot())},e[24]||(e[24]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"Snapshot Project"),S("path",{d:"M20,4H16.83L15,2H9L7.17,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6A2,2 0 0,0 20,4M20,18H4V6H8.05L9.88,4H14.12L15.95,6H20V18M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15Z"})],-1)])),S("button",{onClick:e[12]||(e[12]=l=>t.$root.saveFile())},e[25]||(e[25]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"Save Project"),S("path",{d:"M17 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3M19 19H5V5H16.17L19 7.83V19M12 12C10.34 12 9 13.34 9 15S10.34 18 12 18 15 16.66 15 15 13.66 12 12 12M6 6H15V10H6V6Z"})],-1)])),S("button",{onClick:e[13]||(e[13]=l=>t.$root.clearFile())},e[26]||(e[26]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"Close Project"),S("path",{d:"M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V5H19V19M17,8.4L13.4,12L17,15.6L15.6,17L12,13.4L8.4,17L7,15.6L10.6,12L7,8.4L8.4,7L12,10.6L15.6,7L17,8.4Z"})],-1)]))])):$e("",!0)])])}const Hx=ct(Ix,[["render",Rx],["__scopeId","data-v-9d109284"]]),Fx={name:"CardEditor",data(){return{colorlist:["cardcolor0","cardcolor1","cardcolor2","cardcolor3","cardcolor4","cardcolor5","cardcolor6"]}},methods:{update(){this.$root.UpdateRecord("Cards",this.$root.tools.cards.selected.uuid,this.$root.tools.cards.selected)},setColor(t){console.log(t),this.$root.tools.cards.selected.color=t,this.update()}}},jx={key:0},zx=["onClick"];function Ux(t,e,n,r,o,i){return z(),Z(Ge,null,[t.$root.tools.cards.selected?$e("",!0):(z(),Z("div",jx,[e[9]||(e[9]=nr(" no card picked - so its gonna be link or new ")),S("button",{onClick:e[0]||(e[0]=s=>t.$root.makeNewCard())},"New Card")])),t.$root.tools.cards.selected?(z(),Z("div",{key:1,class:mr(["card",t.$root.tools.cards.selected.color])},[S("div",null,[(z(!0),Z(Ge,null,on(o.colorlist,s=>(z(),Z("button",{class:mr(["colorbtn",s]),onClick:l=>i.setColor(s)},null,10,zx))),256))]),S("h1",null,[Tt(S("input",{type:"text",placeholder:"Card Title","onUpdate:modelValue":e[1]||(e[1]=s=>t.$root.tools.cards.selected.title=s),onBlur:e[2]||(e[2]=s=>i.update())},null,544),[[Mt,t.$root.tools.cards.selected.title]])]),e[11]||(e[11]=S("h2",null,"Description",-1)),S("label",null,[Tt(S("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=s=>t.$root.tools.cards.selected.showdesc=s),onBlur:e[4]||(e[4]=s=>i.update())},null,544),[[uS,t.$root.tools.cards.selected.showdesc]]),e[10]||(e[10]=nr(" Show on card"))]),S("p",null,[Tt(S("textarea",{placeholder:"card summary","onUpdate:modelValue":e[5]||(e[5]=s=>t.$root.tools.cards.selected.description=s),onBlur:e[6]||(e[6]=s=>i.update())},null,544),[[Mt,t.$root.tools.cards.selected.description]])]),e[12]||(e[12]=S("h2",null,"Content",-1)),S("p",null,[Tt(S("textarea",{placeholder:"card details","onUpdate:modelValue":e[7]||(e[7]=s=>t.$root.tools.cards.selected.content=s),onBlur:e[8]||(e[8]=s=>i.update())},null,544),[[Mt,t.$root.tools.cards.selected.content]])]),e[13]||(e[13]=S("p",null,null,-1))],2)):$e("",!0)],64)}const Kx=ct(Fx,[["render",Ux],["__scopeId","data-v-ab29f6c2"]]),Wx={components:{CardEditor:Kx}},qx={class:"centreme"};function Jx(t,e,n,r,o,i){const s=Je("CardEditor");return z(),Z(Ge,null,[S("div",{class:"blackout",onClick:e[0]||(e[0]=l=>t.$root.modal=!1)}),S("div",qx,[S("button",{onClick:e[1]||(e[1]=l=>t.$root.modal=!1),class:"modalclose"},e[2]||(e[2]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"close-circle-outline"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})],-1)])),tt(s)])],64)}const Gx=ct(Wx,[["render",Jx],["__scopeId","data-v-21b499cb"]]),Yx={},Xx={class:"footerbar"};function Zx(t,e){return z(),Z("div",Xx," Wavemaker Cards v5 © 2021 ")}const Qx=ct(Yx,[["render",Zx]]),e2={data(){return{deferredPrompt:null,showInstallBanner:!1}},mounted(){window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),this.deferredPrompt=t,this.showInstallBanner=!0})},methods:{async installApp(){this.showInstallBanner=!1,this.deferredPrompt.prompt();const{outcome:t}=await this.deferredPrompt.userChoice;console.log(t==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),this.deferredPrompt=null}}},t2={key:0,class:"install-banner"};function n2(t,e,n,r,o,i){return o.showInstallBanner?(z(),Z("div",t2,[e[1]||(e[1]=S("p",null,"Install our app for a better experience!",-1)),S("button",{onClick:e[0]||(e[0]=(...s)=>i.installApp&&i.installApp(...s))},"Install")])):$e("",!0)}const r2=ct(e2,[["render",n2],["__scopeId","data-v-7d957fbf"]]),o2={name:"About",components:{Logo:Kf},data(){return{}},methods:{async newProject(){this.$root.initDatabase()}}},i2={class:"center-box"},s2={class:"hero"},l2={style:{display:"flex","justify-content":"center","align-items":"center"}},a2={style:{display:"block"}};function c2(t,e,n,r,o,i){const s=Je("Logo");return z(),Z("div",i2,[S("div",s2,[S("div",l2,[tt(s,{style:{width:"50px"}}),e[2]||(e[2]=S("h1",null,"Wavemaker Cards",-1))]),e[5]||(e[5]=S("p",null,[S("strong",null,"Version 5")],-1)),e[6]||(e[6]=S("p",{style:{padding:"10px","font-size":"1rem"}},"Start Writing",-1)),S("div",a2,[S("button",{class:"btn welcomebtn",onClick:e[0]||(e[0]=l=>i.newProject())},e[3]||(e[3]=[S("svg",{class:"icon",viewBox:"0 0 24 24"},[S("path",{d:"M10,16.5V7.5L16,12M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"})],-1),nr(" Create a new project")])),S("button",{class:"btn welcomebtn",onClick:e[1]||(e[1]=l=>t.$root.openFile())},e[4]||(e[4]=[S("svg",{class:"icon",viewBox:"0 0 24 24"},[S("path",{d:"M19,20H4C2.89,20 2,19.1 2,18V6C2,4.89 2.89,4 4,4H10L12,6H19A2,2 0 0,1 21,8H21L4,8V18L6.14,10H23.21L20.93,18.5C20.7,19.37 19.92,20 19,20Z"})],-1),S("span",null," Load a project (.wmc file) ",-1)]))])])])}const u2=ct(o2,[["render",c2],["__scopeId","data-v-200f914c"]]),d2={methods:{update(){this.$root.UpdateRecord("Settings",this.$root.syncdb.Settings.uuid,this.$root.syncdb.Settings)}}},f2={key:0};function h2(t,e,n,r,o,i){return this.$root.syncdb.Settings?(z(),Z("span",f2,[Tt(S("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>this.$root.syncdb.Settings.ProjectName=s),placeholder:"Project Name",onBlur:e[1]||(e[1]=s=>i.update())},null,544),[[Mt,this.$root.syncdb.Settings.ProjectName]])])):$e("",!0)}const p2=ct(d2,[["render",h2]]),m2={data(){return{currentdate:new Date,wordcountprogress:0,month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},computed:{monthDays(){const t=new Date(this.currentdate),e=t.getFullYear(),n=t.getMonth();return new Date(e,n+1,0).getDate()},prevMonthDays(){const t=new Date(this.currentdate),e=t.getFullYear(),n=t.getMonth();return new Date(e,n,0).getDate()},nextMonthDays(){const t=new Date(this.currentdate),e=t.getFullYear(),n=t.getMonth();return new Date(e,n-1,0).getDate()}},mounted(){this.$root.syncdb.Settings.tracker||(this.$root.syncdb.Settings.tracker={wordcount:0,target:2500,log:{"2025-02-01":123,"2025-02-02":432,"2025-02-03":234,"2025-02-04":345,"2025-02-05":456,"2025-02-06":567,"2025-02-07":678,"2025-02-08":789,"2025-02-09":890,"2025-02-10":901,"2025-02-11":123,"2025-02-12":234,"2025-02-13":345,"2025-02-14":456,"2025-02-15":567,"2025-02-16":678,"2025-02-17":789,"2025-02-18":890,"2025-02-19":901,"2025-02-20":123,"2025-02-21":234,"2025-02-22":345,"2025-02-23":456,"2025-02-24":567,"2025-02-25":678,"2025-02-26":789,"2025-02-27":890,"2025-02-28":901,"2025-03-01":123,"2025-03-02":234,"2025-03-03":345,"2025-03-04":456,"2025-03-05":567,"2025-03-06":678,"2025-03-07":789,"2025-03-08":890,"2025-03-09":901,"2025-03-10":123,"2025-03-11":234,"2025-03-12":345,"2025-03-13":456,"2025-03-14":567,"2025-03-15":678,"2025-03-16":789,"2025-03-17":890,"2025-03-18":901,"2025-03-19":123,"2025-03-20":234,"2025-03-21":345}})},methods:{update(){this.$root.UpdateRecord("Settings",this.$root.syncdb.Settings.uuid,this.$root.syncdb.Settings)},monthName(t=0){let e=this.currentdate.getMonth()+t;return e===-1&&(e=11),e===12&&(e=0),this.month[e]},getLogValue(t,e){const n=this.currentdate.getFullYear(),r=this.currentdate.getMonth()+e,o=String(t).padStart(2,"0"),i=`${n}-${String(r).padStart(2,"0")}-${o}`,s=this.$root.syncdb.Settings.tracker.log[i]||0,l=this.$root.syncdb.Settings.tracker.target||1,a=s/l;return{count:s,percent:a}},advanceMonth(){const t=new Date(this.currentdate);t.setMonth(t.getMonth()+1),this.currentdate=t},reduceMonth(){const t=new Date(this.currentdate);t.setMonth(t.getMonth()-1),this.currentdate=t}}},g2={key:0},y2={class:"calendars"},b2={class:"month"},v2={class:"calendar"},w2=["title"],C2={class:"month"},k2={class:"calendar"},S2=["title"],x2={class:"progress-container"},T2={class:"progress-circle",viewBox:"0 0 36 36"};function E2(t,e,n,r,o,i){return this.$root.syncdb.Settings.tracker?(z(),Z("div",g2,[S("h3",null,xn(t.$root.syncdb.Settings.tracker.wordcount)+" Words",1),S("label",null,[e[3]||(e[3]=nr("Daily Wordcount Target ")),Tt(S("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=s=>t.$root.syncdb.Settings.tracker.target=s)},null,512),[[Mt,t.$root.syncdb.Settings.tracker.target]])]),e[5]||(e[5]=S("p",{style:{"text-align":"center"}},"Your Goals",-1)),S("div",null,[S("button",{onClick:e[1]||(e[1]=(...s)=>i.reduceMonth&&i.reduceMonth(...s))},"Previous Month"),S("button",{onClick:e[2]||(e[2]=(...s)=>i.advanceMonth&&i.advanceMonth(...s))},"Next Month")]),S("div",y2,[S("div",null,[S("div",b2,xn(i.monthName(-1)),1),S("div",v2,[(z(!0),Z(Ge,null,on(i.prevMonthDays,s=>(z(),Z("div",{class:"day",title:i.getLogValue(s,0).count+" Words"},[S("div",{class:"block",style:rr(`opacity:${i.getLogValue(s,0).percent}`)},null,4)],8,w2))),256))])]),S("div",null,[S("div",C2,xn(i.monthName()),1),S("div",k2,[(z(!0),Z(Ge,null,on(i.monthDays,s=>(z(),Z("div",{class:"day",title:i.getLogValue(s,1).count+" Words"},[S("div",{class:"block",style:rr(`opacity:${i.getLogValue(s,1).percent}`)},null,4)],8,S2))),256))])]),S("div",x2,[(z(),Z("svg",T2,[e[4]||(e[4]=S("path",{class:"circle-bg",d:`M18 2.0845
                     a 15.9155 15.9155 0 0 1 0 31.831
                     a 15.9155 15.9155 0 0 1 0 -31.831`},null,-1)),S("path",{class:"circle",style:rr(`stroke-dasharray: ${o.wordcountprogress}, 100`),d:`M18 2.0845
                     a 15.9155 15.9155 0 0 1 0 31.831
                     a 15.9155 15.9155 0 0 1 0 -31.831`},null,4)]))])])])):$e("",!0)}const O2=ct(m2,[["render",E2]]),M2={name:"ProjectHome",components:{Logo:Kf,ProjectName:p2,GridLogger:O2},mounted(){this.$root.tools.writer.selected=null,this.$root.tools.gridplanner.selected=null,this.$root.tools.timeline.selected=null,this.$root.tools.mindmap.selected=null,this.$root.tools.snowflake.selected=null,this.$root.tools.planningboard.selected=null},methods:{}},A2={key:0,class:"project-home"},_2={style:{"text-align":"center"}},N2={open:""},$2={class:"inputstyle"},P2={class:"mainnav"};function D2(t,e,n,r,o,i){const s=Je("Logo"),l=Je("ProjectName"),a=Je("GridLogger");return this.$root.syncdb.Settings?(z(),Z("div",A2,[S("div",_2,[tt(s,{style:{width:"150px",height:"150px"}})]),S("details",N2,[e[6]||(e[6]=S("summary",null,"Project Settings",-1)),e[7]||(e[7]=S("p",{style:{"text-align":"center"}},"What is this project called?",-1)),S("h2",$2,[tt(l)]),tt(a)]),S("div",P2,[S("button",{onClick:e[0]||(e[0]=c=>t.$root.currentTool="writer")},e[8]||(e[8]=[S("svg",{"data-v-92328502":"",version:"1.1",viewBox:"0 0 24 24"},[S("path",{"data-v-92328502":"",d:"M19 2L14 6.5V17.5L19 13V2M6.5 5C4.55 5 2.45 5.4 1 6.5V21.16C1 21.41 1.25 21.66 1.5 21.66C1.6 21.66 1.65 21.59 1.75 21.59C3.1 20.94 5.05 20.5 6.5 20.5C8.45 20.5 10.55 20.9 12 22C13.35 21.15 15.8 20.5 17.5 20.5C19.15 20.5 20.85 20.81 22.25 21.56C22.35 21.61 22.4 21.59 22.5 21.59C22.75 21.59 23 21.34 23 21.09V6.5C22.4 6.05 21.75 5.75 21 5.5V19C19.9 18.65 18.7 18.5 17.5 18.5C15.8 18.5 13.35 19.15 12 20V6.5C10.55 5.4 8.45 5 6.5 5Z"})],-1),nr(" Your Books ")])),S("button",{onClick:e[1]||(e[1]=c=>t.$root.currentTool="gridplanner")},e[9]||(e[9]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"view-grid"),S("path",{d:"M3,11H11V3H3M3,21H11V13H3M13,21H21V13H13M13,3V11H21V3"})],-1),nr(" Grid Planner ")])),S("button",{onClick:e[2]||(e[2]=c=>t.$root.currentTool="mindmap")},e[10]||(e[10]=[S("svg",{"data-v-92328502":"",version:"1.1",viewBox:"0 0 24 24"},[S("path",{"data-v-92328502":"",d:"M21 16V13C21 11.89 20.11 11 19 11H13V8H15V2H9V8H11V11H5C3.89 11 3 11.89 3 13V16H1V22H7V16H5V13H11V16H9V22H15V16H13V13H19V16H17V22H23V16H21M11 4H13V6H11V4M5 20H3V18H5V20M13 20H11V18H13V20M21 20H19V18H21V20Z"})],-1),nr(" Mindmap Builder ")])),S("button",{onClick:e[3]||(e[3]=c=>t.$root.currentTool="timeline")},e[11]||(e[11]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"timeline-outline"),S("path",{d:"M4 2V8H2V2H4M2 22V16H4V22H2M5 12C5 13.11 4.11 14 3 14C1.9 14 1 13.11 1 12C1 10.9 1.9 10 3 10C4.11 10 5 10.9 5 12M24 6V18C24 19.11 23.11 20 22 20H10C8.9 20 8 19.11 8 18V14L6 12L8 10V6C8 4.89 8.9 4 10 4H22C23.11 4 24 4.89 24 6M10 6V18H22V6H10Z"})],-1),nr(" Timeline Creator ")])),S("button",{onClick:e[4]||(e[4]=c=>t.$root.currentTool="snowflake")},e[12]||(e[12]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"snowflake"),S("path",{d:"M20.79,13.95L18.46,14.57L16.46,13.44V10.56L18.46,9.43L20.79,10.05L21.31,8.12L19.54,7.65L20,5.88L18.07,5.36L17.45,7.69L15.45,8.82L13,7.38V5.12L14.71,3.41L13.29,2L12,3.29L10.71,2L9.29,3.41L11,5.12V7.38L8.5,8.82L6.5,7.69L5.92,5.36L4,5.88L4.47,7.65L2.7,8.12L3.22,10.05L5.55,9.43L7.55,10.56V13.45L5.55,14.58L3.22,13.96L2.7,15.89L4.47,16.36L4,18.12L5.93,18.64L6.55,16.31L8.55,15.18L11,16.62V18.88L9.29,20.59L10.71,22L12,20.71L13.29,22L14.7,20.59L13,18.88V16.62L15.5,15.17L17.5,16.3L18.12,18.63L20,18.12L19.53,16.35L21.3,15.88L20.79,13.95M9.5,10.56L12,9.11L14.5,10.56V13.44L12,14.89L9.5,13.44V10.56Z"})],-1),nr(" Snowflake Tool ")])),S("button",{onClick:e[5]||(e[5]=c=>t.$root.currentTool="cardsdatabase")},e[13]||(e[13]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"cards-outline"),S("path",{d:"M11.19,2.25C10.93,2.25 10.67,2.31 10.42,2.4L3.06,5.45C2.04,5.87 1.55,7.04 1.97,8.05L6.93,20C7.24,20.77 7.97,21.23 8.74,21.25C9,21.25 9.27,21.22 9.53,21.1L16.9,18.05C17.65,17.74 18.11,17 18.13,16.25C18.14,16 18.09,15.71 18,15.45L13,3.5C12.71,2.73 11.97,2.26 11.19,2.25M14.67,2.25L18.12,10.6V4.25A2,2 0 0,0 16.12,2.25M20.13,3.79V12.82L22.56,6.96C22.97,5.94 22.5,4.78 21.47,4.36M11.19,4.22L16.17,16.24L8.78,19.3L3.8,7.29"})],-1),nr(" Cards Database ")]))])])):$e("",!0)}const I2=ct(M2,[["render",D2],["__scopeId","data-v-6d3b2299"]]);var L2=Object.defineProperty,Ya=Object.getOwnPropertySymbols,C1=Object.prototype.hasOwnProperty,k1=Object.prototype.propertyIsEnumerable,Wp=(t,e,n)=>e in t?L2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hi=(t,e)=>{for(var n in e||(e={}))C1.call(e,n)&&Wp(t,n,e[n]);if(Ya)for(var n of Ya(e))k1.call(e,n)&&Wp(t,n,e[n]);return t},S1=(t,e)=>{var n={};for(var r in t)C1.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Ya)for(var r of Ya(t))e.indexOf(r)<0&&k1.call(t,r)&&(n[r]=t[r]);return n};const x1="[vue-draggable-plus]: ";function B2(t){console.warn(x1+t)}function V2(t){console.error(x1+t)}function qp(t,e,n){return n>=0&&n<t.length&&t.splice(n,0,t.splice(e,1)[0]),t}function R2(t){return t.replace(/-(\w)/g,(e,n)=>n?n.toUpperCase():"")}function H2(t){return Object.keys(t).reduce((e,n)=>(typeof t[n]<"u"&&(e[R2(n)]=t[n]),e),{})}function Jp(t,e){return Array.isArray(t)&&t.splice(e,1),t}function Gp(t,e,n){return Array.isArray(t)&&t.splice(e,0,n),t}function F2(t){return typeof t>"u"}function j2(t){return typeof t=="string"}function Yp(t,e,n){const r=t.children[n];t.insertBefore(e,r)}function Su(t){t.parentNode&&t.parentNode.removeChild(t)}function z2(t,e=document){var n;let r=null;return typeof(e==null?void 0:e.querySelector)=="function"?r=(n=e==null?void 0:e.querySelector)==null?void 0:n.call(e,t):r=document.querySelector(t),r||B2(`Element not found: ${t}`),r}function U2(t,e,n=null){return function(...r){return t.apply(n,r),e.apply(n,r)}}function K2(t,e){const n=Hi({},t);return Object.keys(e).forEach(r=>{n[r]?n[r]=U2(t[r],e[r]):n[r]=e[r]}),n}function W2(t){return t instanceof HTMLElement}function Xp(t,e){Object.keys(t).forEach(n=>{e(n,t[n])})}function q2(t){return t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97)}const J2=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Zp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Nr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zp(Object(n),!0).forEach(function(r){G2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zp(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ca(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ca=function(e){return typeof e}:Ca=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ca(t)}function G2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eo(){return eo=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eo.apply(this,arguments)}function Y2(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,i;for(i=0;i<r.length;i++)o=r[i],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function X2(t,e){if(t==null)return{};var n=Y2(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var Z2="1.15.2";function Yr(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var no=Yr(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ml=Yr(/Edge/i),Qp=Yr(/firefox/i),zs=Yr(/safari/i)&&!Yr(/chrome/i)&&!Yr(/android/i),T1=Yr(/iP(ad|od|hone)/i),E1=Yr(/chrome/i)&&Yr(/android/i),O1={capture:!1,passive:!1};function ut(t,e,n){t.addEventListener(e,n,!no&&O1)}function lt(t,e,n){t.removeEventListener(e,n,!no&&O1)}function Xa(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function Q2(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function fr(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Xa(t,e):Xa(t,e))||r&&t===n)return t;if(t===n)break}while(t=Q2(t))}return null}var em=/\s+/g;function Un(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(em," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(em," ")}}function He(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function Qi(t,e){var n="";if(typeof t=="string")n=t;else do{var r=He(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function M1(t,e,n){if(t){var r=t.getElementsByTagName(e),o=0,i=r.length;if(n)for(;o<i;o++)n(r[o],o);return r}return[]}function Ar(){var t=document.scrollingElement;return t||document.documentElement}function Lt(t,e,n,r,o){if(!(!t.getBoundingClientRect&&t!==window)){var i,s,l,a,c,u,d;if(t!==window&&t.parentNode&&t!==Ar()?(i=t.getBoundingClientRect(),s=i.top,l=i.left,a=i.bottom,c=i.right,u=i.height,d=i.width):(s=0,l=0,a=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(o=o||t.parentNode,!no))do if(o&&o.getBoundingClientRect&&(He(o,"transform")!=="none"||n&&He(o,"position")!=="static")){var h=o.getBoundingClientRect();s-=h.top+parseInt(He(o,"border-top-width")),l-=h.left+parseInt(He(o,"border-left-width")),a=s+i.height,c=l+i.width;break}while(o=o.parentNode);if(r&&t!==window){var m=Qi(o||t),g=m&&m.a,y=m&&m.d;m&&(s/=y,l/=g,d/=g,u/=y,a=s+u,c=l+d)}return{top:s,left:l,bottom:a,right:c,width:d,height:u}}}function tm(t,e,n){for(var r=vo(t,!0),o=Lt(t)[e];r;){var i=Lt(r)[n],s=void 0;if(s=o>=i,!s)return r;if(r===Ar())break;r=vo(r,!1)}return!1}function rs(t,e,n,r){for(var o=0,i=0,s=t.children;i<s.length;){if(s[i].style.display!=="none"&&s[i]!==Fe.ghost&&(r||s[i]!==Fe.dragged)&&fr(s[i],n.draggable,t,!1)){if(o===e)return s[i];o++}i++}return null}function Wf(t,e){for(var n=t.lastElementChild;n&&(n===Fe.ghost||He(n,"display")==="none"||e&&!Xa(n,e));)n=n.previousElementSibling;return n||null}function Qn(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Fe.clone&&(!e||Xa(t,e))&&n++;return n}function nm(t){var e=0,n=0,r=Ar();if(t)do{var o=Qi(t),i=o.a,s=o.d;e+=t.scrollLeft*i,n+=t.scrollTop*s}while(t!==r&&(t=t.parentNode));return[e,n]}function eT(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function vo(t,e){if(!t||!t.getBoundingClientRect)return Ar();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=He(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Ar();if(r||e)return n;r=!0}}while(n=n.parentNode);return Ar()}function tT(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function xu(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Us;function A1(t,e){return function(){if(!Us){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),Us=setTimeout(function(){Us=void 0},e)}}}function nT(){clearTimeout(Us),Us=void 0}function _1(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function N1(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function $1(t,e,n){var r={};return Array.from(t.children).forEach(function(o){var i,s,l,a;if(!(!fr(o,e.draggable,t,!1)||o.animated||o===n)){var c=Lt(o);r.left=Math.min((i=r.left)!==null&&i!==void 0?i:1/0,c.left),r.top=Math.min((s=r.top)!==null&&s!==void 0?s:1/0,c.top),r.right=Math.max((l=r.right)!==null&&l!==void 0?l:-1/0,c.right),r.bottom=Math.max((a=r.bottom)!==null&&a!==void 0?a:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var qn="Sortable"+new Date().getTime();function rT(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(r){if(!(He(r,"display")==="none"||r===Fe.ghost)){t.push({target:r,rect:Lt(r)});var o=Nr({},t[t.length-1].rect);if(r.thisAnimationDuration){var i=Qi(r,!0);i&&(o.top-=i.f,o.left-=i.e)}r.fromRect=o}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(eT(t,{target:n}),1)},animateAll:function(n){var r=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var o=!1,i=0;t.forEach(function(s){var l=0,a=s.target,c=a.fromRect,u=Lt(a),d=a.prevFromRect,h=a.prevToRect,m=s.rect,g=Qi(a,!0);g&&(u.top-=g.f,u.left-=g.e),a.toRect=u,a.thisAnimationDuration&&xu(d,u)&&!xu(c,u)&&(m.top-u.top)/(m.left-u.left)===(c.top-u.top)/(c.left-u.left)&&(l=iT(m,d,h,r.options)),xu(u,c)||(a.prevFromRect=c,a.prevToRect=u,l||(l=r.options.animation),r.animate(a,m,u,l)),l&&(o=!0,i=Math.max(i,l),clearTimeout(a.animationResetTimer),a.animationResetTimer=setTimeout(function(){a.animationTime=0,a.prevFromRect=null,a.fromRect=null,a.prevToRect=null,a.thisAnimationDuration=null},l),a.thisAnimationDuration=l)}),clearTimeout(e),o?e=setTimeout(function(){typeof n=="function"&&n()},i):typeof n=="function"&&n(),t=[]},animate:function(n,r,o,i){if(i){He(n,"transition",""),He(n,"transform","");var s=Qi(this.el),l=s&&s.a,a=s&&s.d,c=(r.left-o.left)/(l||1),u=(r.top-o.top)/(a||1);n.animatingX=!!c,n.animatingY=!!u,He(n,"transform","translate3d("+c+"px,"+u+"px,0)"),this.forRepaintDummy=oT(n),He(n,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),He(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){He(n,"transition",""),He(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},i)}}}}function oT(t){return t.offsetWidth}function iT(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var _i=[],Tu={initializeByDefault:!0},Al={mount:function(t){for(var e in Tu)Tu.hasOwnProperty(e)&&!(e in t)&&(t[e]=Tu[e]);_i.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),_i.push(t)},pluginEvent:function(t,e,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var o=t+"Global";_i.forEach(function(i){e[i.pluginName]&&(e[i.pluginName][o]&&e[i.pluginName][o](Nr({sortable:e},n)),e.options[i.pluginName]&&e[i.pluginName][t]&&e[i.pluginName][t](Nr({sortable:e},n)))})},initializePlugins:function(t,e,n,r){_i.forEach(function(s){var l=s.pluginName;if(!(!t.options[l]&&!s.initializeByDefault)){var a=new s(t,e,t.options);a.sortable=t,a.options=t.options,t[l]=a,eo(n,a.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var i=this.modifyOption(t,o,t.options[o]);typeof i<"u"&&(t.options[o]=i)}},getEventProperties:function(t,e){var n={};return _i.forEach(function(r){typeof r.eventProperties=="function"&&eo(n,r.eventProperties.call(e[r.pluginName],t))}),n},modifyOption:function(t,e,n){var r;return _i.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[e]=="function"&&(r=o.optionListeners[e].call(t[o.pluginName],n))}),r}};function sT(t){var e=t.sortable,n=t.rootEl,r=t.name,o=t.targetEl,i=t.cloneEl,s=t.toEl,l=t.fromEl,a=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,h=t.originalEvent,m=t.putSortable,g=t.extraEventProperties;if(e=e||n&&n[qn],!!e){var y,x=e.options,O="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!no&&!Ml?y=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(y=document.createEvent("Event"),y.initEvent(r,!0,!0)),y.to=s||n,y.from=l||n,y.item=o||n,y.clone=i,y.oldIndex=a,y.newIndex=c,y.oldDraggableIndex=u,y.newDraggableIndex=d,y.originalEvent=h,y.pullMode=m?m.lastPutMode:void 0;var A=Nr(Nr({},g),Al.getEventProperties(r,e));for(var N in A)y[N]=A[N];n&&n.dispatchEvent(y),x[O]&&x[O].call(e,y)}}var lT=["evt"],Dn=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.evt,o=X2(n,lT);Al.pluginEvent.bind(Fe)(t,e,Nr({dragEl:de,parentEl:Nt,ghostEl:Ue,rootEl:Et,nextEl:Go,lastDownEl:ka,cloneEl:At,cloneHidden:yo,dragStarted:Es,putSortable:Qt,activeSortable:Fe.active,originalEvent:r,oldIndex:Fi,oldDraggableIndex:Ks,newIndex:Wn,newDraggableIndex:ho,hideGhostForTarget:L1,unhideGhostForTarget:B1,cloneNowHidden:function(){yo=!0},cloneNowShown:function(){yo=!1},dispatchSortableEvent:function(i){vn({sortable:e,name:i,originalEvent:r})}},o))};function vn(t){sT(Nr({putSortable:Qt,cloneEl:At,targetEl:de,rootEl:Et,oldIndex:Fi,oldDraggableIndex:Ks,newIndex:Wn,newDraggableIndex:ho},t))}var de,Nt,Ue,Et,Go,ka,At,yo,Fi,Wn,Ks,ho,Gl,Qt,Li=!1,Za=!1,Qa=[],Wo,dr,Eu,Ou,rm,om,Es,Ni,Ws,qs=!1,Yl=!1,Sa,ln,Mu=[],Rd=!1,ec=[],Ic=typeof document<"u",Xl=T1,im=Ml||no?"cssFloat":"float",aT=Ic&&!E1&&!T1&&"draggable"in document.createElement("div"),P1=function(){if(Ic){if(no)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),D1=function(t,e){var n=He(t),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=rs(t,0,e),i=rs(t,1,e),s=o&&He(o),l=i&&He(i),a=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Lt(o).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Lt(i).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&s.float&&s.float!=="none"){var u=s.float==="left"?"left":"right";return i&&(l.clear==="both"||l.clear===u)?"vertical":"horizontal"}return o&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||a>=r&&n[im]==="none"||i&&n[im]==="none"&&a+c>r)?"vertical":"horizontal"},cT=function(t,e,n){var r=n?t.left:t.top,o=n?t.right:t.bottom,i=n?t.width:t.height,s=n?e.left:e.top,l=n?e.right:e.bottom,a=n?e.width:e.height;return r===s||o===l||r+i/2===s+a/2},uT=function(t,e){var n;return Qa.some(function(r){var o=r[qn].options.emptyInsertThreshold;if(!(!o||Wf(r))){var i=Lt(r),s=t>=i.left-o&&t<=i.right+o,l=e>=i.top-o&&e<=i.bottom+o;if(s&&l)return n=r}}),n},I1=function(t){function e(o,i){return function(s,l,a,c){var u=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(o==null&&(i||u))return!0;if(o==null||o===!1)return!1;if(i&&o==="clone")return o;if(typeof o=="function")return e(o(s,l,a,c),i)(s,l,a,c);var d=(i?s:l).options.group.name;return o===!0||typeof o=="string"&&o===d||o.join&&o.indexOf(d)>-1}}var n={},r=t.group;(!r||Ca(r)!="object")&&(r={name:r}),n.name=r.name,n.checkPull=e(r.pull,!0),n.checkPut=e(r.put),n.revertClone=r.revertClone,t.group=n},L1=function(){!P1&&Ue&&He(Ue,"display","none")},B1=function(){!P1&&Ue&&He(Ue,"display","")};Ic&&!E1&&document.addEventListener("click",function(t){if(Za)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Za=!1,!1},!0);var qo=function(t){if(de){t=t.touches?t.touches[0]:t;var e=uT(t.clientX,t.clientY);if(e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[qn]._onDragOver(n)}}},dT=function(t){de&&de.parentNode[qn]._isOutsideThisEl(t.target)};function Fe(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=eo({},e),t[qn]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return D1(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,s){i.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Fe.supportPointer!==!1&&"PointerEvent"in window&&!zs,emptyInsertThreshold:5};Al.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);I1(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:aT,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?ut(t,"pointerdown",this._onTapStart):(ut(t,"mousedown",this._onTapStart),ut(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(ut(t,"dragover",this),ut(t,"dragenter",this)),Qa.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),eo(this,rT())}Fe.prototype={constructor:Fe,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Ni=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,de):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,r=this.options,o=r.preventOnFilter,i=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(s||t).target,a=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,c=r.filter;if(vT(n),!de&&!(/mousedown|pointerdown/.test(i)&&t.button!==0||r.disabled)&&!a.isContentEditable&&!(!this.nativeDraggable&&zs&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=fr(l,r.draggable,n,!1),!(l&&l.animated)&&ka!==l)){if(Fi=Qn(l),Ks=Qn(l,r.draggable),typeof c=="function"){if(c.call(this,t,l,this)){vn({sortable:e,rootEl:a,name:"filter",targetEl:l,toEl:n,fromEl:n}),Dn("filter",e,{evt:t}),o&&t.cancelable&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(u){if(u=fr(a,u.trim(),n,!1),u)return vn({sortable:e,rootEl:u,name:"filter",targetEl:l,fromEl:n,toEl:n}),Dn("filter",e,{evt:t}),!0}),c)){o&&t.cancelable&&t.preventDefault();return}r.handle&&!fr(a,r.handle,n,!1)||this._prepareDragStart(t,s,l)}}},_prepareDragStart:function(t,e,n){var r=this,o=r.el,i=r.options,s=o.ownerDocument,l;if(n&&!de&&n.parentNode===o){var a=Lt(n);if(Et=o,de=n,Nt=de.parentNode,Go=de.nextSibling,ka=n,Gl=i.group,Fe.dragged=de,Wo={target:de,clientX:(e||t).clientX,clientY:(e||t).clientY},rm=Wo.clientX-a.left,om=Wo.clientY-a.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,de.style["will-change"]="all",l=function(){if(Dn("delayEnded",r,{evt:t}),Fe.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Qp&&r.nativeDraggable&&(de.draggable=!0),r._triggerDragStart(t,e),vn({sortable:r,name:"choose",originalEvent:t}),Un(de,i.chosenClass,!0)},i.ignore.split(",").forEach(function(c){M1(de,c.trim(),Au)}),ut(s,"dragover",qo),ut(s,"mousemove",qo),ut(s,"touchmove",qo),ut(s,"mouseup",r._onDrop),ut(s,"touchend",r._onDrop),ut(s,"touchcancel",r._onDrop),Qp&&this.nativeDraggable&&(this.options.touchStartThreshold=4,de.draggable=!0),Dn("delayStart",this,{evt:t}),i.delay&&(!i.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(Ml||no))){if(Fe.eventCanceled){this._onDrop();return}ut(s,"mouseup",r._disableDelayedDrag),ut(s,"touchend",r._disableDelayedDrag),ut(s,"touchcancel",r._disableDelayedDrag),ut(s,"mousemove",r._delayedDragTouchMoveHandler),ut(s,"touchmove",r._delayedDragTouchMoveHandler),i.supportPointer&&ut(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,i.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){de&&Au(de),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;lt(t,"mouseup",this._disableDelayedDrag),lt(t,"touchend",this._disableDelayedDrag),lt(t,"touchcancel",this._disableDelayedDrag),lt(t,"mousemove",this._delayedDragTouchMoveHandler),lt(t,"touchmove",this._delayedDragTouchMoveHandler),lt(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?ut(document,"pointermove",this._onTouchMove):e?ut(document,"touchmove",this._onTouchMove):ut(document,"mousemove",this._onTouchMove):(ut(de,"dragend",this),ut(Et,"dragstart",this._onDragStart));try{document.selection?xa(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(Li=!1,Et&&de){Dn("dragStarted",this,{evt:e}),this.nativeDraggable&&ut(document,"dragover",dT);var n=this.options;!t&&Un(de,n.dragClass,!1),Un(de,n.ghostClass,!0),Fe.active=this,t&&this._appendGhost(),vn({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(dr){this._lastX=dr.clientX,this._lastY=dr.clientY,L1();for(var t=document.elementFromPoint(dr.clientX,dr.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(dr.clientX,dr.clientY),t!==e);)e=t;if(de.parentNode[qn]._isOutsideThisEl(t),e)do{if(e[qn]){var n=void 0;if(n=e[qn]._onDragOver({clientX:dr.clientX,clientY:dr.clientY,target:t,rootEl:e}),n&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);B1()}},_onTouchMove:function(t){if(Wo){var e=this.options,n=e.fallbackTolerance,r=e.fallbackOffset,o=t.touches?t.touches[0]:t,i=Ue&&Qi(Ue,!0),s=Ue&&i&&i.a,l=Ue&&i&&i.d,a=Xl&&ln&&nm(ln),c=(o.clientX-Wo.clientX+r.x)/(s||1)+(a?a[0]-Mu[0]:0)/(s||1),u=(o.clientY-Wo.clientY+r.y)/(l||1)+(a?a[1]-Mu[1]:0)/(l||1);if(!Fe.active&&!Li){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(Ue){i?(i.e+=c-(Eu||0),i.f+=u-(Ou||0)):i={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");He(Ue,"webkitTransform",d),He(Ue,"mozTransform",d),He(Ue,"msTransform",d),He(Ue,"transform",d),Eu=c,Ou=u,dr=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Ue){var t=this.options.fallbackOnBody?document.body:Et,e=Lt(de,!0,Xl,!0,t),n=this.options;if(Xl){for(ln=t;He(ln,"position")==="static"&&He(ln,"transform")==="none"&&ln!==document;)ln=ln.parentNode;ln!==document.body&&ln!==document.documentElement?(ln===document&&(ln=Ar()),e.top+=ln.scrollTop,e.left+=ln.scrollLeft):ln=Ar(),Mu=nm(ln)}Ue=de.cloneNode(!0),Un(Ue,n.ghostClass,!1),Un(Ue,n.fallbackClass,!0),Un(Ue,n.dragClass,!0),He(Ue,"transition",""),He(Ue,"transform",""),He(Ue,"box-sizing","border-box"),He(Ue,"margin",0),He(Ue,"top",e.top),He(Ue,"left",e.left),He(Ue,"width",e.width),He(Ue,"height",e.height),He(Ue,"opacity","0.8"),He(Ue,"position",Xl?"absolute":"fixed"),He(Ue,"zIndex","100000"),He(Ue,"pointerEvents","none"),Fe.ghost=Ue,t.appendChild(Ue),He(Ue,"transform-origin",rm/parseInt(Ue.style.width)*100+"% "+om/parseInt(Ue.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,r=t.dataTransfer,o=n.options;if(Dn("dragStart",this,{evt:t}),Fe.eventCanceled){this._onDrop();return}Dn("setupClone",this),Fe.eventCanceled||(At=N1(de),At.removeAttribute("id"),At.draggable=!1,At.style["will-change"]="",this._hideClone(),Un(At,this.options.chosenClass,!1),Fe.clone=At),n.cloneId=xa(function(){Dn("clone",n),!Fe.eventCanceled&&(n.options.removeCloneOnHide||Et.insertBefore(At,de),n._hideClone(),vn({sortable:n,name:"clone"}))}),!e&&Un(de,o.dragClass,!0),e?(Za=!0,n._loopId=setInterval(n._emulateDragOver,50)):(lt(document,"mouseup",n._onDrop),lt(document,"touchend",n._onDrop),lt(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(n,r,de)),ut(document,"drop",n),He(de,"transform","translateZ(0)")),Li=!0,n._dragStartId=xa(n._dragStarted.bind(n,e,t)),ut(document,"selectstart",n),Es=!0,zs&&He(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,n=t.target,r,o,i,s=this.options,l=s.group,a=Fe.active,c=Gl===l,u=s.sort,d=Qt||a,h,m=this,g=!1;if(Rd)return;function y(ne,Me){Dn(ne,m,Nr({evt:t,isOwner:c,axis:h?"vertical":"horizontal",revert:i,dragRect:r,targetRect:o,canSort:u,fromSortable:d,target:n,completed:O,onMove:function(nt,We){return Zl(Et,e,de,r,nt,Lt(nt),t,We)},changed:A},Me))}function x(){y("dragOverAnimationCapture"),m.captureAnimationState(),m!==d&&d.captureAnimationState()}function O(ne){return y("dragOverCompleted",{insertion:ne}),ne&&(c?a._hideClone():a._showClone(m),m!==d&&(Un(de,Qt?Qt.options.ghostClass:a.options.ghostClass,!1),Un(de,s.ghostClass,!0)),Qt!==m&&m!==Fe.active?Qt=m:m===Fe.active&&Qt&&(Qt=null),d===m&&(m._ignoreWhileAnimating=n),m.animateAll(function(){y("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(n===de&&!de.animated||n===e&&!n.animated)&&(Ni=null),!s.dragoverBubble&&!t.rootEl&&n!==document&&(de.parentNode[qn]._isOutsideThisEl(t.target),!ne&&qo(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function A(){Wn=Qn(de),ho=Qn(de,s.draggable),vn({sortable:m,name:"change",toEl:e,newIndex:Wn,newDraggableIndex:ho,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=fr(n,s.draggable,e,!0),y("dragOver"),Fe.eventCanceled)return g;if(de.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||m._ignoreWhileAnimating===n)return O(!1);if(Za=!1,a&&!s.disabled&&(c?u||(i=Nt!==Et):Qt===this||(this.lastPutMode=Gl.checkPull(this,a,de,t))&&l.checkPut(this,a,de,t))){if(h=this._getDirection(t,n)==="vertical",r=Lt(de),y("dragOverValid"),Fe.eventCanceled)return g;if(i)return Nt=Et,x(),this._hideClone(),y("revert"),Fe.eventCanceled||(Go?Et.insertBefore(de,Go):Et.appendChild(de)),O(!0);var N=Wf(e,s.draggable);if(!N||mT(t,h,this)&&!N.animated){if(N===de)return O(!1);if(N&&e===t.target&&(n=N),n&&(o=Lt(n)),Zl(Et,e,de,r,n,o,t,!!n)!==!1)return x(),N&&N.nextSibling?e.insertBefore(de,N.nextSibling):e.appendChild(de),Nt=e,A(),O(!0)}else if(N&&pT(t,h,this)){var L=rs(e,0,s,!0);if(L===de)return O(!1);if(n=L,o=Lt(n),Zl(Et,e,de,r,n,o,t,!1)!==!1)return x(),e.insertBefore(de,L),Nt=e,A(),O(!0)}else if(n.parentNode===e){o=Lt(n);var D=0,R,F=de.parentNode!==e,U=!cT(de.animated&&de.toRect||r,n.animated&&n.toRect||o,h),T=h?"top":"left",C=tm(n,"top","top")||tm(de,"top","top"),B=C?C.scrollTop:void 0;Ni!==n&&(R=o[T],qs=!1,Yl=!U&&s.invertSwap||F),D=gT(t,n,o,h,U?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Yl,Ni===n);var w;if(D!==0){var te=Qn(de);do te-=D,w=Nt.children[te];while(w&&(He(w,"display")==="none"||w===Ue))}if(D===0||w===n)return O(!1);Ni=n,Ws=D;var J=n.nextElementSibling,we=!1;we=D===1;var ge=Zl(Et,e,de,r,n,o,t,we);if(ge!==!1)return(ge===1||ge===-1)&&(we=ge===1),Rd=!0,setTimeout(hT,30),x(),we&&!J?e.appendChild(de):n.parentNode.insertBefore(de,we?J:n),C&&_1(C,0,B-C.scrollTop),Nt=de.parentNode,R!==void 0&&!Yl&&(Sa=Math.abs(R-Lt(n)[T])),A(),O(!0)}if(e.contains(de))return O(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){lt(document,"mousemove",this._onTouchMove),lt(document,"touchmove",this._onTouchMove),lt(document,"pointermove",this._onTouchMove),lt(document,"dragover",qo),lt(document,"mousemove",qo),lt(document,"touchmove",qo)},_offUpEvents:function(){var t=this.el.ownerDocument;lt(t,"mouseup",this._onDrop),lt(t,"touchend",this._onDrop),lt(t,"pointerup",this._onDrop),lt(t,"touchcancel",this._onDrop),lt(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;if(Wn=Qn(de),ho=Qn(de,n.draggable),Dn("drop",this,{evt:t}),Nt=de&&de.parentNode,Wn=Qn(de),ho=Qn(de,n.draggable),Fe.eventCanceled){this._nulling();return}Li=!1,Yl=!1,qs=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Hd(this.cloneId),Hd(this._dragStartId),this.nativeDraggable&&(lt(document,"drop",this),lt(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),zs&&He(document.body,"user-select",""),He(de,"transform",""),t&&(Es&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),Ue&&Ue.parentNode&&Ue.parentNode.removeChild(Ue),(Et===Nt||Qt&&Qt.lastPutMode!=="clone")&&At&&At.parentNode&&At.parentNode.removeChild(At),de&&(this.nativeDraggable&&lt(de,"dragend",this),Au(de),de.style["will-change"]="",Es&&!Li&&Un(de,Qt?Qt.options.ghostClass:this.options.ghostClass,!1),Un(de,this.options.chosenClass,!1),vn({sortable:this,name:"unchoose",toEl:Nt,newIndex:null,newDraggableIndex:null,originalEvent:t}),Et!==Nt?(Wn>=0&&(vn({rootEl:Nt,name:"add",toEl:Nt,fromEl:Et,originalEvent:t}),vn({sortable:this,name:"remove",toEl:Nt,originalEvent:t}),vn({rootEl:Nt,name:"sort",toEl:Nt,fromEl:Et,originalEvent:t}),vn({sortable:this,name:"sort",toEl:Nt,originalEvent:t})),Qt&&Qt.save()):Wn!==Fi&&Wn>=0&&(vn({sortable:this,name:"update",toEl:Nt,originalEvent:t}),vn({sortable:this,name:"sort",toEl:Nt,originalEvent:t})),Fe.active&&((Wn==null||Wn===-1)&&(Wn=Fi,ho=Ks),vn({sortable:this,name:"end",toEl:Nt,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Dn("nulling",this),Et=de=Nt=Ue=Go=At=ka=yo=Wo=dr=Es=Wn=ho=Fi=Ks=Ni=Ws=Qt=Gl=Fe.dragged=Fe.ghost=Fe.clone=Fe.active=null,ec.forEach(function(t){t.checked=!0}),ec.length=Eu=Ou=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":de&&(this._onDragOver(t),fT(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,n=this.el.children,r=0,o=n.length,i=this.options;r<o;r++)e=n[r],fr(e,i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||bT(e));return t},sort:function(t,e){var n={},r=this.el;this.toArray().forEach(function(o,i){var s=r.children[i];fr(s,this.options.draggable,r,!1)&&(n[o]=s)},this),e&&this.captureAnimationState(),t.forEach(function(o){n[o]&&(r.removeChild(n[o]),r.appendChild(n[o]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return fr(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(e===void 0)return n[t];var r=Al.modifyOption(this,t,e);typeof r<"u"?n[t]=r:n[t]=e,t==="group"&&I1(n)},destroy:function(){Dn("destroy",this);var t=this.el;t[qn]=null,lt(t,"mousedown",this._onTapStart),lt(t,"touchstart",this._onTapStart),lt(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(lt(t,"dragover",this),lt(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Qa.splice(Qa.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!yo){if(Dn("hideClone",this),Fe.eventCanceled)return;He(At,"display","none"),this.options.removeCloneOnHide&&At.parentNode&&At.parentNode.removeChild(At),yo=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(yo){if(Dn("showClone",this),Fe.eventCanceled)return;de.parentNode==Et&&!this.options.group.revertClone?Et.insertBefore(At,de):Go?Et.insertBefore(At,Go):Et.appendChild(At),this.options.group.revertClone&&this.animate(de,At),He(At,"display",""),yo=!1}}};function fT(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Zl(t,e,n,r,o,i,s,l){var a,c=t[qn],u=c.options.onMove,d;return window.CustomEvent&&!no&&!Ml?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=e,a.from=t,a.dragged=n,a.draggedRect=r,a.related=o||e,a.relatedRect=i||Lt(e),a.willInsertAfter=l,a.originalEvent=s,t.dispatchEvent(a),u&&(d=u.call(c,a,s)),d}function Au(t){t.draggable=!1}function hT(){Rd=!1}function pT(t,e,n){var r=Lt(rs(n.el,0,n.options,!0)),o=$1(n.el,n.options,Ue),i=10;return e?t.clientX<o.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<o.top-i||t.clientY<r.bottom&&t.clientX<r.left}function mT(t,e,n){var r=Lt(Wf(n.el,n.options.draggable)),o=$1(n.el,n.options,Ue),i=10;return e?t.clientX>o.right+i||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>o.bottom+i||t.clientX>r.right&&t.clientY>r.top}function gT(t,e,n,r,o,i,s,l){var a=r?t.clientY:t.clientX,c=r?n.height:n.width,u=r?n.top:n.left,d=r?n.bottom:n.right,h=!1;if(!s){if(l&&Sa<c*o){if(!qs&&(Ws===1?a>u+c*i/2:a<d-c*i/2)&&(qs=!0),qs)h=!0;else if(Ws===1?a<u+Sa:a>d-Sa)return-Ws}else if(a>u+c*(1-o)/2&&a<d-c*(1-o)/2)return yT(e)}return h=h||s,h&&(a<u+c*i/2||a>d-c*i/2)?a>u+c/2?1:-1:0}function yT(t){return Qn(de)<Qn(t)?1:-1}function bT(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function vT(t){ec.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&ec.push(r)}}function xa(t){return setTimeout(t,0)}function Hd(t){return clearTimeout(t)}Ic&&ut(document,"touchmove",function(t){(Fe.active||Li)&&t.cancelable&&t.preventDefault()});Fe.utils={on:ut,off:lt,css:He,find:M1,is:function(t,e){return!!fr(t,e,t,!1)},extend:tT,throttle:A1,closest:fr,toggleClass:Un,clone:N1,index:Qn,nextTick:xa,cancelNextTick:Hd,detectDirection:D1,getChild:rs};Fe.get=function(t){return t[qn]};Fe.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Fe.utils=Nr(Nr({},Fe.utils),r.utils)),Al.mount(r)})};Fe.create=function(t,e){return new Fe(t,e)};Fe.version=Z2;var It=[],Os,Fd,jd=!1,_u,Nu,tc,Ms;function wT(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?ut(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ut(document,"pointermove",this._handleFallbackAutoScroll):n.touches?ut(document,"touchmove",this._handleFallbackAutoScroll):ut(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?lt(document,"dragover",this._handleAutoScroll):(lt(document,"pointermove",this._handleFallbackAutoScroll),lt(document,"touchmove",this._handleFallbackAutoScroll),lt(document,"mousemove",this._handleFallbackAutoScroll)),sm(),Ta(),nT()},nulling:function(){tc=Fd=Os=jd=Ms=_u=Nu=null,It.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var r=this,o=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,s=document.elementFromPoint(o,i);if(tc=e,n||this.options.forceAutoScrollFallback||Ml||no||zs){$u(e,this.options,s,n);var l=vo(s,!0);jd&&(!Ms||o!==_u||i!==Nu)&&(Ms&&sm(),Ms=setInterval(function(){var a=vo(document.elementFromPoint(o,i),!0);a!==l&&(l=a,Ta()),$u(e,r.options,a,n)},10),_u=o,Nu=i)}else{if(!this.options.bubbleScroll||vo(s,!0)===Ar()){Ta();return}$u(e,this.options,vo(s,!1),!1)}}},eo(t,{pluginName:"scroll",initializeByDefault:!0})}function Ta(){It.forEach(function(t){clearInterval(t.pid)}),It=[]}function sm(){clearInterval(Ms)}var $u=A1(function(t,e,n,r){if(e.scroll){var o=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,s=e.scrollSensitivity,l=e.scrollSpeed,a=Ar(),c=!1,u;Fd!==n&&(Fd=n,Ta(),Os=e.scroll,u=e.scrollFn,Os===!0&&(Os=vo(n,!0)));var d=0,h=Os;do{var m=h,g=Lt(m),y=g.top,x=g.bottom,O=g.left,A=g.right,N=g.width,L=g.height,D=void 0,R=void 0,F=m.scrollWidth,U=m.scrollHeight,T=He(m),C=m.scrollLeft,B=m.scrollTop;m===a?(D=N<F&&(T.overflowX==="auto"||T.overflowX==="scroll"||T.overflowX==="visible"),R=L<U&&(T.overflowY==="auto"||T.overflowY==="scroll"||T.overflowY==="visible")):(D=N<F&&(T.overflowX==="auto"||T.overflowX==="scroll"),R=L<U&&(T.overflowY==="auto"||T.overflowY==="scroll"));var w=D&&(Math.abs(A-o)<=s&&C+N<F)-(Math.abs(O-o)<=s&&!!C),te=R&&(Math.abs(x-i)<=s&&B+L<U)-(Math.abs(y-i)<=s&&!!B);if(!It[d])for(var J=0;J<=d;J++)It[J]||(It[J]={});(It[d].vx!=w||It[d].vy!=te||It[d].el!==m)&&(It[d].el=m,It[d].vx=w,It[d].vy=te,clearInterval(It[d].pid),(w!=0||te!=0)&&(c=!0,It[d].pid=setInterval((function(){r&&this.layer===0&&Fe.active._onTouchMove(tc);var we=It[this.layer].vy?It[this.layer].vy*l:0,ge=It[this.layer].vx?It[this.layer].vx*l:0;typeof u=="function"&&u.call(Fe.dragged.parentNode[qn],ge,we,t,tc,It[this.layer].el)!=="continue"||_1(It[this.layer].el,ge,we)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&h!==a&&(h=vo(h,!1)));jd=c}},30),V1=function(t){var e=t.originalEvent,n=t.putSortable,r=t.dragEl,o=t.activeSortable,i=t.dispatchSortableEvent,s=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var a=n||o;s();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,u=document.elementFromPoint(c.clientX,c.clientY);l(),a&&!a.el.contains(u)&&(i("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function qf(){}qf.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=rs(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(e,r):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:V1};eo(qf,{pluginName:"revertOnSpill"});function Jf(){}Jf.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable,r=n||this.sortable;r.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),r.animateAll()},drop:V1};eo(Jf,{pluginName:"removeOnSpill"});Fe.mount(new wT);Fe.mount(Jf,qf);function CT(t){return t==null?t:JSON.parse(JSON.stringify(t))}function kT(t){Sl()&&Ef(t)}function ST(t){Sl()?xf(t):Ec(t)}let R1=null,H1=null;function lm(t=null,e=null){R1=t,H1=e}function xT(){return{data:R1,clonedData:H1}}const am=Symbol("cloneElement");function TT(...t){var e,n;const r=(e=Sl())==null?void 0:e.proxy;let o=null;const i=t[0];let[,s,l]=t;Array.isArray(wn(s))||(l=s,s=null);let a=null;const{immediate:c=!0,clone:u=CT,customUpdate:d}=(n=wn(l))!=null?n:{};function h(U){var T;const{from:C,oldIndex:B,item:w}=U;o=Array.from(C.childNodes);const te=wn((T=wn(s))==null?void 0:T[B]),J=u(te);lm(te,J),w[am]=J}function m(U){const T=U.item[am];if(!F2(T)){if(Su(U.item),Vt(s)){const C=[...wn(s)];s.value=Gp(C,U.newDraggableIndex,T);return}Gp(wn(s),U.newDraggableIndex,T)}}function g(U){const{from:T,item:C,oldIndex:B,oldDraggableIndex:w,pullMode:te,clone:J}=U;if(Yp(T,C,B),te==="clone"){Su(J);return}if(Vt(s)){const we=[...wn(s)];s.value=Jp(we,w);return}Jp(wn(s),w)}function y(U){if(d){d(U);return}const{from:T,item:C,oldIndex:B,oldDraggableIndex:w,newDraggableIndex:te}=U;if(Su(C),Yp(T,C,B),Vt(s)){const J=[...wn(s)];s.value=qp(J,w,te);return}qp(wn(s),w,te)}function x(U){const{newIndex:T,oldIndex:C,from:B,to:w}=U;let te=null;const J=T===C&&B===w;try{if(J){let we=null;o==null||o.some((ge,ne)=>{if(we&&(o==null?void 0:o.length)!==w.childNodes.length)return B.insertBefore(we,ge.nextSibling),!0;const Me=w.childNodes[ne];we=w==null?void 0:w.replaceChild(ge,Me)})}}catch(we){te=we}finally{o=null}Ec(()=>{if(lm(),te)throw te})}const O={onUpdate:y,onStart:h,onAdd:m,onRemove:g,onEnd:x};function A(U){const T=wn(i);return U||(U=j2(T)?z2(T,r==null?void 0:r.$el):T),U&&!W2(U)&&(U=U.$el),U||V2("Root element not found"),U}function N(){var U;const T=(U=wn(l))!=null?U:{},{immediate:C,clone:B}=T,w=S1(T,["immediate","clone"]);return Xp(w,(te,J)=>{q2(te)&&(w[te]=(we,...ge)=>{const ne=xT();return J2(we,ne),J(we,...ge)})}),K2(s===null?{}:O,w)}const L=U=>{U=A(U),a&&D.destroy(),a=new Fe(U,N())};ca(()=>l,()=>{a&&Xp(N(),(U,T)=>{a==null||a.option(U,T)})},{deep:!0});const D={option:(U,T)=>a==null?void 0:a.option(U,T),destroy:()=>{a==null||a.destroy(),a=null},save:()=>a==null?void 0:a.save(),toArray:()=>a==null?void 0:a.toArray(),closest:(...U)=>a==null?void 0:a.closest(...U)},R=()=>D==null?void 0:D.option("disabled",!0),F=()=>D==null?void 0:D.option("disabled",!1);return ST(()=>{c&&L()}),kT(D.destroy),Hi({start:L,pause:R,resume:F},D)}const zd=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],ET=["clone","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...zd.map(t=>`on${t.replace(/^\S/,e=>e.toUpperCase())}`)],Lc=sy({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:ET,emits:["update:modelValue",...zd],setup(t,{slots:e,emit:n,expose:r,attrs:o}){const i=zd.reduce((u,d)=>{const h=`on${d.replace(/^\S/,m=>m.toUpperCase())}`;return u[h]=(...m)=>n(d,...m),u},{}),s=ud(()=>{const u=kC(t),{modelValue:d}=u,h=S1(u,["modelValue"]),m=Object.entries(h).reduce((g,[y,x])=>{const O=wn(x);return O!==void 0&&(g[y]=O),g},{});return Hi(Hi({},i),H2(Hi(Hi({},o),m)))}),l=ud({get:()=>t.modelValue,set:u=>n("update:modelValue",u)}),a=kf(),c=xc(TT(t.target||a,l,s));return r(c),()=>{var u;return Nf(t.tag||"div",{ref:a},(u=e==null?void 0:e.default)==null?void 0:u.call(e,c))}}}),OT={props:["myuuid","formmode"],data(){return{myfile:null,editme:!1}},async mounted(){this.formmode&&(this.editme=!0),this.myfile=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Files.get(this.myuuid)))},methods:{update(){this.myfile.title==""&&(this.myfile.title="...."),console.log(this.myfile),this.$root.UpdateRecord("Files",this.myuuid,this.myfile),this.formmode||(this.editme=!1)}}},MT={key:0};function AT(t,e,n,r,o,i){return o.myfile?(z(),Z("span",MT,[o.editme?$e("",!0):(z(),Z("div",{key:0,onDblclick:e[0]||(e[0]=s=>o.editme=!0)},xn(o.myfile.title),33)),o.editme?Tt((z(),Z("input",{key:1,type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>o.myfile.title=s),placeholder:"......",onBlur:e[2]||(e[2]=s=>i.update())},null,544)),[[Mt,o.myfile.title]]):$e("",!0)])):$e("",!0)}const F1=ct(OT,[["render",AT]]),_T={props:{modelValue:{required:!0,type:Array}},components:{VueDraggable:Lc,FileName:F1},computed:{list:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},methods:{handleChange(t){this.$root.UpdateRecord("Writer",this.$root.tools.writer.selected.uuid,this.$root.tools.writer.selected)}},name:"DocStructureNode"},NT={class:"btn"},$T=["onClick"],PT={key:0,viewBox:"0 0 24 24"},DT={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},IT=["onClick"];function LT(t,e,n,r,o,i){const s=Je("FileName"),l=Je("DocStructureNode",!0),a=Je("VueDraggable");return z(),St(a,{class:"dragArea",tag:"ul",modelValue:i.list,"onUpdate:modelValue":e[0]||(e[0]=c=>i.list=c),animation:150,group:"files","item-key":"name",onEnd:i.handleChange},{default:hi(()=>[(z(!0),Z(Ge,null,on(n.modelValue,(c,u)=>(z(),Z("li",{class:"node",key:u},[S("div",NT,[S("button",{onClick:d=>c.open=!c.open,class:"toggle"},[c.open?$e("",!0):(z(),Z("svg",PT,e[1]||(e[1]=[S("title",null,"chevron-right",-1),S("path",{d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"},null,-1)]))),c.open?(z(),Z("svg",DT,e[2]||(e[2]=[S("title",null,"chevron-down-box",-1),S("path",{d:"M19,3H5A2,2 0 0,0 3,5V19C3,20.11 3.9,21 5,21H19C20.11,21 21,20.11 21,19V5A2,2 0 0,0 19,3M12,15.71L6,9.71L7.41,8.29L12,12.88L16.59,8.29L18,9.71L12,15.71Z"},null,-1)]))):$e("",!0)],8,$T),S("button",{class:mr(["labelbtn",{selected:t.$root.tools.writer.selectednode===c.uuid}]),onClick:d=>t.$root.tools.writer.selectednode=c.uuid},[(z(),St(s,{myuuid:c.uuid,key:c.uuid},null,8,["myuuid"]))],10,IT)]),c.open?(z(),St(l,{key:0,modelValue:c.files,"onUpdate:modelValue":d=>c.files=d},null,8,["modelValue","onUpdate:modelValue"])):$e("",!0)]))),128))]),_:1},8,["modelValue","onEnd"])}const BT=ct(_T,[["render",LT],["__scopeId","data-v-094c7911"]]),VT={name:"DocStructure",components:{DocStructureNode:BT},data(){return{bookwatch:null}},async mounted(){this.bookwatch=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Writer.get(this.$root.tools.writer.selected.uuid))),this.$watch("bookwatch",(t,e)=>{this.$root.tools.writer.selected=JSON.parse(JSON.stringify(t))})},methods:{async addNode(){let t=JSON.parse(JSON.stringify(this.$root.fileTemplate));t.writerid=this.$root.tools.writer.selected,t.uuid=this.$root.uuid(),await this.$root.AddRecord("Files",t);let e={};e.open=!1,e.uuid=t.uuid,e.files=[];let n=null;this.$root.tools.writer.selectednode?n=this.findNodeByUUID(this.$root.tools.writer.selectednode,this.$root.tools.writer.selected):n=this.$root.tools.writer.selected,n.files.push(e),n.open=!0,this.$root.UpdateRecord("Writer",this.$root.tools.writer.selected,this.$root.tools.writer.selected)},findNodeByUUID(t,e){if(e.uuid===t)return e;for(let n of e.files){let r=this.findNodeByUUID(t,n);if(r)return r}return null}}},RT={key:0,class:"documentStructure"},HT={class:"lhstools"},FT={class:"docsettings"},jT={style:{padding:"10px"}},zT={class:"lhsscrollcontainer"};function UT(t,e,n,r,o,i){const s=Je("DocStructureNode");return this.$root.tools.writer.selected?(z(),Z("div",RT,[S("div",HT,[S("button",{onClick:e[0]||(e[0]=(...l)=>i.addNode&&i.addNode(...l)),class:"btn"},e[3]||(e[3]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"Add File"),S("path",{d:"M14 2H6C4.89 2 4 2.89 4 4V20C4 21.11 4.89 22 6 22H13.81C13.28 21.09 13 20.05 13 19C13 15.69 15.69 13 19 13C19.34 13 19.67 13.03 20 13.08V8L14 2M13 9V3.5L18.5 9H13M23 20H20V23H18V20H15V18H18V15H20V18H23V20Z"})],-1),S("span",null,"Add",-1)]))]),S("div",null,[S("div",FT,[S("button",{class:"btn",onClick:e[1]||(e[1]=l=>t.$root.tools.writer.selectednode=null)},e[4]||(e[4]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"book-open-page-variant-outline"),S("path",{d:"M19 1L14 6V17L19 12.5V1M21 5V18.5C19.9 18.15 18.7 18 17.5 18C15.8 18 13.35 18.65 12 19.5V6C10.55 4.9 8.45 4.5 6.5 4.5C4.55 4.5 2.45 4.9 1 6V20.65C1 20.9 1.25 21.15 1.5 21.15C1.6 21.15 1.65 21.1 1.75 21.1C3.1 20.45 5.05 20 6.5 20C8.45 20 10.55 20.4 12 21.5C13.35 20.65 15.8 20 17.5 20C19.15 20 20.85 20.3 22.25 21.05C22.35 21.1 22.4 21.1 22.5 21.1C22.75 21.1 23 20.85 23 20.6V6C22.4 5.55 21.75 5.25 21 5M10 18.41C8.75 18.09 7.5 18 6.5 18C5.44 18 4.18 18.19 3 18.5V7.13C3.91 6.73 5.14 6.5 6.5 6.5C7.86 6.5 9.09 6.73 10 7.13V18.41Z"})],-1),nr(" Document Settings ")]))]),S("div",jT,[S("div",zT,[this.$root.tools.writer.selected.files.length?(z(),St(s,{key:0,modelValue:this.$root.tools.writer.selected.files,"onUpdate:modelValue":e[2]||(e[2]=l=>this.$root.tools.writer.selected.files=l)},null,8,["modelValue"])):$e("",!0)])])])])):$e("",!0)}const KT=ct(VT,[["render",UT],["__scopeId","data-v-9d6f2238"]]);function en(t){this.content=t}en.prototype={constructor:en,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),i=r.content.slice();return o==-1?i.push(n||t,e):(i[o+1]=e,n&&(i[o]=n)),new en(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new en(n)},addToStart:function(t,e){return new en([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new en(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),i=r.find(t);return o.splice(i==-1?o.length:i,0,e,n),new en(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=en.from(t),t.size?new en(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=en.from(t),t.size?new en(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=en.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};en.from=function(t){if(t instanceof en)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new en(e)};function j1(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),i=e.child(r);if(o==i){n+=o.nodeSize;continue}if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(let s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){let s=j1(o.content,i.content,n+1);if(s!=null)return s}n+=o.nodeSize}}function z1(t,e,n,r){for(let o=t.childCount,i=e.childCount;;){if(o==0||i==0)return o==i?null:{a:n,b:r};let s=t.child(--o),l=e.child(--i),a=s.nodeSize;if(s==l){n-=a,r-=a;continue}if(!s.sameMarkup(l))return{a:n,b:r};if(s.isText&&s.text!=l.text){let c=0,u=Math.min(s.text.length,l.text.length);for(;c<u&&s.text[s.text.length-c-1]==l.text[l.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||l.content.size){let c=z1(s.content,l.content,n-1,r-1);if(c)return c}n-=a,r-=a}}class oe{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,i){for(let s=0,l=0;l<n;s++){let a=this.content[s],c=l+a.nodeSize;if(c>e&&r(a,o+l,i||null,s)!==!1&&a.content.size){let u=l+1;a.nodesBetween(Math.max(0,e-u),Math.min(a.content.size,n-u),r,o+u)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let i="",s=!0;return this.nodesBetween(e,n,(l,a)=>{let c=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?o?typeof o=="function"?o(l):o:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&r&&(s?s=!1:i+=r),i+=c},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)o.push(e.content[i]);return new oe(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let i=0,s=0;s<n;i++){let l=this.content[i],a=s+l.nodeSize;a>e&&((s<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,n-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,n-s-1))),r.push(l),o+=l.nodeSize),s=a}return new oe(r,o)}cutByIndex(e,n){return e==n?oe.empty:e==0&&n==this.content.length?this:new oe(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new oe(o,i)}addToStart(e){return new oe([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new oe(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return j1(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return z1(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Ql(0,e);if(e==this.size)return Ql(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let i=this.child(r),s=o+i.nodeSize;if(s>=e)return s==e||n>0?Ql(r+1,s):Ql(r,o);o=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return oe.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new oe(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return oe.empty;let n,r=0;for(let o=0;o<e.length;o++){let i=e[o];r+=i.nodeSize,o&&i.isText&&e[o-1].sameMarkup(i)?(n||(n=e.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new oe(n||e,r)}static from(e){if(!e)return oe.empty;if(e instanceof oe)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new oe([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}oe.empty=new oe([],0);const Pu={index:0,offset:0};function Ql(t,e){return Pu.index=t,Pu.offset=e,Pu}function nc(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!nc(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!nc(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let wt=class Ud{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let i=e[o];if(this.eq(i))return e;if(this.type.excludes(i.type))n||(n=e.slice(0,o));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&nc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Ud.none;if(e instanceof Ud)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};wt.none=[];class rc extends Error{}class Ce{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=K1(this.content,e+this.openStart,n);return r&&new Ce(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Ce(U1(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Ce.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Ce(oe.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)o++;return new Ce(e,r,o)}}Ce.empty=new Ce(oe.empty,0,0);function U1(t,e,n){let{index:r,offset:o}=t.findIndex(e),i=t.maybeChild(r),{index:s,offset:l}=t.findIndex(n);if(o==e||i.isText){if(l!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(U1(i.content,e-o-1,n-o-1)))}function K1(t,e,n,r){let{index:o,offset:i}=t.findIndex(e),s=t.maybeChild(o);if(i==e||s.isText)return t.cut(0,e).append(n).append(t.cut(e));let l=K1(s.content,e-i-1,n);return l&&t.replaceChild(o,s.copy(l))}function WT(t,e,n){if(n.openStart>t.depth)throw new rc("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new rc("Inconsistent open depths");return W1(t,e,n,0)}function W1(t,e,n,r){let o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let s=W1(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,l=s.content;return ai(s,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:s,end:l}=qT(n,t);return ai(i,J1(t,s,l,e,r))}else return ai(i,oc(t,e,r))}function q1(t,e){if(!e.type.compatibleContent(t.type))throw new rc("Cannot join "+e.type.name+" onto "+t.type.name)}function Kd(t,e,n){let r=t.node(n);return q1(r,e.node(n)),r}function li(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Js(t,e,n,r){let o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(li(t.nodeAfter,r),i++));for(let l=i;l<s;l++)li(o.child(l),r);e&&e.depth==n&&e.textOffset&&li(e.nodeBefore,r)}function ai(t,e){return t.type.checkContent(e),t.copy(e)}function J1(t,e,n,r,o){let i=t.depth>o&&Kd(t,e,o+1),s=r.depth>o&&Kd(n,r,o+1),l=[];return Js(null,t,o,l),i&&s&&e.index(o)==n.index(o)?(q1(i,s),li(ai(i,J1(t,e,n,r,o+1)),l)):(i&&li(ai(i,oc(t,e,o+1)),l),Js(e,n,o,l),s&&li(ai(s,oc(n,r,o+1)),l)),Js(r,null,o,l),new oe(l)}function oc(t,e,n){let r=[];if(Js(null,t,n,r),t.depth>n){let o=Kd(t,e,n+1);li(ai(o,oc(t,e,n+1)),r)}return Js(e,null,n,r),new oe(r)}function qT(t,e){let n=e.depth-t.openStart,o=e.node(n).copy(t.content);for(let i=n-1;i>=0;i--)o=e.node(i).copy(oe.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}class fl{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let i=0;i<e;i++)o+=r.child(i).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return wt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let l=r;r=o,o=l}let i=r.marks;for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!o||!i[s].isInSet(o.marks))&&(i=i[s--].removeFromSet(i));return i}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!o||!r[i].isInSet(o.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new ic(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,i=n;for(let s=e;;){let{index:l,offset:a}=s.content.findIndex(i),c=i-a;if(r.push(s,l,o+a),!c||(s=s.child(l),s.isText))break;i=c-1,o+=a+1}return new fl(n,r,i)}static resolveCached(e,n){let r=cm.get(e);if(r)for(let i=0;i<r.elts.length;i++){let s=r.elts[i];if(s.pos==n)return s}else cm.set(e,r=new JT);let o=r.elts[r.i]=fl.resolve(e,n);return r.i=(r.i+1)%GT,o}}class JT{constructor(){this.elts=[],this.i=0}}const GT=12,cm=new WeakMap;class ic{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const YT=Object.create(null);let xo=class Wd{constructor(e,n,r,o=wt.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||oe.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&nc(this.attrs,n||e.defaultAttrs||YT)&&wt.sameSet(this.marks,r||wt.none)}copy(e=null){return e==this.content?this:new Wd(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Wd(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Ce.empty;let o=this.resolve(e),i=this.resolve(n),s=r?0:o.sharedDepth(n),l=o.start(s),c=o.node(s).content.cut(o.pos-l,i.pos-l);return new Ce(c,o.depth-s,i.depth-s)}replace(e,n,r){return WT(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return fl.resolveCached(this,e)}resolveNoCache(e){return fl.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,i=>(r.isInSet(i.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),G1(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=oe.empty,o=0,i=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,o,i),l=s&&s.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=o;a<i;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let i=this.contentMatchAt(e).matchType(r),s=i&&i.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=wt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!wt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=oe.fromJSON(e,n.content),i=e.nodeType(n.type).create(n.attrs,o,r);return i.type.checkAttrs(i.attrs),i}};xo.prototype.text=void 0;class sc extends xo{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):G1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new sc(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new sc(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function G1(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class gi{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new XT(e,n);if(r.next==null)return gi.empty;let o=Y1(r);r.next&&r.err("Unexpected trailing text");let i=oE(rE(o));return iE(i,r),i}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let i=n;o&&i<r;i++)o=o.matchType(e.child(i).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function i(s,l){let a=s.matchFragment(e,r);if(a&&(!n||a.validEnd))return oe.from(l.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:d}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&o.indexOf(d)==-1){o.push(d);let h=i(d,l.concat(u));if(h)return h}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),i=o.match;if(i.matchType(e)){let s=[];for(let l=o;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<i.next.length;s++){let{type:l,next:a}=i.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!o.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:o}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let i=o+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)i+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return i}).join(`
`)}}gi.empty=new gi(!0);class XT{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Y1(t){let e=[];do e.push(ZT(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function ZT(t){let e=[];do e.push(QT(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function QT(t){let e=nE(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=eE(t,e);else break;return e}function um(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function eE(t,e){let n=um(t),r=n;return t.eat(",")&&(t.next!="}"?r=um(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function tE(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let i in n){let s=n[i];s.isInGroup(e)&&o.push(s)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function nE(t){if(t.eat("(")){let e=Y1(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=tE(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function rE(t){let e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(s,l,a){let c={term:a,to:l};return e[s].push(c),c}function o(s,l){s.forEach(a=>a.to=l)}function i(s,l){if(s.type=="choice")return s.exprs.reduce((a,c)=>a.concat(i(c,l)),[]);if(s.type=="seq")for(let a=0;;a++){let c=i(s.exprs[a],l);if(a==s.exprs.length-1)return c;o(c,l=n())}else if(s.type=="star"){let a=n();return r(l,a),o(i(s.expr,a),a),[r(a)]}else if(s.type=="plus"){let a=n();return o(i(s.expr,l),a),o(i(s.expr,a),a),[r(a)]}else{if(s.type=="opt")return[r(l)].concat(i(s.expr,l));if(s.type=="range"){let a=l;for(let c=0;c<s.min;c++){let u=n();o(i(s.expr,a),u),a=u}if(s.max==-1)o(i(s.expr,a),a);else for(let c=s.min;c<s.max;c++){let u=n();r(a,u),o(i(s.expr,a),u),a=u}return[r(a)]}else{if(s.type=="name")return[r(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function X1(t,e){return e-t}function dm(t,e){let n=[];return r(e),n.sort(X1);function r(o){let i=t[o];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(o);for(let s=0;s<i.length;s++){let{term:l,to:a}=i[s];!l&&n.indexOf(a)==-1&&r(a)}}}function oE(t){let e=Object.create(null);return n(dm(t,0));function n(r){let o=[];r.forEach(s=>{t[s].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let u=0;u<o.length;u++)o[u][0]==l&&(c=o[u][1]);dm(t,a).forEach(u=>{c||o.push([l,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let i=e[r.join(",")]=new gi(r.indexOf(t.length-1)>-1);for(let s=0;s<o.length;s++){let l=o[s][1].sort(X1);i.next.push({type:o[s][0],next:e[l.join(",")]||n(l)})}return i}}function iE(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],i=!o.validEnd,s=[];for(let l=0;l<o.next.length;l++){let{type:a,next:c}=o.next[l];s.push(a.name),i&&!(a.isText||a.hasRequiredAttrs())&&(i=!1),r.indexOf(c)==-1&&r.push(c)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Z1(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Q1(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let i=t[r];if(i.hasDefault)o=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function eb(t,e,n,r){for(let o in e)if(!(o in t))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in t){let i=t[o];i.validate&&i.validate(e[o])}}function tb(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new lE(t,r,e[r]);return n}let fm=class nb{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=tb(e,r.attrs),this.defaultAttrs=Z1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==gi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Q1(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new xo(this,this.computeAttrs(e),oe.from(n),wt.setFrom(r))}createChecked(e=null,n,r){return n=oe.from(n),this.checkContent(n),new xo(this,this.computeAttrs(e),n,wt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=oe.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let o=this.contentMatch.matchFragment(n),i=o&&o.fillBefore(oe.empty,!0);return i?new xo(this,e,n.append(i),wt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){eb(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:wt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((i,s)=>r[i]=new nb(i,n,s));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function sE(t,e,n){let r=n.split("|");return o=>{let i=o===null?"null":typeof o;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${i}`)}}class lE{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?sE(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Bc{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=tb(e,o.attrs),this.excluded=null;let i=Z1(this.attrs);this.instance=i?new wt(this,i):null}create(e=null){return!e&&this.instance?this.instance:new wt(this,Q1(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((i,s)=>r[i]=new Bc(i,o++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){eb(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class rb{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=en.from(e.nodes),n.marks=en.from(e.marks||{}),this.nodes=fm.compile(this.spec.nodes,this),this.marks=Bc.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let i=this.nodes[o],s=i.spec.content||"",l=i.spec.marks;if(i.contentMatch=r[s]||(r[s]=gi.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=l=="_"?null:l?hm(this,l.split(" ")):l==""||!i.inlineContent?[]:null}for(let o in this.marks){let i=this.marks[o],s=i.spec.excludes;i.excluded=s==null?[i]:s==""?[]:hm(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof fm){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new sc(r,r.defaultAttrs,e,wt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return xo.fromJSON(this,e)}markFromJSON(e){return wt.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function hm(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(let l in t.marks){let a=t.marks[l];(o=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=a)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function aE(t){return t.tag!=null}function cE(t){return t.style!=null}let Gs=class qd{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if(aE(o))this.tags.push(o);else if(cE(o)){let i=/[^=]*/.exec(o.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let i=e.nodes[o.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new mm(this,n,!1);return r.addAll(e,wt.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new mm(this,n,!0);return r.addAll(e,wt.none,n.from,n.to),Ce.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let i=this.tags[o];if(fE(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let s=i.getAttrs(e);if(s===!1)continue;i.attrs=s||void 0}return i}}}matchStyle(e,n,r,o){for(let i=o?this.styles.indexOf(o)+1:0;i<this.styles.length;i++){let s=this.styles[i],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(s.getAttrs){let a=s.getAttrs(n);if(a===!1)continue;s.attrs=a||void 0}return s}}}static schemaRules(e){let n=[];function r(o){let i=o.priority==null?50:o.priority,s=0;for(;s<n.length;s++){let l=n[s];if((l.priority==null?50:l.priority)<i)break}n.splice(s,0,o)}for(let o in e.marks){let i=e.marks[o].spec.parseDOM;i&&i.forEach(s=>{r(s=gm(s)),s.mark||s.ignore||s.clearMark||(s.mark=o)})}for(let o in e.nodes){let i=e.nodes[o].spec.parseDOM;i&&i.forEach(s=>{r(s=gm(s)),s.node||s.ignore||s.mark||(s.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new qd(e,qd.schemaRules(e)))}};const ob={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},uE={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ib={ol:!0,ul:!0},hl=1,Jd=2,Ea=4;function pm(t,e,n){return e!=null?(e?hl:0)|(e==="full"?Jd:0):t&&t.whitespace=="pre"?hl|Jd:n&-5}class ea{constructor(e,n,r,o,i,s){this.type=e,this.attrs=n,this.marks=r,this.solid=o,this.options=s,this.content=[],this.activeMarks=wt.none,this.match=i||(s&Ea?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(oe.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&hl)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-o[0].length))}}let n=oe.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(oe.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!ob.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class mm{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,i,s=pm(null,n.preserveWhitespace,0)|(r?Ea:0);o?i=new ea(o.type,o.attrs,wt.none,!0,n.topMatch||o.type.contentMatch,s):r?i=new ea(null,null,wt.none,!0,null,s):i=new ea(e.schema.topNodeType,null,wt.none,!0,null,s),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,o=this.top,i=o.options&Jd?"full":this.localPreserveWS||(o.options&hl)>0;if(i==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)i!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=o.content[o.content.length-1],l=e.previousSibling;(!s||l&&l.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let o=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),l;ib.hasOwnProperty(s)&&this.parser.normalizeLists&&dE(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(a?a.ignore:uE.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let c,u=this.needsBlock;if(ob.hasOwnProperty(s))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),c=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=a&&a.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(i),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,a,c,a.consuming===!1?l:void 0)}this.localPreserveWS=o}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let i=this.parser.matchedStyles[o],s=r.getPropertyValue(i);if(s)for(let l=void 0;;){let a=this.parser.matchStyle(i,s,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(c=>!a.clearMark(c)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,o){let i,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r)||this.leafFallback(e,r);else{let a=this.enter(s,n.attrs||null,r,n.preserveWhitespace);a&&(i=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}i&&this.sync(l)&&this.open--}addAll(e,n,r,o){let i=r||0;for(let s=r?e.childNodes[r]:e.firstChild,l=o==null?null:e.childNodes[o];s!=l;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s,n);this.findAtPoint(e,i)}findPlace(e,n){let r,o;for(let i=this.open;i>=0;i--){let s=this.nodes[i],l=s.findWrapping(e);if(l&&(!r||r.length>l.length)&&(r=l,o=s,!l.length)||s.solid)break}if(!r)return null;this.sync(o);for(let i=0;i<r.length;i++)n=this.enterInner(r[i],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let i=wt.none;for(let s of r.concat(e.marks))(o.type?o.type.allowsMarkType(s.type):ym(s.type,e.type))&&(i=s.addToSet(i));return o.content.push(e.mark(i)),!0}return!1}enter(e,n,r,o){let i=this.findPlace(e.create(n),r);return i&&(i=this.enterInner(e,n,r,!0,o)),i}enterInner(e,n,r,o=!1,i){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let l=pm(e,i,s.options);s.options&Ea&&s.content.length==0&&(l|=Ea);let a=wt.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):ym(c.type,e))?(a=c.addToSet(a),!1):!0),this.nodes.push(new ea(e,n,a,o,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=hl)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=(l,a)=>{for(;l>=0;l--){let c=n[l];if(c==""){if(l==n.length-1||l==0)continue;for(;a>=i;a--)if(s(l-1,a))return!0;return!1}else{let u=a>0||a==0&&o?this.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;a--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function dE(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&ib.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function fE(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function gm(t){let e={};for(let n in t)e[n]=t[n];return e}function ym(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let i=[],s=l=>{i.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:u}=l.edge(a);if(c==e||i.indexOf(u)<0&&s(u))return!0}};if(s(o.contentMatch))return!0}}class Ci{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Du(n).createDocumentFragment());let o=r,i=[];return e.forEach(s=>{if(i.length||s.marks.length){let l=0,a=0;for(;l<i.length&&a<s.marks.length;){let c=s.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(i[l][0])||c.type.spec.spanning===!1)break;l++,a++}for(;l<i.length;)o=i.pop()[1];for(;a<s.marks.length;){let c=s.marks[a++],u=this.serializeMark(c,s.isInline,n);u&&(i.push([c,o]),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=Oa(Du(n),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let i=this.serializeMark(e.marks[o],e.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&Oa(Du(r),o(e,n),null,e.attrs)}static renderSpec(e,n,r=null,o){return Oa(e,n,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ci(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=bm(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return bm(e.marks)}}function bm(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Du(t){return t.document||window.document}const vm=new WeakMap;function hE(t){let e=vm.get(t);return e===void 0&&vm.set(t,e=pE(t)),e}function pE(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(t),e}function Oa(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],i;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=hE(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=o.indexOf(" ");s>0&&(n=o.slice(0,s),o=o.slice(s+1));let l,a=n?t.createElementNS(n,o):t.createElement(o),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let h=d.indexOf(" ");h>0?a.setAttributeNS(d.slice(0,h),d.slice(h+1),c[d]):a.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let h=e[d];if(h===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:m,contentDOM:g}=Oa(t,h,n,r);if(a.appendChild(m),g){if(l)throw new RangeError("Multiple content holes");l=g}}}return{dom:a,contentDOM:l}}const sb=65535,lb=Math.pow(2,16);function mE(t,e){return t+e*lb}function wm(t){return t&sb}function gE(t){return(t-(t&sb))/lb}const ab=1,cb=2,Ma=4,ub=8;class Gd{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&ub)>0}get deletedBefore(){return(this.delInfo&(ab|Ma))>0}get deletedAfter(){return(this.delInfo&(cb|Ma))>0}get deletedAcross(){return(this.delInfo&Ma)>0}}class Jn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Jn.empty)return Jn.empty}recover(e){let n=0,r=wm(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+gE(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?o:0);if(a>e)break;let c=this.ranges[l+i],u=this.ranges[l+s],d=a+c;if(e<=d){let h=c?e==a?-1:e==d?1:n:n,m=a+o+(h<0?0:u);if(r)return m;let g=e==(n<0?a:d)?null:mE(l/3,e-a),y=e==a?cb:e==d?ab:Ma;return(n<0?e!=a:e!=d)&&(y|=ub),new Gd(m,y,g)}o+=u-c}return r?e+o:new Gd(e+o,0,null)}touches(e,n){let r=0,o=wm(n),i=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+i],u=a+c;if(e<=u&&l==o*3)return!0;r+=this.ranges[l+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,i=0;o<this.ranges.length;o+=3){let s=this.ranges[o],l=s-(this.inverted?i:0),a=s+(this.inverted?0:i),c=this.ranges[o+n],u=this.ranges[o+r];e(l,l+c,a,a+u),i+=u-c}}invert(){return new Jn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Jn.empty:new Jn(e<0?[0,-e,0]:[0,0,e])}}Jn.empty=new Jn([]);class pl{constructor(e,n,r=0,o=e?e.length:0){this.mirror=n,this.from=r,this.to=o,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new pl(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let o=e.getMirror(n);this.appendMap(e._maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e._maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new pl;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let i=this.from;i<this.to;i++){let s=this._maps[i],l=s.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(i);if(a!=null&&a>i&&a<this.to){i=a,e=this._maps[a].recover(l.recover);continue}}o|=l.delInfo,e=l.pos}return r?e:new Gd(e,o,null)}}const Iu=Object.create(null);class pn{getMap(){return Jn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Iu[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Iu)throw new RangeError("Duplicate use of step JSON ID "+e);return Iu[e]=n,n.prototype.jsonID=e,n}}class Bt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Bt(e,null)}static fail(e){return new Bt(null,e)}static fromReplace(e,n,r,o){try{return Bt.ok(e.replace(n,r,o))}catch(i){if(i instanceof rc)return Bt.fail(i.message);throw i}}}function Gf(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let i=t.child(o);i.content.size&&(i=i.copy(Gf(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return oe.fromArray(r)}class wo extends pn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new Ce(Gf(n.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),o),n.openStart,n.openEnd);return Bt.fromReplace(e,this.from,this.to,i)}invert(){return new Or(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new wo(n.pos,r.pos,this.mark)}merge(e){return e instanceof wo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new wo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new wo(n.from,n.to,e.markFromJSON(n.mark))}}pn.jsonID("addMark",wo);class Or extends pn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Ce(Gf(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return Bt.fromReplace(e,this.from,this.to,r)}invert(){return new wo(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Or(n.pos,r.pos,this.mark)}merge(e){return e instanceof Or&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Or(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Or(n.from,n.to,e.markFromJSON(n.mark))}}pn.jsonID("removeMark",Or);class Co extends pn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Bt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Bt.fromReplace(e,this.pos,this.pos+1,new Ce(oe.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new Co(this.pos,n.marks[o]);return new Co(this.pos,this.mark)}}return new is(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Co(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Co(n.pos,e.markFromJSON(n.mark))}}pn.jsonID("addNodeMark",Co);class is extends pn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Bt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Bt.fromReplace(e,this.pos,this.pos+1,new Ce(oe.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Co(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new is(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new is(n.pos,e.markFromJSON(n.mark))}}pn.jsonID("removeNodeMark",is);class Kt extends pn{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&Yd(e,this.from,this.to)?Bt.fail("Structure replace would overwrite content"):Bt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Jn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Kt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Kt(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Kt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Ce.empty:new Ce(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Kt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Ce.empty:new Ce(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Kt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Kt(n.from,n.to,Ce.fromJSON(e,n.slice),!!n.structure)}}pn.jsonID("replace",Kt);class Wt extends pn{constructor(e,n,r,o,i,s,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=l}apply(e){if(this.structure&&(Yd(e,this.from,this.gapFrom)||Yd(e,this.gapTo,this.to)))return Bt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Bt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Bt.fromReplace(e,this.from,this.to,r):Bt.fail("Content does not fit in gap")}getMap(){return new Jn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Wt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||i>r.pos?null:new Wt(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Wt(n.from,n.to,n.gapFrom,n.gapTo,Ce.fromJSON(e,n.slice),n.insert,!!n.structure)}}pn.jsonID("replaceAround",Wt);function Yd(t,e,n){let r=t.resolve(e),o=n-e,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let s=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function yE(t,e,n,r){let o=[],i=[],s,l;t.doc.nodesBetween(e,n,(a,c,u)=>{if(!a.isInline)return;let d=a.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,e),m=Math.min(c+a.nodeSize,n),g=r.addToSet(d);for(let y=0;y<d.length;y++)d[y].isInSet(g)||(s&&s.to==h&&s.mark.eq(d[y])?s.to=m:o.push(s=new Or(h,m,d[y])));l&&l.to==h?l.to=m:i.push(l=new wo(h,m,r))}}),o.forEach(a=>t.step(a)),i.forEach(a=>t.step(a))}function bE(t,e,n,r){let o=[],i=0;t.doc.nodesBetween(e,n,(s,l)=>{if(!s.isInline)return;i++;let a=null;if(r instanceof Bc){let c=s.marks,u;for(;u=r.isInSet(c);)(a||(a=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(a=[r]):a=s.marks;if(a&&a.length){let c=Math.min(l+s.nodeSize,n);for(let u=0;u<a.length;u++){let d=a[u],h;for(let m=0;m<o.length;m++){let g=o[m];g.step==i-1&&d.eq(o[m].style)&&(h=g)}h?(h.to=c,h.step=i):o.push({style:d,from:Math.max(l,e),to:c,step:i})}}}),o.forEach(s=>t.step(new Or(s.from,s.to,s.style)))}function Yf(t,e,n,r=n.contentMatch,o=!0){let i=t.doc.nodeAt(e),s=[],l=e+1;for(let a=0;a<i.childCount;a++){let c=i.child(a),u=l+c.nodeSize,d=r.matchType(c.type);if(!d)s.push(new Kt(l,u,Ce.empty));else{r=d;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new Or(l,u,c.marks[h]));if(o&&c.isText&&n.whitespace!="pre"){let h,m=/\r?\n|\r/g,g;for(;h=m.exec(c.text);)g||(g=new Ce(oe.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new Kt(l+h.index,l+h.index+h[0].length,g))}}l=u}if(!r.validEnd){let a=r.fillBefore(oe.empty,!0);t.replace(l,l,new Ce(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function vE(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function ps(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let o=t.$from.node(r),i=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&o.canReplace(i,s,n))return r;if(r==0||o.type.spec.isolating||!vE(o,i,s))break}return null}function wE(t,e,n){let{$from:r,$to:o,depth:i}=e,s=r.before(i+1),l=o.after(i+1),a=s,c=l,u=oe.empty,d=0;for(let g=i,y=!1;g>n;g--)y||r.index(g)>0?(y=!0,u=oe.from(r.node(g).copy(u)),d++):a--;let h=oe.empty,m=0;for(let g=i,y=!1;g>n;g--)y||o.after(g+1)<o.end(g)?(y=!0,h=oe.from(o.node(g).copy(h)),m++):c++;t.step(new Wt(a,c,s,l,new Ce(u.append(h),d,m),u.size-d,!0))}function Xf(t,e,n=null,r=t){let o=CE(t,e),i=o&&kE(r,e);return i?o.map(Cm).concat({type:e,attrs:n}).concat(i.map(Cm)):null}function Cm(t){return{type:t,attrs:null}}function CE(t,e){let{parent:n,startIndex:r,endIndex:o}=t,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;let s=i.length?i[0]:e;return n.canReplaceWith(r,o,s)?i:null}function kE(t,e){let{parent:n,startIndex:r,endIndex:o}=t,i=n.child(r),s=e.contentMatch.findWrapping(i.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;a&&c<o;c++)a=a.matchType(n.child(c).type);return!a||!a.validEnd?null:s}function SE(t,e,n){let r=oe.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let l=n[s].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=oe.from(n[s].type.create(n[s].attrs,r))}let o=e.start,i=e.end;t.step(new Wt(o,i,o,i,new Ce(r,0,0),n.length,!0))}function xE(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,n,(s,l)=>{let a=typeof o=="function"?o(s):o;if(s.isTextblock&&!s.hasMarkup(r,a)&&TE(t.doc,t.mapping.slice(i).map(l),r)){let c=null;if(r.schema.linebreakReplacement){let m=r.whitespace=="pre",g=!!r.contentMatch.matchType(r.schema.linebreakReplacement);m&&!g?c=!1:!m&&g&&(c=!0)}c===!1&&fb(t,s,l,i),Yf(t,t.mapping.slice(i).map(l,1),r,void 0,c===null);let u=t.mapping.slice(i),d=u.map(l,1),h=u.map(l+s.nodeSize,1);return t.step(new Wt(d,h,d+1,h-1,new Ce(oe.from(r.create(a,null,s.marks)),0,0),1,!0)),c===!0&&db(t,s,l,i),!1}})}function db(t,e,n,r){e.forEach((o,i)=>{if(o.isText){let s,l=/\r?\n|\r/g;for(;s=l.exec(o.text);){let a=t.mapping.slice(r).map(n+1+i+s.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function fb(t,e,n,r){e.forEach((o,i)=>{if(o.type==o.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+i);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function TE(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function EE(t,e,n,r,o){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let s=n.create(r,null,o||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,s);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Wt(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new Ce(oe.from(s),0,0),1,!0))}function Xr(t,e,n=1,r){let o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,u=n-2;c>i;c--,u--){let d=o.node(c),h=o.index(c);if(d.type.spec.isolating)return!1;let m=d.content.cutByIndex(h,d.childCount),g=r&&r[u+1];g&&(m=m.replaceChild(0,g.type.create(g.attrs)));let y=r&&r[u]||d;if(!d.canReplace(h+1,d.childCount)||!y.type.validContent(m))return!1}let l=o.indexAfter(i),a=r&&r[0];return o.node(i).canReplaceWith(l,l,a?a.type:o.node(i+1).type)}function OE(t,e,n=1,r){let o=t.doc.resolve(e),i=oe.empty,s=oe.empty;for(let l=o.depth,a=o.depth-n,c=n-1;l>a;l--,c--){i=oe.from(o.node(l).copy(i));let u=r&&r[c];s=oe.from(u?u.type.create(u.attrs,s):o.node(l).copy(s))}t.step(new Kt(e,e,new Ce(i.append(s),n,n),!0))}function Bo(t,e){let n=t.resolve(e),r=n.index();return hb(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function ME(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let o=0;o<e.childCount;o++){let i=e.child(o),s=i.type==r?t.type.schema.nodes.text:i.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(i.marks))return!1}return n.validEnd}function hb(t,e){return!!(t&&e&&!t.isLeaf&&ME(t,e))}function Vc(t,e,n=-1){let r=t.resolve(e);for(let o=r.depth;;o--){let i,s,l=r.index(o);if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),l++,s=r.node(o).maybeChild(l)):(i=r.node(o).maybeChild(l-1),s=r.node(o+1)),i&&!i.isTextblock&&hb(i,s)&&r.node(o).canReplace(l,l+1))return e;if(o==0)break;e=n<0?r.before(o):r.after(o)}}function AE(t,e,n){let r=null,{linebreakReplacement:o}=t.doc.type.schema,i=t.doc.resolve(e-n),s=i.node().type;if(o&&s.inlineContent){let u=s.whitespace=="pre",d=!!s.contentMatch.matchType(o);u&&!d?r=!1:!u&&d&&(r=!0)}let l=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);fb(t,u.node(),u.before(),l)}s.inlineContent&&Yf(t,e+n-1,s,i.node().contentMatchAt(i.index()),r==null);let a=t.mapping.slice(l),c=a.map(e-n);if(t.step(new Kt(c,a.map(e+n,-1),Ce.empty,!0)),r===!0){let u=t.doc.resolve(c);db(t,u.node(),u.before(),t.steps.length)}return t}function _E(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let i=r.indexAfter(o);if(r.node(o).canReplaceWith(i,i,n))return r.after(o+1);if(i<r.node(o).childCount)return null}return null}function pb(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let i=0;i<n.openStart;i++)o=o.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let s=r.depth;s>=0;s--){let l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,a=r.index(s)+(l>0?1:0),c=r.node(s),u=!1;if(i==1)u=c.canReplace(a,a,o);else{let d=c.contentMatchAt(a).findWrapping(o.firstChild.type);u=d&&c.canReplaceWith(a,a,d[0])}if(u)return l==0?r.pos:l<0?r.before(s+1):r.after(s+1)}return null}function Rc(t,e,n=e,r=Ce.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),i=t.resolve(n);return mb(o,i,r)?new Kt(e,n,r):new NE(o,i,r).fit()}function mb(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class NE{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=oe.empty;for(let o=0;o<=e.depth;o++){let i=e.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=oe.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let i=this.placed,s=r.depth,l=o.depth;for(;s&&l&&i.childCount==1;)i=i.firstChild.content,s--,l--;let a=new Ce(i,s,l);return e>-1?new Wt(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new Kt(r.pos,o.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let i=n.firstChild;if(n.childCount>1&&(o=0),i.type.spec.isolating&&o<=r){e=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,i=null;r?(i=Lu(this.unplaced.content,r-1).firstChild,o=i.content):o=this.unplaced.content;let s=o.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],u,d=null;if(n==1&&(s?c.matchType(s.type)||(d=c.fillBefore(oe.from(s),!1)):i&&a.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:l,parent:i,inject:d};if(n==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:l,parent:i,wrap:u};if(i&&c.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=Lu(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new Ce(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=Lu(e,n);if(o.childCount<=1&&n>0){let i=e.size-n<=n+o.size;this.unplaced=new Ce(As(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new Ce(As(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let y=0;y<i.length;y++)this.openFrontierNode(i[y]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[n];if(o){for(let y=0;y<o.childCount;y++)u.push(o.child(y));d=d.matchFragment(o)}let m=l.size+e-(s.content.size-s.openEnd);for(;c<l.childCount;){let y=l.child(c),x=d.matchType(y.type);if(!x)break;c++,(c>1||a==0||y.content.size)&&(d=x,u.push(gb(y.mark(h.allowedMarks(y.marks)),c==1?a:0,c==l.childCount?m:-1)))}let g=c==l.childCount;g||(m=-1),this.placed=_s(this.placed,n,oe.from(u)),this.frontier[n].match=d,g&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,x=l;y<m;y++){let O=x.lastChild;this.frontier.push({type:O.type,match:O.contentMatchAt(O.childCount)}),x=O.content}this.unplaced=g?e==0?Ce.empty:new Ce(As(s.content,e-1,1),e-1,m<0?s.openEnd:e-1):new Ce(As(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Bu(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],i=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=Bu(e,n,o,r,i);if(s){for(let l=n-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],u=Bu(e,l,c,a,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:i?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=_s(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),i=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,i)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=_s(this.placed,this.depth,oe.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(oe.empty,!0);n.childCount&&(this.placed=_s(this.placed,this.frontier.length,n))}}function As(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(As(t.firstChild.content,e-1,n)))}function _s(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(_s(t.lastChild.content,e-1,n)))}function Lu(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function gb(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,gb(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(oe.empty,!0)))),t.copy(r)}function Bu(t,e,n,r,o){let i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;let l=r.fillBefore(i.content,!0,s);return l&&!$E(n,i.content,s)?l:null}function $E(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function PE(t){return t.spec.defining||t.spec.definingForContent}function DE(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),i=t.doc.resolve(n);if(mb(o,i,r))return t.step(new Kt(e,n,r));let s=bb(o,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let l=-(o.depth+1);s.unshift(l);for(let h=o.depth,m=o.pos-1;h>0;h--,m--){let g=o.node(h).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;s.indexOf(h)>-1?l=h:o.before(h)==m&&s.splice(1,0,-h)}let a=s.indexOf(l),c=[],u=r.openStart;for(let h=r.content,m=0;;m++){let g=h.firstChild;if(c.push(g),m==r.openStart)break;h=g.content}for(let h=u-1;h>=0;h--){let m=c[h],g=PE(m.type);if(g&&!m.sameMarkup(o.node(Math.abs(l)-1)))u=h;else if(g||!m.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let m=(h+u+1)%(r.openStart+1),g=c[m];if(g)for(let y=0;y<s.length;y++){let x=s[(y+a)%s.length],O=!0;x<0&&(O=!1,x=-x);let A=o.node(x-1),N=o.index(x-1);if(A.canReplaceWith(N,N,g.type,g.marks))return t.replace(o.before(x),O?i.after(x):n,new Ce(yb(r.content,0,r.openStart,m),m,r.openEnd))}}let d=t.steps.length;for(let h=s.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>d));h--){let m=s[h];m<0||(e=o.before(m),n=i.after(m))}}function yb(t,e,n,r,o){if(e<n){let i=t.firstChild;t=t.replaceChild(0,i.copy(yb(i.content,e+1,n,r,i)))}if(e>r){let i=o.contentMatchAt(0),s=i.fillBefore(t).append(t);t=s.append(i.matchFragment(s).fillBefore(oe.empty,!0))}return t}function IE(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=_E(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new Ce(oe.from(r),0,0))}function LE(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),i=bb(r,o);for(let s=0;s<i.length;s++){let l=i[s],a=s==i.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),o.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),o.indexAfter(l-1))))return t.delete(r.before(l),o.after(l))}for(let s=1;s<=r.depth&&s<=o.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&o.end(s)-n!=o.depth-s&&r.start(s-1)==o.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),o.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function bb(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let i=t.start(o);if(i<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(i==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==i-1)&&n.push(o)}return n}class es extends pn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Bt.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return Bt.fromReplace(e,this.pos,this.pos+1,new Ce(oe.from(o),0,n.isLeaf?0:1))}getMap(){return Jn.empty}invert(e){return new es(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new es(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new es(n.pos,n.attr,n.value)}}pn.jsonID("attr",es);class ml extends pn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Bt.ok(r)}getMap(){return Jn.empty}invert(e){return new ml(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new ml(n.attr,n.value)}}pn.jsonID("docAttr",ml);let ss=class extends Error{};ss=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};ss.prototype=Object.create(Error.prototype);ss.prototype.constructor=ss;ss.prototype.name="TransformError";class BE{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new pl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new ss(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Ce.empty){let o=Rc(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new Ce(oe.from(r),0,0))}delete(e,n){return this.replace(e,n,Ce.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return DE(this,e,n,r),this}replaceRangeWith(e,n,r){return IE(this,e,n,r),this}deleteRange(e,n){return LE(this,e,n),this}lift(e,n){return wE(this,e,n),this}join(e,n=1){return AE(this,e,n),this}wrap(e,n){return SE(this,e,n),this}setBlockType(e,n=e,r,o=null){return xE(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return EE(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new es(e,n,r)),this}setDocAttribute(e,n){return this.step(new ml(e,n)),this}addNodeMark(e,n){return this.step(new Co(e,n)),this}removeNodeMark(e,n){if(!(n instanceof wt)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new is(e,n)),this}split(e,n=1,r){return OE(this,e,n,r),this}addMark(e,n,r){return yE(this,e,n,r),this}removeMark(e,n,r){return bE(this,e,n,r),this}clearIncompatible(e,n,r){return Yf(this,e,n,r),this}}const Vu=Object.create(null);class Ye{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new VE(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Ce.empty){let r=n.content.lastChild,o=null;for(let l=0;l<n.openEnd;l++)o=r,r=r.lastChild;let i=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:c}=s[l],u=e.mapping.slice(i);e.replaceRange(u.map(a.pos),u.map(c.pos),l?Ce.empty:n),l==0&&xm(e,i,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){let{$from:s,$to:l}=o[i],a=e.mapping.slice(r),c=a.map(s.pos),u=a.map(l.pos);i?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),xm(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new ze(e):Bi(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let i=e.depth-1;i>=0;i--){let s=n<0?Bi(e.node(0),e.node(i),e.before(i+1),e.index(i),n,r):Bi(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Yn(e.node(0))}static atStart(e){return Bi(e,e,0,0,1)||new Yn(e)}static atEnd(e){return Bi(e,e,e.content.size,e.childCount,-1)||new Yn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Vu[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Vu)throw new RangeError("Duplicate use of selection JSON ID "+e);return Vu[e]=n,n.prototype.jsonID=e,n}getBookmark(){return ze.between(this.$anchor,this.$head).getBookmark()}}Ye.prototype.visible=!0;class VE{constructor(e,n){this.$from=e,this.$to=n}}let km=!1;function Sm(t){!km&&!t.parent.inlineContent&&(km=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class ze extends Ye{constructor(e,n=e){Sm(e),Sm(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Ye.near(r);let o=e.resolve(n.map(this.anchor));return new ze(o.parent.inlineContent?o:r,r)}replace(e,n=Ce.empty){if(super.replace(e,n),n==Ce.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ze&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Hc(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ze(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let i=Ye.findFrom(n,r,!0)||Ye.findFrom(n,-r,!0);if(i)n=i.$head;else return Ye.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(Ye.findFrom(e,-r,!0)||Ye.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new ze(e,n)}}Ye.jsonID("text",ze);class Hc{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Hc(e.map(this.anchor),e.map(this.head))}resolve(e){return ze.between(e.resolve(this.anchor),e.resolve(this.head))}}class Le extends Ye{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),i=e.resolve(o);return r?Ye.near(i):new Le(i)}content(){return new Ce(oe.from(this.node),0,0)}eq(e){return e instanceof Le&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Zf(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Le(e.resolve(n.anchor))}static create(e,n){return new Le(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Le.prototype.visible=!1;Ye.jsonID("node",Le);class Zf{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Hc(r,r):new Zf(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Le.isSelectable(r)?new Le(n):Ye.near(n)}}class Yn extends Ye{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Ce.empty){if(n==Ce.empty){e.delete(0,e.doc.content.size);let r=Ye.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Yn(e)}map(e){return new Yn(e)}eq(e){return e instanceof Yn}getBookmark(){return RE}}Ye.jsonID("all",Yn);const RE={map(){return this},resolve(t){return new Yn(t)}};function Bi(t,e,n,r,o,i=!1){if(e.inlineContent)return ze.create(t,n);for(let s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){let l=e.child(s);if(l.isAtom){if(!i&&Le.isSelectable(l))return Le.create(t,n-(o<0?l.nodeSize:0))}else{let a=Bi(t,l,n+o,o<0?l.childCount:0,o,i);if(a)return a}n+=l.nodeSize*o}return null}function xm(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof Kt||o instanceof Wt))return;let i=t.mapping.maps[r],s;i.forEach((l,a,c,u)=>{s==null&&(s=u)}),t.setSelection(Ye.near(t.doc.resolve(s),n))}const Tm=1,Em=2,Om=4;class HE extends BE{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Tm)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&Tm)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Em,this}ensureMarks(e){return wt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Em)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||wt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let s=this.doc.resolve(n);i=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,i)),this.selection.empty||this.setSelection(Ye.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Om,this}get scrolledIntoView(){return(this.updated&Om)>0}}function Mm(t,e){return!e||!t?t:t.bind(e)}class Ns{constructor(e,n,r){this.name=e,this.init=Mm(n.init,r),this.apply=Mm(n.apply,r)}}const FE=[new Ns("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Ns("selection",{init(t,e){return t.selection||Ye.atStart(e.doc)},apply(t){return t.selection}}),new Ns("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Ns("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Ru{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=FE.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Ns(r.key,r.spec.state,r))})}}class ji{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let i=!1;for(let s=0;s<this.config.plugins.length;s++){let l=this.config.plugins[s];if(l.spec.appendTransaction){let a=o?o[s].n:0,c=o?o[s].state:this,u=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",e),!o){o=[];for(let d=0;d<this.config.plugins.length;d++)o.push(d<s?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),i=!0}o&&(o[s]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new ji(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let i=r[o];n[i.name]=i.apply(e,this[i.name],this,n)}return n}get tr(){return new HE(this)}static create(e){let n=new Ru(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new ji(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new Ru(this.schema,e.plugins),r=n.fields,o=new ji(n);for(let i=0;i<r.length;i++){let s=r[i].name;o[s]=this.hasOwnProperty(s)?this[s]:r[i].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],i=o.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new Ru(e.schema,e.plugins),i=new ji(o);return o.fields.forEach(s=>{if(s.name=="doc")i.doc=xo.fromJSON(e.schema,n.doc);else if(s.name=="selection")i.selection=Ye.fromJSON(i.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],c=a.spec.state;if(a.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){i[s.name]=c.fromJSON.call(a,e,n[l],i);return}}i[s.name]=s.init(e,i)}}),i}}function vb(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=vb(o,e,{})),n[r]=o}return n}class Rn{constructor(e){this.spec=e,this.props={},e.props&&vb(e.props,this,this.props),this.key=e.key?e.key.key:wb("plugin")}getState(e){return e[this.key]}}const Hu=Object.create(null);function wb(t){return t in Hu?t+"$"+ ++Hu[t]:(Hu[t]=0,t+"$")}class Ir{constructor(e="key"){this.key=wb(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const tn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},ls=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Xd=null;const Fr=function(t,e,n){let r=Xd||(Xd=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},jE=function(){Xd=null},yi=function(t,e,n,r){return n&&(Am(t,e,n,r,-1)||Am(t,e,n,r,1))},zE=/^(img|br|input|textarea|hr)$/i;function Am(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:or(t))){let i=t.parentNode;if(!i||i.nodeType!=1||_l(t)||zE.test(t.nodeName)||t.contentEditable=="false")return!1;e=tn(t)+(o<0?0:1),t=i}else if(t.nodeType==1){if(t=t.childNodes[e+(o<0?-1:0)],t.contentEditable=="false")return!1;e=o<0?or(t):0}else return!1}}function or(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function UE(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=or(t)}else if(t.parentNode&&!_l(t))e=tn(t),t=t.parentNode;else return null}}function KE(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!_l(t))e=tn(t)+1,t=t.parentNode;else return null}}function WE(t,e,n){for(let r=e==0,o=e==or(t);r||o;){if(t==n)return!0;let i=tn(t);if(t=t.parentNode,!t)return!1;r=r&&i==0,o=o&&i==or(t)}}function _l(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Fc=function(t){return t.focusNode&&yi(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Zo(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function qE(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function JE(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(or(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(or(r.startContainer),r.startOffset)}}}const $r=typeof navigator<"u"?navigator:null,_m=typeof document<"u"?document:null,Vo=$r&&$r.userAgent||"",Zd=/Edge\/(\d+)/.exec(Vo),Cb=/MSIE \d/.exec(Vo),Qd=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Vo),Bn=!!(Cb||Qd||Zd),To=Cb?document.documentMode:Qd?+Qd[1]:Zd?+Zd[1]:0,vr=!Bn&&/gecko\/(\d+)/i.test(Vo);vr&&+(/Firefox\/(\d+)/.exec(Vo)||[0,0])[1];const ef=!Bn&&/Chrome\/(\d+)/.exec(Vo),hn=!!ef,kb=ef?+ef[1]:0,En=!Bn&&!!$r&&/Apple Computer/.test($r.vendor),as=En&&(/Mobile\/\w+/.test(Vo)||!!$r&&$r.maxTouchPoints>2),tr=as||($r?/Mac/.test($r.platform):!1),GE=$r?/Win/.test($r.platform):!1,qr=/Android \d/.test(Vo),Nl=!!_m&&"webkitFontSmoothing"in _m.documentElement.style,YE=Nl?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function XE(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Rr(t,e){return typeof t=="number"?t:t[e]}function ZE(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Nm(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=ls(s);continue}let l=s,a=l==i.body,c=a?XE(i):ZE(l),u=0,d=0;if(e.top<c.top+Rr(r,"top")?d=-(c.top-e.top+Rr(o,"top")):e.bottom>c.bottom-Rr(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Rr(o,"top")-c.top:e.bottom-c.bottom+Rr(o,"bottom")),e.left<c.left+Rr(r,"left")?u=-(c.left-e.left+Rr(o,"left")):e.right>c.right-Rr(r,"right")&&(u=e.right-c.right+Rr(o,"right")),u||d)if(a)i.defaultView.scrollBy(u,d);else{let m=l.scrollLeft,g=l.scrollTop;d&&(l.scrollTop+=d),u&&(l.scrollLeft+=u);let y=l.scrollLeft-m,x=l.scrollTop-g;e={left:e.left-y,top:e.top-x,right:e.right-y,bottom:e.bottom-x}}let h=a?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(h))break;s=h=="absolute"?s.offsetParent:ls(s)}}function QE(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let i=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let l=t.root.elementFromPoint(i,s);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,o=a.top;break}}return{refDOM:r,refTop:o,stack:Sb(t.dom)}}function Sb(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=ls(r));return e}function eO({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;xb(n,r==0?0:r-e)}function xb(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:i}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let $i=null;function tO(t){if(t.setActive)return t.setActive();if($i)return t.focus($i);let e=Sb(t);t.focus($i==null?{get preventScroll(){return $i={preventScroll:!0},!0}}:void 0),$i||($i=!1,xb(e,0))}function Tb(t,e){let n,r=2e8,o,i=0,s=e.top,l=e.top,a,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=Fr(u).getClientRects();else continue;for(let m=0;m<h.length;m++){let g=h[m];if(g.top<=s&&g.bottom>=l){s=Math.max(g.bottom,s),l=Math.min(g.top,l);let y=g.left>e.left?g.left-e.left:g.right<e.left?e.left-g.right:0;if(y<r){n=u,r=y,o=y&&n.nodeType==3?{left:g.right<e.left?g.right:g.left,top:e.top}:e,u.nodeType==1&&y&&(i=d+(e.left>=(g.left+g.right)/2?1:0));continue}}else g.top>e.top&&!a&&g.left<=e.left&&g.right>=e.left&&(a=u,c={left:Math.max(g.left,Math.min(g.right,e.left)),top:g.top});!n&&(e.left>=g.right&&e.top>=g.top||e.left>=g.left&&e.top>=g.bottom)&&(i=d+1)}}return!n&&a&&(n=a,o=c,r=0),n&&n.nodeType==3?nO(n,o):!n||r&&n.nodeType==1?{node:t,offset:i}:Tb(n,o)}function nO(t,e){let n=t.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let i=lo(r,1);if(i.top!=i.bottom&&Qf(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}function Qf(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function rO(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function oO(t,e,n){let{node:r,offset:o}=Tb(e,n),i=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();i=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,o,i)}function iO(t,e,n,r){let o=-1;for(let i=e,s=!1;i!=t.dom;){let l=t.docView.nearestDesc(i,!0),a;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((a=l.dom.getBoundingClientRect()).width||a.height)&&(l.node.isBlock&&l.parent&&(!s&&a.left>r.left||a.top>r.top?o=l.posBefore:(!s&&a.right<r.left||a.bottom<r.top)&&(o=l.posAfter),s=!0),!l.contentDOM&&o<0&&!l.node.isText))return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter;i=l.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function Eb(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=o;;){let s=t.childNodes[i];if(s.nodeType==1){let l=s.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if(Qf(e,c))return Eb(s,e,c)}}if((i=(i+1)%r)==o)break}return t}function sO(t,e){let n=t.dom.ownerDocument,r,o=0,i=JE(n,e.left,e.top);i&&({node:r,offset:o}=i);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=t.dom.getBoundingClientRect();if(!Qf(e,c)||(s=Eb(t.dom,e,c),!s))return null}if(En)for(let c=s;r&&c;c=ls(c))c.draggable&&(r=void 0);if(s=rO(s,e),r){if(vr&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let u=r.childNodes[o],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&o++}let c;Nl&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&o--,r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(l=iO(t,r,o,e))}l==null&&(l=oO(t,s,e));let a=t.docView.nearestDesc(s,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function $m(t){return t.top<t.bottom||t.left<t.right}function lo(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if($m(r))return r}return Array.prototype.find.call(n,$m)||t.getBoundingClientRect()}const lO=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Ob(t,e,n){let{node:r,offset:o,atom:i}=t.docView.domFromPos(e,n<0?-1:1),s=Nl||vr;if(r.nodeType==3)if(s&&(lO.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let a=lo(Fr(r,o,o),n);if(vr&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=lo(Fr(r,o-1,o-1),-1);if(c.top==a.top){let u=lo(Fr(r,o,o+1),-1);if(u.top!=a.top)return Cs(u,u.left<c.left)}}return a}else{let a=o,c=o,u=n<0?1:-1;return n<0&&!o?(c++,u=-1):n>=0&&o==r.nodeValue.length?(a--,u=1):n<0?a--:c++,Cs(lo(Fr(r,a,c),u),u<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&o&&(n<0||o==or(r))){let a=r.childNodes[o-1];if(a.nodeType==1)return Fu(a.getBoundingClientRect(),!1)}if(i==null&&o<or(r)){let a=r.childNodes[o];if(a.nodeType==1)return Fu(a.getBoundingClientRect(),!0)}return Fu(r.getBoundingClientRect(),n>=0)}if(i==null&&o&&(n<0||o==or(r))){let a=r.childNodes[o-1],c=a.nodeType==3?Fr(a,or(a)-(s?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return Cs(lo(c,1),!1)}if(i==null&&o<or(r)){let a=r.childNodes[o];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?Fr(a,0,s?0:1):a.nodeType==1?a:null:null;if(c)return Cs(lo(c,-1),!0)}return Cs(lo(r.nodeType==3?Fr(r):r,-n),n>=0)}function Cs(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Fu(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Mb(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function aO(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return Mb(t,e,()=>{let{node:i}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(i,!0);if(!l)break;if(l.node.isBlock){i=l.contentDOM||l.dom;break}i=l.dom.parentNode}let s=Ob(t,o.pos,1);for(let l=i.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=Fr(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let u=a[c];if(u.bottom>u.top+1&&(n=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const cO=/[\u0590-\u08ac]/;function uO(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,i=!o,s=o==r.parent.content.size,l=t.domSelection();return l?!cO.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?i:s:Mb(t,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),h=l.caretBidiLevel;l.modify("move",n,"character");let m=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:g,focusOffset:y}=t.domSelectionRange(),x=g&&!m.contains(g.nodeType==1?g:g.parentNode)||a==g&&c==y;try{l.collapse(u,d),a&&(a!=u||c!=d)&&l.extend&&l.extend(a,c)}catch{}return h!=null&&(l.caretBidiLevel=h),x}):r.pos==r.start()||r.pos==r.end()}let Pm=null,Dm=null,Im=!1;function dO(t,e,n){return Pm==e&&Dm==n?Im:(Pm=e,Dm=n,Im=n=="up"||n=="down"?aO(t,e,n):uO(t,e,n))}const lr=0,Lm=1,ti=2,Pr=3;class $l{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=lr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,s;if(e==this.contentDOM)i=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(s)+s.size:this.posAtStart}else{let i,s;if(e==this.contentDOM)i=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>tn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!1;break}if(i.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!0;break}if(i.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let i=this.getDesc(o),s;if(i&&(!n||i.node))if(r&&(s=i.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return i}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let i=this.getDesc(o);if(i)return i.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],i=r+o.size;if(r==e&&i!=r){for(;!o.border&&o.children.length;)for(let s=0;s<o.children.length;s++){let l=o.children[s];if(l.size){o=l;break}}return o}if(e<i)return o.descAt(e-r-o.border);r=i}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let i=0;r<this.children.length;r++){let s=this.children[r],l=i+s.size;if(l>e||s instanceof _b){o=e-i;break}i=l}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof Ab&&i.side>=0;r--);if(n<=0){let i,s=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,s=!1);return i&&n&&s&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?tn(i.dom)+1:0}}else{let i,s=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,s=!1);return i&&s&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?tn(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,i=-1;for(let s=r,l=0;;l++){let a=this.children[l],c=s+a.size;if(o==-1&&e<=c){let u=s+a.border;if(e>=u&&n<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,u);e=s;for(let d=l;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){o=tn(h.dom)+1;break}e-=h.size}o==-1&&(o=0)}if(o>-1&&(c>n||l==this.children.length-1)){n=c;for(let u=l+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=tn(d.dom);break}n+=d.size}i==-1&&(i=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let i=Math.min(e,n),s=Math.max(e,n);for(let m=0,g=0;m<this.children.length;m++){let y=this.children[m],x=g+y.size;if(i>g&&s<x)return y.setSelection(e-g-y.border,n-g-y.border,r,o);g=x}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((vr||En)&&e==n){let{node:m,offset:g}=l;if(m.nodeType==3){if(d=!!(g&&m.nodeValue[g-1]==`
`),d&&g==m.nodeValue.length)for(let y=m,x;y;y=y.parentNode){if(x=y.nextSibling){x.nodeName=="BR"&&(l=a={node:x.parentNode,offset:tn(x)+1});break}let O=y.pmViewDesc;if(O&&O.node&&O.node.isBlock)break}}else{let y=m.childNodes[g-1];d=y&&(y.nodeName=="BR"||y.contentEditable=="false")}}if(vr&&u.focusNode&&u.focusNode!=a.node&&u.focusNode.nodeType==1){let m=u.focusNode.childNodes[u.focusOffset];m&&m.contentEditable=="false"&&(o=!0)}if(!(o||d&&En)&&yi(l.node,l.offset,u.anchorNode,u.anchorOffset)&&yi(a.node,a.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||e==n)&&!d){c.collapse(l.node,l.offset);try{e!=n&&c.extend(a.node,a.offset),h=!0}catch{}}if(!h){if(e>n){let g=l;l=a,a=g}let m=document.createRange();m.setEnd(a.node,a.offset),m.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(m)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let i=this.children[o],s=r+i.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let l=r+i.border,a=s-i.border;if(e>=l&&n<=a){this.dirty=e==r||n==s?ti:Lm,e==l&&n==a&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=Pr:i.markDirty(e-l,n-l);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?ti:Pr}r=s}this.dirty=ti}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?ti:Lm;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class Ab extends $l{constructor(e,n,r,o){let i,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!i)return o;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(s.nodeType!=1){let l=document.createElement("span");l.appendChild(s),s=l}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,i=this}matchesWidget(e){return this.dirty==lr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class fO extends $l{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class bi extends $l{constructor(e,n,r,o,i){super(e,[],r,o),this.mark=n,this.spec=i}static create(e,n,r,o){let i=o.nodeViews[n.type.name],s=i&&i(n,o,r);return(!s||!s.dom)&&(s=Ci.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new bi(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Pr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Pr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=lr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=lr}}slice(e,n,r){let o=bi.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=nf(i,n,s,r)),e>0&&(i=nf(i,0,e,r));for(let l=0;l<i.length;l++)i[l].parent=o;return o.children=i,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Eo extends $l{constructor(e,n,r,o,i,s,l,a,c){super(e,[],i,s),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=l}static create(e,n,r,o,i,s){let l=i.nodeViews[n.type.name],a,c=l&&l(n,i,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)},r,o),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Ci.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let h=u;return u=Pb(u,r,n),c?a=new hO(e,n,r,o,u,d||null,h,c,i,s+1):n.isText?new jc(e,n,r,o,u,h,i):new Eo(e,n,r,o,u,d||null,h,i,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>oe.empty)}return e}matchesNode(e,n,r){return this.dirty==lr&&e.eq(this.node)&&lc(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,i=e.composing?this.localCompositionInfo(e,n):null,s=i&&i.pos>-1?i:null,l=i&&i.pos<0,a=new mO(this,s&&s.node,e);bO(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?a.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&a.syncToMarks(u==this.node.childCount?wt.none:this.node.child(u).marks,r,e),a.placeWidget(c,e,o)},(c,u,d,h)=>{a.syncToMarks(c.marks,r,e);let m;a.findNodeMatch(c,u,d,h)||l&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(m=a.findIndexWithChild(i.node))>-1&&a.updateNodeAt(c,u,d,m,e)||a.updateNextNode(c,u,d,e,h,o)||a.addNode(c,u,d,e,o),o+=c.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==ti)&&(s&&this.protectLocalComposition(e,s),Nb(this.contentDOM,this.children,e),as&&vO(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof ze)||r<n||o>n+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let s=i.nodeValue,l=wO(this.node.content,s,r-n,o-n);return l<0?null:{node:i,pos:l,text:s}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new fO(this,i,n,o);e.input.compositionNodes.push(s),this.children=nf(this.children,r,r+o.length,e,s)}update(e,n,r,o){return this.dirty==Pr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=lr}updateOuterDeco(e){if(lc(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=$b(this.dom,this.nodeDOM,tf(this.outerDeco,this.node,n),tf(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Bm(t,e,n,r,o){Pb(r,e,t);let i=new Eo(void 0,t,e,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}class jc extends Eo{constructor(e,n,r,o,i,s,l){super(e,n,r,o,i,null,s,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==Pr||this.dirty!=lr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=lr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=lr,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),i=document.createTextNode(o.text);return new jc(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Pr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class _b extends $l{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==lr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class hO extends Eo{constructor(e,n,r,o,i,s,l,a,c,u){super(e,n,r,o,i,s,l,c,u),this.spec=a}update(e,n,r,o){if(this.dirty==Pr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,o),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Nb(t,e,n){let r=t.firstChild,o=!1;for(let i=0;i<e.length;i++){let s=e[i],l=s.dom;if(l.parentNode==t){for(;l!=r;)r=Vm(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(l,r);if(s instanceof bi){let a=r?r.previousSibling:t.lastChild;Nb(s.contentDOM,s.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=Vm(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const Ys=function(t){t&&(this.nodeName=t)};Ys.prototype=Object.create(null);const ni=[new Ys];function tf(t,e,n){if(t.length==0)return ni;let r=n?ni[0]:new Ys,o=[r];for(let i=0;i<t.length;i++){let s=t[i].type.attrs;if(s){s.nodeName&&o.push(r=new Ys(s.nodeName));for(let l in s){let a=s[l];a!=null&&(n&&o.length==1&&o.push(r=new Ys(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return o}function $b(t,e,n,r){if(n==ni&&r==ni)return e;let o=e;for(let i=0;i<r.length;i++){let s=r[i],l=n[i];if(i){let a;l&&l.nodeName==s.nodeName&&o!=t&&(a=o.parentNode)&&a.nodeName.toLowerCase()==s.nodeName||(a=document.createElement(s.nodeName),a.pmIsDeco=!0,a.appendChild(o),l=ni[0]),o=a}pO(o,l||ni[0],s)}return o}function pO(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)o.indexOf(r[i])==-1&&t.classList.remove(r[i]);for(let i=0;i<o.length;i++)r.indexOf(o[i])==-1&&t.classList.add(o[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function Pb(t,e,n){return $b(t,t,ni,tf(e,n,t.nodeType!=1))}function lc(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Vm(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class mO{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=gO(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let o=0,i=this.stack.length>>1,s=Math.min(i,e.length);for(;o<s&&(o==i-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<i;)this.destroyRest(),this.top.dirty=lr,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let c=this.top.children[a];if(c.matchesMark(e[i])&&!this.isLocked(c.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=bi.create(this.top,e[i],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,i++}}findNodeMatch(e,n,r,o){let i=-1,s;if(o>=this.preMatch.index&&(s=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))i=this.top.children.indexOf(s,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){i=l;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,n,r,o,i){let s=this.top.children[o];return s.dirty==Pr&&s.dom==s.contentDOM&&(s.dirty=ti),s.update(e,n,r,i)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,i,s){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof Eo){let c=this.preMatch.matched.get(a);if(c!=null&&c!=i)return!1;let u=a.dom,d,h=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=Pr&&lc(n,a.outerDeco));if(!h&&a.update(e,n,r,o))return this.destroyBetween(this.index,l),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(a,e,n,r,o,s)))return this.destroyBetween(this.index,l),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=ti,d.updateChildren(o,s+1),d.dirty=lr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,i,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!lc(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let l=Eo.create(this.top,n,r,o,i,s);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,o,i){let s=Eo.create(this.top,e,n,r,o,i);s.contentDOM&&s.updateChildren(o,i+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let i=new Ab(this.top,e,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof bi;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof jc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((En||hn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new _b(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function gO(t,e){let n=e,r=n.children.length,o=t.childCount,i=new Map,s=[];e:for(;o>0;){let l;for(;;)if(r){let c=n.children[r-1];if(c instanceof bi)n=c,r=c.children.length;else{l=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(o-1))break;--o,i.set(l,o),s.push(l)}}return{index:o,matched:i,matches:s.reverse()}}function yO(t,e){return t.type.side-e.type.side}function bO(t,e,n,r){let o=e.locals(t),i=0;if(o.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,o,e.forChild(i,u),c),i+=u.nodeSize}return}let s=0,l=[],a=null;for(let c=0;;){let u,d;for(;s<o.length&&o[s].to==i;){let x=o[s++];x.widget&&(u?(d||(d=[u])).push(x):u=x)}if(u)if(d){d.sort(yO);for(let x=0;x<d.length;x++)n(d[x],c,!!a)}else n(u,c,!!a);let h,m;if(a)m=-1,h=a,a=null;else if(c<t.childCount)m=c,h=t.child(c++);else break;for(let x=0;x<l.length;x++)l[x].to<=i&&l.splice(x--,1);for(;s<o.length&&o[s].from<=i&&o[s].to>i;)l.push(o[s++]);let g=i+h.nodeSize;if(h.isText){let x=g;s<o.length&&o[s].from<x&&(x=o[s].from);for(let O=0;O<l.length;O++)l[O].to<x&&(x=l[O].to);x<g&&(a=h.cut(x-i),h=h.cut(0,x-i),g=x,m=-1)}else for(;s<o.length&&o[s].to<g;)s++;let y=h.isInline&&!h.isLeaf?l.filter(x=>!x.inline):l.slice();r(h,y,e.forChild(i,h),m),i=g}}function vO(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function wO(t,e,n,r){for(let o=0,i=0;o<t.childCount&&i<=r;){let s=t.child(o++),l=i;if(i+=s.nodeSize,!s.isText)continue;let a=s.text;for(;o<t.childCount;){let c=t.child(o++);if(i+=c.nodeSize,!c.isText)break;a+=c.text}if(i>=n){if(i>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let c=l<r?a.lastIndexOf(e,r-l-1):-1;if(c>=0&&c+e.length+l>=n)return l+c;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function nf(t,e,n,r,o){let i=[];for(let s=0,l=0;s<t.length;s++){let a=t[s],c=l,u=l+=a.size;c>=n||u<=e?i.push(a):(c<e&&i.push(a.slice(0,e-c,r)),o&&(i.push(o),o=void 0),u>n&&i.push(a.slice(n-c,a.size,r)))}return i}function eh(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),i=o&&o.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let l=r.resolve(s),a,c;if(Fc(n)){for(a=s;o&&!o.node;)o=o.parent;let d=o.node;if(o&&d.isAtom&&Le.isSelectable(d)&&o.parent&&!(d.isInline&&WE(n.focusNode,n.focusOffset,o.dom))){let h=o.posBefore;c=new Le(s==h?l:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=s,h=s;for(let m=0;m<n.rangeCount;m++){let g=n.getRangeAt(m);d=Math.min(d,t.docView.posFromDOM(g.startContainer,g.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(d<0)return null;[a,s]=h==t.state.selection.anchor?[h,d]:[d,h],l=r.resolve(s)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let u=r.resolve(a);if(!c){let d=e=="pointer"||t.state.selection.head<l.pos&&!i?1:-1;c=th(t,u,l,d)}return c}function Db(t){return t.editable?t.hasFocus():Lb(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Zr(t,e=!1){let n=t.state.selection;if(Ib(t,n),!!Db(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&hn){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&yi(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)kO(t);else{let{anchor:r,head:o}=n,i,s;Rm&&!(n instanceof ze)&&(n.$from.parent.inlineContent||(i=Hm(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=Hm(t,n.to))),t.docView.setSelection(r,o,t,e),Rm&&(i&&Fm(i),s&&Fm(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&CO(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Rm=En||hn&&kb<63;function Hm(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(En&&o&&o.contentEditable=="false")return ju(o);if((!o||o.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(o)return ju(o);if(i)return ju(i)}}function ju(t){return t.contentEditable="true",En&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Fm(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function CO(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Db(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function kO(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setStart(r.parentNode,tn(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&Bn&&To<=11&&(r.disabled=!0,r.disabled=!1)}function Ib(t,e){if(e instanceof Le){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(jm(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else jm(t)}function jm(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function th(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||ze.between(e,n,r)}function zm(t){return t.editable&&!t.hasFocus()?!1:Lb(t)}function Lb(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function SO(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return yi(e.node,e.offset,n.anchorNode,n.anchorOffset)}function rf(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),i=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return i&&Ye.findFrom(i,e)}function po(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Um(t,e,n){let r=t.state.selection;if(r instanceof ze)if(n.indexOf("s")>-1){let{$head:o}=r,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let s=t.state.doc.resolve(o.pos+i.nodeSize*(e<0?-1:1));return po(t,new ze(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let o=rf(t.state,e);return o&&o instanceof Le?po(t,o):!1}else if(!(tr&&n.indexOf("m")>-1)){let o=r.$head,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,s;if(!i||i.isText)return!1;let l=e<0?o.pos-i.nodeSize:o.pos;return i.isAtom||(s=t.docView.descAt(l))&&!s.contentDOM?Le.isSelectable(i)?po(t,new Le(e<0?t.state.doc.resolve(o.pos-i.nodeSize):o)):Nl?po(t,new ze(t.state.doc.resolve(e<0?l:l+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Le&&r.node.isInline)return po(t,new ze(e>0?r.$to:r.$from));{let o=rf(t.state,e);return o?po(t,o):!1}}}function ac(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Xs(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Pi(t,e){return e<0?xO(t):TO(t)}function xO(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,i,s=!1;for(vr&&n.nodeType==1&&r<ac(n)&&Xs(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(Xs(l,-1))o=n,i=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(Bb(n))break;{let l=n.previousSibling;for(;l&&Xs(l,-1);)o=n.parentNode,i=tn(l),l=l.previousSibling;if(l)n=l,r=ac(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?of(t,n,r):o&&of(t,o,i)}function TO(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=ac(n),i,s;for(;;)if(r<o){if(n.nodeType!=1)break;let l=n.childNodes[r];if(Xs(l,1))i=n,s=++r;else break}else{if(Bb(n))break;{let l=n.nextSibling;for(;l&&Xs(l,1);)i=l.parentNode,s=tn(l)+1,l=l.nextSibling;if(l)n=l,r=0,o=ac(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}i&&of(t,i,s)}function Bb(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function EO(t,e){for(;t&&e==t.childNodes.length&&!_l(t);)e=tn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function OO(t,e){for(;t&&!e&&!_l(t);)e=tn(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function of(t,e,n){if(e.nodeType!=3){let i,s;(s=EO(e,n))?(e=s,n=0):(i=OO(e,n))&&(e=i,n=i.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Fc(r)){let i=document.createRange();i.setEnd(e,n),i.setStart(e,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&Zr(t)},50)}function Km(t,e){let n=t.state.doc.resolve(e);if(!(hn||GE)&&n.parent.inlineContent){let o=t.coordsAtPos(e);if(e>n.start()){let i=t.coordsAtPos(e-1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left<o.left?"ltr":"rtl"}if(e<n.end()){let i=t.coordsAtPos(e+1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left>o.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Wm(t,e,n){let r=t.state.selection;if(r instanceof ze&&!r.empty||n.indexOf("s")>-1||tr&&n.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=rf(t.state,e);if(s&&s instanceof Le)return po(t,s)}if(!o.parent.inlineContent){let s=e<0?o:i,l=r instanceof Yn?Ye.near(s,e):Ye.findFrom(s,e);return l?po(t,l):!1}return!1}function qm(t,e){if(!(t.state.selection instanceof ze))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let s=t.state.tr;return e<0?s.delete(n.pos-i.nodeSize,n.pos):s.delete(n.pos,n.pos+i.nodeSize),t.dispatch(s),!0}return!1}function Jm(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function MO(t){if(!En||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Jm(t,r,"true"),setTimeout(()=>Jm(t,r,"false"),20)}return!1}function AO(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function _O(t,e){let n=e.keyCode,r=AO(e);if(n==8||tr&&n==72&&r=="c")return qm(t,-1)||Pi(t,-1);if(n==46&&!e.shiftKey||tr&&n==68&&r=="c")return qm(t,1)||Pi(t,1);if(n==13||n==27)return!0;if(n==37||tr&&n==66&&r=="c"){let o=n==37?Km(t,t.state.selection.from)=="ltr"?-1:1:-1;return Um(t,o,r)||Pi(t,o)}else if(n==39||tr&&n==70&&r=="c"){let o=n==39?Km(t,t.state.selection.from)=="ltr"?1:-1:1;return Um(t,o,r)||Pi(t,o)}else{if(n==38||tr&&n==80&&r=="c")return Wm(t,-1,r)||Pi(t,-1);if(n==40||tr&&n==78&&r=="c")return MO(t)||Wm(t,1,r)||Pi(t,1);if(r==(tr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function nh(t,e){t.someProp("transformCopied",m=>{e=m(e,t)});let n=[],{content:r,openStart:o,openEnd:i}=e;for(;o>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,i--;let m=r.firstChild;n.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),r=m.content}let s=t.someProp("clipboardSerializer")||Ci.fromSchema(t.state.schema),l=zb(),a=l.createElement("div");a.appendChild(s.serializeFragment(r,{document:l}));let c=a.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=jb[c.nodeName.toLowerCase()]);){for(let m=u.length-1;m>=0;m--){let g=l.createElement(u[m]);for(;a.firstChild;)g.appendChild(a.firstChild);a.appendChild(g),d++}c=a.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",m=>m(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:h,slice:e}}function Vb(t,e,n,r,o){let i=o.parent.type.spec.code,s,l;if(!n&&!e)return null;let a=e&&(r||i||!n);if(a){if(t.someProp("transformPastedText",h=>{e=h(e,i||r,t)}),i)return e?new Ce(oe.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Ce.empty;let d=t.someProp("clipboardTextParser",h=>h(e,o,r,t));if(d)l=d;else{let h=o.marks(),{schema:m}=t.state,g=Ci.fromSchema(m);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(y=>{let x=s.appendChild(document.createElement("p"));y&&x.appendChild(g.serializeNode(m.text(y,h)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),s=DO(n),Nl&&IO(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=s.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;s=h}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||Gs.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(a||u),context:o,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!NO.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)l=LO(Gm(l,+u[1],+u[2]),u[4]);else if(l=Ce.maxOpen($O(l.content,o),!0),l.openStart||l.openEnd){let d=0,h=0;for(let m=l.content.firstChild;d<l.openStart&&!m.type.spec.isolating;d++,m=m.firstChild);for(let m=l.content.lastChild;h<l.openEnd&&!m.type.spec.isolating;h++,m=m.lastChild);l=Gm(l,d,h)}return t.someProp("transformPasted",d=>{l=d(l,t)}),l}const NO=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function $O(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let o=e.node(n).contentMatchAt(e.index(n)),i,s=[];if(t.forEach(l=>{if(!s)return;let a=o.findWrapping(l.type),c;if(!a)return s=null;if(c=s.length&&i.length&&Hb(a,i,l,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=Fb(s[s.length-1],i.length));let u=Rb(l,a);s.push(u),o=o.matchType(u.type),i=a}}),s)return oe.from(s)}return t}function Rb(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,oe.from(t));return t}function Hb(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let i=Hb(t,e,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(oe.from(Rb(n,t,o+1))))}}function Fb(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Fb(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(oe.empty,!0);return t.copy(n.append(r))}function sf(t,e,n,r,o,i){let s=e<0?t.firstChild:t.lastChild,l=s.content;return t.childCount>1&&(i=0),o<r-1&&(l=sf(l,e,n,r,o+1,i)),o>=n&&(l=e<0?s.contentMatchAt(0).fillBefore(l,i<=o).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(oe.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(l))}function Gm(t,e,n){return e<t.openStart&&(t=new Ce(sf(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Ce(sf(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const jb={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Ym=null;function zb(){return Ym||(Ym=document.implementation.createHTMLDocument("title"))}let zu=null;function PO(t){let e=window.trustedTypes;return e?(zu||(zu=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),zu.createHTML(t)):t}function DO(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=zb().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&jb[r[1].toLowerCase()])&&(t=o.map(i=>"<"+i+">").join("")+t+o.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=PO(t),o)for(let i=0;i<o.length;i++)n=n.querySelector(o[i])||n;return n}function IO(t){let e=t.querySelectorAll(hn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function LO(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:o,openStart:i,openEnd:s}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;o=oe.from(a.create(r[l+1],o)),i++,s++}return new Ce(o,i,s)}const On={},Mn={},BO={touchstart:!0,touchmove:!0};class VO{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function RO(t){for(let e in On){let n=On[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{FO(t,r)&&!rh(t,r)&&(t.editable||!(r.type in Mn))&&n(t,r)},BO[e]?{passive:!0}:void 0)}En&&t.dom.addEventListener("input",()=>null),lf(t)}function ko(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function HO(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function lf(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>rh(t,r))})}function rh(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function FO(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function jO(t,e){!rh(t,e)&&On[e.type]&&(t.editable||!(e.type in Mn))&&On[e.type](t,e)}Mn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!Kb(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(qr&&hn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),as&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,Zo(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||_O(t,n)?n.preventDefault():ko(t,"key")};Mn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Mn.keypress=(t,e)=>{let n=e;if(Kb(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||tr&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof ze)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode);!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",i=>i(t,r.$from.pos,r.$to.pos,o))&&t.dispatch(t.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}};function zc(t){return{left:t.clientX,top:t.clientY}}function zO(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function oh(t,e,n,r,o){if(r==-1)return!1;let i=t.state.doc.resolve(r);for(let s=i.depth+1;s>0;s--)if(t.someProp(e,l=>s>i.depth?l(t,n,i.nodeAfter,i.before(s),o,!0):l(t,n,i.node(s),i.before(s),o,!1)))return!0;return!1}function ts(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function UO(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Le.isSelectable(r)?(ts(t,new Le(n)),!0):!1}function KO(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof Le&&(r=n.node);let i=t.state.doc.resolve(e);for(let s=i.depth+1;s>0;s--){let l=s>i.depth?i.nodeAfter:i.node(s);if(Le.isSelectable(l)){r&&n.$from.depth>0&&s>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?o=i.before(n.$from.depth):o=i.before(s);break}}return o!=null?(ts(t,Le.create(t.state.doc,o)),!0):!1}function WO(t,e,n,r,o){return oh(t,"handleClickOn",e,n,r)||t.someProp("handleClick",i=>i(t,e,r))||(o?KO(t,n):UO(t,n))}function qO(t,e,n,r){return oh(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function JO(t,e,n,r){return oh(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||GO(t,n,r)}function GO(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(ts(t,ze.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let i=o.depth+1;i>0;i--){let s=i>o.depth?o.nodeAfter:o.node(i),l=o.before(i);if(s.inlineContent)ts(t,ze.create(r,l+1,l+1+s.content.size));else if(Le.isSelectable(s))ts(t,Le.create(r,l));else continue;return!0}}function ih(t){return cc(t)}const Ub=tr?"metaKey":"ctrlKey";On.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=ih(t),o=Date.now(),i="singleClick";o-t.input.lastClick.time<500&&zO(n,t.input.lastClick)&&!n[Ub]&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i};let s=t.posAtCoords(zc(n));s&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new YO(t,s,n,!!r)):(i=="doubleClick"?qO:JO)(t,s.pos,s.inside,n)?n.preventDefault():ko(t,"pointer"))};class YO{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Ub],this.allowDefault=r.shiftKey;let i,s;if(n.inside>-1)i=e.state.doc.nodeAt(n.inside),s=n.inside;else{let u=e.state.doc.resolve(n.pos);i=u.parent,s=u.depth?u.before():0}const l=o?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:c}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||c instanceof Le&&c.from<=s&&c.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&vr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ko(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Zr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(zc(e))),this.updateAllowDefault(e),this.allowDefault||!n?ko(this.view,"pointer"):WO(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||En&&this.mightDrag&&!this.mightDrag.node.isAtom||hn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(ts(this.view,Ye.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):ko(this.view,"pointer")}move(e){this.updateAllowDefault(e),ko(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}On.touchstart=t=>{t.input.lastTouch=Date.now(),ih(t),ko(t,"pointer")};On.touchmove=t=>{t.input.lastTouch=Date.now(),ko(t,"pointer")};On.contextmenu=t=>ih(t);function Kb(t,e){return t.composing?!0:En&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const XO=qr?5e3:-1;Mn.compositionstart=Mn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof ze&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),cc(t,!0),t.markCursor=null;else if(cc(t,!e.selection.empty),vr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,i=r.focusOffset;o&&o.nodeType==1&&i!=0;){let s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(s.nodeType==3){let l=t.domSelection();l&&l.collapse(s,s.nodeValue.length);break}else o=s,i=-1}}t.input.composing=!0}Wb(t,XO)};Mn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,Wb(t,20))};function Wb(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>cc(t),e))}function qb(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=QO());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function ZO(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=UE(e.focusNode,e.focusOffset),r=KE(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!o||!o.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function QO(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function cc(t,e=!1){if(!(qr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),qb(t),e||t.docView&&t.docView.dirty){let n=eh(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function eM(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const gl=Bn&&To<15||as&&YE<604;On.copy=Mn.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let i=gl?null:n.clipboardData,s=r.content(),{dom:l,text:a}=nh(t,s);i?(n.preventDefault(),i.clearData(),i.setData("text/html",l.innerHTML),i.setData("text/plain",a)):eM(t,l),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function tM(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function nM(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?yl(t,r.value,null,o,e):yl(t,r.textContent,r.innerHTML,o,e)},50)}function yl(t,e,n,r,o){let i=Vb(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,o,i||Ce.empty)))return!0;if(!i)return!1;let s=tM(i),l=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(i);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Jb(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Mn.paste=(t,e)=>{let n=e;if(t.composing&&!qr)return;let r=gl?null:n.clipboardData,o=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&yl(t,Jb(r),r.getData("text/html"),o,n)?n.preventDefault():nM(t,n)};class Gb{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const Yb=tr?"altKey":"ctrlKey";On.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,i=o.empty?null:t.posAtCoords(zc(n)),s;if(!(i&&i.pos>=o.from&&i.pos<=(o instanceof Le?o.to-1:o.to))){if(r&&r.mightDrag)s=Le.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(s=Le.create(t.state.doc,d.posBefore))}}let l=(s||t.state.selection).content(),{dom:a,text:c,slice:u}=nh(t,l);(!n.dataTransfer.files.length||!hn||kb>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(gl?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",gl||n.dataTransfer.setData("text/plain",c),t.dragging=new Gb(u,!n[Yb],s)};On.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Mn.dragover=Mn.dragenter=(t,e)=>e.preventDefault();Mn.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords(zc(n));if(!o)return;let i=t.state.doc.resolve(o.pos),s=r&&r.slice;s?t.someProp("transformPasted",g=>{s=g(s,t)}):s=Vb(t,Jb(n.dataTransfer),gl?null:n.dataTransfer.getData("text/html"),!1,i);let l=!!(r&&!n[Yb]);if(t.someProp("handleDrop",g=>g(t,n,s||Ce.empty,l))){n.preventDefault();return}if(!s)return;n.preventDefault();let a=s?pb(t.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let c=t.state.tr;if(l){let{node:g}=r;g?g.replace(c):c.deleteSelection()}let u=c.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(h))return;let m=c.doc.resolve(u);if(d&&Le.isSelectable(s.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new Le(m));else{let g=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((y,x,O,A)=>g=A),c.setSelection(th(t,m,c.doc.resolve(g)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};On.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Zr(t)},20))};On.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};On.beforeinput=(t,e)=>{if(hn&&qr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,Zo(8,"Backspace")))))return;let{$cursor:o}=t.state.selection;o&&o.pos>0&&t.dispatch(t.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let t in Mn)On[t]=Mn[t];function bl(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class uc{constructor(e,n){this.toDOM=e,this.spec=n||ci,this.side=this.spec.side||0}map(e,n,r,o){let{pos:i,deleted:s}=e.mapResult(n.from+o,this.side<0?-1:1);return s?null:new ir(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof uc&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&bl(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Oo{constructor(e,n){this.attrs=e,this.spec=n||ci}map(e,n,r,o){let i=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return i>=s?null:new ir(i,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Oo&&bl(this.attrs,e.attrs)&&bl(this.spec,e.spec)}static is(e){return e.type instanceof Oo}destroy(){}}class sh{constructor(e,n){this.attrs=e,this.spec=n||ci}map(e,n,r,o){let i=e.mapResult(n.from+o,1);if(i.deleted)return null;let s=e.mapResult(n.to+o,-1);return s.deleted||s.pos<=i.pos?null:new ir(i.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),i;return o==n.from&&!(i=e.child(r)).isText&&o+i.nodeSize==n.to}eq(e){return this==e||e instanceof sh&&bl(this.attrs,e.attrs)&&bl(this.spec,e.spec)}destroy(){}}class ir{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new ir(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new ir(e,e,new uc(n,r))}static inline(e,n,r,o){return new ir(e,n,new Oo(r,o))}static node(e,n,r,o){return new ir(e,n,new sh(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof Oo}get widget(){return this.type instanceof uc}}const Vi=[],ci={};class jt{constructor(e,n){this.local=e.length?e:Vi,this.children=n.length?n:Vi}static create(e,n){return n.length?dc(n,e,0,ci):an}find(e,n,r){let o=[];return this.findInner(e??0,n??1e9,o,0,r),o}findInner(e,n,r,o,i){for(let s=0;s<this.local.length;s++){let l=this.local[s];l.from<=n&&l.to>=e&&(!i||i(l.spec))&&r.push(l.copy(l.from+o,l.to+o))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let l=this.children[s]+1;this.children[s+2].findInner(e-l,n-l,r,o+l,i)}}map(e,n,r){return this==an||e.maps.length==0?this:this.mapInner(e,n,0,0,r||ci)}mapInner(e,n,r,o,i){let s;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,o);a&&a.type.valid(n,a)?(s||(s=[])).push(a):i.onRemove&&i.onRemove(this.local[l].spec)}return this.children.length?rM(this.children,s||[],e,n,r,o,i):s?new jt(s.sort(ui),Vi):an}add(e,n){return n.length?this==an?jt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,i=0;e.forEach((l,a)=>{let c=a+r,u;if(u=Zb(n,l,c)){for(o||(o=this.children.slice());i<o.length&&o[i]<a;)i+=3;o[i]==a?o[i+2]=o[i+2].addInner(l,u,c+1):o.splice(i,0,a,a+l.nodeSize,dc(u,l,c+1,ci)),i+=3}});let s=Xb(i?Qb(n):n,-r);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||s.splice(l--,1);return new jt(s.length?this.local.concat(s).sort(ui):this.local,o||this.children)}remove(e){return e.length==0||this==an?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let i=0;i<r.length;i+=3){let s,l=r[i]+n,a=r[i+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>l&&d.to<a&&(e[u]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[i+2].removeInner(s,l+1);c!=an?r[i+2]=c:(r.splice(i,3),i-=3)}if(o.length){for(let i=0,s;i<e.length;i++)if(s=e[i])for(let l=0;l<o.length;l++)o[l].eq(s,n)&&(o==this.local&&(o=this.local.slice()),o.splice(l--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new jt(o,r):an}forChild(e,n){if(this==an)return this;if(n.isLeaf)return jt.empty;let r,o;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let i=e+1,s=i+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<s&&a.to>i&&a.type instanceof Oo){let c=Math.max(i,a.from)-i,u=Math.min(s,a.to)-i;c<u&&(o||(o=[])).push(a.copy(c,u))}}if(o){let l=new jt(o.sort(ui),Vi);return r?new bo([l,r]):l}return r||an}eq(e){if(this==e)return!0;if(!(e instanceof jt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return lh(this.localsInner(e))}localsInner(e){if(this==an)return Vi;if(e.inlineContent||!this.local.some(Oo.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Oo||n.push(this.local[r]);return n}forEachSet(e){e(this)}}jt.empty=new jt([],[]);jt.removeOverlap=lh;const an=jt.empty;class bo{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,ci));return bo.from(r)}forChild(e,n){if(n.isLeaf)return jt.empty;let r=[];for(let o=0;o<this.members.length;o++){let i=this.members[o].forChild(e,n);i!=an&&(i instanceof bo?r=r.concat(i.members):r.push(i))}return bo.from(r)}eq(e){if(!(e instanceof bo)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let i=this.members[o].localsInner(e);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let s=0;s<i.length;s++)n.push(i[s])}}return n?lh(r?n:n.sort(ui)):Vi}static from(e){switch(e.length){case 0:return an;case 1:return e[0];default:return new bo(e.every(n=>n instanceof jt)?e:e.reduce((n,r)=>n.concat(r instanceof jt?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function rM(t,e,n,r,o,i,s){let l=t.slice();for(let c=0,u=i;c<n.maps.length;c++){let d=0;n.maps[c].forEach((h,m,g,y)=>{let x=y-g-(m-h);for(let O=0;O<l.length;O+=3){let A=l[O+1];if(A<0||h>A+u-d)continue;let N=l[O]+u-d;m>=N?l[O+1]=h<=N?-2:-1:h>=u&&x&&(l[O]+=x,l[O+1]+=x)}d+=x}),u=n.maps[c].map(u,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let u=n.map(t[c]+i),d=u-o;if(d<0||d>=r.content.size){a=!0;continue}let h=n.map(t[c+1]+i,-1),m=h-o,{index:g,offset:y}=r.content.findIndex(d),x=r.maybeChild(g);if(x&&y==d&&y+x.nodeSize==m){let O=l[c+2].mapInner(n,x,u+1,t[c]+i+1,s);O!=an?(l[c]=d,l[c+1]=m,l[c+2]=O):(l[c+1]=-2,a=!0)}else a=!0}if(a){let c=oM(l,t,e,n,o,i,s),u=dc(c,r,0,s);e=u.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let m=u.children[d];for(;h<l.length&&l[h]<m;)h+=3;l.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new jt(e.sort(ui),l)}function Xb(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new ir(o.from+e,o.to+e,o.type))}return n}function oM(t,e,n,r,o,i,s){function l(a,c){for(let u=0;u<a.local.length;u++){let d=a.local[u].map(r,o,c);d?n.push(d):s.onRemove&&s.onRemove(a.local[u].spec)}for(let u=0;u<a.children.length;u+=3)l(a.children[u+2],a.children[u]+c+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+i+1);return n}function Zb(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let i=0,s;i<t.length;i++)(s=t[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),t[i]=null);return o}function Qb(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function dc(t,e,n,r){let o=[],i=!1;e.forEach((l,a)=>{let c=Zb(t,l,a+n);if(c){i=!0;let u=dc(c,l,n+a+1,r);u!=an&&o.push(a,a+l.nodeSize,u)}});let s=Xb(i?Qb(t):t,-n).sort(ui);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||(r.onRemove&&r.onRemove(s[l].spec),s.splice(l--,1));return s.length||o.length?new jt(s,o):an}function ui(t,e){return t.from-e.from||t.to-e.to}function lh(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let i=e[o];if(i.from==r.from){i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),Xm(e,o+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),Xm(e,o,r.copy(i.from,r.to)));break}}}return e}function Xm(t,e,n){for(;e<t.length&&ui(n,t[e])>0;)e++;t.splice(e,0,n)}function Uu(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=an&&e.push(r)}),t.cursorWrapper&&e.push(jt.create(t.state.doc,[t.cursorWrapper.deco])),bo.from(e)}const iM={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},sM=Bn&&To<=11;class lM{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class aM{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new lM,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);Bn&&To<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),sM&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,iM)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(zm(this.view)){if(this.suppressingSelectionUpdates)return Zr(this.view);if(Bn&&To<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&yi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let i=e.focusNode;i;i=ls(i))n.add(i);for(let i=e.anchorNode;i;i=ls(i))if(n.has(i)){r=i;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&zm(e)&&!this.ignoreSelectionChange(r),i=-1,s=-1,l=!1,a=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],a);d&&(i=i<0?d.from:Math.min(d.from,i),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(l=!0))}if(vr&&a.length){let u=a.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,h]=u;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of u){let m=h.parentNode;m&&m.nodeName=="LI"&&(!d||dM(e,d)!=m)&&h.remove()}}}let c=null;i<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Fc(r)&&(c=eh(e))&&c.eq(Ye.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Zr(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||o)&&(i>-1&&(e.docView.markDirty(i,s),cM(e)),this.handleDOMChange(i,s,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Zr(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,i=e.nextSibling;if(Bn&&To<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h)}let s=o&&o.parentNode==e.target?tn(o)+1:0,l=r.localPosFromDOM(e.target,s,-1),a=i&&i.parentNode==e.target?tn(i):e.target.childNodes.length,c=r.localPosFromDOM(e.target,a,1);return{from:l,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Zm=new WeakMap,Qm=!1;function cM(t){if(!Zm.has(t)&&(Zm.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=vr,Qm)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Qm=!0}}function eg(t,e){let n=e.startContainer,r=e.startOffset,o=e.endContainer,i=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return yi(s.node,s.offset,o,i)&&([n,r,o,i]=[o,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}}function uM(t,e){if(e.getComposedRanges){let o=e.getComposedRanges(t.root)[0];if(o)return eg(t,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?eg(t,n):null}function dM(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function fM(t,e,n){let{node:r,fromOffset:o,toOffset:i,from:s,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),c,u=a.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:a.anchorOffset}],Fc(a)||c.push({node:a.focusNode,offset:a.focusOffset})),hn&&t.input.lastKeyCode===8)for(let x=i;x>o;x--){let O=r.childNodes[x-1],A=O.pmViewDesc;if(O.nodeName=="BR"&&!A){i=x;break}if(!A||A.size)break}let d=t.state.doc,h=t.someProp("domParser")||Gs.fromSchema(t.state.schema),m=d.resolve(s),g=null,y=h.parse(r,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:o,to:i,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:hM,context:m});if(c&&c[0].pos!=null){let x=c[0].pos,O=c[1]&&c[1].pos;O==null&&(O=x),g={anchor:x+s,head:O+s}}return{doc:y,sel:g,from:s,to:l}}function hM(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(En&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||En&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const pM=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function mM(t,e,n,r,o){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let T=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,C=eh(t,T);if(C&&!t.state.selection.eq(C)){if(hn&&qr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",w=>w(t,Zo(13,"Enter"))))return;let B=t.state.tr.setSelection(C);T=="pointer"?B.setMeta("pointer",!0):T=="key"&&B.scrollIntoView(),i&&B.setMeta("composition",i),t.dispatch(B)}return}let s=t.state.doc.resolve(e),l=s.sharedDepth(n);e=s.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,c=fM(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),h,m;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,m="end"):(h=t.state.selection.from,m="start"),t.input.lastKeyCode=null;let g=bM(d.content,c.doc.content,c.from,h,m);if(g&&t.input.domChangeCount++,(as&&t.input.lastIOSEnter>Date.now()-225||qr)&&o.some(T=>T.nodeType==1&&!pM.test(T.nodeName))&&(!g||g.endA>=g.endB)&&t.someProp("handleKeyDown",T=>T(t,Zo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!g)if(r&&a instanceof ze&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))g={start:a.from,endA:a.to,endB:a.to};else{if(c.sel){let T=tg(t,t.state.doc,c.sel);if(T&&!T.eq(t.state.selection)){let C=t.state.tr.setSelection(T);i&&C.setMeta("composition",i),t.dispatch(C)}}return}t.state.selection.from<t.state.selection.to&&g.start==g.endB&&t.state.selection instanceof ze&&(g.start>t.state.selection.from&&g.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?g.start=t.state.selection.from:g.endA<t.state.selection.to&&g.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(g.endB+=t.state.selection.to-g.endA,g.endA=t.state.selection.to)),Bn&&To<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>c.from&&c.doc.textBetween(g.start-c.from-1,g.start-c.from+1)=="  "&&(g.start--,g.endA--,g.endB--);let y=c.doc.resolveNoCache(g.start-c.from),x=c.doc.resolveNoCache(g.endB-c.from),O=u.resolve(g.start),A=y.sameParent(x)&&y.parent.inlineContent&&O.end()>=g.endA,N;if((as&&t.input.lastIOSEnter>Date.now()-225&&(!A||o.some(T=>T.nodeName=="DIV"||T.nodeName=="P"))||!A&&y.pos<c.doc.content.size&&!y.sameParent(x)&&(N=Ye.findFrom(c.doc.resolve(y.pos+1),1,!0))&&N.head==x.pos)&&t.someProp("handleKeyDown",T=>T(t,Zo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>g.start&&yM(u,g.start,g.endA,y,x)&&t.someProp("handleKeyDown",T=>T(t,Zo(8,"Backspace")))){qr&&hn&&t.domObserver.suppressSelectionUpdates();return}hn&&g.endB==g.start&&(t.input.lastChromeDelete=Date.now()),qr&&!A&&y.start()!=x.start()&&x.parentOffset==0&&y.depth==x.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==g.endA&&(g.endB-=2,x=c.doc.resolveNoCache(g.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(T){return T(t,Zo(13,"Enter"))})},20));let L=g.start,D=g.endA,R,F,U;if(A){if(y.pos==x.pos)Bn&&To<=11&&y.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Zr(t),20)),R=t.state.tr.delete(L,D),F=u.resolve(g.start).marksAcross(u.resolve(g.endA));else if(g.endA==g.endB&&(U=gM(y.parent.content.cut(y.parentOffset,x.parentOffset),O.parent.content.cut(O.parentOffset,g.endA-O.start()))))R=t.state.tr,U.type=="add"?R.addMark(L,D,U.mark):R.removeMark(L,D,U.mark);else if(y.parent.child(y.index()).isText&&y.index()==x.index()-(x.textOffset?0:1)){let T=y.parent.textBetween(y.parentOffset,x.parentOffset);if(t.someProp("handleTextInput",C=>C(t,L,D,T)))return;R=t.state.tr.insertText(T,L,D)}}if(R||(R=t.state.tr.replace(L,D,c.doc.slice(g.start-c.from,g.endB-c.from))),c.sel){let T=tg(t,R.doc,c.sel);T&&!(hn&&t.composing&&T.empty&&(g.start!=g.endB||t.input.lastChromeDelete<Date.now()-100)&&(T.head==L||T.head==R.mapping.map(D)-1)||Bn&&T.empty&&T.head==L)&&R.setSelection(T)}F&&R.ensureMarks(F),i&&R.setMeta("composition",i),t.dispatch(R.scrollIntoView())}function tg(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:th(t,e.resolve(n.anchor),e.resolve(n.head))}function gM(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,i=r,s,l,a;for(let u=0;u<r.length;u++)o=r[u].removeFromSet(o);for(let u=0;u<n.length;u++)i=n[u].removeFromSet(i);if(o.length==1&&i.length==0)l=o[0],s="add",a=u=>u.mark(l.addToSet(u.marks));else if(o.length==0&&i.length==1)l=i[0],s="remove",a=u=>u.mark(l.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(a(e.child(u)));if(oe.from(c).eq(t))return{mark:l,type:s}}function yM(t,e,n,r,o){if(n-e<=o.pos-r.pos||Ku(r,!0,!1)<o.pos)return!1;let i=t.resolve(e);if(!r.parent.isTextblock){let l=i.nodeAfter;return l!=null&&n==e+l.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=t.resolve(Ku(i,!0,!0));return!s.parent.isTextblock||s.pos>n||Ku(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Ku(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let i=t.node(r).maybeChild(t.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,o++}return o}function bM(t,e,n,r,o){let i=t.findDiffStart(e,n);if(i==null)return null;let{a:s,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let a=Math.max(0,i-Math.min(s,l));r-=s+a-i}if(s<i&&t.size<e.size){let a=r<=i&&r>=s?i-r:0;i-=a,i&&i<e.size&&ng(e.textBetween(i-1,i+1))&&(i+=a?1:-1),l=i+(l-s),s=i}else if(l<i){let a=r<=i&&r>=l?i-r:0;i-=a,i&&i<t.size&&ng(t.textBetween(i-1,i+1))&&(i+=a?1:-1),s=i+(s-l),l=i}return{start:i,endA:s,endB:l}}function ng(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class vM{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new VO,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(lg),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=ig(this),og(this),this.nodeViews=sg(this),this.docView=Bm(this.state.doc,rg(this),Uu(this),this.dom,this),this.domObserver=new aM(this,(r,o,i,s)=>mM(this,r,o,i,s)),this.domObserver.start(),RO(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&lf(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(lg),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let o=this.state,i=!1,s=!1;e.storedMarks&&this.composing&&(qb(this),s=!0),this.state=e;let l=o.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let m=sg(this);CM(m,this.nodeViews)&&(this.nodeViews=m,i=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&lf(this),this.editable=ig(this),og(this);let a=Uu(this),c=rg(this),u=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",d=i||!this.docView.matchesNode(e.doc,c,a);(d||!e.selection.eq(o.selection))&&(s=!0);let h=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&QE(this);if(s){this.domObserver.stop();let m=d&&(Bn||hn)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&wM(o.selection,e.selection);if(d){let g=hn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=ZO(this)),(i||!this.docView.update(e.doc,c,a,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=Bm(e.doc,c,a,this.dom,this)),g&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&SO(this))?Zr(this,m):(Ib(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&eO(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Le){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Nm(this,n.getBoundingClientRect(),e)}else Nm(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(o=i)}this.dragging=new Gb(e.slice,e.move,o<0?void 0:Le.create(this.state.doc,o))}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let s=0;s<this.directPlugins.length;s++){let l=this.directPlugins[s].props[e];if(l!=null&&(o=n?n(l):l))return o}let i=this.state.plugins;if(i)for(let s=0;s<i.length;s++){let l=i[s].props[e];if(l!=null&&(o=n?n(l):l))return o}}hasFocus(){if(Bn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&tO(this.dom),Zr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return sO(this,e)}coordsAtPos(e,n=1){return Ob(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return dO(this,n||this.state,e)}pasteHTML(e,n){return yl(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return yl(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return nh(this,e)}destroy(){this.docView&&(HO(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Uu(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,jE())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return jO(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?En&&this.root.nodeType===11&&qE(this.dom.ownerDocument)==this.dom&&uM(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function rg(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[ir.node(0,t.state.doc.content.size,e)]}function og(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:ir.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function ig(t){return!t.someProp("editable",e=>e(t.state)===!1)}function wM(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function sg(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function CM(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function lg(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Po={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},fc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},kM=typeof navigator<"u"&&/Mac/.test(navigator.platform),SM=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var nn=0;nn<10;nn++)Po[48+nn]=Po[96+nn]=String(nn);for(var nn=1;nn<=24;nn++)Po[nn+111]="F"+nn;for(var nn=65;nn<=90;nn++)Po[nn]=String.fromCharCode(nn+32),fc[nn]=String.fromCharCode(nn);for(var Wu in Po)fc.hasOwnProperty(Wu)||(fc[Wu]=Po[Wu]);function xM(t){var e=kM&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||SM&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?fc:Po)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const TM=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function EM(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,i,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))o=!0;else if(/^s(hift)?$/i.test(a))i=!0;else if(/^mod$/i.test(a))TM?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),s&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function OM(t){let e=Object.create(null);for(let n in t)e[EM(n)]=t[n];return e}function qu(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function MM(t){return new Rn({props:{handleKeyDown:e0(t)}})}function e0(t){let e=OM(t);return function(n,r){let o=xM(r),i,s=e[qu(o,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let l=e[qu(o,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||o.charCodeAt(0)>127)&&(i=Po[r.keyCode])&&i!=o){let l=e[qu(i,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const ah=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function t0(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const n0=(t,e,n)=>{let r=t0(t,n);if(!r)return!1;let o=ch(r);if(!o){let s=r.blockRange(),l=s&&ps(s);return l==null?!1:(e&&e(t.tr.lift(s,l).scrollIntoView()),!0)}let i=o.nodeBefore;if(d0(t,o,e,-1))return!0;if(r.parent.content.size==0&&(cs(i,"end")||Le.isSelectable(i)))for(let s=r.depth;;s--){let l=Rc(t.doc,r.before(s),r.after(s),Ce.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(cs(i,"end")?Ye.findFrom(a.doc.resolve(a.mapping.map(o.pos,-1)),-1):Le.create(a.doc,o.pos-i.nodeSize)),e(a.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return i.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-i.nodeSize,o.pos).scrollIntoView()),!0):!1},AM=(t,e,n)=>{let r=t0(t,n);if(!r)return!1;let o=ch(r);return o?r0(t,o,e):!1},_M=(t,e,n)=>{let r=i0(t,n);if(!r)return!1;let o=uh(r);return o?r0(t,o,e):!1};function r0(t,e,n){let r=e.nodeBefore,o=r,i=e.pos-1;for(;!o.isTextblock;i--){if(o.type.spec.isolating)return!1;let u=o.lastChild;if(!u)return!1;o=u}let s=e.nodeAfter,l=s,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let u=l.firstChild;if(!u)return!1;l=u}let c=Rc(t.doc,i,a,Ce.empty);if(!c||c.from!=i||c instanceof Kt&&c.slice.size>=a-i)return!1;if(n){let u=t.tr.step(c);u.setSelection(ze.create(u.doc,i)),n(u.scrollIntoView())}return!0}function cs(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const o0=(t,e,n)=>{let{$head:r,empty:o}=t.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;i=ch(r)}let s=i&&i.nodeBefore;return!s||!Le.isSelectable(s)?!1:(e&&e(t.tr.setSelection(Le.create(t.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)};function ch(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function i0(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const s0=(t,e,n)=>{let r=i0(t,n);if(!r)return!1;let o=uh(r);if(!o)return!1;let i=o.nodeAfter;if(d0(t,o,e,1))return!0;if(r.parent.content.size==0&&(cs(i,"start")||Le.isSelectable(i))){let s=Rc(t.doc,r.before(),r.after(),Ce.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=t.tr.step(s);l.setSelection(cs(i,"start")?Ye.findFrom(l.doc.resolve(l.mapping.map(o.pos)),1):Le.create(l.doc,l.mapping.map(o.pos))),e(l.scrollIntoView())}return!0}}return i.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0):!1},l0=(t,e,n)=>{let{$head:r,empty:o}=t.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;i=uh(r)}let s=i&&i.nodeAfter;return!s||!Le.isSelectable(s)?!1:(e&&e(t.tr.setSelection(Le.create(t.doc,i.pos)).scrollIntoView()),!0)};function uh(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const NM=(t,e)=>{let n=t.selection,r=n instanceof Le,o;if(r){if(n.node.isTextblock||!Bo(t.doc,n.from))return!1;o=n.from}else if(o=Vc(t.doc,n.from,-1),o==null)return!1;if(e){let i=t.tr.join(o);r&&i.setSelection(Le.create(i.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},$M=(t,e)=>{let n=t.selection,r;if(n instanceof Le){if(n.node.isTextblock||!Bo(t.doc,n.to))return!1;r=n.to}else if(r=Vc(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},PM=(t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),i=o&&ps(o);return i==null?!1:(e&&e(t.tr.lift(o,i).scrollIntoView()),!0)},a0=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function dh(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const DM=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),i=n.indexAfter(-1),s=dh(o.contentMatchAt(i));if(!s||!o.canReplaceWith(i,i,s))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,s.createAndFill());a.setSelection(Ye.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},c0=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof Yn||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=dh(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,l=t.tr.insert(s,i.createAndFill());l.setSelection(ze.create(l.doc,s+1)),e(l.scrollIntoView())}return!0},u0=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(Xr(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),o=r&&ps(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)};function IM(t){return(e,n)=>{let{$from:r,$to:o}=e.selection;if(e.selection instanceof Le&&e.selection.node.isBlock)return!r.parentOffset||!Xr(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],s,l,a=!1,c=!1;for(let m=r.depth;;m--)if(r.node(m).isBlock){a=r.end(m)==r.pos+(r.depth-m),c=r.start(m)==r.pos-(r.depth-m),l=dh(r.node(m-1).contentMatchAt(r.indexAfter(m-1))),i.unshift(a&&l?{type:l}:null),s=m;break}else{if(m==1)return!1;i.unshift(null)}let u=e.tr;(e.selection instanceof ze||e.selection instanceof Yn)&&u.deleteSelection();let d=u.mapping.map(r.pos),h=Xr(u.doc,d,i.length,i);if(h||(i[0]=l?{type:l}:null,h=Xr(u.doc,d,i.length,i)),u.split(d,i.length,i),!a&&c&&r.node(s).type!=l){let m=u.mapping.map(r.before(s)),g=u.doc.resolve(m);l&&r.node(s-1).canReplaceWith(g.index(),g.index()+1,l)&&u.setNodeMarkup(u.mapping.map(r.before(s)),l)}return n&&n(u.scrollIntoView()),!0}}const LM=IM(),BM=(t,e)=>{let{$from:n,to:r}=t.selection,o,i=n.sharedDepth(r);return i==0?!1:(o=n.before(i),e&&e(t.tr.setSelection(Le.create(t.doc,o))),!0)};function VM(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,i=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(o.isTextblock||Bo(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function d0(t,e,n,r){let o=e.nodeBefore,i=e.nodeAfter,s,l,a=o.type.spec.isolating||i.type.spec.isolating;if(!a&&VM(t,e,n))return!0;let c=!a&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(l=o.contentMatchAt(o.childCount)).findWrapping(i.type))&&l.matchType(s[0]||i.type).validEnd){if(n){let m=e.pos+i.nodeSize,g=oe.empty;for(let O=s.length-1;O>=0;O--)g=oe.from(s[O].create(null,g));g=oe.from(o.copy(g));let y=t.tr.step(new Wt(e.pos-1,m,e.pos,m,new Ce(g,1,0),s.length,!0)),x=y.doc.resolve(m+2*s.length);x.nodeAfter&&x.nodeAfter.type==o.type&&Bo(y.doc,x.pos)&&y.join(x.pos),n(y.scrollIntoView())}return!0}let u=i.type.spec.isolating||r>0&&a?null:Ye.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),h=d&&ps(d);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(d,h).scrollIntoView()),!0;if(c&&cs(i,"start",!0)&&cs(o,"end")){let m=o,g=[];for(;g.push(m),!m.isTextblock;)m=m.lastChild;let y=i,x=1;for(;!y.isTextblock;y=y.firstChild)x++;if(m.canReplace(m.childCount,m.childCount,y.content)){if(n){let O=oe.empty;for(let N=g.length-1;N>=0;N--)O=oe.from(g[N].copy(O));let A=t.tr.step(new Wt(e.pos-g.length,e.pos+i.nodeSize,e.pos+x,e.pos+i.nodeSize-x,new Ce(O,g.length,0),0,!0));n(A.scrollIntoView())}return!0}}return!1}function f0(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return o.node(i).isTextblock?(n&&n(e.tr.setSelection(ze.create(e.doc,t<0?o.start(i):o.end(i)))),!0):!1}}const RM=f0(-1),HM=f0(1);function FM(t,e=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i),l=s&&Xf(s,t,e);return l?(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0):!1}}function ag(t,e=null){return function(n,r){let o=!1;for(let i=0;i<n.selection.ranges.length&&!o;i++){let{$from:{pos:s},$to:{pos:l}}=n.selection.ranges[i];n.doc.nodesBetween(s,l,(a,c)=>{if(o)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)o=!0;else{let u=n.doc.resolve(c),d=u.index();o=u.parent.canReplaceWith(d,d+1,t)}})}if(!o)return!1;if(r){let i=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[s];i.setBlockType(l,a,t,e)}r(i.scrollIntoView())}return!0}}function fh(...t){return function(e,n,r){for(let o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}fh(ah,n0,o0);fh(ah,s0,l0);fh(a0,c0,u0,LM);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function jM(t,e=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i);if(!s)return!1;let l=r?n.tr:null;return zM(l,s,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function zM(t,e,n,r=null){let o=!1,i=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=s.resolve(e.start-2);i=new ic(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new ic(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let l=Xf(i,n,r,e);return l?(t&&UM(t,e,l,o,n),!0):!1}function UM(t,e,n,r,o){let i=oe.empty;for(let u=n.length-1;u>=0;u--)i=oe.from(n[u].type.create(n[u].attrs,i));t.step(new Wt(e.start-(r?2:0),e.end,e.start,e.end,new Ce(i,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==o&&(s=u+1);let l=n.length-s,a=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,h=!0;u<d;u++,h=!1)!h&&Xr(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=c.child(u).nodeSize;return t}function KM(t){return function(e,n){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,s=>s.childCount>0&&s.firstChild.type==t);return i?n?r.node(i.depth-1).type==t?WM(e,n,t,i):qM(e,n,i):!0:!1}}function WM(t,e,n,r){let o=t.tr,i=r.end,s=r.$to.end(r.depth);i<s&&(o.step(new Wt(i-1,s,i,s,new Ce(oe.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new ic(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth));const l=ps(r);if(l==null)return!1;o.lift(r,l);let a=o.doc.resolve(o.mapping.map(i,-1)-1);return Bo(o.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&o.join(a.pos),e(o.scrollIntoView()),!0}function qM(t,e,n){let r=t.tr,o=n.parent;for(let m=n.end,g=n.endIndex-1,y=n.startIndex;g>y;g--)m-=o.child(g).nodeSize,r.delete(m-1,m+1);let i=r.doc.resolve(n.start),s=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==o.childCount,c=i.node(-1),u=i.index(-1);if(!c.canReplace(u+(l?0:1),u+1,s.content.append(a?oe.empty:oe.from(o))))return!1;let d=i.pos,h=d+s.nodeSize;return r.step(new Wt(d-(l?1:0),h+(a?1:0),d+1,h-1,new Ce((l?oe.empty:oe.from(o.copy(oe.empty))).append(a?oe.empty:oe.from(o.copy(oe.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function JM(t){return function(e,n){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==t);if(!i)return!1;let s=i.startIndex;if(s==0)return!1;let l=i.parent,a=l.child(s-1);if(a.type!=t)return!1;if(n){let c=a.lastChild&&a.lastChild.type==l.type,u=oe.from(c?t.create():null),d=new Ce(oe.from(t.create(null,oe.from(l.type.create(null,u)))),c?3:1,0),h=i.start,m=i.end;n(e.tr.step(new Wt(h-(c?3:1),m,h,m,d,1,!0)).scrollIntoView())}return!0}}function Uc(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:i}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}}}class Kc{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:o}=n,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...u)=>{const d=a(...u)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,l=[],a=!!e,c=e||i.tr,u=()=>(!a&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),l.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,m])=>[h,(...y)=>{const x=this.buildProps(c,n),O=m(...y)(x);return l.push(O),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,o=!1,i=e||r.tr,s=this.buildProps(i,o);return{...Object.fromEntries(Object.entries(n).map(([a,c])=>[a,(...u)=>c(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,o)}}buildProps(e,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,l={tr:e,editor:o,view:s,state:Uc({state:i,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,c])=>[a,(...u)=>c(...u)(l)]))}};return l}}class GM{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e]),this}once(e,n){const r=(...o)=>{this.off(e,r),n.apply(this,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function xe(t,e,n){return t.config[e]===void 0&&t.parent?xe(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?xe(t.parent,e,n):null}):t.config[e]}function Wc(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function h0(t){const e=[],{nodeExtensions:n,markExtensions:r}=Wc(t),o=[...n,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage,extensions:o},a=xe(s,"addGlobalAttributes",l);if(!a)return;a().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([h,m])=>{e.push({type:d,name:h,attribute:{...i,...m}})})})})}),o.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=xe(s,"addAttributes",l);if(!a)return;const c=a();Object.entries(c).forEach(([u,d])=>{const h={...i,...d};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:s.name,name:u,attribute:h})})}),e}function Gt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function An(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,i])=>{if(!r[o]){r[o]=i;return}if(o==="class"){const l=i?String(i).split(" "):[],a=r[o]?r[o].split(" "):[],c=l.filter(u=>!a.includes(u));r[o]=[...a,...c].join(" ")}else if(o==="style"){const l=i?i.split(";").map(u=>u.trim()).filter(Boolean):[],a=r[o]?r[o].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;a.forEach(u=>{const[d,h]=u.split(":").map(m=>m.trim());c.set(d,h)}),l.forEach(u=>{const[d,h]=u.split(":").map(m=>m.trim());c.set(d,h)}),r[o]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[o]=i}),r},{})}function af(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>An(n,r),{})}function p0(t){return typeof t=="function"}function Ze(t,e=void 0,...n){return p0(t)?e?t.bind(e)(...n):t(...n):t}function YM(t={}){return Object.keys(t).length===0&&t.constructor===Object}function XM(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function cg(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((i,s)=>{const l=s.attribute.parseHTML?s.attribute.parseHTML(n):XM(n.getAttribute(s.name));return l==null?i:{...i,[s.name]:l}},{});return{...r,...o}}}}function ug(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&YM(n)?!1:n!=null))}function ZM(t,e){var n;const r=h0(t),{nodeExtensions:o,markExtensions:i}=Wc(t),s=(n=o.find(c=>xe(c,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(o.map(c=>{const u=r.filter(O=>O.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((O,A)=>{const N=xe(A,"extendNodeSchema",d);return{...O,...N?N(c):{}}},{}),m=ug({...h,content:Ze(xe(c,"content",d)),marks:Ze(xe(c,"marks",d)),group:Ze(xe(c,"group",d)),inline:Ze(xe(c,"inline",d)),atom:Ze(xe(c,"atom",d)),selectable:Ze(xe(c,"selectable",d)),draggable:Ze(xe(c,"draggable",d)),code:Ze(xe(c,"code",d)),whitespace:Ze(xe(c,"whitespace",d)),linebreakReplacement:Ze(xe(c,"linebreakReplacement",d)),defining:Ze(xe(c,"defining",d)),isolating:Ze(xe(c,"isolating",d)),attrs:Object.fromEntries(u.map(O=>{var A;return[O.name,{default:(A=O==null?void 0:O.attribute)===null||A===void 0?void 0:A.default}]}))}),g=Ze(xe(c,"parseHTML",d));g&&(m.parseDOM=g.map(O=>cg(O,u)));const y=xe(c,"renderHTML",d);y&&(m.toDOM=O=>y({node:O,HTMLAttributes:af(O,u)}));const x=xe(c,"renderText",d);return x&&(m.toText=x),[c.name,m]})),a=Object.fromEntries(i.map(c=>{const u=r.filter(x=>x.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((x,O)=>{const A=xe(O,"extendMarkSchema",d);return{...x,...A?A(c):{}}},{}),m=ug({...h,inclusive:Ze(xe(c,"inclusive",d)),excludes:Ze(xe(c,"excludes",d)),group:Ze(xe(c,"group",d)),spanning:Ze(xe(c,"spanning",d)),code:Ze(xe(c,"code",d)),attrs:Object.fromEntries(u.map(x=>{var O;return[x.name,{default:(O=x==null?void 0:x.attribute)===null||O===void 0?void 0:O.default}]}))}),g=Ze(xe(c,"parseHTML",d));g&&(m.parseDOM=g.map(x=>cg(x,u)));const y=xe(c,"renderHTML",d);return y&&(m.toDOM=x=>y({mark:x,HTMLAttributes:af(x,u)})),[c.name,m]}));return new rb({topNode:s,nodes:l,marks:a})}function Ju(t,e){return e.nodes[t]||e.marks[t]||null}function dg(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function hh(t,e){const n=Ci.fromSchema(e).serializeFragment(t),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}const QM=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(o,i,s,l)=>{var a,c;const u=((c=(a=o.type.spec).toText)===null||c===void 0?void 0:c.call(a,{node:o,pos:i,parent:s,index:l}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?u:u.slice(0,Math.max(0,r-i))}),n};function ph(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class qc{constructor(e){this.find=e.find,this.handler=e.handler}}const eA=(t,e)=>{if(ph(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function ta(t){var e;const{editor:n,from:r,to:o,text:i,rules:s,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const c=a.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const d=QM(c)+i;return s.forEach(h=>{if(u)return;const m=eA(d,h.find);if(!m)return;const g=a.state.tr,y=Uc({state:a.state,transaction:g}),x={from:r-(m[0].length-i.length),to:o},{commands:O,chain:A,can:N}=new Kc({editor:n,state:y});h.handler({state:y,range:x,match:m,commands:O,chain:A,can:N})===null||!g.steps.length||(g.setMeta(l,{transform:g,from:r,to:o,text:i}),a.dispatch(g),u=!0)}),u}function tA(t){const{editor:e,rules:n}=t,r=new Rn({state:{init(){return null},apply(o,i,s){const l=o.getMeta(r);if(l)return l;const a=o.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:u}=a;typeof u=="string"?u=u:u=hh(oe.from(u),s.schema);const{from:d}=a,h=d+u.length;ta({editor:e,from:d,to:h,text:u,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:i}},props:{handleTextInput(o,i,s,l){return ta({editor:e,from:i,to:s,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:i}=o.state.selection;i&&ta({editor:e,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,i){if(i.key!=="Enter")return!1;const{$cursor:s}=o.state.selection;return s?ta({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function nA(t){return Object.prototype.toString.call(t).slice(8,-1)}function na(t){return nA(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Jc(t,e){const n={...t};return na(t)&&na(e)&&Object.keys(e).forEach(r=>{na(e[r])&&na(t[r])?n[r]=Jc(t[r],e[r]):n[r]=e[r]}),n}class Do{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ze(xe(this,"addOptions",{name:this.name}))),this.storage=Ze(xe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Do(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Jc(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Do(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ze(xe(n,"addOptions",{name:n.name})),n.storage=Ze(xe(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const s=o.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const a=s.find(c=>(c==null?void 0:c.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}function rA(t){return typeof t=="number"}class oA{constructor(e){this.find=e.find,this.handler=e.handler}}const iA=(t,e,n)=>{if(ph(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(o=>{const i=[o.text];return i.index=o.index,i.input=t,i.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(o.replaceWith)),i}):[]};function sA(t){const{editor:e,state:n,from:r,to:o,rule:i,pasteEvent:s,dropEvent:l}=t,{commands:a,chain:c,can:u}=new Kc({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,o,(m,g)=>{if(!m.isTextblock||m.type.spec.code)return;const y=Math.max(r,g),x=Math.min(o,g+m.content.size),O=m.textBetween(y-g,x-g,void 0,"￼");iA(O,i.find,s).forEach(N=>{if(N.index===void 0)return;const L=y+N.index+1,D=L+N[0].length,R={from:n.tr.mapping.map(L),to:n.tr.mapping.map(D)},F=i.handler({state:n,range:R,match:N,commands:a,chain:c,can:u,pasteEvent:s,dropEvent:l});d.push(F)})}),d.every(m=>m!==null)}let ra=null;const lA=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function aA(t){const{editor:e,rules:n}=t;let r=null,o=!1,i=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const a=({state:u,from:d,to:h,rule:m,pasteEvt:g})=>{const y=u.tr,x=Uc({state:u,transaction:y});if(!(!sA({editor:e,state:x,from:Math.max(d-1,0),to:h.b-1,rule:m,pasteEvent:g,dropEvent:l})||!y.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,y}};return n.map(u=>new Rn({view(d){const h=g=>{var y;r=!((y=d.dom.parentElement)===null||y===void 0)&&y.contains(g.target)?d.dom.parentElement:null,r&&(ra=e)},m=()=>{ra&&(ra=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",m),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",m)}}},props:{handleDOMEvents:{drop:(d,h)=>{if(i=r===d.dom.parentElement,l=h,!i){const m=ra;m&&setTimeout(()=>{const g=m.state.selection;g&&m.commands.deleteRange({from:g.from,to:g.to})},10)}return!1},paste:(d,h)=>{var m;const g=(m=h.clipboardData)===null||m===void 0?void 0:m.getData("text/html");return s=h,o=!!(g!=null&&g.includes("data-pm-slice")),!1}}},appendTransaction:(d,h,m)=>{const g=d[0],y=g.getMeta("uiEvent")==="paste"&&!o,x=g.getMeta("uiEvent")==="drop"&&!i,O=g.getMeta("applyPasteRules"),A=!!O;if(!y&&!x&&!A)return;if(A){let{text:D}=O;typeof D=="string"?D=D:D=hh(oe.from(D),m.schema);const{from:R}=O,F=R+D.length,U=lA(D);return a({rule:u,state:m,from:R,to:{b:F},pasteEvt:U})}const N=h.doc.content.findDiffStart(m.doc.content),L=h.doc.content.findDiffEnd(m.doc.content);if(!(!rA(N)||!L||N===L.b))return a({rule:u,state:m,from:N,to:L,pasteEvt:s})}}))}function cA(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class zi{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=zi.resolve(e),this.schema=ZM(this.extensions,n),this.setupExtensions()}static resolve(e){const n=zi.sort(zi.flatten(e)),r=cA(n.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},o=xe(n,"addExtensions",r);return o?[n,...this.flatten(o())]:n}).flat(10)}static sort(e){return e.sort((r,o)=>{const i=xe(r,"priority")||100,s=xe(o,"priority")||100;return i>s?-1:i<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Ju(n.name,this.schema)},o=xe(n,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,n=zi.sort([...this.extensions].reverse()),r=[],o=[],i=n.map(s=>{const l={name:s.name,options:s.options,storage:s.storage,editor:e,type:Ju(s.name,this.schema)},a=[],c=xe(s,"addKeyboardShortcuts",l);let u={};if(s.type==="mark"&&xe(s,"exitable",l)&&(u.ArrowRight=()=>Do.handleExit({editor:e,mark:s})),c){const y=Object.fromEntries(Object.entries(c()).map(([x,O])=>[x,()=>O({editor:e})]));u={...u,...y}}const d=MM(u);a.push(d);const h=xe(s,"addInputRules",l);dg(s,e.options.enableInputRules)&&h&&r.push(...h());const m=xe(s,"addPasteRules",l);dg(s,e.options.enablePasteRules)&&m&&o.push(...m());const g=xe(s,"addProseMirrorPlugins",l);if(g){const y=g();a.push(...y)}return a}).flat();return[tA({editor:e,rules:r}),...aA({editor:e,rules:o}),...i]}get attributes(){return h0(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Wc(this.extensions);return Object.fromEntries(n.filter(r=>!!xe(r,"addNodeView")).map(r=>{const o=this.attributes.filter(a=>a.type===r.name),i={name:r.name,options:r.options,storage:r.storage,editor:e,type:Gt(r.name,this.schema)},s=xe(r,"addNodeView",i);if(!s)return[];const l=(a,c,u,d,h)=>{const m=af(a,o);return s()({node:a,view:c,getPos:u,decorations:d,innerDecorations:h,editor:e,extension:r,HTMLAttributes:m})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Ju(e.name,this.schema)};e.type==="mark"&&(!((n=Ze(xe(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const o=xe(e,"onBeforeCreate",r),i=xe(e,"onCreate",r),s=xe(e,"onUpdate",r),l=xe(e,"onSelectionUpdate",r),a=xe(e,"onTransaction",r),c=xe(e,"onFocus",r),u=xe(e,"onBlur",r),d=xe(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),i&&this.editor.on("create",i),s&&this.editor.on("update",s),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class _n{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ze(xe(this,"addOptions",{name:this.name}))),this.storage=Ze(xe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new _n(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Jc(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new _n({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ze(xe(n,"addOptions",{name:n.name})),n.storage=Ze(xe(n,"addStorage",{name:n.name,options:n.options})),n}}function m0(t,e,n){const{from:r,to:o}=e,{blockSeparator:i=`

`,textSerializers:s={}}=n||{};let l="";return t.nodesBetween(r,o,(a,c,u,d)=>{var h;a.isBlock&&c>r&&(l+=i);const m=s==null?void 0:s[a.type.name];if(m)return u&&(l+=m({node:a,pos:c,parent:u,index:d,range:e})),!1;a.isText&&(l+=(h=a==null?void 0:a.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,o-c))}),l}function g0(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const uA=_n.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Rn({key:new Ir("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:i}=o,s=Math.min(...i.map(u=>u.$from.pos)),l=Math.max(...i.map(u=>u.$to.pos)),a=g0(n);return m0(r,{from:s,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),dA=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),fA=(t=!1)=>({commands:e})=>e.setContent("",t),hA=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:i,$to:s})=>{t.doc.nodesBetween(i.pos,s.pos,(l,a)=>{if(l.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(a)),h=c.resolve(u.map(a+l.nodeSize)),m=d.blockRange(h);if(!m)return;const g=ps(m);if(l.type.isTextblock){const{defaultType:y}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(m.start,y)}(g||g===0)&&e.lift(m,g)})}),!0},pA=t=>e=>t(e),mA=()=>({state:t,dispatch:e})=>c0(t,e),gA=(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,i=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,i.content),r.setSelection(new ze(r.doc.resolve(s-1))),!0},yA=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===r.type){if(e){const l=o.before(i),a=o.after(i);t.delete(l,a).scrollIntoView()}return!0}return!1},bA=t=>({tr:e,state:n,dispatch:r})=>{const o=Gt(t,n.schema),i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===o){if(r){const a=i.before(s),c=i.after(s);e.delete(a,c).scrollIntoView()}return!0}return!1},vA=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},wA=()=>({state:t,dispatch:e})=>ah(t,e),CA=()=>({commands:t})=>t.keyboardShortcut("Enter"),kA=()=>({state:t,dispatch:e})=>DM(t,e);function hc(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:ph(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function y0(t,e,n={}){return t.find(r=>r.type===e&&hc(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function fg(t,e,n={}){return!!y0(t,e,n)}function mh(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(u=>u.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(u=>u.type===e)||(n=n||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!y0([...o.node.marks],e,n)))return;let s=o.index,l=t.start()+o.offset,a=s+1,c=l+o.node.nodeSize;for(;s>0&&fg([...t.parent.child(s-1).marks],e,n);)s-=1,l-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&fg([...t.parent.child(a).marks],e,n);)c+=t.parent.child(a).nodeSize,a+=1;return{from:l,to:c}}function Ro(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const SA=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const i=Ro(t,r.schema),{doc:s,selection:l}=n,{$from:a,from:c,to:u}=l;if(o){const d=mh(a,i,e);if(d&&d.from<=c&&d.to>=u){const h=ze.create(s,d.from,d.to);n.setSelection(h)}}return!0},xA=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function b0(t){return t instanceof ze}function ri(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function v0(t,e=null){if(!e)return null;const n=Ye.atStart(t),r=Ye.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,i=r.to;return e==="all"?ze.create(t,ri(0,o,i),ri(t.content.size,o,i)):ze.create(t,ri(e,o,i),ri(e,o,i))}function TA(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function gh(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const EA=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:i})=>{e={scrollIntoView:!0,...e};const s=()=>{(gh()||TA())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(i&&t===null&&!b0(n.state.selection))return s(),!0;const l=v0(o.doc,t)||n.state.selection,a=n.state.selection.eq(l);return i&&(a||o.setSelection(l),a&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},OA=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),MA=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),w0=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&w0(r)}return t};function oa(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return w0(n)}function pc(t,e,n){if(t instanceof xo||t instanceof oe)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,o=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return oe.fromArray(t.map(l=>e.nodeFromJSON(l)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),pc("",e,n)}if(o){if(n.errorOnInvalidContent){let s=!1,l="";const a=new rb({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,l=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Gs.fromSchema(a).parseSlice(oa(t),n.parseOptions):Gs.fromSchema(a).parse(oa(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const i=Gs.fromSchema(e);return n.slice?i.parseSlice(oa(t),n.parseOptions).content:i.parse(oa(t),n.parseOptions)}return pc("",e,n)}function AA(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof Kt||o instanceof Wt))return;const i=t.mapping.maps[r];let s=0;i.forEach((l,a,c,u)=>{s===0&&(s=u)}),t.setSelection(Ye.near(t.doc.resolve(s),n))}const _A=t=>!("type"in t),NA=(t,e,n)=>({tr:r,dispatch:o,editor:i})=>{var s;if(o){n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;try{l=pc(e,i.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:i.options.enableContentCheck})}catch(g){return i.emit("contentError",{editor:i,error:g,disableCollaboration:()=>{i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}}),!1}let{from:a,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},u=!0,d=!0;if((_A(l)?l:[l]).forEach(g=>{g.check(),u=u?g.isText&&g.marks.length===0:!1,d=d?g.isBlock:!1}),a===c&&d){const{parent:g}=r.doc.resolve(a);g.isTextblock&&!g.type.spec.code&&!g.childCount&&(a-=1,c+=1)}let m;if(u){if(Array.isArray(e))m=e.map(g=>g.text||"").join("");else if(e instanceof oe){let g="";e.forEach(y=>{y.text&&(g+=y.text)}),m=g}else typeof e=="object"&&e&&e.text?m=e.text:m=e;r.insertText(m,a,c)}else m=l,r.replaceWith(a,c,m);n.updateSelection&&AA(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:a,text:m}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:a,text:m})}return!0},$A=()=>({state:t,dispatch:e})=>NM(t,e),PA=()=>({state:t,dispatch:e})=>$M(t,e),DA=()=>({state:t,dispatch:e})=>n0(t,e),IA=()=>({state:t,dispatch:e})=>s0(t,e),LA=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Vc(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},BA=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Vc(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},VA=()=>({state:t,dispatch:e})=>AM(t,e),RA=()=>({state:t,dispatch:e})=>_M(t,e);function C0(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function HA(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,i,s;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))o=!0;else if(/^s(hift)?$/i.test(a))i=!0;else if(/^mod$/i.test(a))gh()||C0()?s=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}const FA=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const i=HA(t).split(/-(?!$)/),s=i.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),l=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,l))});return a==null||a.steps.forEach(c=>{const u=c.map(r.mapping);u&&o&&r.maybeStep(u)}),!0};function vl(t,e,n={}){const{from:r,to:o,empty:i}=t.selection,s=e?Gt(e,t.schema):null,l=[];t.doc.nodesBetween(r,o,(d,h)=>{if(d.isText)return;const m=Math.max(r,h),g=Math.min(o,h+d.nodeSize);l.push({node:d,from:m,to:g})});const a=o-r,c=l.filter(d=>s?s.name===d.node.type.name:!0).filter(d=>hc(d.node.attrs,n,{strict:!1}));return i?!!c.length:c.reduce((d,h)=>d+h.to-h.from,0)>=a}const jA=(t,e={})=>({state:n,dispatch:r})=>{const o=Gt(t,n.schema);return vl(n,o,e)?PM(n,r):!1},zA=()=>({state:t,dispatch:e})=>u0(t,e),UA=t=>({state:e,dispatch:n})=>{const r=Gt(t,e.schema);return KM(r)(e,n)},KA=()=>({state:t,dispatch:e})=>a0(t,e);function Gc(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function hg(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}const WA=(t,e)=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const l=Gc(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(i=Gt(t,r.schema)),l==="mark"&&(s=Ro(t,r.schema)),o&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(c,u)=>{i&&i===c.type&&n.setNodeMarkup(u,void 0,hg(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(d=>{s===d.type&&n.addMark(u,u+c.nodeSize,s.create(hg(d.attrs,e)))})})}),!0):!1},qA=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),JA=()=>({tr:t,dispatch:e})=>{if(e){const n=new Yn(t.doc);t.setSelection(n)}return!0},GA=()=>({state:t,dispatch:e})=>o0(t,e),YA=()=>({state:t,dispatch:e})=>l0(t,e),XA=()=>({state:t,dispatch:e})=>BM(t,e),ZA=()=>({state:t,dispatch:e})=>HM(t,e),QA=()=>({state:t,dispatch:e})=>RM(t,e);function cf(t,e,n={},r={}){return pc(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const e_=(t,e=!1,n={},r={})=>({editor:o,tr:i,dispatch:s,commands:l})=>{var a,c;const{doc:u}=i;if(n.preserveWhitespace!=="full"){const d=cf(t,o.schema,n,{errorOnInvalidContent:(a=r.errorOnInvalidContent)!==null&&a!==void 0?a:o.options.enableContentCheck});return s&&i.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return s&&i.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:o.options.enableContentCheck})};function k0(t,e){const n=Ro(e,t.schema),{from:r,to:o,empty:i}=t.selection,s=[];i?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,a=>{s.push(...a.marks)});const l=s.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function t_(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function n_(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function yh(t){return e=>n_(e.$from,t)}function r_(t,e){const n={from:0,to:t.content.size};return m0(t,n,e)}function o_(t,e){const n=Gt(e,t.schema),{from:r,to:o}=t.selection,i=[];t.doc.nodesBetween(r,o,l=>{i.push(l)});const s=i.reverse().find(l=>l.type.name===n.name);return s?{...s.attrs}:{}}function i_(t,e){const n=Gc(typeof e=="string"?e:e.name,t.schema);return n==="node"?o_(t,e):n==="mark"?k0(t,e):{}}function S0(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(o=>{const i=n.resolve(t),s=mh(i,o.type);s&&r.push({mark:o,...s})}):n.nodesBetween(t,e,(o,i)=>{!o||(o==null?void 0:o.nodeSize)===void 0||r.push(...o.marks.map(s=>({from:i,to:i+o.nodeSize,mark:s})))}),r}function Aa(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(i=>i.type===e&&i.name===r);return o?o.attribute.keepOnSplit:!1}))}function uf(t,e,n={}){const{empty:r,ranges:o}=t.selection,i=e?Ro(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>i?i.name===d.type.name:!0).find(d=>hc(d.attrs,n,{strict:!1}));let s=0;const l=[];if(o.forEach(({$from:d,$to:h})=>{const m=d.pos,g=h.pos;t.doc.nodesBetween(m,g,(y,x)=>{if(!y.isText&&!y.marks.length)return;const O=Math.max(m,x),A=Math.min(g,x+y.nodeSize),N=A-O;s+=N,l.push(...y.marks.map(L=>({mark:L,from:O,to:A})))})}),s===0)return!1;const a=l.filter(d=>i?i.name===d.mark.type.name:!0).filter(d=>hc(d.mark.attrs,n,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),c=l.filter(d=>i?d.mark.type!==i&&d.mark.type.excludes(i):!0).reduce((d,h)=>d+h.to-h.from,0);return(a>0?a+c:a)>=s}function s_(t,e,n={}){if(!e)return vl(t,null,n)||uf(t,null,n);const r=Gc(e,t.schema);return r==="node"?vl(t,e,n):r==="mark"?uf(t,e,n):!1}function pg(t,e){const{nodeExtensions:n}=Wc(e),r=n.find(s=>s.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},i=Ze(xe(r,"group",o));return typeof i!="string"?!1:i.split(" ").includes("list")}function bh(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let o=!0;return t.content.forEach(i=>{o!==!1&&(bh(i,{ignoreWhitespace:n,checkChildren:e})||(o=!1))}),o}return!1}function l_(t){return t instanceof Le}function a_(t,e,n){var r;const{selection:o}=e;let i=null;if(b0(o)&&(i=o.$cursor),i){const l=(r=t.storedMarks)!==null&&r!==void 0?r:i.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:s}=o;return s.some(({$from:l,$to:a})=>{let c=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(u,d,h)=>{if(c)return!1;if(u.isInline){const m=!h||h.type.allowsMarkType(n),g=!!n.isInSet(u.marks)||!u.marks.some(y=>y.type.excludes(n));c=m&&g}return!c}),c})}const c_=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:i}=n,{empty:s,ranges:l}=i,a=Ro(t,r.schema);if(o)if(s){const c=k0(r,a);n.addStoredMark(a.create({...c,...e}))}else l.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(h,m)=>{const g=Math.max(m,u),y=Math.min(m+h.nodeSize,d);h.marks.find(O=>O.type===a)?h.marks.forEach(O=>{a===O.type&&n.addMark(g,y,a.create({...O.attrs,...e}))}):n.addMark(g,y,a.create(e))})});return a_(r,n,a)},u_=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),d_=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const i=Gt(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),i.isTextblock?o().command(({commands:l})=>ag(i,{...s,...e})(n)?!0:l.clearNodes()).command(({state:l})=>ag(i,{...s,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},f_=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=ri(t,0,r.content.size),i=Le.create(r,o);e.setSelection(i)}return!0},h_=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:i}=typeof t=="number"?{from:t,to:t}:t,s=ze.atStart(r).from,l=ze.atEnd(r).to,a=ri(o,s,l),c=ri(i,s,l),u=ze.create(r,a,c);e.setSelection(u)}return!0},p_=t=>({state:e,dispatch:n})=>{const r=Gt(t,e.schema);return JM(r)(e,n)};function mg(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e==null?void 0:e.includes(o.type.name));t.tr.ensureMarks(r)}}const m_=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:i,doc:s}=e,{$from:l,$to:a}=i,c=o.extensionManager.attributes,u=Aa(c,l.node().type.name,l.node().attrs);if(i instanceof Le&&i.node.isBlock)return!l.parentOffset||!Xr(s,l.pos)?!1:(r&&(t&&mg(n,o.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const d=a.parentOffset===a.parent.content.size,h=l.depth===0?void 0:t_(l.node(-1).contentMatchAt(l.indexAfter(-1)));let m=d&&h?[{type:h,attrs:u}]:void 0,g=Xr(e.doc,e.mapping.map(l.pos),1,m);if(!m&&!g&&Xr(e.doc,e.mapping.map(l.pos),1,h?[{type:h}]:void 0)&&(g=!0,m=h?[{type:h,attrs:u}]:void 0),r){if(g&&(i instanceof ze&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,m),h&&!d&&!l.parentOffset&&l.parent.type!==h)){const y=e.mapping.map(l.before()),x=e.doc.resolve(y);l.node(-1).canReplaceWith(x.index(),x.index()+1,h)&&e.setNodeMarkup(e.mapping.map(l.before()),h)}t&&mg(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return g},g_=(t,e={})=>({tr:n,state:r,dispatch:o,editor:i})=>{var s;const l=Gt(t,r.schema),{$from:a,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(c))return!1;const d=a.node(-1);if(d.type!==l)return!1;const h=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(o){let O=oe.empty;const A=a.index(-1)?1:a.index(-2)?2:3;for(let U=a.depth-A;U>=a.depth-3;U-=1)O=oe.from(a.node(U).copy(O));const N=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,L={...Aa(h,a.node().type.name,a.node().attrs),...e},D=((s=l.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(L))||void 0;O=O.append(oe.from(l.createAndFill(null,D)||void 0));const R=a.before(a.depth-(A-1));n.replace(R,a.after(-N),new Ce(O,4-A,0));let F=-1;n.doc.nodesBetween(R,n.doc.content.size,(U,T)=>{if(F>-1)return!1;U.isTextblock&&U.content.size===0&&(F=T+1)}),F>-1&&n.setSelection(ze.near(n.doc.resolve(F))),n.scrollIntoView()}return!0}const m=c.pos===a.end()?d.contentMatchAt(0).defaultType:null,g={...Aa(h,d.type.name,d.attrs),...e},y={...Aa(h,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,c.pos);const x=m?[{type:l,attrs:g},{type:m,attrs:y}]:[{type:l,attrs:g}];if(!Xr(n.doc,a.pos,2))return!1;if(o){const{selection:O,storedMarks:A}=r,{splittableMarks:N}=i.extensionManager,L=A||O.$to.parentOffset&&O.$from.marks();if(n.split(a.pos,2,x).scrollIntoView(),!L||!o)return!0;const D=L.filter(R=>N.includes(R.type.name));n.ensureMarks(D)}return!0},Gu=(t,e)=>{const n=yh(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&Bo(t.doc,n.pos)&&t.join(n.pos),!0},Yu=(t,e)=>{const n=yh(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&Bo(t.doc,r)&&t.join(r),!0},y_=(t,e,n,r={})=>({editor:o,tr:i,state:s,dispatch:l,chain:a,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=o.extensionManager,m=Gt(t,s.schema),g=Gt(e,s.schema),{selection:y,storedMarks:x}=s,{$from:O,$to:A}=y,N=O.blockRange(A),L=x||y.$to.parentOffset&&y.$from.marks();if(!N)return!1;const D=yh(R=>pg(R.type.name,d))(y);if(N.depth>=1&&D&&N.depth-D.depth<=1){if(D.node.type===m)return c.liftListItem(g);if(pg(D.node.type.name,d)&&m.validContent(D.node.content)&&l)return a().command(()=>(i.setNodeMarkup(D.pos,m),!0)).command(()=>Gu(i,m)).command(()=>Yu(i,m)).run()}return!n||!L||!l?a().command(()=>u().wrapInList(m,r)?!0:c.clearNodes()).wrapInList(m,r).command(()=>Gu(i,m)).command(()=>Yu(i,m)).run():a().command(()=>{const R=u().wrapInList(m,r),F=L.filter(U=>h.includes(U.type.name));return i.ensureMarks(F),R?!0:c.clearNodes()}).wrapInList(m,r).command(()=>Gu(i,m)).command(()=>Yu(i,m)).run()},b_=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:i=!1}=n,s=Ro(t,r.schema);return uf(r,s,e)?o.unsetMark(s,{extendEmptyMarkRange:i}):o.setMark(s,e)},v_=(t,e,n={})=>({state:r,commands:o})=>{const i=Gt(t,r.schema),s=Gt(e,r.schema),l=vl(r,i,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?o.setNode(s,a):o.setNode(i,{...a,...n})},w_=(t,e={})=>({state:n,commands:r})=>{const o=Gt(t,n.schema);return vl(n,o,e)?r.lift(o):r.wrapIn(o,e)},C_=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let i;if(o.spec.isInputRules&&(i=o.getState(t))){if(e){const s=t.tr,l=i.transform;for(let a=l.steps.length-1;a>=0;a-=1)s.step(l.steps[a].invert(l.docs[a]));if(i.text){const a=s.doc.resolve(i.from).marks();s.replaceWith(i.from,i.to,t.schema.text(i.text,a))}else s.delete(i.from,i.to)}return!0}}return!1},k_=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},S_=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var i;const{extendEmptyMarkRange:s=!1}=e,{selection:l}=n,a=Ro(t,r.schema),{$from:c,empty:u,ranges:d}=l;if(!o)return!0;if(u&&s){let{from:h,to:m}=l;const g=(i=c.marks().find(x=>x.type===a))===null||i===void 0?void 0:i.attrs,y=mh(c,a,g);y&&(h=y.from,m=y.to),n.removeMark(h,m,a)}else d.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,a)});return n.removeStoredMark(a),!0},x_=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const l=Gc(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(i=Gt(t,r.schema)),l==="mark"&&(s=Ro(t,r.schema)),o&&n.selection.ranges.forEach(a=>{const c=a.$from.pos,u=a.$to.pos;let d,h,m,g;n.selection.empty?r.doc.nodesBetween(c,u,(y,x)=>{i&&i===y.type&&(m=Math.max(x,c),g=Math.min(x+y.nodeSize,u),d=x,h=y)}):r.doc.nodesBetween(c,u,(y,x)=>{x<c&&i&&i===y.type&&(m=Math.max(x,c),g=Math.min(x+y.nodeSize,u),d=x,h=y),x>=c&&x<=u&&(i&&i===y.type&&n.setNodeMarkup(x,void 0,{...y.attrs,...e}),s&&y.marks.length&&y.marks.forEach(O=>{if(s===O.type){const A=Math.max(x,c),N=Math.min(x+y.nodeSize,u);n.addMark(A,N,s.create({...O.attrs,...e}))}}))}),h&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...h.attrs,...e}),s&&h.marks.length&&h.marks.forEach(y=>{s===y.type&&n.addMark(m,g,s.create({...y.attrs,...e}))}))}),!0):!1},T_=(t,e={})=>({state:n,dispatch:r})=>{const o=Gt(t,n.schema);return FM(o,e)(n,r)},E_=(t,e={})=>({state:n,dispatch:r})=>{const o=Gt(t,n.schema);return jM(o,e)(n,r)};var O_=Object.freeze({__proto__:null,blur:dA,clearContent:fA,clearNodes:hA,command:pA,createParagraphNear:mA,cut:gA,deleteCurrentNode:yA,deleteNode:bA,deleteRange:vA,deleteSelection:wA,enter:CA,exitCode:kA,extendMarkRange:SA,first:xA,focus:EA,forEach:OA,insertContent:MA,insertContentAt:NA,joinBackward:DA,joinDown:PA,joinForward:IA,joinItemBackward:LA,joinItemForward:BA,joinTextblockBackward:VA,joinTextblockForward:RA,joinUp:$A,keyboardShortcut:FA,lift:jA,liftEmptyBlock:zA,liftListItem:UA,newlineInCode:KA,resetAttributes:WA,scrollIntoView:qA,selectAll:JA,selectNodeBackward:GA,selectNodeForward:YA,selectParentNode:XA,selectTextblockEnd:ZA,selectTextblockStart:QA,setContent:e_,setMark:c_,setMeta:u_,setNode:d_,setNodeSelection:f_,setTextSelection:h_,sinkListItem:p_,splitBlock:m_,splitListItem:g_,toggleList:y_,toggleMark:b_,toggleNode:v_,toggleWrap:w_,undoInputRule:C_,unsetAllMarks:k_,unsetMark:S_,updateAttributes:x_,wrapIn:T_,wrapInList:E_});const M_=_n.create({name:"commands",addCommands(){return{...O_}}}),A_=_n.create({name:"drop",addProseMirrorPlugins(){return[new Rn({key:new Ir("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),__=_n.create({name:"editable",addProseMirrorPlugins(){return[new Rn({key:new Ir("editable"),props:{editable:()=>this.editor.options.editable}})]}}),N_=_n.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Rn({key:new Ir("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),$_=_n.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:l})=>{const{selection:a,doc:c}=l,{empty:u,$anchor:d}=a,{pos:h,parent:m}=d,g=d.parent.isTextblock&&h>0?l.doc.resolve(h-1):d,y=g.parent.type.spec.isolating,x=d.pos-d.parentOffset,O=y&&g.parent.childCount===1?x===d.pos:Ye.atStart(c).from===h;return!u||!m.type.isTextblock||m.textContent.length||!O||O&&d.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},i={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return gh()||C0()?i:o},addProseMirrorPlugins(){return[new Rn({key:new Ir("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(y=>y.getMeta("composition")))return;const r=t.some(y=>y.docChanged)&&!e.doc.eq(n.doc),o=t.some(y=>y.getMeta("preventClearDocument"));if(!r||o)return;const{empty:i,from:s,to:l}=e.selection,a=Ye.atStart(e.doc).from,c=Ye.atEnd(e.doc).to;if(i||!(s===a&&l===c)||!bh(n.doc))return;const h=n.tr,m=Uc({state:n,transaction:h}),{commands:g}=new Kc({editor:this.editor,state:m});if(g.clearNodes(),!!h.steps.length)return h}})]}}),P_=_n.create({name:"paste",addProseMirrorPlugins(){return[new Rn({key:new Ir("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),D_=_n.create({name:"tabindex",addProseMirrorPlugins(){return[new Rn({key:new Ir("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Qo{get name(){return this.node.type.name}constructor(e,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Qo(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Qo(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Qo(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,s=this.pos+r+(i?0:1),l=this.resolvedPos.doc.resolve(s);if(!o&&l.depth<=this.depth)return;const a=new Qo(l,this.editor,o,o?n:null);o&&(a.actualDepth=this.depth+1),e.push(new Qo(l,this.editor,o,o?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(n).length>0){const i=o.node.attrs,s=Object.keys(n);for(let l=0;l<s.length;l+=1){const a=s[l];if(i[a]!==n[a])break}}else r=o;o=o.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const i=Object.keys(n);return this.children.forEach(s=>{r&&o.length>0||(s.node.type.name===e&&i.every(a=>n[a]===s.node.attrs[a])&&o.push(s),!(r&&o.length>0)&&(o=o.concat(s.querySelectorAll(e,n,r))))}),o}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const I_=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function L_(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(o),o}let B_=class extends GM{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:o})=>this.options.onDrop(n,r,o)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=L_(I_,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=p0(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=n.filter(l=>!l.key.startsWith(s))}),n.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var e,n;const o=[...this.options.enableCoreExtensions?[__,uA.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),M_,N_,$_,D_,A_,P_].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new zi(o,this)}createCommandManager(){this.commandManager=new Kc({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=cf(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(l=>l.name!=="collaboration"),this.createExtensionManager()}}),n=cf(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=v0(n,this.options.autofocus);this.view=new vM(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:ji.create({doc:n,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),i=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return i_(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,o=typeof e=="string"?n:e;return s_(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return hh(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return r_(this.state.doc,{blockSeparator:n,textSerializers:{...g0(this.schema),...r}})}get isEmpty(){return bh(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Qo(n,this)}get $doc(){return this.$pos(0)}};function us(t){return new qc({find:t.find,handler:({state:e,range:n,match:r})=>{const o=Ze(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:i}=e,s=r[r.length-1],l=r[0];if(s){const a=l.search(/\S/),c=n.from+l.indexOf(s),u=c+s.length;if(S0(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(y=>y===t.type&&y!==m.mark.type)).filter(m=>m.to>c).length)return null;u<n.to&&i.delete(u,n.to),c>n.from&&i.delete(n.from+a,c);const h=n.from+a+s.length;i.addMark(n.from+a,h,t.type.create(o||{})),i.removeStoredMark(t.type)}}})}function V_(t){return new qc({find:t.find,handler:({state:e,range:n,match:r})=>{const o=Ze(t.getAttributes,void 0,r)||{},{tr:i}=e,s=n.from;let l=n.to;const a=t.type.create(o);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=s+c;u>l?u=l:l=u+r[1].length;const d=r[0][r[0].length-1];i.insertText(d,s+r[0].length-1),i.replaceWith(u,l,a)}else if(r[0]){const c=t.type.isInline?s:s-1;i.insert(c,t.type.create(o)).delete(i.mapping.map(s),i.mapping.map(l))}i.scrollIntoView()}})}function df(t){return new qc({find:t.find,handler:({state:e,range:n,match:r})=>{const o=e.doc.resolve(n.from),i=Ze(t.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,i)}})}function wl(t){return new qc({find:t.find,handler:({state:e,range:n,match:r,chain:o})=>{const i=Ze(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),a=s.doc.resolve(n.from).blockRange(),c=a&&Xf(a,t.type,i);if(!c)return null;if(s.wrap(a,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:h}=e,{splittableMarks:m}=t.editor.extensionManager,g=h||d.$to.parentOffset&&d.$from.marks();if(g){const y=g.filter(x=>m.includes(x.type.name));s.ensureMarks(y)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(d,i).run()}const u=s.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&Bo(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&s.join(n.from-1)}})}class Vn{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ze(xe(this,"addOptions",{name:this.name}))),this.storage=Ze(xe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Vn(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Jc(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Vn(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ze(xe(n,"addOptions",{name:n.name})),n.storage=Ze(xe(n,"addStorage",{name:n.name,options:n.options})),n}}function ds(t){return new oA({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:o})=>{const i=Ze(t.getAttributes,void 0,r,o);if(i===!1||i===null)return null;const{tr:s}=e,l=r[r.length-1],a=r[0];let c=n.to;if(l){const u=a.search(/\S/),d=n.from+a.indexOf(l),h=d+l.length;if(S0(n.from,n.to,e.doc).filter(g=>g.mark.type.excluded.find(x=>x===t.type&&x!==g.mark.type)).filter(g=>g.to>d).length)return null;h<n.to&&s.delete(h,n.to),d>n.from&&s.delete(n.from+u,d),c=n.from+u+l.length,s.addMark(n.from+u,c,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function gg(t){return CC((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class x0 extends B_{constructor(e={}){return super(e),this.contentComponent=null,this.appContext=null,this.reactiveState=gg(this.view.state),this.reactiveExtensionStorage=gg(this.extensionStorage),this.on("beforeTransaction",({nextState:n})=>{this.reactiveState.value=n,this.reactiveExtensionStorage.value=this.extensionStorage}),qg(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,n){const r=super.registerPlugin(e,n);return this.reactiveState&&(this.reactiveState.value=r),r}unregisterPlugin(e){const n=super.unregisterPlugin(e);return this.reactiveState&&n&&(this.reactiveState.value=n),n}}const T0=sy({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=kf(),n=Sl();return mk(()=>{const r=t.editor;r&&r.options.element&&e.value&&Ec(()=>{if(!e.value||!r.options.element.firstChild)return;const o=wn(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,n&&(r.appContext={...n.appContext,provides:n.provides}),r.setOptions({element:o}),r.createNodeViews()})}),Tf(()=>{const r=t.editor;r&&(r.contentComponent=null,r.appContext=null)}),{rootEl:e}},render(){return Nf("div",{ref:t=>{this.rootEl=t}})}}),R_=/^\s*>\s$/,H_=Vn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",An(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[wl({find:R_,type:this.type})]}}),F_=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,j_=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,z_=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,U_=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,K_=Do.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",An(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[us({find:F_,type:this.type}),us({find:z_,type:this.type})]},addPasteRules(){return[ds({find:j_,type:this.type}),ds({find:U_,type:this.type})]}}),W_="listItem",yg="textStyle",bg=/^\s*([-+*])\s$/,q_=Vn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",An(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(W_,this.editor.getAttributes(yg)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=wl({find:bg,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=wl({find:bg,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(yg),editor:this.editor})),[t]}}),J_=/(^|[^`])`([^`]+)`(?!`)/,G_=/(^|[^`])`([^`]+)`(?!`)/g,Y_=Do.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",An(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[us({find:J_,type:this.type})]},addPasteRules(){return[ds({find:G_,type:this.type})]}}),X_=/^```([a-z]+)?[\s\n]$/,Z_=/^~~~([a-z]+)?[\s\n]$/,Q_=Vn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,i=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",An(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:o}=n;if(!o||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!i||!s?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:o,empty:i}=n;if(!i||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const l=o.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:c})=>(c.setSelection(Ye.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[df({find:X_,type:this.type,getAttributes:t=>({language:t[1]})}),df({find:Z_,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Rn({key:new Ir("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,i=o==null?void 0:o.mode;if(!n||!i)return!1;const{tr:s,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:i},a)),s.selection.$from.parent.type!==this.type&&s.setSelection(ze.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),eN=Vn.create({name:"doc",topNode:!0,content:"block+"});function tN(t={}){return new Rn({view(e){return new nN(e,t)}})}class nN{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let i=s=>{this[o](s)};return e.dom.addEventListener(o,i),{name:o,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let l=e.nodeBefore,a=e.nodeAfter;if(l||a){let c=this.editorView.nodeDOM(this.cursorPos-(l?l.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=l?u.bottom:u.top;l&&a&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let l=this.editorView.coordsAtPos(this.cursorPos);r={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}let o=this.editorView.dom.offsetParent;this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let i,s;if(!o||o==document.body&&getComputedStyle(o).position=="static")i=-pageXOffset,s=-pageYOffset;else{let l=o.getBoundingClientRect();i=l.left-o.scrollLeft,s=l.top-o.scrollTop}this.element.style.left=r.left-i+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,i=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!i){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=pb(this.editorView.state.doc,s,this.editorView.dragging.slice);l!=null&&(s=l)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const rN=_n.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[tN(this.options)]}});class $t extends Ye{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return $t.valid(r)?new $t(r):Ye.near(r)}content(){return Ce.empty}eq(e){return e instanceof $t&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new $t(e.resolve(n.pos))}getBookmark(){return new vh(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!oN(e)||!iN(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&$t.valid(e))return e;let o=e.pos,i=null;for(let s=e.depth;;s--){let l=e.node(s);if(n>0?e.indexAfter(s)<l.childCount:e.index(s)>0){i=l.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;o+=n;let a=e.doc.resolve(o);if($t.valid(a))return a}for(;;){let s=n>0?i.firstChild:i.lastChild;if(!s){if(i.isAtom&&!i.isText&&!Le.isSelectable(i)){e=e.doc.resolve(o+i.nodeSize*n),r=!1;continue e}break}i=s,o+=n;let l=e.doc.resolve(o);if($t.valid(l))return l}return null}}}$t.prototype.visible=!1;$t.findFrom=$t.findGapCursorFrom;Ye.jsonID("gapcursor",$t);class vh{constructor(e){this.pos=e}map(e){return new vh(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return $t.valid(n)?new $t(n):Ye.near(n)}}function oN(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function iN(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function sN(){return new Rn({props:{decorations:uN,createSelectionBetween(t,e,n){return e.pos==n.pos&&$t.valid(n)?new $t(n):null},handleClick:aN,handleKeyDown:lN,handleDOMEvents:{beforeinput:cN}}})}const lN=e0({ArrowLeft:ia("horiz",-1),ArrowRight:ia("horiz",1),ArrowUp:ia("vert",-1),ArrowDown:ia("vert",1)});function ia(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,i){let s=r.selection,l=e>0?s.$to:s.$from,a=s.empty;if(s instanceof ze){if(!i.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let c=$t.findGapCursorFrom(l,e,a);return c?(o&&o(r.tr.setSelection(new $t(c))),!0):!1}}function aN(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!$t.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&Le.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new $t(r))),!0)}function cN(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof $t))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=oe.empty;for(let s=r.length-1;s>=0;s--)o=oe.from(r[s].createAndFill(null,o));let i=t.state.tr.replace(n.pos,n.pos,new Ce(o,0,0));return i.setSelection(ze.near(i.doc.resolve(n.pos+1))),t.dispatch(i),!1}function uN(t){if(!(t.selection instanceof $t))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",jt.create(t.doc,[ir.widget(t.selection.head,e,{key:"gapcursor"})])}const dN=_n.create({name:"gapCursor",addProseMirrorPlugins(){return[sN()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Ze(xe(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),fN=Vn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",An(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:o,storedMarks:i}=n;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:l}=r.extensionManager,a=i||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&a&&s){const d=a.filter(h=>l.includes(h.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),hN=Vn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,An(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>df({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var mc=200,qt=function(){};qt.prototype.append=function(e){return e.length?(e=qt.from(e),!this.length&&e||e.length<mc&&this.leafAppend(e)||this.length<mc&&e.leafPrepend(this)||this.appendInner(e)):this};qt.prototype.prepend=function(e){return e.length?qt.from(e).append(this):this};qt.prototype.appendInner=function(e){return new pN(this,e)};qt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?qt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};qt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};qt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};qt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(i,s){return o.push(e(i,s))},n,r),o};qt.from=function(e){return e instanceof qt?e:e&&e.length?new E0(e):qt.empty};var E0=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,i){return o==0&&i==this.length?this:new e(this.values.slice(o,i))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,i,s,l){for(var a=i;a<s;a++)if(o(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(o,i,s,l){for(var a=i-1;a>=s;a--)if(o(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=mc)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=mc)return new e(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(qt);qt.empty=new E0([]);var pN=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,i,s){var l=this.left.length;if(o<l&&this.left.forEachInner(r,o,Math.min(i,l),s)===!1||i>l&&this.right.forEachInner(r,Math.max(o-l,0),Math.min(this.length,i)-l,s+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,i,s){var l=this.left.length;if(o>l&&this.right.forEachInvertedInner(r,o-l,Math.max(i,l)-l,s+l)===!1||i<l&&this.left.forEachInvertedInner(r,Math.min(o,l),i,s)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var i=this.left.length;return o<=i?this.left.slice(r,o):r>=i?this.right.slice(r-i,o-i):this.left.slice(r,i).append(this.right.slice(0,o-i))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(qt);const mN=500;class hr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,i;n&&(o=this.remapping(r,this.items.length),i=o.maps.length);let s=e.tr,l,a,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){o||(o=this.remapping(r,h+1),i=o.maps.length),i--,u.push(d);return}if(o){u.push(new xr(d.map));let m=d.step.map(o.slice(i)),g;m&&s.maybeStep(m).doc&&(g=s.mapping.maps[s.mapping.maps.length-1],c.push(new xr(g,void 0,void 0,c.length+u.length))),i--,g&&o.appendMap(g,i)}else s.maybeStep(d.step);if(d.selection)return l=o?d.selection.map(o.slice(i)):d.selection,a=new hr(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:s,selection:l}}addTransform(e,n,r,o){let i=[],s=this.eventCount,l=this.items,a=!o&&l.length?l.get(l.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),h=new xr(e.mapping.maps[u],d,n),m;(m=a&&a.merge(h))&&(h=m,u?i.pop():l=l.slice(0,l.length-1)),i.push(h),n&&(s++,n=void 0),o||(a=h)}let c=s-r.depth;return c>yN&&(l=gN(l,c),s-=c),new hr(l.append(i),s)}remapping(e,n){let r=new pl;return this.items.forEach((o,i)=>{let s=o.mirrorOffset!=null&&i-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new hr(this.items.append(e.map(n=>new xr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),i=e.mapping,s=e.steps.length,l=this.eventCount;this.items.forEach(h=>{h.selection&&l--},o);let a=n;this.items.forEach(h=>{let m=i.getMirror(--a);if(m==null)return;s=Math.min(s,m);let g=i.maps[m];if(h.step){let y=e.steps[m].invert(e.docs[m]),x=h.selection&&h.selection.map(i.slice(a+1,m));x&&l++,r.push(new xr(g,y,x))}else r.push(new xr(g))},o);let c=[];for(let h=n;h<s;h++)c.push(new xr(i.maps[h]));let u=this.items.slice(0,o).append(c).append(r),d=new hr(u,l);return d.emptyItemCount()>mN&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],i=0;return this.items.forEach((s,l)=>{if(l>=e)o.push(s),s.selection&&i++;else if(s.step){let a=s.step.map(n.slice(r)),c=a&&a.getMap();if(r--,c&&n.appendMap(c,r),a){let u=s.selection&&s.selection.map(n.slice(r));u&&i++;let d=new xr(c.invert(),a,u),h,m=o.length-1;(h=o.length&&o[m].merge(d))?o[m]=h:o.push(d)}}else s.map&&r--},this.items.length,0),new hr(qt.from(o.reverse()),i)}}hr.empty=new hr(qt.empty,0);function gN(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}class xr{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new xr(n.getMap().invert(),n,this.selection)}}}class mo{constructor(e,n,r,o,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=i}}const yN=20;function bN(t,e,n,r){let o=n.getMeta(di),i;if(o)return o.historyState;n.getMeta(CN)&&(t=new mo(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(di))return s.getMeta(di).redo?new mo(t.done.addTransform(n,void 0,r,_a(e)),t.undone,vg(n.mapping.maps),t.prevTime,t.prevComposition):new mo(t.done,t.undone.addTransform(n,void 0,r,_a(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!s&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!vN(n,t.prevRanges)),c=s?Xu(t.prevRanges,n.mapping):vg(n.mapping.maps);return new mo(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,_a(e)),hr.empty,c,n.time,l??t.prevComposition)}else return(i=n.getMeta("rebased"))?new mo(t.done.rebased(n,i),t.undone.rebased(n,i),Xu(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new mo(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Xu(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function vN(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&o>=e[i]&&(n=!0)}),n}function vg(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,o,i,s)=>e.push(i,s));return e}function Xu(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),i=e.map(t[r+1],-1);o<=i&&n.push(o,i)}return n}function wN(t,e,n){let r=_a(e),o=di.get(e).spec.config,i=(n?t.undone:t.done).popEvent(e,r);if(!i)return null;let s=i.selection.resolve(i.transform.doc),l=(n?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),o,r),a=new mo(n?l:i.remaining,n?i.remaining:l,null,0,-1);return i.transform.setSelection(s).setMeta(di,{redo:n,historyState:a})}let Zu=!1,wg=null;function _a(t){let e=t.plugins;if(wg!=e){Zu=!1,wg=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Zu=!0;break}}return Zu}const di=new Ir("history"),CN=new Ir("closeHistory");function kN(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Rn({key:di,state:{init(){return new mo(hr.empty,hr.empty,null,0,-1)},apply(e,n,r){return bN(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?M0:r=="historyRedo"?A0:null;return o?(n.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function O0(t,e){return(n,r)=>{let o=di.getState(n);if(!o||(t?o.undone:o.done).eventCount==0)return!1;if(r){let i=wN(o,n,t);i&&r(e?i.scrollIntoView():i)}return!0}}const M0=O0(!1,!0),A0=O0(!0,!0),SN=_n.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>M0(t,e),redo:()=>({state:t,dispatch:e})=>A0(t,e)}},addProseMirrorPlugins(){return[kN(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),xN=Vn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",An(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:o}=n,i=t();return r.parentOffset===0?i.insertContentAt({from:Math.max(r.pos-1,0),to:o.pos},{type:this.name}):l_(n)?i.insertContentAt(o.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:l})=>{var a;if(l){const{$to:c}=s.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(ze.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(Le.create(s.doc,c.pos)):s.setSelection(ze.create(s.doc,c.pos));else{const d=(a=c.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();d&&(s.insert(u,d),s.setSelection(ze.create(s.doc,u+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[V_({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),TN=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,EN=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,ON=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,MN=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,AN=Do.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",An(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[us({find:TN,type:this.type}),us({find:ON,type:this.type})]},addPasteRules(){return[ds({find:EN,type:this.type}),ds({find:MN,type:this.type})]}}),_N=Vn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",An(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),NN="listItem",Cg="textStyle",kg=/^(\d+)\.\s$/,$N=Vn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",An(this.options.HTMLAttributes,n),0]:["ol",An(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(NN,this.editor.getAttributes(Cg)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=wl({find:kg,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=wl({find:kg,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Cg)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),PN=Vn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",An(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),DN=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,IN=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,LN=Do.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",An(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[us({find:DN,type:this.type})]},addPasteRules(){return[ds({find:IN,type:this.type})]}}),BN=Vn.create({name:"text",group:"inline"}),_0=_n.create({name:"starterKit",addExtensions(){var t,e,n,r,o,i,s,l,a,c,u,d,h,m,g,y,x,O;const A=[];return this.options.bold!==!1&&A.push(K_.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&A.push(H_.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&A.push(q_.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&A.push(Y_.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&A.push(Q_.configure((o=this.options)===null||o===void 0?void 0:o.codeBlock)),this.options.document!==!1&&A.push(eN.configure((i=this.options)===null||i===void 0?void 0:i.document)),this.options.dropcursor!==!1&&A.push(rN.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&A.push(dN.configure((l=this.options)===null||l===void 0?void 0:l.gapcursor)),this.options.hardBreak!==!1&&A.push(fN.configure((a=this.options)===null||a===void 0?void 0:a.hardBreak)),this.options.heading!==!1&&A.push(hN.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&A.push(SN.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&A.push(xN.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&A.push(AN.configure((h=this.options)===null||h===void 0?void 0:h.italic)),this.options.listItem!==!1&&A.push(_N.configure((m=this.options)===null||m===void 0?void 0:m.listItem)),this.options.orderedList!==!1&&A.push($N.configure((g=this.options)===null||g===void 0?void 0:g.orderedList)),this.options.paragraph!==!1&&A.push(PN.configure((y=this.options)===null||y===void 0?void 0:y.paragraph)),this.options.strike!==!1&&A.push(LN.configure((x=this.options)===null||x===void 0?void 0:x.strike)),this.options.text!==!1&&A.push(BN.configure((O=this.options)===null||O===void 0?void 0:O.text)),A}}),VN={components:{EditorContent:T0},props:{content:{type:String,required:!0}},emits:["update:content"],data(){return{editor:null}},methods:{emitContent(){this.$emit("update:content",this.editor.getHTML())}},mounted(){this.editor=new x0({content:this.content,extensions:[_0]}),this.editor.on("blur",this.emitContent)},beforeUnmount(){this.editor&&this.editor.destroy()}};function RN(t,e,n,r,o,i){const s=Je("editor-content");return z(),St(s,{class:"editor",editor:o.editor},null,8,["editor"])}const HN=ct(VN,[["render",RN],["__scopeId","data-v-3da2c5ae"]]),FN={components:{FileName:F1,TipTap:HN},methods:{async handleChange(){await this.$root.UpdateRecord("Files",this.myfile.uuid,this.myfile)},updateContent(t){this.myfile.content=t,console.log(t),this.handleChange()}},name:"FileEditor",data(){return{myfile:null}},async mounted(){this.myfile=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Files.get(this.$root.tools.writer.selectednode)))}},jN={style:{"text-align":"center"}};function zN(t,e,n,r,o,i){const s=Je("FileName"),l=Je("TipTap");return z(),Z(Ge,null,[S("div",jN,[(z(),St(s,{myuuid:t.$root.tools.writer.selectednode,key:t.$root.tools.writer.selectednode,formmode:!0},null,8,["myuuid"]))]),o.myfile?(z(),St(l,{content:o.myfile.content,"onUpdate:content":i.updateContent,key:o.myfile.lastupdated},null,8,["content","onUpdate:content"])):$e("",!0)],64)}const UN=ct(FN,[["render",zN]]),wh={mounted(t){const e=()=>{t.style.height="auto",t.style.height=t.scrollHeight+"px"};t.style.height="auto",t.style.height=t.scrollHeight+"px",t.addEventListener("input",e),window.addEventListener("resize",e),t._onResize=e},updated(t){t.style.height="auto",t.style.height=t.scrollHeight+"px"},unmounted(t){window.removeEventListener("resize",t._onResize)}},N0=""+new URL("../resources/bookcover.png",import.meta.url).href,KN={props:{myimage:{type:String,default:""}},data(){return{base64Image:this.myimage}},methods:{onFileChange(t){const e=t.target.files[0];if(e){const n=new FileReader;n.onload=r=>{const o=new Image;o.src=r.target.result,o.onload=()=>{const i=document.createElement("canvas"),s=200,l=s/o.width;i.width=s,i.height=o.height*l,i.getContext("2d").drawImage(o,0,0,i.width,i.height),this.base64Image=i.toDataURL("image/jpeg"),this.$emit("image-changed",this.base64Image)}},n.readAsDataURL(e)}},triggerFileUpload(){this.$refs.fileInput.click()}}},WN=["src"];function qN(t,e,n,r,o,i){return z(),Z("div",null,[S("input",{type:"file",onChange:e[0]||(e[0]=(...s)=>i.onFileChange&&i.onFileChange(...s)),ref:"fileInput",style:{display:"none"}},null,544),o.base64Image?(z(),Z("img",{key:0,src:o.base64Image,alt:"Image Preview",class:"image-preview",onClick:e[1]||(e[1]=(...s)=>i.triggerFileUpload&&i.triggerFileUpload(...s))},null,8,WN)):$e("",!0),o.base64Image?$e("",!0):(z(),Z("img",{key:1,src:N0,alt:"Image Preview",class:"image-preview",onClick:e[2]||(e[2]=(...s)=>i.triggerFileUpload&&i.triggerFileUpload(...s))}))])}const JN=ct(KN,[["render",qN],["__scopeId","data-v-e0f8ef46"]]),GN={directives:{autosize:wh},components:{ImageUpload:JN},methods:{handleChange(){this.$root.UpdateRecord("Writer",this.$root.tools.writer.selected.uuid,this.this.$root.tools.writer.selected)},imageChanged(t){this.this.$root.tools.writer.selected.cover=t,this.handleChange()}},name:"BookEditor",data(){return{}},async mounted(){}},YN={key:0,class:"infocontainer"},XN={class:"bookcover"};function ZN(t,e,n,r,o,i){const s=Je("ImageUpload"),l=Of("autosize");return this.$root.tools.writer.selected?(z(),Z("div",YN,[S("div",XN,[tt(s,{myimage:this.$root.tools.writer.selected.cover,onImageChanged:i.imageChanged},null,8,["myimage","onImageChanged"])]),e[5]||(e[5]=S("label",null,"Book Title",-1)),Tt(S("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>this.$root.tools.writer.selected.title=a),onBlur:e[1]||(e[1]=(...a)=>i.handleChange&&i.handleChange(...a))},null,544),[[Mt,this.$root.tools.writer.selected.title]]),e[6]||(e[6]=S("label",null,"Author",-1)),Tt(S("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>this.$root.tools.writer.selected.author=a),onBlur:e[3]||(e[3]=(...a)=>i.handleChange&&i.handleChange(...a))},null,544),[[Mt,this.$root.tools.writer.selected.author]]),e[7]||(e[7]=S("label",null,"Description",-1)),Tt(S("textarea",{"onUpdate:modelValue":e[4]||(e[4]=a=>this.$root.tools.writer.selected.description=a)},null,512),[[l],[Mt,this.$root.tools.writer.selected.description]])])):$e("",!0)}const QN=ct(GN,[["render",ZN],["__scopeId","data-v-e1a2651a"]]),e$={name:"WriterHome",components:{DocStructure:KT,FileEditor:UN,BookEditor:QN},data(){return{lhshidden:!1,rhshidden:!1}},computed:{displaylist(){return this.$root.syncdb.Writer.sort((t,e)=>new Date(e.lastupdated)-new Date(t.lastupdated))}},methods:{addNewBook(){let t=JSON.parse(JSON.stringify(this.$root.writerTemplate));t.uuid=this.$root.uuid(),this.$root.AddRecord("Writer",t)}}},t$={key:0},n$={class:"writer-home"},r$={class:"gridcard-grid"},o$=["onClick"],i$={class:"book-3d"},s$={class:"book-3d__inner"},l$=["src","alt"],a$=["alt"],c$={key:1};function u$(t,e,n,r,o,i){const s=Je("FileEditor"),l=Je("BookEditor"),a=Je("DocStructure");return z(),Z(Ge,null,[t.$root.tools.writer.selected?$e("",!0):(z(),Z("div",t$,[S("div",n$,[S("button",{onClick:e[0]||(e[0]=(...c)=>i.addNewBook&&i.addNewBook(...c))},"Add a New Book"),S("div",r$,[(z(!0),Z(Ge,null,on(i.displaylist,(c,u)=>(z(),Z("div",{class:"gridcard",key:u,onClick:d=>t.$root.tools.writer.selected=c},[S("div",i$,[S("div",s$,[c.cover?(z(),Z("img",{key:0,src:c.cover,class:"book-3d__cover",alt:c.title},null,8,l$)):(z(),Z("img",{key:1,class:"book-3d__cover",src:N0,alt:c.title},null,8,a$))])]),S("h2",null,xn(c.title),1),S("p",null,"by "+xn(c.author),1),S("p",null,xn(c.description),1),S("p",null,xn(c.lastupdated),1)],8,o$))),128))])])])),t.$root.tools.writer.selected?(z(),Z("div",c$,[S("div",{class:mr(["main",{lhsmain:o.lhshidden,rhsmain:o.rhshidden}])},[t.$root.tools.writer.selectednode?(z(),St(s,{key:t.$root.tools.writer.selectednode})):$e("",!0),t.$root.tools.writer.selectednode?$e("",!0):(z(),St(l,{key:1}))],2),S("div",{class:mr(["lhs",{lhshidden:o.lhshidden}])},[S("button",{onClick:e[1]||(e[1]=c=>o.lhshidden=!o.lhshidden),class:"btn lhsbtn"},e[3]||(e[3]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"menu"),S("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"})],-1)])),tt(a)],2),S("div",{class:mr(["rhs",{rhshidden:o.rhshidden}])},[S("button",{onClick:e[2]||(e[2]=c=>o.rhshidden=!o.rhshidden),class:"btn rhsbtn"},e[4]||(e[4]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"menu"),S("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"})],-1)]))],2)])):$e("",!0)],64)}const d$=ct(e$,[["render",u$],["__scopeId","data-v-6762adfd"]]),f$={components:{EditorContent:T0},props:{modelValue:{type:String,required:!0},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","blur"],data(){return{editor:null}},methods:{emitContent(){this.$emit("update:modelValue",this.editor.getHTML())},emitBlur(){this.$emit("blur")}},mounted(){this.editor=new x0({content:this.modelValue,extensions:[_0],editable:!this.disabled}),this.editor.on("update",this.emitContent),this.editor.on("blur",this.emitBlur)},watch:{disabled(t){this.editor&&this.editor.setOptions({editable:!t})}},beforeUnmount(){this.editor&&this.editor.destroy()}};function h$(t,e,n,r,o,i){const s=Je("editor-content");return z(),St(s,{class:"editor",editor:o.editor},null,8,["editor"])}const $0=ct(f$,[["render",h$]]),p$={name:"MindmapEditor",components:{MiniEditor:$0},data(){return{mymindmap:null}},async mounted(){this.mymindmap=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Mindmap.get(this.$root.tools.mindmap.selected.uuid)))},methods:{async update(){console.log("updating"),await this.$root.UpdateRecord("Mindmap",this.mymindmap.uuid,this.mymindmap)},addTime(t){let e={};e.title="Title Here",e.text="",e.date="Date Label",t==null?this.mymindmap.content.items.push(e):this.mymindmap.content.items.splice(t,0,e)}}},m$={key:0,class:"subbar"},g$={key:1,class:"mindmap"},y$={class:"content"},b$=["onUpdate:modelValue"],v$={class:"time"},w$=["onUpdate:modelValue"],C$={style:{"text-align":"center"}};function k$(t,e,n,r,o,i){const s=Je("MiniEditor");return z(),Z(Ge,null,[o.mymindmap?(z(),Z("div",m$,[Tt(S("input",{onBlur:e[0]||(e[0]=l=>i.update()),type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>this.mymindmap.title=l)},null,544),[[Mt,this.mymindmap.title]]),S("button",{class:"btn",onClick:e[2]||(e[2]=l=>t.$root.tools.mindmap.selected=null)},e[7]||(e[7]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"close"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})],-1)]))])):$e("",!0),o.mymindmap?(z(),Z("div",g$,[S("ul",null,[(z(!0),Z(Ge,null,on(o.mymindmap.content.items,(l,a)=>(z(),Z("li",null,[S("div",y$,[S("h3",null,[Tt(S("input",{type:"text","onUpdate:modelValue":c=>l.title=c,placeholder:"Title Here",onBlur:e[3]||(e[3]=c=>i.update())},null,40,b$),[[Mt,l.title]])]),S("p",null,[(z(),St(s,{modelValue:l.text,"onUpdate:modelValue":c=>l.text=c,onBlur:e[4]||(e[4]=c=>i.update()),key:o.mymindmap.lastupdated},null,8,["modelValue","onUpdate:modelValue"]))])]),S("div",v$,[S("h4",null,[Tt(S("input",{type:"text","onUpdate:modelValue":c=>l.date=c,placeholder:"label",onBlur:e[5]||(e[5]=c=>i.update())},null,40,w$),[[Mt,l.date]])])])]))),256)),e[9]||(e[9]=S("div",{style:{clear:"both"}},null,-1)),S("div",C$,[S("button",{onClick:e[6]||(e[6]=l=>i.addTime()),class:"tlbutton"},e[8]||(e[8]=[S("svg",{icon:"",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"plus-circle-outline"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})],-1)]))])])])):$e("",!0)],64)}const S$=ct(p$,[["render",k$]]),x$={name:"MindmapHome",components:{MindmapEditor:S$}},T$={key:0,class:"mindmaps"},E$=["onClick"],O$={key:1};function M$(t,e,n,r,o,i){const s=Je("MindmapEditor");return z(),Z(Ge,null,[t.$root.tools.mindmap.selected?$e("",!0):(z(),Z("div",T$,[(z(!0),Z(Ge,null,on(this.$root.syncdb.Mindmap,(l,a)=>(z(),Z("button",{onClick:c=>t.$root.tools.mindmap.selected=l},[e[1]||(e[1]=S("svg",{class:"icon",viewBox:"0 0 24 24"},[S("title",null,"view-grid"),S("path",{d:"M3,11H11V3H3M3,21H11V13H3M13,21H21V13H13M13,3V11H21V3"})],-1)),S("div",null,xn(l.title),1)],8,E$))),256)),S("button",{onClick:e[0]||(e[0]=l=>t.$root.makeMindmap()),class:"add"},e[2]||(e[2]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"plus-circle-outline"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})],-1),S("div",null,"Add",-1)]))])),t.$root.tools.mindmap.selected?(z(),Z("div",O$,[tt(s)])):$e("",!0)],64)}const A$=ct(x$,[["render",M$],["__scopeId","data-v-f35151a6"]]),_$={name:"TimelineEditor",components:{VueDraggable:Lc},directives:{autosize:wh},data(){return{mytimeline:null,dragging:!1}},async mounted(){this.mytimeline=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Timeline.get(this.$root.tools.timeline.selected.uuid)))},methods:{async update(){console.log("updating"),await this.$root.UpdateRecord("Timeline",this.mytimeline.uuid,this.mytimeline)},addTime(t){let e={};e.title="",e.text="",e.date="",this.mytimeline.content.items.push(e),this.update()},deleteEvent(t){this.$swal({title:"Delete?",text:"this is permmanend",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirm",cancelButtonText:"Cancel"}).then(e=>{e.isConfirmed&&(this.mytimeline.content.items.splice(t,1),this.update(),this.$swal("Success","All done","success"))})}}},N$={key:0,class:"subbar"},$$={key:1,class:"timeline"},P$={class:"content"},D$=["onClick"],I$={style:{width:"18px",height:"18px"},viewBox:"0 0 24 24"},L$=["onUpdate:modelValue"],B$=["onUpdate:modelValue"],V$={class:"time handle"},R$=["onUpdate:modelValue"],H$={style:{"text-align":"center"}};function F$(t,e,n,r,o,i){const s=Je("VueDraggable"),l=Of("autosize");return z(),Z(Ge,null,[o.mytimeline?(z(),Z("div",N$,[Tt(S("input",{onBlur:e[0]||(e[0]=a=>i.update()),type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>this.mytimeline.title=a)},null,544),[[Mt,this.mytimeline.title]]),S("button",{class:"btn",onClick:e[2]||(e[2]=a=>t.$root.tools.timeline.selected=null)},e[11]||(e[11]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"close"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})],-1)]))])):$e("",!0),o.mytimeline?(z(),Z("div",$$,[S("ul",null,[tt(s,{modelValue:o.mytimeline.content.items,"onUpdate:modelValue":e[6]||(e[6]=a=>o.mytimeline.content.items=a),animation:150,handle:".handle",onChange:e[7]||(e[7]=a=>i.update()),onStart:e[8]||(e[8]=a=>o.dragging=!0),onEnd:e[9]||(e[9]=a=>o.dragging=!1)},{default:hi(()=>[(z(!0),Z(Ge,null,on(o.mytimeline.content.items,(a,c)=>(z(),Z("li",null,[S("div",P$,[S("button",{class:"deleteIconButton",onClick:u=>i.deleteEvent(c),tabindex:"0"},[(z(),Z("svg",I$,e[12]||(e[12]=[S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"},null,-1)])))],8,D$),S("h3",null,[Tt(S("input",{type:"text","onUpdate:modelValue":u=>a.title=u,placeholder:"Title Here",onBlur:e[3]||(e[3]=u=>i.update())},null,40,L$),[[Mt,a.title]])]),S("p",null,[Tt(S("textarea",{"onUpdate:modelValue":u=>a.text=u,onBlur:e[4]||(e[4]=u=>i.update()),style:{"min-height":"150px"}},null,40,B$),[[l],[Mt,a.text]])])]),S("div",V$,[S("h4",null,[Tt(S("input",{type:"text","onUpdate:modelValue":u=>a.date=u,placeholder:"label",onBlur:e[5]||(e[5]=u=>i.update())},null,40,R$),[[Mt,a.date]])])])]))),256))]),_:1},8,["modelValue"]),e[14]||(e[14]=S("div",{style:{clear:"both"}},null,-1)),S("div",H$,[S("button",{onClick:e[10]||(e[10]=a=>i.addTime()),class:"tlbutton"},e[13]||(e[13]=[S("svg",{icon:"",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"plus-circle-outline"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})],-1)]))])])])):$e("",!0)],64)}const j$=ct(_$,[["render",F$],["__scopeId","data-v-fb9a8838"]]),z$={name:"TimelineHome",components:{TimelineEditor:j$}},U$={key:0,class:"timelines"},K$=["onClick"],W$={key:1};function q$(t,e,n,r,o,i){const s=Je("TimelineEditor");return z(),Z(Ge,null,[t.$root.tools.timeline.selected?$e("",!0):(z(),Z("div",U$,[(z(!0),Z(Ge,null,on(this.$root.syncdb.Timeline,(l,a)=>(z(),Z("button",{onClick:c=>t.$root.tools.timeline.selected=l},[e[1]||(e[1]=S("svg",{class:"icon",viewBox:"0 0 24 24"},[S("title",null,"timeline-outline"),S("path",{d:"M4 2V8H2V2H4M2 22V16H4V22H2M5 12C5 13.11 4.11 14 3 14C1.9 14 1 13.11 1 12C1 10.9 1.9 10 3 10C4.11 10 5 10.9 5 12M24 6V18C24 19.11 23.11 20 22 20H10C8.9 20 8 19.11 8 18V14L6 12L8 10V6C8 4.89 8.9 4 10 4H22C23.11 4 24 4.89 24 6M10 6V18H22V6H10Z"})],-1)),S("div",null,xn(l.title),1)],8,K$))),256)),S("button",{onClick:e[0]||(e[0]=l=>t.$root.makeTimeline()),class:"add"},e[2]||(e[2]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"plus-circle-outline"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})],-1),S("div",null,"Add",-1)]))])),t.$root.tools.timeline.selected?(z(),Z("div",W$,[tt(s)])):$e("",!0)],64)}const J$=ct(z$,[["render",q$],["__scopeId","data-v-71745106"]]),G$={name:"SnowflakeEditor",components:{MiniEditor:$0},data(){return{mysnowflake:null}},async mounted(){this.mysnowflake=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Snowflake.get(this.$root.tools.snowflake.selected.uuid))),this.startFlake()},methods:{async update(){console.log("updating"),await this.$root.UpdateRecord("Snowflake",this.mysnowflake.uuid,this.mysnowflake)},exportToManuscript(){this.$swal({title:"Export?",text:"message",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"confirm",cancelButtonText:"cancel"}).then(t=>{if(t.isConfirmed){let e={};e.uuid=this.$root.uuid(),e.title=this.$root.tools.snowflake.selected.title,e.descripton=this.$root.tools.snowflake.selected.description,e.files=[],this.$root.tools.snowflake.selected.content.forEach(n=>{console.log("SNOW >>>",n);let r=this.$root.uuid(),o={};o.writerid=e.uuid,o.title=n.title,o.content=n.content,o.notes=[],o.uuid=r,o.wordcount=this.$root.wordCounter(n.content),this.$root.AddRecord("Files",o);let i={};i.uuid=r,i.open=!1,i.type="file",i.children=[],e.files.push(i)}),this.$root.AddRecord("Writer",e),this.$swal("Success","this.$root.setlang.confirmmodal.exportsuccessfeedback","success")}})},openflake(t){if(!t.children.length){let e={};e.level=t.level+1,e.content="",e.open=!1,e.children=[],e.title="",t.children.push({...e}),t.children.push({...e}),t.children.push({...e})}t.open=!t.open,this.update()},deleteFlake(t){this.$swal({title:"Delete",text:"this.$root.setlang.confirmmodal.noundo",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"confirm",cancelButtonText:"cancel"}).then(e=>{e.isConfirmed&&(this.$root.tools.snowflake.selected.content.splice(t,1),this.startFlake(),this.update(),this.$swal(this.$root.setlang.confirmmodal.success,this.$root.setlang.confirmmodal.successfeedback,"success"))})},replace(t,e){this.$swal({title:"Replace Card?",text:"this.$root.setlang.confirmmodal.snowconfirmtext",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"confirm",cancelButtonText:"cancel"}).then(n=>{if(n.isConfirmed){let r={...t.children[0]},o={...t.children[1]},i={...t.children[2]};this.$root.tools.snowflake.selected.content.splice(e+1,0,i),this.$root.tools.snowflake.selected.content.splice(e+1,0,o),this.$root.tools.snowflake.selected.content.splice(e+1,0,r),this.$root.tools.snowflake.selected.content.splice(e,1),this.update(),this.$swal("success","this.$root.setlang.confirmmodal.snowconfirmmsg","success")}})},startFlake(){if(!this.$root.tools.snowflake.selected.content.length){console.log("GODDAMIN snowflake");let t={};t.title="",t.level=0,t.content="",t.open=!1,t.children=[],this.$root.tools.snowflake.selected.content.push(t)}}}},Y$={key:0,class:"subbar"},X$={key:1,class:"scroller"},Z$={class:"card"},Q$=["onClick"],eP={style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},tP=["onUpdate:modelValue"],nP=["onClick"],rP={key:0,class:"column"},oP={class:"card"},iP=["onUpdate:modelValue"],sP={class:"card"},lP=["onUpdate:modelValue"],aP={class:"card"},cP=["onUpdate:modelValue"],uP=["onClick"],dP={style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"};function fP(t,e,n,r,o,i){const s=Je("MiniEditor");return z(),Z(Ge,null,[o.mysnowflake?(z(),Z("div",Y$,[Tt(S("input",{onBlur:e[0]||(e[0]=l=>i.update()),type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>this.mysnowflake.title=l)},null,544),[[Mt,this.mysnowflake.title]]),S("button",{class:"btn",onClick:e[2]||(e[2]=l=>t.$root.tools.snowflake.selected=null)},e[11]||(e[11]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"close"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})],-1)]))])):$e("",!0),o.mysnowflake?(z(),Z("div",X$,[(z(!0),Z(Ge,null,on(this.$root.tools.snowflake.selected.content,(l,a)=>(z(),Z("div",{key:a,class:"row"},[S("div",{class:"column",style:rr(l.open?"":"display:block")},[S("div",Z$,[S("button",{class:"open-flake-button",onClick:c=>i.openflake(l)},[(z(),Z("svg",eP,e[12]||(e[12]=[S("path",{d:"M8,2H16A2,2 0 0,1 18,4V20A2,2 0 0,1 16,22H8A2,2 0 0,1 6,20V4A2,2 0 0,1 8,2M8,10V14H16V10H8M8,16V20H16V16H8M8,4V8H16V4H8Z"},null,-1)])))],8,Q$),Tt(S("input",{class:"title","onUpdate:modelValue":c=>l.title=c,placeholder:"title",onChange:e[3]||(e[3]=c=>i.update())},null,40,tP),[[Mt,l.title]]),tt(s,{snowFlake:l,modelValue:l.content,"onUpdate:modelValue":c=>l.content=c,onUpdated:e[4]||(e[4]=c=>i.update())},null,8,["snowFlake","modelValue","onUpdate:modelValue"]),S("button",{class:"delete-flake-button",onClick:c=>i.deleteFlake(a)},e[13]||(e[13]=[S("svg",{viewBox:"0 0 24 24"},[S("path",{d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"})],-1)]),8,nP)])],4),tt(zk,{name:"h-slide-fade"},{default:hi(()=>[l.open?(z(),Z("div",rP,[S("div",oP,[Tt(S("input",{class:"title","onUpdate:modelValue":c=>l.children[0].title=c,placeholder:"title",onChange:e[5]||(e[5]=c=>i.update())},null,40,iP),[[Mt,l.children[0].title]]),tt(s,{snowFlake:l.children[0],modelValue:l.children[0].content,"onUpdate:modelValue":c=>l.children[0].content=c,onUpdated:e[6]||(e[6]=c=>i.update())},null,8,["snowFlake","modelValue","onUpdate:modelValue"])]),S("div",sP,[Tt(S("input",{class:"title","onUpdate:modelValue":c=>l.children[1].title=c,placeholder:"title",onChange:e[7]||(e[7]=c=>i.update())},null,40,lP),[[Mt,l.children[1].title]]),tt(s,{snowFlake:l.children[1],modelValue:l.children[1].content,"onUpdate:modelValue":c=>l.children[1].content=c,onUpdated:e[8]||(e[8]=c=>i.update())},null,8,["snowFlake","modelValue","onUpdate:modelValue"])]),S("div",aP,[Tt(S("input",{class:"title","onUpdate:modelValue":c=>l.children[2].title=c,placeholder:"title",onChange:e[9]||(e[9]=c=>i.update())},null,40,cP),[[Mt,l.children[2].title]]),tt(s,{snowFlake:l.children[2],modelValue:l.children[2].content,"onUpdate:modelValue":c=>l.children[2].content=c,onUpdated:e[10]||(e[10]=c=>i.update())},null,8,["snowFlake","modelValue","onUpdate:modelValue"])]),S("button",{class:"replaceButton",onClick:c=>i.replace(l,a)},[(z(),Z("svg",dP,e[14]||(e[14]=[S("path",{d:"M14.58,16.59L19.17,12L14.58,7.41L16,6L22,12L16,18L14.58,16.59M8.58,16.59L13.17,12L8.58,7.41L10,6L16,12L10,18L8.58,16.59M2.58,16.59L7.17,12L2.58,7.41L4,6L10,12L4,18L2.58,16.59Z"},null,-1)])))],8,uP)])):$e("",!0)]),_:2},1024)]))),128))])):$e("",!0)],64)}const hP=ct(G$,[["render",fP],["__scopeId","data-v-808d8323"]]),pP={name:"SnowflakeHome",components:{SnowflakeEditor:hP}},mP={key:0,class:"snowflakes"},gP=["onClick"],yP={key:1};function bP(t,e,n,r,o,i){const s=Je("SnowflakeEditor");return z(),Z(Ge,null,[t.$root.tools.snowflake.selected?$e("",!0):(z(),Z("div",mP,[(z(!0),Z(Ge,null,on(this.$root.syncdb.Snowflake,(l,a)=>(z(),Z("button",{onClick:c=>t.$root.tools.snowflake.selected=l},[e[1]||(e[1]=S("svg",{class:"icon",viewBox:"0 0 24 24"},[S("title",null,"snowflake"),S("path",{d:"M20.79,13.95L18.46,14.57L16.46,13.44V10.56L18.46,9.43L20.79,10.05L21.31,8.12L19.54,7.65L20,5.88L18.07,5.36L17.45,7.69L15.45,8.82L13,7.38V5.12L14.71,3.41L13.29,2L12,3.29L10.71,2L9.29,3.41L11,5.12V7.38L8.5,8.82L6.5,7.69L5.92,5.36L4,5.88L4.47,7.65L2.7,8.12L3.22,10.05L5.55,9.43L7.55,10.56V13.45L5.55,14.58L3.22,13.96L2.7,15.89L4.47,16.36L4,18.12L5.93,18.64L6.55,16.31L8.55,15.18L11,16.62V18.88L9.29,20.59L10.71,22L12,20.71L13.29,22L14.7,20.59L13,18.88V16.62L15.5,15.17L17.5,16.3L18.12,18.63L20,18.12L19.53,16.35L21.3,15.88L20.79,13.95M9.5,10.56L12,9.11L14.5,10.56V13.44L12,14.89L9.5,13.44V10.56Z"})],-1)),S("div",null,xn(l.title),1)],8,gP))),256)),S("button",{onClick:e[0]||(e[0]=l=>t.$root.makeSnowflake()),class:"add"},e[2]||(e[2]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"plus-circle-outline"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})],-1),S("div",null,"Add",-1)]))])),t.$root.tools.snowflake.selected?(z(),Z("div",yP,[tt(s)])):$e("",!0)],64)}const vP=ct(pP,[["render",bP],["__scopeId","data-v-3f3ef46f"]]),wP={name:"CardViewer",components:{},props:{cardRef:{type:String}},data(){return{currentcard:null}},async mounted(){this.currentcard=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Cards.get(this.cardRef)))},methods:{editcard(t){this.$root.tools.cards.selected=this.currentcard,this.$root.modal=!0}}},CP={key:0,class:"card card-placeholder"},kP={class:"card-title"},SP={class:"card-description"};function xP(t,e,n,r,o,i){return z(),Z("div",{class:"",onClick:e[0]||(e[0]=s=>i.editcard(o.currentcard.uuid))},[o.currentcard?$e("",!0):(z(),Z("div",CP,' No card ref provided so we need to have the "create" or "link" option ')),o.currentcard?(z(),Z("div",{key:1,class:mr(["card card-button",o.currentcard.color])},[S("h1",kP,xn(o.currentcard.title),1),S("div",SP,xn(o.currentcard.description),1)],2)):$e("",!0)])}const P0=ct(wP,[["render",xP],["__scopeId","data-v-fef44b76"]]),TP={name:"GridPlannerCell",emits:["update:modelValue","MakeChange"],components:{VueDraggable:Lc,CardViewer:P0},props:{modelValue:{type:Array,required:!0}},computed:{dragOptions(){return{animation:200,group:"Cards",disabled:!1,ghostClass:"ghost"}}},data(){return{drag:!1,colWidth:320}},methods:{linkCard(t,e){var n=this.modelValue.find(r=>r.uuid===e);n.uuid=t,this.updateDatabase()},deleteNote(t){this.$swal({title:"DELETE",text:"this.$root.setlang.confirmmodal.noundo",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"confirm",cancelButtonText:"cancel"}).then(e=>{e.isConfirmed&&(this.modelValue.splice(t,1),this.$emit("update:modelValue",this.modelValue),this.updateDatabase(),this.$swal("SUccess","this.$root.setlang.confirmmodal.successfeedback","success"))})},addCard(){let t={};t.uuid=this.$root.uuid(),this.modelValue.push(t),this.$emit("update:modelValue",this.modelValue),this.updateDatabase()},updateDatabase(){this.$emit("MakeChange")}}},EP={class:"clearInterfaceIconButton cardHandle"},OP={style:{width:"18px",height:"18px"},viewBox:"0 0 24 24"},MP=["onClick"],AP={style:{width:"18px",height:"18px"},viewBox:"0 0 24 24"},_P={style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"};function NP(t,e,n,r,o,i){const s=Je("CardViewer"),l=Je("VueDraggable");return z(),Z(Ge,null,[tt(l,{modelValue:n.modelValue,"onUpdate:modelValue":e[0]||(e[0]=a=>t.$emit("update:modelValue",a)),animation:150,group:"gridplan"},{default:hi(()=>[(z(!0),Z(Ge,null,on(n.modelValue,(a,c)=>(z(),Z("div",{class:"list-group-card-item",key:c},[tt(s,{cardRef:a.uuid},null,8,["cardRef"]),S("div",EP,[(z(),Z("svg",OP,e[2]||(e[2]=[S("path",{d:"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"},null,-1)])))]),S("button",{class:"deleteIconButton",onClick:u=>i.deleteNote(c),tabindex:"0"},[(z(),Z("svg",AP,e[3]||(e[3]=[S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"},null,-1)])))],8,MP)]))),128))]),_:1},8,["modelValue"]),S("button",{class:"add-card",onClick:e[1]||(e[1]=(...a)=>i.addCard&&i.addCard(...a))},[(z(),Z("svg",_P,e[4]||(e[4]=[S("path",{d:"M13.09 20H4C2.9 20 2 19.11 2 18V6C2 4.89 2.9 4 4 4H20C21.11 4 22 4.89 22 6V13.81C21.12 13.3 20.09 13 19 13C15.69 13 13 15.69 13 19C13 19.34 13.04 19.67 13.09 20M18 15V18H15V20H18V23H20V20H23V18H20V15H18Z"},null,-1)])))])],64)}const $P=ct(TP,[["render",NP],["__scopeId","data-v-c716aa0a"]]),PP={name:"GridPlanner",components:{VueDraggable:Lc,GridPlannerCell:$P},directives:{autosize:wh},computed:{tablewidth(){return this.colwidth*(this.mygridplanner.content.headers.length+1)}},data(){return{mygridplanner:null,colwidth:300}},async mounted(){this.mygridplanner=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Gridplanner.get(this.$root.tools.gridplanner.selected.uuid)))},methods:{async update(){console.log("updating"),await this.$root.UpdateRecord("Gridplanner",this.mygridplanner.uuid,this.mygridplanner)},addCol(){let t={};t.uuid=this.$root.uuid(),t.title="",this.mygridplanner.content.headers.push(t),this.mygridplanner.content.rows.forEach(e=>{e.cells[t.uuid]=[]}),this.update()},addRow(){let t={};t.title="",t.cells={},this.mygridplanner.content.headers.forEach(e=>{t.cells[e.uuid]=[]}),this.mygridplanner.content.rows.push(t),this.update()},deleteCol(t){this.$swal({title:"Delete?",text:"this is permmanend",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirm",cancelButtonText:"Cancel"}).then(e=>{if(e.isConfirmed){let n=this.mygridplanner.content.headers[t].uuid;this.mygridplanner.content.rows.forEach(r=>{delete r.cells[n]}),this.mygridplanner.content.headers.splice(t,1),this.update(),this.$swal("Success","All done","success")}})},deleteRow(t){this.$swal({title:"Delete?",text:"pernamnen",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"confirm",cancelButtonText:"cancel"}).then(e=>{e.isConfirmed&&(this.mygridplanner.content.rows.splice(t,1),this.update(),this.$swal("Success","that worked","success"))})}}},DP={key:0,class:"subbar"},IP={class:"icon",style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},LP={class:"icon",style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},BP={key:1,class:"scroller"},VP={class:"grid-row"},RP=["onUpdate:modelValue"],HP=["onUpdate:modelValue"];function FP(t,e,n,r,o,i){const s=Je("VueDraggable"),l=Je("GridPlannerCell"),a=Of("autosize");return z(),Z(Ge,null,[o.mygridplanner?(z(),Z("div",DP,[Tt(S("input",{onBlur:e[0]||(e[0]=c=>i.update()),type:"text","onUpdate:modelValue":e[1]||(e[1]=c=>this.mygridplanner.title=c)},null,544),[[Mt,this.mygridplanner.title]]),S("button",{onClick:e[2]||(e[2]=(...c)=>i.addRow&&i.addRow(...c)),class:"btn"},[(z(),Z("svg",IP,e[12]||(e[12]=[S("path",{d:"M22,10A2,2 0 0,1 20,12H4A2,2 0 0,1 2,10V3H4V5H8V3H10V5H14V3H16V5H20V3H22V10M4,10H8V7H4V10M10,10H14V7H10V10M20,10V7H16V10H20M11,14H13V17H16V19H13V22H11V19H8V17H11V14Z"},null,-1)])))]),S("button",{onClick:e[3]||(e[3]=(...c)=>i.addCol&&i.addCol(...c)),class:"btn"},[(z(),Z("svg",LP,e[13]||(e[13]=[S("path",{d:"M11,2A2,2 0 0,1 13,4V20A2,2 0 0,1 11,22H2V2H11M4,10V14H11V10H4M4,16V20H11V16H4M4,4V8H11V4H4M15,11H18V8H20V11H23V13H20V16H18V13H15V11Z"},null,-1)])))]),S("button",{class:"btn",onClick:e[4]||(e[4]=c=>t.$root.tools.gridplanner.selected=null)},e[14]||(e[14]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"close"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})],-1)]))])):$e("",!0),o.mygridplanner?(z(),Z("div",BP,[S("div",{class:"grid-container",style:rr(`width:${i.tablewidth}px`)},[S("div",VP,[S("div",{class:"grid-header col1",style:rr(`${o.colwidth}px`)},null,4),tt(s,{modelValue:o.mygridplanner.content.headers,"onUpdate:modelValue":e[6]||(e[6]=c=>o.mygridplanner.content.headers=c),animation:150,handle:".handle",onChange:e[7]||(e[7]=c=>i.update())},{default:hi(()=>[(z(!0),Z(Ge,null,on(o.mygridplanner.content.headers,(c,u)=>(z(),Z("div",{key:"header-"+u,class:"grid-header",style:rr(`${o.colwidth}px`)},[e[15]||(e[15]=S("div",{class:"handle"},[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"menu"),S("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"})])],-1)),Tt(S("textarea",{onBlur:e[5]||(e[5]=d=>i.update()),class:"handleinput",type:"text","onUpdate:modelValue":d=>c.title=d,placeholder:"Header"},null,40,RP),[[a],[Mt,c.title]])],4))),128))]),_:1},8,["modelValue"])]),S("div",null,[tt(s,{modelValue:o.mygridplanner.content.rows,"onUpdate:modelValue":e[10]||(e[10]=c=>o.mygridplanner.content.rows=c),animation:150,handle:".handle",onChange:e[11]||(e[11]=c=>i.update())},{default:hi(()=>[(z(!0),Z(Ge,null,on(o.mygridplanner.content.rows,(c,u)=>(z(),Z("div",{key:"row-"+u,class:"grid-row"},[S("div",{class:"grid-header col1",style:rr(`${o.colwidth}px`)},[e[16]||(e[16]=S("div",{class:"handle"},[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"menu"),S("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"})])],-1)),Tt(S("textarea",{onBlur:e[8]||(e[8]=d=>i.update()),class:"handleinput",type:"text","onUpdate:modelValue":d=>c.title=d,placeholder:"Title"},null,40,HP),[[a],[Mt,c.title]])],4),(z(!0),Z(Ge,null,on(o.mygridplanner.content.headers,(d,h)=>(z(),Z("div",{key:"cell-"+u+"-"+h,class:"grid-cell",style:rr(`${o.colwidth}px`)},[tt(l,{modelValue:c.cells[d.uuid],"onUpdate:modelValue":m=>c.cells[d.uuid]=m,onMakeChange:e[9]||(e[9]=m=>i.update())},null,8,["modelValue","onUpdate:modelValue"])],4))),128))]))),128))]),_:1},8,["modelValue"])])],4)])):$e("",!0)],64)}const jP=ct(PP,[["render",FP],["__scopeId","data-v-845ad8e9"]]),zP={name:"GridplannerHome",components:{GridplannerEditor:jP}},UP={key:0,class:"gridplanners"},KP=["onClick"],WP={key:1};function qP(t,e,n,r,o,i){const s=Je("GridplannerEditor");return z(),Z(Ge,null,[t.$root.tools.gridplanner.selected?$e("",!0):(z(),Z("div",UP,[(z(!0),Z(Ge,null,on(this.$root.syncdb.Gridplanner,(l,a)=>(z(),Z("button",{onClick:c=>t.$root.tools.gridplanner.selected=l},[e[1]||(e[1]=S("svg",{class:"icon",viewBox:"0 0 24 24"},[S("title",null,"view-grid"),S("path",{d:"M3,11H11V3H3M3,21H11V13H3M13,21H21V13H13M13,3V11H21V3"})],-1)),S("div",null,xn(l.title),1)],8,KP))),256)),S("button",{onClick:e[0]||(e[0]=l=>t.$root.makeGridplanner()),class:"add"},e[2]||(e[2]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"plus-circle-outline"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})],-1),S("div",null,"Add",-1)]))])),t.$root.tools.gridplanner.selected?(z(),Z("div",WP,[tt(s)])):$e("",!0)],64)}const JP=ct(zP,[["render",qP],["__scopeId","data-v-e5e60fa1"]]),GP={name:"CardsdatabaseHome",components:{CardViewer:P0},computed:{filteredCardList(){return this.$root.syncdb.Cards}},methods:{}},YP={class:"masonry-grid"};function XP(t,e,n,r,o,i){const s=Je("CardViewer");return z(),Z(Ge,null,[S("div",null,[S("button",{class:"btn",onClick:e[0]||(e[0]=l=>t.$root.makeNewCard())},e[1]||(e[1]=[S("svg",{class:"icon",viewBox:"0 0 24 24"},[S("path",{d:"M19,20H4C2.89,20 2,19.1 2,18V6C2,4.89 2.89,4 4,4H10L12,6H19A2,2 0 0,1 21,8H21L4,8V18L6.14,10H23.21L20.93,18.5C20.7,19.37 19.92,20 19,20Z"})],-1),S("span",null,"NEW",-1)]))]),S("div",YP,[(z(!0),Z(Ge,null,on(i.filteredCardList,(l,a)=>(z(),St(s,{key:l.uuid,cardRef:l.uuid,class:"masonry-item"},null,8,["cardRef"]))),128))])],64)}const ZP=ct(GP,[["render",XP],["__scopeId","data-v-e0e201cc"]]),QP={name:"App Home",components:{ProjectHome:I2,WriterHome:d$,MindmapHome:A$,TimelineHome:J$,SnowflakeHome:vP,GridplannerHome:JP,CardsdatabaseHome:ZP},data(){return{}}};function eD(t,e,n,r,o,i){const s=Je("ProjectHome"),l=Je("WriterHome"),a=Je("MindmapHome"),c=Je("TimelineHome"),u=Je("SnowflakeHome"),d=Je("GridplannerHome"),h=Je("CardsdatabaseHome");return z(),Z(Ge,null,[t.$root.currentTool?$e("",!0):(z(),St(s,{key:0})),t.$root.currentTool==="writer"?(z(),St(l,{key:1})):$e("",!0),t.$root.currentTool==="mindmap"?(z(),St(a,{key:2})):$e("",!0),t.$root.currentTool==="timeline"?(z(),St(c,{key:3})):$e("",!0),t.$root.currentTool==="snowflake"?(z(),St(u,{key:4})):$e("",!0),t.$root.currentTool==="gridplanner"?(z(),St(d,{key:5})):$e("",!0),t.$root.currentTool==="cardsdatabase"?(z(),St(h,{key:6})):$e("",!0)],64)}const tD=ct(QP,[["render",eD]]),nD={mixins:[Mx,Ax,_x,Nx],components:{TopToolbar:Hx,ModalManager:Gx,InstallPopup:r2,FooterBar:Qx,ApplicationSections:tD,Welcome:u2},data(){return{modal:null,currentTool:null,urlSelected:null,FileManager:{fileHandle:null,jsonData:null},tools:{current:null,writer:{selected:null,selectednode:null,mybook:null},cards:{searchterms:null,selected:null},gridplanner:{selected:null},timeline:{selected:null},snowflake:{selected:null},mindmap:{selected:null},planningboard:{selected:null}}}},created(){"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js").then(t=>{t.onupdatefound=()=>{const e=t.installing;e&&(e.onstatechange=()=>{e.state==="installed"&&navigator.serviceWorker.controller&&confirm("A new version of the app is available. Would you like to update?")&&window.location.reload()})}})},methods:{}},rD={id:"app"};function oD(t,e,n,r,o,i){const s=Je("TopToolbar"),l=Je("Welcome"),a=Je("ApplicationSections"),c=Je("FooterBar"),u=Je("ModalManager"),d=Je("InstallPopup");return z(),Z(Ge,null,[S("div",rD,[t.$root.mainwindow?(z(),St(s,{key:0})):$e("",!0),S("div",{class:mr(["container",{mainwindow:t.$root.mainwindow}])},[t.$root.dbRef?(z(),St(a,{key:1})):(z(),St(l,{key:0}))],2),t.$root.mainwindow?(z(),St(c,{key:1})):$e("",!0)]),t.$root.modal?(z(),St(u,{key:0})):$e("",!0),tt(d)],64)}const iD=ct(nD,[["render",oD]]);var io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sD(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var D0={exports:{}};/*!
* sweetalert2 v11.4.4
* Released under the MIT License.
*/(function(t,e){(function(n,r){t.exports=r()})(io,function(){const n="SweetAlert2:",r=f=>{const p=[];for(let v=0;v<f.length;v++)p.indexOf(f[v])===-1&&p.push(f[v]);return p},o=f=>f.charAt(0).toUpperCase()+f.slice(1),i=f=>Array.prototype.slice.call(f),s=f=>{console.warn("".concat(n," ").concat(typeof f=="object"?f.join(" "):f))},l=f=>{console.error("".concat(n," ").concat(f))},a=[],c=f=>{a.includes(f)||(a.push(f),s(f))},u=(f,p)=>{c('"'.concat(f,'" is deprecated and will be removed in the next major release. Please use "').concat(p,'" instead.'))},d=f=>typeof f=="function"?f():f,h=f=>f&&typeof f.toPromise=="function",m=f=>h(f)?f.toPromise():Promise.resolve(f),g=f=>f&&Promise.resolve(f)===f,y={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},x=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],O={},A=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],N=f=>Object.prototype.hasOwnProperty.call(y,f),L=f=>x.indexOf(f)!==-1,D=f=>O[f],R=f=>{N(f)||s('Unknown parameter "'.concat(f,'"'))},F=f=>{A.includes(f)&&s('The parameter "'.concat(f,'" is incompatible with toasts'))},U=f=>{D(f)&&u(f,D(f))},T=f=>{!f.backdrop&&f.allowOutsideClick&&s('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const p in f)R(p),f.toast&&F(p),U(p)},C="swal2-",B=f=>{const p={};for(const v in f)p[f[v]]=C+f[v];return p},w=B(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),te=B(["success","warning","info","question","error"]),J=()=>document.body.querySelector(".".concat(w.container)),we=f=>{const p=J();return p?p.querySelector(f):null},ge=f=>we(".".concat(f)),ne=()=>ge(w.popup),Me=()=>ge(w.icon),nt=()=>ge(w.title),We=()=>ge(w["html-container"]),it=()=>ge(w.image),pt=()=>ge(w["progress-steps"]),Ht=()=>ge(w["validation-message"]),Ae=()=>we(".".concat(w.actions," .").concat(w.confirm)),rt=()=>we(".".concat(w.actions," .").concat(w.deny)),_t=()=>ge(w["input-label"]),j=()=>we(".".concat(w.loader)),K=()=>we(".".concat(w.actions," .").concat(w.cancel)),G=()=>ge(w.actions),q=()=>ge(w.footer),ue=()=>ge(w["timer-progress-bar"]),M=()=>ge(w.close),$=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,V=()=>{const f=i(ne().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((v,_)=>{const ae=parseInt(v.getAttribute("tabindex")),Ne=parseInt(_.getAttribute("tabindex"));return ae>Ne?1:ae<Ne?-1:0}),p=i(ne().querySelectorAll($)).filter(v=>v.getAttribute("tabindex")!=="-1");return r(f.concat(p)).filter(v=>I(v))},H=()=>ee(document.body,w.shown)&&!ee(document.body,w["toast-shown"])&&!ee(document.body,w["no-backdrop"]),W=()=>ne()&&ee(ne(),w.toast),Y=()=>ne().hasAttribute("data-loading"),se={previousBodyPadding:null},X=(f,p)=>{if(f.textContent="",p){const v=new DOMParser().parseFromString(p,"text/html");i(v.querySelector("head").childNodes).forEach(_=>{f.appendChild(_)}),i(v.querySelector("body").childNodes).forEach(_=>{f.appendChild(_)})}},ee=(f,p)=>{if(!p)return!1;const v=p.split(/\s+/);for(let _=0;_<v.length;_++)if(!f.classList.contains(v[_]))return!1;return!0},Q=(f,p)=>{i(f.classList).forEach(v=>{!Object.values(w).includes(v)&&!Object.values(te).includes(v)&&!Object.values(p.showClass).includes(v)&&f.classList.remove(v)})},ye=(f,p,v)=>{if(Q(f,p),p.customClass&&p.customClass[v]){if(typeof p.customClass[v]!="string"&&!p.customClass[v].forEach)return s("Invalid type of customClass.".concat(v,'! Expected string or iterable object, got "').concat(typeof p.customClass[v],'"'));re(f,p.customClass[v])}},ce=(f,p)=>{if(!p)return null;switch(p){case"select":case"textarea":case"file":return f.querySelector(".".concat(w.popup," > .").concat(w[p]));case"checkbox":return f.querySelector(".".concat(w.popup," > .").concat(w.checkbox," input"));case"radio":return f.querySelector(".".concat(w.popup," > .").concat(w.radio," input:checked"))||f.querySelector(".".concat(w.popup," > .").concat(w.radio," input:first-child"));case"range":return f.querySelector(".".concat(w.popup," > .").concat(w.range," input"));default:return f.querySelector(".".concat(w.popup," > .").concat(w.input))}},he=f=>{if(f.focus(),f.type!=="file"){const p=f.value;f.value="",f.value=p}},pe=(f,p,v)=>{!f||!p||(typeof p=="string"&&(p=p.split(/\s+/).filter(Boolean)),p.forEach(_=>{Array.isArray(f)?f.forEach(ae=>{v?ae.classList.add(_):ae.classList.remove(_)}):v?f.classList.add(_):f.classList.remove(_)}))},re=(f,p)=>{pe(f,p,!0)},Se=(f,p)=>{pe(f,p,!1)},Oe=(f,p)=>{const v=i(f.childNodes);for(let _=0;_<v.length;_++)if(ee(v[_],p))return v[_]},me=(f,p,v)=>{v==="".concat(parseInt(v))&&(v=parseInt(v)),v||parseInt(v)===0?f.style[p]=typeof v=="number"?"".concat(v,"px"):v:f.style.removeProperty(p)},k=function(f){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";f.style.display=p},b=f=>{f.style.display="none"},E=(f,p,v,_)=>{const ae=f.querySelector(p);ae&&(ae.style[v]=_)},P=(f,p,v)=>{p?k(f,v):b(f)},I=f=>!!(f&&(f.offsetWidth||f.offsetHeight||f.getClientRects().length)),ie=()=>!I(Ae())&&!I(rt())&&!I(K()),le=f=>f.scrollHeight>f.clientHeight,Te=f=>{const p=window.getComputedStyle(f),v=parseFloat(p.getPropertyValue("animation-duration")||"0"),_=parseFloat(p.getPropertyValue("transition-duration")||"0");return v>0||_>0},ve=function(f){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const v=ue();I(v)&&(p&&(v.style.transition="none",v.style.width="100%"),setTimeout(()=>{v.style.transition="width ".concat(f/1e3,"s linear"),v.style.width="0%"},10))},Be=()=>{const f=ue(),p=parseInt(window.getComputedStyle(f).width);f.style.removeProperty("transition"),f.style.width="100%";const v=parseInt(window.getComputedStyle(f).width),_=p/v*100;f.style.removeProperty("transition"),f.style.width="".concat(_,"%")},Xe=()=>typeof window>"u"||typeof document>"u",Qe=100,be={},st=()=>{be.previousActiveElement&&be.previousActiveElement.focus?(be.previousActiveElement.focus(),be.previousActiveElement=null):document.body&&document.body.focus()},ot=f=>new Promise(p=>{if(!f)return p();const v=window.scrollX,_=window.scrollY;be.restoreFocusTimeout=setTimeout(()=>{st(),p()},Qe),window.scrollTo(v,_)}),mt=`
 <div aria-labelledby="`.concat(w.title,'" aria-describedby="').concat(w["html-container"],'" class="').concat(w.popup,`" tabindex="-1">
   <button type="button" class="`).concat(w.close,`"></button>
   <ul class="`).concat(w["progress-steps"],`"></ul>
   <div class="`).concat(w.icon,`"></div>
   <img class="`).concat(w.image,`" />
   <h2 class="`).concat(w.title,'" id="').concat(w.title,`"></h2>
   <div class="`).concat(w["html-container"],'" id="').concat(w["html-container"],`"></div>
   <input class="`).concat(w.input,`" />
   <input type="file" class="`).concat(w.file,`" />
   <div class="`).concat(w.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(w.select,`"></select>
   <div class="`).concat(w.radio,`"></div>
   <label for="`).concat(w.checkbox,'" class="').concat(w.checkbox,`">
     <input type="checkbox" />
     <span class="`).concat(w.label,`"></span>
   </label>
   <textarea class="`).concat(w.textarea,`"></textarea>
   <div class="`).concat(w["validation-message"],'" id="').concat(w["validation-message"],`"></div>
   <div class="`).concat(w.actions,`">
     <div class="`).concat(w.loader,`"></div>
     <button type="button" class="`).concat(w.confirm,`"></button>
     <button type="button" class="`).concat(w.deny,`"></button>
     <button type="button" class="`).concat(w.cancel,`"></button>
   </div>
   <div class="`).concat(w.footer,`"></div>
   <div class="`).concat(w["timer-progress-bar-container"],`">
     <div class="`).concat(w["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),gt=()=>{const f=J();return f?(f.remove(),Se([document.documentElement,document.body],[w["no-backdrop"],w["toast-shown"],w["has-column"]]),!0):!1},Re=()=>{be.currentInstance.resetValidationMessage()},Ft=()=>{const f=ne(),p=Oe(f,w.input),v=Oe(f,w.file),_=f.querySelector(".".concat(w.range," input")),ae=f.querySelector(".".concat(w.range," output")),Ne=Oe(f,w.select),Pt=f.querySelector(".".concat(w.checkbox," input")),jn=Oe(f,w.textarea);p.oninput=Re,v.onchange=Re,Ne.onchange=Re,Pt.onchange=Re,jn.oninput=Re,_.oninput=()=>{Re(),ae.value=_.value},_.onchange=()=>{Re(),_.nextSibling.value=_.value}},Ee=f=>typeof f=="string"?document.querySelector(f):f,fe=f=>{const p=ne();p.setAttribute("role",f.toast?"alert":"dialog"),p.setAttribute("aria-live",f.toast?"polite":"assertive"),f.toast||p.setAttribute("aria-modal","true")},Pe=f=>{window.getComputedStyle(f).direction==="rtl"&&re(J(),w.rtl)},_e=f=>{const p=gt();if(Xe()){l("SweetAlert2 requires document to initialize");return}const v=document.createElement("div");v.className=w.container,p&&re(v,w["no-transition"]),X(v,mt);const _=Ee(f.target);_.appendChild(v),fe(f),Pe(_),Ft()},Ve=(f,p)=>{f instanceof HTMLElement?p.appendChild(f):typeof f=="object"?et(f,p):f&&X(p,f)},et=(f,p)=>{f.jquery?mn(p,f):X(p,f.toString())},mn=(f,p)=>{if(f.textContent="",0 in p)for(let v=0;v in p;v++)f.appendChild(p[v].cloneNode(!0));else f.appendChild(p.cloneNode(!0))},yt=(()=>{if(Xe())return!1;const f=document.createElement("div"),p={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const v in p)if(Object.prototype.hasOwnProperty.call(p,v)&&typeof f.style[v]<"u")return p[v];return!1})(),sn=()=>{const f=document.createElement("div");f.className=w["scrollbar-measure"],document.body.appendChild(f);const p=f.getBoundingClientRect().width-f.clientWidth;return document.body.removeChild(f),p},Nn=(f,p)=>{const v=G(),_=j();!p.showConfirmButton&&!p.showDenyButton&&!p.showCancelButton?b(v):k(v),ye(v,p,"actions"),dt(v,_,p),X(_,p.loaderHtml),ye(_,p,"loader")};function dt(f,p,v){const _=Ae(),ae=rt(),Ne=K();ht(_,"confirm",v),ht(ae,"deny",v),ht(Ne,"cancel",v),$n(_,ae,Ne,v),v.reverseButtons&&(v.toast?(f.insertBefore(Ne,_),f.insertBefore(ae,_)):(f.insertBefore(Ne,p),f.insertBefore(ae,p),f.insertBefore(_,p)))}function $n(f,p,v,_){if(!_.buttonsStyling)return Se([f,p,v],w.styled);re([f,p,v],w.styled),_.confirmButtonColor&&(f.style.backgroundColor=_.confirmButtonColor,re(f,w["default-outline"])),_.denyButtonColor&&(p.style.backgroundColor=_.denyButtonColor,re(p,w["default-outline"])),_.cancelButtonColor&&(v.style.backgroundColor=_.cancelButtonColor,re(v,w["default-outline"]))}function ht(f,p,v){P(f,v["show".concat(o(p),"Button")],"inline-block"),X(f,v["".concat(p,"ButtonText")]),f.setAttribute("aria-label",v["".concat(p,"ButtonAriaLabel")]),f.className=w[p],ye(f,v,"".concat(p,"Button")),re(f,v["".concat(p,"ButtonClass")])}function gn(f,p){typeof p=="string"?f.style.background=p:p||re([document.documentElement,document.body],w["no-backdrop"])}function Yt(f,p){p in w?re(f,w[p]):(s('The "position" parameter is not valid, defaulting to "center"'),re(f,w.center))}function Hn(f,p){if(p&&typeof p=="string"){const v="grow-".concat(p);v in w&&re(f,w[v])}}const Fn=(f,p)=>{const v=J();v&&(gn(v,p.backdrop),Yt(v,p.position),Hn(v,p.grow),ye(v,p,"container"))};var qe={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const ki=["input","file","range","select","radio","checkbox","textarea"],ro=(f,p)=>{const v=ne(),_=qe.innerParams.get(f),ae=!_||p.input!==_.input;ki.forEach(Ne=>{const Pt=w[Ne],jn=Oe(v,Pt);Xt(Ne,p.inputAttributes),jn.className=Pt,ae&&b(jn)}),p.input&&(ae&&ms(p),cr(p))},ms=f=>{if(!Pn[f.input])return l('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(f.input,'"'));const p=Ch(f.input),v=Pn[f.input](p,f);k(v),setTimeout(()=>{he(v)})},wr=f=>{for(let p=0;p<f.attributes.length;p++){const v=f.attributes[p].name;["type","value","style"].includes(v)||f.removeAttribute(v)}},Xt=(f,p)=>{const v=ce(ne(),f);if(v){wr(v);for(const _ in p)v.setAttribute(_,p[_])}},cr=f=>{const p=Ch(f.input);f.customClass&&re(p,f.customClass.input)},ur=(f,p)=>{(!f.placeholder||p.inputPlaceholder)&&(f.placeholder=p.inputPlaceholder)},Cr=(f,p,v)=>{if(v.inputLabel){f.id=w.input;const _=document.createElement("label"),ae=w["input-label"];_.setAttribute("for",f.id),_.className=ae,re(_,v.customClass.inputLabel),_.innerText=v.inputLabel,p.insertAdjacentElement("beforebegin",_)}},Ch=f=>{const p=w[f]?w[f]:w.input;return Oe(ne(),p)},Pn={};Pn.text=Pn.email=Pn.password=Pn.number=Pn.tel=Pn.url=(f,p)=>(typeof p.inputValue=="string"||typeof p.inputValue=="number"?f.value=p.inputValue:g(p.inputValue)||s('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof p.inputValue,'"')),Cr(f,f,p),ur(f,p),f.type=p.input,f),Pn.file=(f,p)=>(Cr(f,f,p),ur(f,p),f),Pn.range=(f,p)=>{const v=f.querySelector("input"),_=f.querySelector("output");return v.value=p.inputValue,v.type=p.input,_.value=p.inputValue,Cr(v,f,p),f},Pn.select=(f,p)=>{if(f.textContent="",p.inputPlaceholder){const v=document.createElement("option");X(v,p.inputPlaceholder),v.value="",v.disabled=!0,v.selected=!0,f.appendChild(v)}return Cr(f,f,p),f},Pn.radio=f=>(f.textContent="",f),Pn.checkbox=(f,p)=>{const v=ce(ne(),"checkbox");v.value="1",v.id=w.checkbox,v.checked=!!p.inputValue;const _=f.querySelector("span");return X(_,p.inputPlaceholder),f},Pn.textarea=(f,p)=>{f.value=p.inputValue,ur(f,p),Cr(f,f,p);const v=_=>parseInt(window.getComputedStyle(_).marginLeft)+parseInt(window.getComputedStyle(_).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const _=parseInt(window.getComputedStyle(ne()).width),ae=()=>{const Ne=f.offsetWidth+v(f);Ne>_?ne().style.width="".concat(Ne,"px"):ne().style.width=null};new MutationObserver(ae).observe(f,{attributes:!0,attributeFilter:["style"]})}}),f};const L0=(f,p)=>{const v=We();ye(v,p,"htmlContainer"),p.html?(Ve(p.html,v),k(v,"block")):p.text?(v.textContent=p.text,k(v,"block")):b(v),ro(f,p)},B0=(f,p)=>{const v=q();P(v,p.footer),p.footer&&Ve(p.footer,v),ye(v,p,"footer")},V0=(f,p)=>{const v=M();X(v,p.closeButtonHtml),ye(v,p,"closeButton"),P(v,p.showCloseButton),v.setAttribute("aria-label",p.closeButtonAriaLabel)},R0=(f,p)=>{const v=qe.innerParams.get(f),_=Me();if(v&&p.icon===v.icon){Sh(_,p),kh(_,p);return}if(!p.icon&&!p.iconHtml)return b(_);if(p.icon&&Object.keys(te).indexOf(p.icon)===-1)return l('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(p.icon,'"')),b(_);k(_),Sh(_,p),kh(_,p),re(_,p.showClass.icon)},kh=(f,p)=>{for(const v in te)p.icon!==v&&Se(f,te[v]);re(f,te[p.icon]),z0(f,p),H0(),ye(f,p,"icon")},H0=()=>{const f=ne(),p=window.getComputedStyle(f).getPropertyValue("background-color"),v=f.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let _=0;_<v.length;_++)v[_].style.backgroundColor=p},F0=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,j0=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Sh=(f,p)=>{f.textContent="",p.iconHtml?X(f,xh(p.iconHtml)):p.icon==="success"?X(f,F0):p.icon==="error"?X(f,j0):X(f,xh({question:"?",warning:"!",info:"i"}[p.icon]))},z0=(f,p)=>{if(p.iconColor){f.style.color=p.iconColor,f.style.borderColor=p.iconColor;for(const v of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])E(f,v,"backgroundColor",p.iconColor);E(f,".swal2-success-ring","borderColor",p.iconColor)}},xh=f=>'<div class="'.concat(w["icon-content"],'">').concat(f,"</div>"),U0=(f,p)=>{const v=it();if(!p.imageUrl)return b(v);k(v,""),v.setAttribute("src",p.imageUrl),v.setAttribute("alt",p.imageAlt),me(v,"width",p.imageWidth),me(v,"height",p.imageHeight),v.className=w.image,ye(v,p,"image")},K0=f=>{const p=document.createElement("li");return re(p,w["progress-step"]),X(p,f),p},W0=f=>{const p=document.createElement("li");return re(p,w["progress-step-line"]),f.progressStepsDistance&&(p.style.width=f.progressStepsDistance),p},q0=(f,p)=>{const v=pt();if(!p.progressSteps||p.progressSteps.length===0)return b(v);k(v),v.textContent="",p.currentProgressStep>=p.progressSteps.length&&s("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),p.progressSteps.forEach((_,ae)=>{const Ne=K0(_);if(v.appendChild(Ne),ae===p.currentProgressStep&&re(Ne,w["active-progress-step"]),ae!==p.progressSteps.length-1){const Pt=W0(p);v.appendChild(Pt)}})},J0=(f,p)=>{const v=nt();P(v,p.title||p.titleText,"block"),p.title&&Ve(p.title,v),p.titleText&&(v.innerText=p.titleText),ye(v,p,"title")},G0=(f,p)=>{const v=J(),_=ne();p.toast?(me(v,"width",p.width),_.style.width="100%",_.insertBefore(j(),Me())):me(_,"width",p.width),me(_,"padding",p.padding),p.color&&(_.style.color=p.color),p.background&&(_.style.background=p.background),b(Ht()),Y0(_,p)},Y0=(f,p)=>{f.className="".concat(w.popup," ").concat(I(f)?p.showClass.popup:""),p.toast?(re([document.documentElement,document.body],w["toast-shown"]),re(f,w.toast)):re(f,w.modal),ye(f,p,"popup"),typeof p.customClass=="string"&&re(f,p.customClass),p.icon&&re(f,w["icon-".concat(p.icon)])},Th=(f,p)=>{G0(f,p),Fn(f,p),q0(f,p),R0(f,p),U0(f,p),J0(f,p),V0(f,p),L0(f,p),Nn(f,p),B0(f,p),typeof p.didRender=="function"&&p.didRender(ne())},Si=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),X0=()=>{i(document.body.children).forEach(f=>{f===J()||f.contains(J())||(f.hasAttribute("aria-hidden")&&f.setAttribute("data-previous-aria-hidden",f.getAttribute("aria-hidden")),f.setAttribute("aria-hidden","true"))})},Eh=()=>{i(document.body.children).forEach(f=>{f.hasAttribute("data-previous-aria-hidden")?(f.setAttribute("aria-hidden",f.getAttribute("data-previous-aria-hidden")),f.removeAttribute("data-previous-aria-hidden")):f.removeAttribute("aria-hidden")})},Oh=["swal-title","swal-html","swal-footer"],Z0=f=>{const p=typeof f.template=="string"?document.querySelector(f.template):f.template;if(!p)return{};const v=p.content;return iv(v),Object.assign(Q0(v),ev(v),tv(v),nv(v),rv(v),ov(v,Oh))},Q0=f=>{const p={};return i(f.querySelectorAll("swal-param")).forEach(v=>{Ho(v,["name","value"]);const _=v.getAttribute("name"),ae=v.getAttribute("value");typeof y[_]=="boolean"&&ae==="false"&&(p[_]=!1),typeof y[_]=="object"&&(p[_]=JSON.parse(ae))}),p},ev=f=>{const p={};return i(f.querySelectorAll("swal-button")).forEach(v=>{Ho(v,["type","color","aria-label"]);const _=v.getAttribute("type");p["".concat(_,"ButtonText")]=v.innerHTML,p["show".concat(o(_),"Button")]=!0,v.hasAttribute("color")&&(p["".concat(_,"ButtonColor")]=v.getAttribute("color")),v.hasAttribute("aria-label")&&(p["".concat(_,"ButtonAriaLabel")]=v.getAttribute("aria-label"))}),p},tv=f=>{const p={},v=f.querySelector("swal-image");return v&&(Ho(v,["src","width","height","alt"]),v.hasAttribute("src")&&(p.imageUrl=v.getAttribute("src")),v.hasAttribute("width")&&(p.imageWidth=v.getAttribute("width")),v.hasAttribute("height")&&(p.imageHeight=v.getAttribute("height")),v.hasAttribute("alt")&&(p.imageAlt=v.getAttribute("alt"))),p},nv=f=>{const p={},v=f.querySelector("swal-icon");return v&&(Ho(v,["type","color"]),v.hasAttribute("type")&&(p.icon=v.getAttribute("type")),v.hasAttribute("color")&&(p.iconColor=v.getAttribute("color")),p.iconHtml=v.innerHTML),p},rv=f=>{const p={},v=f.querySelector("swal-input");v&&(Ho(v,["type","label","placeholder","value"]),p.input=v.getAttribute("type")||"text",v.hasAttribute("label")&&(p.inputLabel=v.getAttribute("label")),v.hasAttribute("placeholder")&&(p.inputPlaceholder=v.getAttribute("placeholder")),v.hasAttribute("value")&&(p.inputValue=v.getAttribute("value")));const _=f.querySelectorAll("swal-input-option");return _.length&&(p.inputOptions={},i(_).forEach(ae=>{Ho(ae,["value"]);const Ne=ae.getAttribute("value"),Pt=ae.innerHTML;p.inputOptions[Ne]=Pt})),p},ov=(f,p)=>{const v={};for(const _ in p){const ae=p[_],Ne=f.querySelector(ae);Ne&&(Ho(Ne,[]),v[ae.replace(/^swal-/,"")]=Ne.innerHTML.trim())}return v},iv=f=>{const p=Oh.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);i(f.children).forEach(v=>{const _=v.tagName.toLowerCase();p.indexOf(_)===-1&&s("Unrecognized element <".concat(_,">"))})},Ho=(f,p)=>{i(f.attributes).forEach(v=>{p.indexOf(v.name)===-1&&s(['Unrecognized attribute "'.concat(v.name,'" on <').concat(f.tagName.toLowerCase(),">."),"".concat(p.length?"Allowed attributes are: ".concat(p.join(", ")):"To set the value, use HTML within the element.")])})};var Mh={email:(f,p)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(f)?Promise.resolve():Promise.resolve(p||"Invalid email address"),url:(f,p)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(f)?Promise.resolve():Promise.resolve(p||"Invalid URL")};function sv(f){f.inputValidator||Object.keys(Mh).forEach(p=>{f.input===p&&(f.inputValidator=Mh[p])})}function lv(f){(!f.target||typeof f.target=="string"&&!document.querySelector(f.target)||typeof f.target!="string"&&!f.target.appendChild)&&(s('Target parameter is not valid, defaulting to "body"'),f.target="body")}function av(f){sv(f),f.showLoaderOnConfirm&&!f.preConfirm&&s(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),lv(f),typeof f.title=="string"&&(f.title=f.title.split(`
`).join("<br />")),_e(f)}class cv{constructor(p,v){this.callback=p,this.remaining=v,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(p){const v=this.running;return v&&this.stop(),this.remaining+=p,v&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const uv=()=>{se.previousBodyPadding===null&&document.body.scrollHeight>window.innerHeight&&(se.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(se.previousBodyPadding+sn(),"px"))},dv=()=>{se.previousBodyPadding!==null&&(document.body.style.paddingRight="".concat(se.previousBodyPadding,"px"),se.previousBodyPadding=null)},fv=()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!ee(document.body,w.iosfix)){const f=document.body.scrollTop;document.body.style.top="".concat(f*-1,"px"),re(document.body,w.iosfix),pv(),hv()}},hv=()=>{const f=navigator.userAgent,p=!!f.match(/iPad/i)||!!f.match(/iPhone/i),v=!!f.match(/WebKit/i);p&&v&&!f.match(/CriOS/i)&&ne().scrollHeight>window.innerHeight-44&&(J().style.paddingBottom="".concat(44,"px"))},pv=()=>{const f=J();let p;f.ontouchstart=v=>{p=mv(v)},f.ontouchmove=v=>{p&&(v.preventDefault(),v.stopPropagation())}},mv=f=>{const p=f.target,v=J();return gv(f)||yv(f)?!1:p===v||!le(v)&&p.tagName!=="INPUT"&&p.tagName!=="TEXTAREA"&&!(le(We())&&We().contains(p))},gv=f=>f.touches&&f.touches.length&&f.touches[0].touchType==="stylus",yv=f=>f.touches&&f.touches.length>1,bv=()=>{if(ee(document.body,w.iosfix)){const f=parseInt(document.body.style.top,10);Se(document.body,w.iosfix),document.body.style.top="",document.body.scrollTop=f*-1}},Ah=10,vv=f=>{const p=J(),v=ne();typeof f.willOpen=="function"&&f.willOpen(v);const _=window.getComputedStyle(document.body).overflowY;kv(p,v,f),setTimeout(()=>{wv(p,v)},Ah),H()&&(Cv(p,f.scrollbarPadding,_),X0()),!W()&&!be.previousActiveElement&&(be.previousActiveElement=document.activeElement),typeof f.didOpen=="function"&&setTimeout(()=>f.didOpen(v)),Se(p,w["no-transition"])},_h=f=>{const p=ne();if(f.target!==p)return;const v=J();p.removeEventListener(yt,_h),v.style.overflowY="auto"},wv=(f,p)=>{yt&&Te(p)?(f.style.overflowY="hidden",p.addEventListener(yt,_h)):f.style.overflowY="auto"},Cv=(f,p,v)=>{fv(),p&&v!=="hidden"&&uv(),setTimeout(()=>{f.scrollTop=0})},kv=(f,p,v)=>{re(f,v.showClass.backdrop),p.style.setProperty("opacity","0","important"),k(p,"grid"),setTimeout(()=>{re(p,v.showClass.popup),p.style.removeProperty("opacity")},Ah),re([document.documentElement,document.body],w.shown),v.heightAuto&&v.backdrop&&!v.toast&&re([document.documentElement,document.body],w["height-auto"])},xi=f=>{let p=ne();p||new Il,p=ne();const v=j();W()?b(Me()):Sv(p,f),k(v),p.setAttribute("data-loading",!0),p.setAttribute("aria-busy",!0),p.focus()},Sv=(f,p)=>{const v=G(),_=j();!p&&I(Ae())&&(p=Ae()),k(v),p&&(b(p),_.setAttribute("data-button-to-replace",p.className)),_.parentNode.insertBefore(_,p),re([f,v],w.loading)},xv=(f,p)=>{p.input==="select"||p.input==="radio"?Av(f,p):["text","email","number","tel","textarea"].includes(p.input)&&(h(p.inputValue)||g(p.inputValue))&&(xi(Ae()),_v(f,p))},Tv=(f,p)=>{const v=f.getInput();if(!v)return null;switch(p.input){case"checkbox":return Ev(v);case"radio":return Ov(v);case"file":return Mv(v);default:return p.inputAutoTrim?v.value.trim():v.value}},Ev=f=>f.checked?1:0,Ov=f=>f.checked?f.value:null,Mv=f=>f.files.length?f.getAttribute("multiple")!==null?f.files:f.files[0]:null,Av=(f,p)=>{const v=ne(),_=ae=>Nv[p.input](v,Yc(ae),p);h(p.inputOptions)||g(p.inputOptions)?(xi(Ae()),m(p.inputOptions).then(ae=>{f.hideLoading(),_(ae)})):typeof p.inputOptions=="object"?_(p.inputOptions):l("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof p.inputOptions))},_v=(f,p)=>{const v=f.getInput();b(v),m(p.inputValue).then(_=>{v.value=p.input==="number"?parseFloat(_)||0:"".concat(_),k(v),v.focus(),f.hideLoading()}).catch(_=>{l("Error in inputValue promise: ".concat(_)),v.value="",k(v),v.focus(),f.hideLoading()})},Nv={select:(f,p,v)=>{const _=Oe(f,w.select),ae=(Ne,Pt,jn)=>{const yn=document.createElement("option");yn.value=jn,X(yn,Pt),yn.selected=Nh(jn,v.inputValue),Ne.appendChild(yn)};p.forEach(Ne=>{const Pt=Ne[0],jn=Ne[1];if(Array.isArray(jn)){const yn=document.createElement("optgroup");yn.label=Pt,yn.disabled=!1,_.appendChild(yn),jn.forEach(Ei=>ae(yn,Ei[1],Ei[0]))}else ae(_,jn,Pt)}),_.focus()},radio:(f,p,v)=>{const _=Oe(f,w.radio);p.forEach(Ne=>{const Pt=Ne[0],jn=Ne[1],yn=document.createElement("input"),Ei=document.createElement("label");yn.type="radio",yn.name=w.radio,yn.value=Pt,Nh(Pt,v.inputValue)&&(yn.checked=!0);const ru=document.createElement("span");X(ru,jn),ru.className=w.label,Ei.appendChild(yn),Ei.appendChild(ru),_.appendChild(Ei)});const ae=_.querySelectorAll("input");ae.length&&ae[0].focus()}},Yc=f=>{const p=[];return typeof Map<"u"&&f instanceof Map?f.forEach((v,_)=>{let ae=v;typeof ae=="object"&&(ae=Yc(ae)),p.push([_,ae])}):Object.keys(f).forEach(v=>{let _=f[v];typeof _=="object"&&(_=Yc(_)),p.push([v,_])}),p},Nh=(f,p)=>p&&p.toString()===f.toString();function $h(){const f=qe.innerParams.get(this);if(!f)return;const p=qe.domCache.get(this);b(p.loader),W()?f.icon&&k(Me()):$v(p),Se([p.popup,p.actions],w.loading),p.popup.removeAttribute("aria-busy"),p.popup.removeAttribute("data-loading"),p.confirmButton.disabled=!1,p.denyButton.disabled=!1,p.cancelButton.disabled=!1}const $v=f=>{const p=f.popup.getElementsByClassName(f.loader.getAttribute("data-button-to-replace"));p.length?k(p[0],"inline-block"):ie()&&b(f.actions)};function Pv(f){const p=qe.innerParams.get(f||this),v=qe.domCache.get(f||this);return v?ce(v.popup,p.input):null}var gs={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};function Ph(f,p,v,_){W()?Dh(f,_):(ot(v).then(()=>Dh(f,_)),be.keydownTarget.removeEventListener("keydown",be.keydownHandler,{capture:be.keydownListenerCapture}),be.keydownHandlerAdded=!1),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(p.setAttribute("style","display:none !important"),p.removeAttribute("class"),p.innerHTML=""):p.remove(),H()&&(dv(),bv(),Eh()),Dv()}function Dv(){Se([document.documentElement,document.body],[w.shown,w["height-auto"],w["no-backdrop"],w["toast-shown"]])}function Pl(f){f=Vv(f);const p=gs.swalPromiseResolve.get(this),v=Lv(this);this.isAwaitingPromise()?f.isDismissed||(ys(this),p(f)):v&&p(f)}function Iv(){return!!qe.awaitingPromise.get(this)}const Lv=f=>{const p=ne();if(!p)return!1;const v=qe.innerParams.get(f);if(!v||ee(p,v.hideClass.popup))return!1;Se(p,v.showClass.popup),re(p,v.hideClass.popup);const _=J();return Se(_,v.showClass.backdrop),re(_,v.hideClass.backdrop),Rv(f,p,v),!0};function Bv(f){const p=gs.swalPromiseReject.get(this);ys(this),p&&p(f)}const ys=f=>{f.isAwaitingPromise()&&(qe.awaitingPromise.delete(f),qe.innerParams.get(f)||f._destroy())},Vv=f=>typeof f>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},f),Rv=(f,p,v)=>{const _=J(),ae=yt&&Te(p);typeof v.willClose=="function"&&v.willClose(p),ae?Hv(f,p,_,v.returnFocus,v.didClose):Ph(f,_,v.returnFocus,v.didClose)},Hv=(f,p,v,_,ae)=>{be.swalCloseEventFinishedCallback=Ph.bind(null,f,v,_,ae),p.addEventListener(yt,function(Ne){Ne.target===p&&(be.swalCloseEventFinishedCallback(),delete be.swalCloseEventFinishedCallback)})},Dh=(f,p)=>{setTimeout(()=>{typeof p=="function"&&p.bind(f.params)(),f._destroy()})};function Ih(f,p,v){const _=qe.domCache.get(f);p.forEach(ae=>{_[ae].disabled=v})}function Lh(f,p){if(!f)return!1;if(f.type==="radio"){const v=f.parentNode.parentNode.querySelectorAll("input");for(let _=0;_<v.length;_++)v[_].disabled=p}else f.disabled=p}function Fv(){Ih(this,["confirmButton","denyButton","cancelButton"],!1)}function jv(){Ih(this,["confirmButton","denyButton","cancelButton"],!0)}function zv(){return Lh(this.getInput(),!1)}function Uv(){return Lh(this.getInput(),!0)}function Kv(f){const p=qe.domCache.get(this),v=qe.innerParams.get(this);X(p.validationMessage,f),p.validationMessage.className=w["validation-message"],v.customClass&&v.customClass.validationMessage&&re(p.validationMessage,v.customClass.validationMessage),k(p.validationMessage);const _=this.getInput();_&&(_.setAttribute("aria-invalid",!0),_.setAttribute("aria-describedby",w["validation-message"]),he(_),re(_,w.inputerror))}function Wv(){const f=qe.domCache.get(this);f.validationMessage&&b(f.validationMessage);const p=this.getInput();p&&(p.removeAttribute("aria-invalid"),p.removeAttribute("aria-describedby"),Se(p,w.inputerror))}function qv(){return qe.domCache.get(this).progressSteps}function Jv(f){const p=ne(),v=qe.innerParams.get(this);if(!p||ee(p,v.hideClass.popup))return s("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const _=Gv(f),ae=Object.assign({},v,_);Th(this,ae),qe.innerParams.set(this,ae),Object.defineProperties(this,{params:{value:Object.assign({},this.params,f),writable:!1,enumerable:!0}})}const Gv=f=>{const p={};return Object.keys(f).forEach(v=>{L(v)?p[v]=f[v]:s('Invalid parameter to update: "'.concat(v,`". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js

If you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md`))}),p};function Yv(){const f=qe.domCache.get(this),p=qe.innerParams.get(this);if(!p){Bh(this);return}f.popup&&be.swalCloseEventFinishedCallback&&(be.swalCloseEventFinishedCallback(),delete be.swalCloseEventFinishedCallback),be.deferDisposalTimer&&(clearTimeout(be.deferDisposalTimer),delete be.deferDisposalTimer),typeof p.didDestroy=="function"&&p.didDestroy(),Xv(this)}const Xv=f=>{Bh(f),delete f.params,delete be.keydownHandler,delete be.keydownTarget,delete be.currentInstance},Bh=f=>{f.isAwaitingPromise()?(Xc(qe,f),qe.awaitingPromise.set(f,!0)):(Xc(gs,f),Xc(qe,f))},Xc=(f,p)=>{for(const v in f)f[v].delete(p)};var Vh=Object.freeze({hideLoading:$h,disableLoading:$h,getInput:Pv,close:Pl,isAwaitingPromise:Iv,rejectPromise:Bv,handleAwaitingPromise:ys,closePopup:Pl,closeModal:Pl,closeToast:Pl,enableButtons:Fv,disableButtons:jv,enableInput:zv,disableInput:Uv,showValidationMessage:Kv,resetValidationMessage:Wv,getProgressSteps:qv,update:Jv,_destroy:Yv});const Zv=f=>{const p=qe.innerParams.get(f);f.disableButtons(),p.input?Rh(f,"confirm"):Qc(f,!0)},Qv=f=>{const p=qe.innerParams.get(f);f.disableButtons(),p.returnInputValueOnDeny?Rh(f,"deny"):Zc(f,!1)},ew=(f,p)=>{f.disableButtons(),p(Si.cancel)},Rh=(f,p)=>{const v=qe.innerParams.get(f);if(!v.input)return l('The "input" parameter is needed to be set when using returnInputValueOn'.concat(o(p)));const _=Tv(f,v);v.inputValidator?tw(f,_,p):f.getInput().checkValidity()?p==="deny"?Zc(f,_):Qc(f,_):(f.enableButtons(),f.showValidationMessage(v.validationMessage))},tw=(f,p,v)=>{const _=qe.innerParams.get(f);f.disableInput(),Promise.resolve().then(()=>m(_.inputValidator(p,_.validationMessage))).then(ae=>{f.enableButtons(),f.enableInput(),ae?f.showValidationMessage(ae):v==="deny"?Zc(f,p):Qc(f,p)})},Zc=(f,p)=>{const v=qe.innerParams.get(f||void 0);v.showLoaderOnDeny&&xi(rt()),v.preDeny?(qe.awaitingPromise.set(f||void 0,!0),Promise.resolve().then(()=>m(v.preDeny(p,v.validationMessage))).then(_=>{_===!1?(f.hideLoading(),ys(f)):f.closePopup({isDenied:!0,value:typeof _>"u"?p:_})}).catch(_=>Fh(f||void 0,_))):f.closePopup({isDenied:!0,value:p})},Hh=(f,p)=>{f.closePopup({isConfirmed:!0,value:p})},Fh=(f,p)=>{f.rejectPromise(p)},Qc=(f,p)=>{const v=qe.innerParams.get(f||void 0);v.showLoaderOnConfirm&&xi(),v.preConfirm?(f.resetValidationMessage(),qe.awaitingPromise.set(f||void 0,!0),Promise.resolve().then(()=>m(v.preConfirm(p,v.validationMessage))).then(_=>{I(Ht())||_===!1?(f.hideLoading(),ys(f)):Hh(f,typeof _>"u"?p:_)}).catch(_=>Fh(f||void 0,_))):Hh(f,p)},nw=(f,p,v)=>{qe.innerParams.get(f).toast?rw(f,p,v):(iw(p),sw(p),lw(f,p,v))},rw=(f,p,v)=>{p.popup.onclick=()=>{const _=qe.innerParams.get(f);_&&(ow(_)||_.timer||_.input)||v(Si.close)}},ow=f=>f.showConfirmButton||f.showDenyButton||f.showCancelButton||f.showCloseButton;let Dl=!1;const iw=f=>{f.popup.onmousedown=()=>{f.container.onmouseup=function(p){f.container.onmouseup=void 0,p.target===f.container&&(Dl=!0)}}},sw=f=>{f.container.onmousedown=()=>{f.popup.onmouseup=function(p){f.popup.onmouseup=void 0,(p.target===f.popup||f.popup.contains(p.target))&&(Dl=!0)}}},lw=(f,p,v)=>{p.container.onclick=_=>{const ae=qe.innerParams.get(f);if(Dl){Dl=!1;return}_.target===p.container&&d(ae.allowOutsideClick)&&v(Si.backdrop)}},aw=()=>I(ne()),jh=()=>Ae()&&Ae().click(),cw=()=>rt()&&rt().click(),uw=()=>K()&&K().click(),dw=(f,p,v,_)=>{p.keydownTarget&&p.keydownHandlerAdded&&(p.keydownTarget.removeEventListener("keydown",p.keydownHandler,{capture:p.keydownListenerCapture}),p.keydownHandlerAdded=!1),v.toast||(p.keydownHandler=ae=>hw(f,ae,_),p.keydownTarget=v.keydownListenerCapture?window:ne(),p.keydownListenerCapture=v.keydownListenerCapture,p.keydownTarget.addEventListener("keydown",p.keydownHandler,{capture:p.keydownListenerCapture}),p.keydownHandlerAdded=!0)},eu=(f,p,v)=>{const _=V();if(_.length)return p=p+v,p===_.length?p=0:p===-1&&(p=_.length-1),_[p].focus();ne().focus()},zh=["ArrowRight","ArrowDown"],fw=["ArrowLeft","ArrowUp"],hw=(f,p,v)=>{const _=qe.innerParams.get(f);_&&(p.isComposing||p.keyCode===229||(_.stopKeydownPropagation&&p.stopPropagation(),p.key==="Enter"?pw(f,p,_):p.key==="Tab"?mw(p,_):[...zh,...fw].includes(p.key)?gw(p.key):p.key==="Escape"&&yw(p,_,v)))},pw=(f,p,v)=>{if(d(v.allowEnterKey)&&p.target&&f.getInput()&&p.target.outerHTML===f.getInput().outerHTML){if(["textarea","file"].includes(v.input))return;jh(),p.preventDefault()}},mw=(f,p)=>{const v=f.target,_=V();let ae=-1;for(let Ne=0;Ne<_.length;Ne++)if(v===_[Ne]){ae=Ne;break}f.shiftKey?eu(p,ae,-1):eu(p,ae,1),f.stopPropagation(),f.preventDefault()},gw=f=>{const p=Ae(),v=rt(),_=K();if(![p,v,_].includes(document.activeElement))return;const ae=zh.includes(f)?"nextElementSibling":"previousElementSibling";let Ne=document.activeElement;for(let Pt=0;Pt<G().children.length;Pt++){if(Ne=Ne[ae],!Ne)return;if(I(Ne)&&Ne instanceof HTMLButtonElement)break}Ne instanceof HTMLButtonElement&&Ne.focus()},yw=(f,p,v)=>{d(p.allowEscapeKey)&&(f.preventDefault(),v(Si.esc))},bw=f=>typeof f=="object"&&f.jquery,Uh=f=>f instanceof Element||bw(f),vw=f=>{const p={};return typeof f[0]=="object"&&!Uh(f[0])?Object.assign(p,f[0]):["title","html","icon"].forEach((v,_)=>{const ae=f[_];typeof ae=="string"||Uh(ae)?p[v]=ae:ae!==void 0&&l("Unexpected type of ".concat(v,'! Expected "string" or "Element", got ').concat(typeof ae))}),p};function ww(){const f=this;for(var p=arguments.length,v=new Array(p),_=0;_<p;_++)v[_]=arguments[_];return new f(...v)}function Cw(f){class p extends this{_main(_,ae){return super._main(_,Object.assign({},f,ae))}}return p}const kw=()=>be.timeout&&be.timeout.getTimerLeft(),Kh=()=>{if(be.timeout)return Be(),be.timeout.stop()},Wh=()=>{if(be.timeout){const f=be.timeout.start();return ve(f),f}},Sw=()=>{const f=be.timeout;return f&&(f.running?Kh():Wh())},xw=f=>{if(be.timeout){const p=be.timeout.increase(f);return ve(p,!0),p}},Tw=()=>be.timeout&&be.timeout.isRunning();let qh=!1;const tu={};function Ew(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";tu[f]=this,qh||(document.body.addEventListener("click",Ow),qh=!0)}const Ow=f=>{for(let p=f.target;p&&p!==document;p=p.parentNode)for(const v in tu){const _=p.getAttribute(v);if(_){tu[v].fire({template:_});return}}};var Mw=Object.freeze({isValidParameter:N,isUpdatableParameter:L,isDeprecatedParameter:D,argsToParams:vw,isVisible:aw,clickConfirm:jh,clickDeny:cw,clickCancel:uw,getContainer:J,getPopup:ne,getTitle:nt,getHtmlContainer:We,getImage:it,getIcon:Me,getInputLabel:_t,getCloseButton:M,getActions:G,getConfirmButton:Ae,getDenyButton:rt,getCancelButton:K,getLoader:j,getFooter:q,getTimerProgressBar:ue,getFocusableElements:V,getValidationMessage:Ht,isLoading:Y,fire:ww,mixin:Cw,showLoading:xi,enableLoading:xi,getTimerLeft:kw,stopTimer:Kh,resumeTimer:Wh,toggleTimer:Sw,increaseTimer:xw,isTimerRunning:Tw,bindClickHandler:Ew});let nu;class Ti{constructor(){if(typeof window>"u")return;nu=this;for(var p=arguments.length,v=new Array(p),_=0;_<p;_++)v[_]=arguments[_];const ae=Object.freeze(this.constructor.argsToParams(v));Object.defineProperties(this,{params:{value:ae,writable:!1,enumerable:!0,configurable:!0}});const Ne=this._main(this.params);qe.promise.set(this,Ne)}_main(p){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};T(Object.assign({},v,p)),be.currentInstance&&(be.currentInstance._destroy(),H()&&Eh()),be.currentInstance=this;const _=_w(p,v);av(_),Object.freeze(_),be.timeout&&(be.timeout.stop(),delete be.timeout),clearTimeout(be.restoreFocusTimeout);const ae=Nw(this);return Th(this,_),qe.innerParams.set(this,_),Aw(this,ae,_)}then(p){return qe.promise.get(this).then(p)}finally(p){return qe.promise.get(this).finally(p)}}const Aw=(f,p,v)=>new Promise((_,ae)=>{const Ne=Pt=>{f.closePopup({isDismissed:!0,dismiss:Pt})};gs.swalPromiseResolve.set(f,_),gs.swalPromiseReject.set(f,ae),p.confirmButton.onclick=()=>Zv(f),p.denyButton.onclick=()=>Qv(f),p.cancelButton.onclick=()=>ew(f,Ne),p.closeButton.onclick=()=>Ne(Si.close),nw(f,p,Ne),dw(f,be,v,Ne),xv(f,v),vv(v),$w(be,v,Ne),Pw(p,v),setTimeout(()=>{p.container.scrollTop=0})}),_w=(f,p)=>{const v=Z0(f),_=Object.assign({},y,p,v,f);return _.showClass=Object.assign({},y.showClass,_.showClass),_.hideClass=Object.assign({},y.hideClass,_.hideClass),_},Nw=f=>{const p={popup:ne(),container:J(),actions:G(),confirmButton:Ae(),denyButton:rt(),cancelButton:K(),loader:j(),closeButton:M(),validationMessage:Ht(),progressSteps:pt()};return qe.domCache.set(f,p),p},$w=(f,p,v)=>{const _=ue();b(_),p.timer&&(f.timeout=new cv(()=>{v("timer"),delete f.timeout},p.timer),p.timerProgressBar&&(k(_),ye(_,p,"timerProgressBar"),setTimeout(()=>{f.timeout&&f.timeout.running&&ve(p.timer)})))},Pw=(f,p)=>{if(!p.toast){if(!d(p.allowEnterKey))return Iw();Dw(f,p)||eu(p,-1,1)}},Dw=(f,p)=>p.focusDeny&&I(f.denyButton)?(f.denyButton.focus(),!0):p.focusCancel&&I(f.cancelButton)?(f.cancelButton.focus(),!0):p.focusConfirm&&I(f.confirmButton)?(f.confirmButton.focus(),!0):!1,Iw=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Object.assign(Ti.prototype,Vh),Object.assign(Ti,Mw),Object.keys(Vh).forEach(f=>{Ti[f]=function(){if(nu)return nu[f](...arguments)}}),Ti.DismissReason=Si,Ti.version="11.4.4";const Il=Ti;return Il.default=Il,Il}),typeof io<"u"&&io.Sweetalert2&&(io.swal=io.sweetAlert=io.Swal=io.SweetAlert=io.Sweetalert2)})(D0);var lD=D0.exports;const sa=sD(lD);class aD{static install(e,n={}){var r;const o=sa.mixin(n),i=function(...s){return o.fire.call(o,...s)};Object.assign(i,sa),Object.keys(sa).filter(s=>typeof sa[s]=="function").forEach(s=>{i[s]=o[s].bind(o)}),(r=e.config)!=null&&r.globalProperties&&!e.config.globalProperties.$swal?(e.config.globalProperties.$swal=i,e.provide("$swal",i)):Object.prototype.hasOwnProperty.call(e,"$swal")||(e.prototype.$swal=i,e.swal=i)}}const I0=pS(iD);I0.use(aD);I0.mount("#app");
