(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Gd(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const yt={},Di=[],Cr=()=>{},sw=()=>!1,oc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Yd=t=>t.startsWith("onUpdate:"),dn=Object.assign,Xd=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},lw=Object.prototype.hasOwnProperty,dt=(t,e)=>lw.call(t,e),Re=Array.isArray,Ii=t=>dl(t)==="[object Map]",ic=t=>dl(t)==="[object Set]",Ah=t=>dl(t)==="[object Date]",qe=t=>typeof t=="function",Rt=t=>typeof t=="string",Er=t=>typeof t=="symbol",kt=t=>t!==null&&typeof t=="object",Ym=t=>(kt(t)||qe(t))&&qe(t.then)&&qe(t.catch),Xm=Object.prototype.toString,dl=t=>Xm.call(t),aw=t=>dl(t).slice(8,-1),Zm=t=>dl(t)==="[object Object]",Zd=t=>Rt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Cs=Gd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),sc=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},cw=/-(\w)/g,or=sc(t=>t.replace(cw,(e,n)=>n?n.toUpperCase():"")),uw=/\B([A-Z])/g,ci=sc(t=>t.replace(uw,"-$1").toLowerCase()),lc=sc(t=>t.charAt(0).toUpperCase()+t.slice(1)),Uc=sc(t=>t?`on${lc(t)}`:""),yo=(t,e)=>!Object.is(t,e),Gl=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Qm=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Lu=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Mh;const ac=()=>Mh||(Mh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Bi(t){if(Re(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],o=Rt(r)?pw(r):Bi(r);if(o)for(const i in o)e[i]=o[i]}return e}else if(Rt(t)||kt(t))return t}const dw=/;(?![^(]*\))/g,fw=/:([^]+)/,hw=/\/\*[^]*?\*\//g;function pw(t){const e={};return t.replace(hw,"").split(dw).forEach(n=>{if(n){const r=n.split(fw);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function dr(t){let e="";if(Rt(t))e=t;else if(Re(t))for(let n=0;n<t.length;n++){const r=dr(t[n]);r&&(e+=r+" ")}else if(kt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const mw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",gw=Gd(mw);function eg(t){return!!t||t===""}function yw(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=cc(t[r],e[r]);return n}function cc(t,e){if(t===e)return!0;let n=Ah(t),r=Ah(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Er(t),r=Er(e),n||r)return t===e;if(n=Re(t),r=Re(e),n||r)return n&&r?yw(t,e):!1;if(n=kt(t),r=kt(e),n||r){if(!n||!r)return!1;const o=Object.keys(t).length,i=Object.keys(e).length;if(o!==i)return!1;for(const s in t){const l=t.hasOwnProperty(s),a=e.hasOwnProperty(s);if(l&&!a||!l&&a||!cc(t[s],e[s]))return!1}}return String(t)===String(e)}function tg(t,e){return t.findIndex(n=>cc(n,e))}const ng=t=>!!(t&&t.__v_isRef===!0),kn=t=>Rt(t)?t:t==null?"":Re(t)||kt(t)&&(t.toString===Xm||!qe(t.toString))?ng(t)?kn(t.value):JSON.stringify(t,rg,2):String(t),rg=(t,e)=>ng(e)?rg(t,e.value):Ii(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,o],i)=>(n[Wc(r,i)+" =>"]=o,n),{})}:ic(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Wc(n))}:Er(e)?Wc(e):kt(e)&&!Re(e)&&!Zm(e)?String(e):e,Wc=(t,e="")=>{var n;return Er(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vn;class bw{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=vn,!e&&vn&&(this.index=(vn.scopes||(vn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=vn;try{return vn=this,e()}finally{vn=n}}}on(){vn=this}off(){vn=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function og(){return vn}function vw(t,e=!1){vn&&vn.cleanups.push(t)}let St;const qc=new WeakSet;class ig{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,vn&&vn.active&&vn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,qc.has(this)&&(qc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||lg(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,_h(this),ag(this);const e=St,n=fr;St=this,fr=!0;try{return this.fn()}finally{cg(this),St=e,fr=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)tf(e);this.deps=this.depsTail=void 0,_h(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?qc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Vu(this)&&this.run()}get dirty(){return Vu(this)}}let sg=0,Ts,Es;function lg(t,e=!1){if(t.flags|=8,e){t.next=Es,Es=t;return}t.next=Ts,Ts=t}function Qd(){sg++}function ef(){if(--sg>0)return;if(Es){let e=Es;for(Es=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ts;){let e=Ts;for(Ts=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function ag(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cg(t){let e,n=t.depsTail,r=n;for(;r;){const o=r.prevDep;r.version===-1?(r===n&&(n=o),tf(r),ww(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=o}t.deps=e,t.depsTail=n}function Vu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(ug(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function ug(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ks))return;t.globalVersion=Ks;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Vu(t)){t.flags&=-3;return}const n=St,r=fr;St=t,fr=!0;try{ag(t);const o=t.fn(t._value);(e.version===0||yo(o,t._value))&&(t._value=o,e.version++)}catch(o){throw e.version++,o}finally{St=n,fr=r,cg(t),t.flags&=-3}}function tf(t,e=!1){const{dep:n,prevSub:r,nextSub:o}=t;if(r&&(r.nextSub=o,t.prevSub=void 0),o&&(o.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)tf(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function ww(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let fr=!0;const dg=[];function Ao(){dg.push(fr),fr=!1}function Mo(){const t=dg.pop();fr=t===void 0?!0:t}function _h(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=St;St=void 0;try{e()}finally{St=n}}}let Ks=0;class Sw{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class uc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!St||!fr||St===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==St)n=this.activeLink=new Sw(St,this),St.deps?(n.prevDep=St.depsTail,St.depsTail.nextDep=n,St.depsTail=n):St.deps=St.depsTail=n,fg(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=St.depsTail,n.nextDep=void 0,St.depsTail.nextDep=n,St.depsTail=n,St.deps===n&&(St.deps=r)}return n}trigger(e){this.version++,Ks++,this.notify(e)}notify(e){Qd();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ef()}}}function fg(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)fg(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const va=new WeakMap,Jo=Symbol(""),Fu=Symbol(""),Us=Symbol("");function on(t,e,n){if(fr&&St){let r=va.get(t);r||va.set(t,r=new Map);let o=r.get(n);o||(r.set(n,o=new uc),o.map=r,o.key=n),o.track()}}function Vr(t,e,n,r,o,i){const s=va.get(t);if(!s){Ks++;return}const l=a=>{a&&a.trigger()};if(Qd(),e==="clear")s.forEach(l);else{const a=Re(t),c=a&&Zd(n);if(a&&n==="length"){const u=Number(r);s.forEach((d,h)=>{(h==="length"||h===Us||!Er(h)&&h>=u)&&l(d)})}else switch((n!==void 0||s.has(void 0))&&l(s.get(n)),c&&l(s.get(Us)),e){case"add":a?c&&l(s.get("length")):(l(s.get(Jo)),Ii(t)&&l(s.get(Fu)));break;case"delete":a||(l(s.get(Jo)),Ii(t)&&l(s.get(Fu)));break;case"set":Ii(t)&&l(s.get(Jo));break}}ef()}function kw(t,e){const n=va.get(t);return n&&n.get(e)}function yi(t){const e=at(t);return e===t?e:(on(e,"iterate",Us),nr(t)?e:e.map(sn))}function dc(t){return on(t=at(t),"iterate",Us),t}const xw={__proto__:null,[Symbol.iterator](){return Jc(this,Symbol.iterator,sn)},concat(...t){return yi(this).concat(...t.map(e=>Re(e)?yi(e):e))},entries(){return Jc(this,"entries",t=>(t[1]=sn(t[1]),t))},every(t,e){return $r(this,"every",t,e,void 0,arguments)},filter(t,e){return $r(this,"filter",t,e,n=>n.map(sn),arguments)},find(t,e){return $r(this,"find",t,e,sn,arguments)},findIndex(t,e){return $r(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return $r(this,"findLast",t,e,sn,arguments)},findLastIndex(t,e){return $r(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return $r(this,"forEach",t,e,void 0,arguments)},includes(...t){return Gc(this,"includes",t)},indexOf(...t){return Gc(this,"indexOf",t)},join(t){return yi(this).join(t)},lastIndexOf(...t){return Gc(this,"lastIndexOf",t)},map(t,e){return $r(this,"map",t,e,void 0,arguments)},pop(){return us(this,"pop")},push(...t){return us(this,"push",t)},reduce(t,...e){return Nh(this,"reduce",t,e)},reduceRight(t,...e){return Nh(this,"reduceRight",t,e)},shift(){return us(this,"shift")},some(t,e){return $r(this,"some",t,e,void 0,arguments)},splice(...t){return us(this,"splice",t)},toReversed(){return yi(this).toReversed()},toSorted(t){return yi(this).toSorted(t)},toSpliced(...t){return yi(this).toSpliced(...t)},unshift(...t){return us(this,"unshift",t)},values(){return Jc(this,"values",sn)}};function Jc(t,e,n){const r=dc(t),o=r[e]();return r!==t&&!nr(t)&&(o._next=o.next,o.next=()=>{const i=o._next();return i.value&&(i.value=n(i.value)),i}),o}const Cw=Array.prototype;function $r(t,e,n,r,o,i){const s=dc(t),l=s!==t&&!nr(t),a=s[e];if(a!==Cw[e]){const d=a.apply(t,i);return l?sn(d):d}let c=n;s!==t&&(l?c=function(d,h){return n.call(this,sn(d),h,t)}:n.length>2&&(c=function(d,h){return n.call(this,d,h,t)}));const u=a.call(s,c,r);return l&&o?o(u):u}function Nh(t,e,n,r){const o=dc(t);let i=n;return o!==t&&(nr(t)?n.length>3&&(i=function(s,l,a){return n.call(this,s,l,a,t)}):i=function(s,l,a){return n.call(this,s,sn(l),a,t)}),o[e](i,...r)}function Gc(t,e,n){const r=at(t);on(r,"iterate",Us);const o=r[e](...n);return(o===-1||o===!1)&&of(n[0])?(n[0]=at(n[0]),r[e](...n)):o}function us(t,e,n=[]){Ao(),Qd();const r=at(t)[e].apply(t,n);return ef(),Mo(),r}const Tw=Gd("__proto__,__v_isRef,__isVue"),hg=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Er));function Ew(t){Er(t)||(t=String(t));const e=at(this);return on(e,"has",t),e.hasOwnProperty(t)}class pg{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const o=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(o?i?Bw:bg:i?yg:gg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const s=Re(e);if(!o){let a;if(s&&(a=xw[n]))return a;if(n==="hasOwnProperty")return Ew}const l=Reflect.get(e,n,It(e)?e:r);return(Er(n)?hg.has(n):Tw(n))||(o||on(e,"get",n),i)?l:It(l)?s&&Zd(n)?l:l.value:kt(l)?o?vg(l):fc(l):l}}class mg extends pg{constructor(e=!1){super(!1,e)}set(e,n,r,o){let i=e[n];if(!this._isShallow){const a=ni(i);if(!nr(r)&&!ni(r)&&(i=at(i),r=at(r)),!Re(e)&&It(i)&&!It(r))return a?!1:(i.value=r,!0)}const s=Re(e)&&Zd(n)?Number(n)<e.length:dt(e,n),l=Reflect.set(e,n,r,It(e)?e:o);return e===at(o)&&(s?yo(r,i)&&Vr(e,"set",n,r):Vr(e,"add",n,r)),l}deleteProperty(e,n){const r=dt(e,n);e[n];const o=Reflect.deleteProperty(e,n);return o&&r&&Vr(e,"delete",n,void 0),o}has(e,n){const r=Reflect.has(e,n);return(!Er(n)||!hg.has(n))&&on(e,"has",n),r}ownKeys(e){return on(e,"iterate",Re(e)?"length":Jo),Reflect.ownKeys(e)}}class Ow extends pg{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Aw=new mg,Mw=new Ow,_w=new mg(!0);const ju=t=>t,Tl=t=>Reflect.getPrototypeOf(t);function Nw(t,e,n){return function(...r){const o=this.__v_raw,i=at(o),s=Ii(i),l=t==="entries"||t===Symbol.iterator&&s,a=t==="keys"&&s,c=o[t](...r),u=n?ju:e?Hu:sn;return!e&&on(i,"iterate",a?Fu:Jo),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:l?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function El(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Pw(t,e){const n={get(o){const i=this.__v_raw,s=at(i),l=at(o);t||(yo(o,l)&&on(s,"get",o),on(s,"get",l));const{has:a}=Tl(s),c=e?ju:t?Hu:sn;if(a.call(s,o))return c(i.get(o));if(a.call(s,l))return c(i.get(l));i!==s&&i.get(o)},get size(){const o=this.__v_raw;return!t&&on(at(o),"iterate",Jo),Reflect.get(o,"size",o)},has(o){const i=this.__v_raw,s=at(i),l=at(o);return t||(yo(o,l)&&on(s,"has",o),on(s,"has",l)),o===l?i.has(o):i.has(o)||i.has(l)},forEach(o,i){const s=this,l=s.__v_raw,a=at(l),c=e?ju:t?Hu:sn;return!t&&on(a,"iterate",Jo),l.forEach((u,d)=>o.call(i,c(u),c(d),s))}};return dn(n,t?{add:El("add"),set:El("set"),delete:El("delete"),clear:El("clear")}:{add(o){!e&&!nr(o)&&!ni(o)&&(o=at(o));const i=at(this);return Tl(i).has.call(i,o)||(i.add(o),Vr(i,"add",o,o)),this},set(o,i){!e&&!nr(i)&&!ni(i)&&(i=at(i));const s=at(this),{has:l,get:a}=Tl(s);let c=l.call(s,o);c||(o=at(o),c=l.call(s,o));const u=a.call(s,o);return s.set(o,i),c?yo(i,u)&&Vr(s,"set",o,i):Vr(s,"add",o,i),this},delete(o){const i=at(this),{has:s,get:l}=Tl(i);let a=s.call(i,o);a||(o=at(o),a=s.call(i,o)),l&&l.call(i,o);const c=i.delete(o);return a&&Vr(i,"delete",o,void 0),c},clear(){const o=at(this),i=o.size!==0,s=o.clear();return i&&Vr(o,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=Nw(o,t,e)}),n}function nf(t,e){const n=Pw(t,e);return(r,o,i)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?r:Reflect.get(dt(n,o)&&o in r?n:r,o,i)}const $w={get:nf(!1,!1)},Dw={get:nf(!1,!0)},Iw={get:nf(!0,!1)};const gg=new WeakMap,yg=new WeakMap,bg=new WeakMap,Bw=new WeakMap;function Rw(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Lw(t){return t.__v_skip||!Object.isExtensible(t)?0:Rw(aw(t))}function fc(t){return ni(t)?t:rf(t,!1,Aw,$w,gg)}function Vw(t){return rf(t,!1,_w,Dw,yg)}function vg(t){return rf(t,!0,Mw,Iw,bg)}function rf(t,e,n,r,o){if(!kt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=o.get(t);if(i)return i;const s=Lw(t);if(s===0)return t;const l=new Proxy(t,s===2?r:n);return o.set(t,l),l}function Ri(t){return ni(t)?Ri(t.__v_raw):!!(t&&t.__v_isReactive)}function ni(t){return!!(t&&t.__v_isReadonly)}function nr(t){return!!(t&&t.__v_isShallow)}function of(t){return t?!!t.__v_raw:!1}function at(t){const e=t&&t.__v_raw;return e?at(e):t}function wg(t){return!dt(t,"__v_skip")&&Object.isExtensible(t)&&Qm(t,"__v_skip",!0),t}const sn=t=>kt(t)?fc(t):t,Hu=t=>kt(t)?vg(t):t;function It(t){return t?t.__v_isRef===!0:!1}function sf(t){return Fw(t,!1)}function Fw(t,e){return It(t)?t:new jw(t,e)}class jw{constructor(e,n){this.dep=new uc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:at(e),this._value=n?e:sn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||nr(e)||ni(e);e=r?e:at(e),yo(e,n)&&(this._rawValue=e,this._value=r?e:sn(e),this.dep.trigger())}}function bn(t){return It(t)?t.value:t}const Hw={get:(t,e,n)=>e==="__v_raw"?t:bn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const o=t[e];return It(o)&&!It(n)?(o.value=n,!0):Reflect.set(t,e,n,r)}};function Sg(t){return Ri(t)?t:new Proxy(t,Hw)}class zw{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new uc,{get:r,set:o}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=o}get value(){return this._value=this._get()}set value(e){this._set(e)}}function Kw(t){return new zw(t)}function Uw(t){const e=Re(t)?new Array(t.length):{};for(const n in t)e[n]=qw(t,n);return e}class Ww{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return kw(at(this._object),this._key)}}function qw(t,e,n){const r=t[e];return It(r)?r:new Ww(t,e,n)}class Jw{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new uc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ks-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&St!==this)return lg(this,!0),!0}get value(){const e=this.dep.track();return ug(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Gw(t,e,n=!1){let r,o;return qe(t)?r=t:(r=t.get,o=t.set),new Jw(r,o,n)}const Ol={},wa=new WeakMap;let Vo;function Yw(t,e=!1,n=Vo){if(n){let r=wa.get(n);r||wa.set(n,r=[]),r.push(t)}}function Xw(t,e,n=yt){const{immediate:r,deep:o,once:i,scheduler:s,augmentJob:l,call:a}=n,c=B=>o?B:nr(B)||o===!1||o===0?Fr(B,1):Fr(B);let u,d,h,m,g=!1,b=!1;if(It(t)?(d=()=>t.value,g=nr(t)):Ri(t)?(d=()=>c(t),g=!0):Re(t)?(b=!0,g=t.some(B=>Ri(B)||nr(B)),d=()=>t.map(B=>{if(It(B))return B.value;if(Ri(B))return c(B);if(qe(B))return a?a(B,2):B()})):qe(t)?e?d=a?()=>a(t,2):t:d=()=>{if(h){Ao();try{h()}finally{Mo()}}const B=Vo;Vo=u;try{return a?a(t,3,[m]):t(m)}finally{Vo=B}}:d=Cr,e&&o){const B=d,D=o===!0?1/0:o;d=()=>Fr(B(),D)}const k=og(),T=()=>{u.stop(),k&&k.active&&Xd(k.effects,u)};if(i&&e){const B=e;e=(...D)=>{B(...D),T()}}let A=b?new Array(t.length).fill(Ol):Ol;const N=B=>{if(!(!(u.flags&1)||!u.dirty&&!B))if(e){const D=u.run();if(o||g||(b?D.some((V,j)=>yo(V,A[j])):yo(D,A))){h&&h();const V=Vo;Vo=u;try{const j=[D,A===Ol?void 0:b&&A[0]===Ol?[]:A,m];a?a(e,3,j):e(...j),A=D}finally{Vo=V}}}else u.run()};return l&&l(N),u=new ig(d),u.scheduler=s?()=>s(N,!1):N,m=B=>Yw(B,!1,u),h=u.onStop=()=>{const B=wa.get(u);if(B){if(a)a(B,4);else for(const D of B)D();wa.delete(u)}},e?r?N(!0):A=u.run():s?s(N.bind(null,!0),!0):u.run(),T.pause=u.pause.bind(u),T.resume=u.resume.bind(u),T.stop=T,T}function Fr(t,e=1/0,n){if(e<=0||!kt(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,It(t))Fr(t.value,e,n);else if(Re(t))for(let r=0;r<t.length;r++)Fr(t[r],e,n);else if(ic(t)||Ii(t))t.forEach(r=>{Fr(r,e,n)});else if(Zm(t)){for(const r in t)Fr(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Fr(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function fl(t,e,n,r){try{return r?t(...r):t()}catch(o){hc(o,e,n)}}function Or(t,e,n,r){if(qe(t)){const o=fl(t,e,n,r);return o&&Ym(o)&&o.catch(i=>{hc(i,e,n)}),o}if(Re(t)){const o=[];for(let i=0;i<t.length;i++)o.push(Or(t[i],e,n,r));return o}}function hc(t,e,n,r=!0){const o=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:s}=e&&e.appContext.config||yt;if(e){let l=e.parent;const a=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const u=l.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,a,c)===!1)return}l=l.parent}if(i){Ao(),fl(i,null,10,[t,a,c]),Mo();return}}Zw(t,n,o,r,s)}function Zw(t,e,n,r=!0,o=!1){if(o)throw t;console.error(t)}const wn=[];let vr=-1;const Li=[];let ro=null,Ci=0;const kg=Promise.resolve();let Sa=null;function pc(t){const e=Sa||kg;return t?e.then(this?t.bind(this):t):e}function Qw(t){let e=vr+1,n=wn.length;for(;e<n;){const r=e+n>>>1,o=wn[r],i=Ws(o);i<t||i===t&&o.flags&2?e=r+1:n=r}return e}function lf(t){if(!(t.flags&1)){const e=Ws(t),n=wn[wn.length-1];!n||!(t.flags&2)&&e>=Ws(n)?wn.push(t):wn.splice(Qw(e),0,t),t.flags|=1,xg()}}function xg(){Sa||(Sa=kg.then(Tg))}function eS(t){Re(t)?Li.push(...t):ro&&t.id===-1?ro.splice(Ci+1,0,t):t.flags&1||(Li.push(t),t.flags|=1),xg()}function Ph(t,e,n=vr+1){for(;n<wn.length;n++){const r=wn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;wn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Cg(t){if(Li.length){const e=[...new Set(Li)].sort((n,r)=>Ws(n)-Ws(r));if(Li.length=0,ro){ro.push(...e);return}for(ro=e,Ci=0;Ci<ro.length;Ci++){const n=ro[Ci];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ro=null,Ci=0}}const Ws=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Tg(t){try{for(vr=0;vr<wn.length;vr++){const e=wn[vr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),fl(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;vr<wn.length;vr++){const e=wn[vr];e&&(e.flags&=-2)}vr=-1,wn.length=0,Cg(),Sa=null,(wn.length||Li.length)&&Tg()}}let Dn=null,Eg=null;function ka(t){const e=Dn;return Dn=t,Eg=t&&t.type.__scopeId||null,e}function Og(t,e=Dn,n){if(!e||t._n)return t;const r=(...o)=>{r._d&&Hh(-1);const i=ka(e);let s;try{s=t(...o)}finally{ka(i),r._d&&Hh(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function an(t,e){if(Dn===null)return t;const n=vc(Dn),r=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[i,s,l,a=yt]=e[o];i&&(qe(i)&&(i={mounted:i,updated:i}),i.deep&&Fr(s),r.push({dir:i,instance:n,value:s,oldValue:void 0,arg:l,modifiers:a}))}return t}function Do(t,e,n,r){const o=t.dirs,i=e&&e.dirs;for(let s=0;s<o.length;s++){const l=o[s];i&&(l.oldValue=i[s].value);let a=l.dir[r];a&&(Ao(),Or(a,n,8,[t.el,l,t,e]),Mo())}}const tS=Symbol("_vte"),nS=t=>t.__isTeleport;function af(t,e){t.shapeFlag&6&&t.component?(t.transition=e,af(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Ag(t,e){return qe(t)?dn({name:t.name},e,{setup:t}):t}function Mg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function xa(t,e,n,r,o=!1){if(Re(t)){t.forEach((g,b)=>xa(g,e&&(Re(e)?e[b]:e),n,r,o));return}if(Os(r)&&!o){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&xa(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?vc(r.component):r.el,s=o?null:i,{i:l,r:a}=t,c=e&&e.r,u=l.refs===yt?l.refs={}:l.refs,d=l.setupState,h=at(d),m=d===yt?()=>!1:g=>dt(h,g);if(c!=null&&c!==a&&(Rt(c)?(u[c]=null,m(c)&&(d[c]=null)):It(c)&&(c.value=null)),qe(a))fl(a,l,12,[s,u]);else{const g=Rt(a),b=It(a);if(g||b){const k=()=>{if(t.f){const T=g?m(a)?d[a]:u[a]:a.value;o?Re(T)&&Xd(T,i):Re(T)?T.includes(i)||T.push(i):g?(u[a]=[i],m(a)&&(d[a]=u[a])):(a.value=[i],t.k&&(u[t.k]=a.value))}else g?(u[a]=s,m(a)&&(d[a]=s)):b&&(a.value=s,t.k&&(u[t.k]=s))};s?(k.id=-1,zn(k,n)):k()}}}ac().requestIdleCallback;ac().cancelIdleCallback;const Os=t=>!!t.type.__asyncLoader,_g=t=>t.type.__isKeepAlive;function rS(t,e){Ng(t,"a",e)}function oS(t,e){Ng(t,"da",e)}function Ng(t,e,n=en){const r=t.__wdc||(t.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(mc(e,r,n),n){let o=n.parent;for(;o&&o.parent;)_g(o.parent.vnode)&&iS(r,e,n,o),o=o.parent}}function iS(t,e,n,r){const o=mc(e,t,r,!0);cf(()=>{Xd(r[e],o)},n)}function mc(t,e,n=en,r=!1){if(n){const o=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...s)=>{Ao();const l=hl(n),a=Or(e,n,t,s);return l(),Mo(),a});return r?o.unshift(i):o.push(i),i}}const Xr=t=>(e,n=en)=>{(!Js||t==="sp")&&mc(t,(...r)=>e(...r),n)},sS=Xr("bm"),Pg=Xr("m"),lS=Xr("bu"),aS=Xr("u"),$g=Xr("bum"),cf=Xr("um"),cS=Xr("sp"),uS=Xr("rtg"),dS=Xr("rtc");function fS(t,e=en){mc("ec",t,e)}const Dg="components",hS="directives";function Qe(t,e){return Ig(Dg,t,!0,e)||t}const pS=Symbol.for("v-ndc");function mS(t){return Ig(hS,t)}function Ig(t,e,n=!0,r=!1){const o=Dn||en;if(o){const i=o.type;if(t===Dg){const l=rk(i,!1);if(l&&(l===e||l===or(e)||l===lc(or(e))))return i}const s=$h(o[t]||i[t],e)||$h(o.appContext[t],e);return!s&&r?i:s}}function $h(t,e){return t&&(t[e]||t[or(e)]||t[lc(or(e))])}function pr(t,e,n,r){let o;const i=n,s=Re(t);if(s||Rt(t)){const l=s&&Ri(t);let a=!1;l&&(a=!nr(t),t=dc(t)),o=new Array(t.length);for(let c=0,u=t.length;c<u;c++)o[c]=e(a?sn(t[c]):t[c],c,void 0,i)}else if(typeof t=="number"){o=new Array(t);for(let l=0;l<t;l++)o[l]=e(l+1,l,void 0,i)}else if(kt(t))if(t[Symbol.iterator])o=Array.from(t,(l,a)=>e(l,a,void 0,i));else{const l=Object.keys(t);o=new Array(l.length);for(let a=0,c=l.length;a<c;a++){const u=l[a];o[a]=e(t[u],u,a,i)}}else o=[];return o}const zu=t=>t?ty(t)?vc(t):zu(t.parent):null,As=dn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>zu(t.parent),$root:t=>zu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Rg(t),$forceUpdate:t=>t.f||(t.f=()=>{lf(t.update)}),$nextTick:t=>t.n||(t.n=pc.bind(t.proxy)),$watch:t=>LS.bind(t)}),Yc=(t,e)=>t!==yt&&!t.__isScriptSetup&&dt(t,e),gS={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:o,props:i,accessCache:s,type:l,appContext:a}=t;let c;if(e[0]!=="$"){const m=s[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return o[e];case 4:return n[e];case 3:return i[e]}else{if(Yc(r,e))return s[e]=1,r[e];if(o!==yt&&dt(o,e))return s[e]=2,o[e];if((c=t.propsOptions[0])&&dt(c,e))return s[e]=3,i[e];if(n!==yt&&dt(n,e))return s[e]=4,n[e];Ku&&(s[e]=0)}}const u=As[e];let d,h;if(u)return e==="$attrs"&&on(t.attrs,"get",""),u(t);if((d=l.__cssModules)&&(d=d[e]))return d;if(n!==yt&&dt(n,e))return s[e]=4,n[e];if(h=a.config.globalProperties,dt(h,e))return h[e]},set({_:t},e,n){const{data:r,setupState:o,ctx:i}=t;return Yc(o,e)?(o[e]=n,!0):r!==yt&&dt(r,e)?(r[e]=n,!0):dt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:i}},s){let l;return!!n[s]||t!==yt&&dt(t,s)||Yc(e,s)||(l=i[0])&&dt(l,s)||dt(r,s)||dt(As,s)||dt(o.config.globalProperties,s)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:dt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Dh(t){return Re(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Ku=!0;function yS(t){const e=Rg(t),n=t.proxy,r=t.ctx;Ku=!1,e.beforeCreate&&Ih(e.beforeCreate,t,"bc");const{data:o,computed:i,methods:s,watch:l,provide:a,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:m,updated:g,activated:b,deactivated:k,beforeDestroy:T,beforeUnmount:A,destroyed:N,unmounted:B,render:D,renderTracked:V,renderTriggered:j,errorCaptured:K,serverPrefetch:E,expose:S,inheritAttrs:F,components:C,directives:ue,filters:Q}=e;if(c&&bS(c,r,null),s)for(const ee in s){const Ae=s[ee];qe(Ae)&&(r[ee]=Ae.bind(n))}if(o){const ee=o.call(n,n);kt(ee)&&(t.data=fc(ee))}if(Ku=!0,i)for(const ee in i){const Ae=i[ee],et=qe(Ae)?Ae.bind(n,n):qe(Ae.get)?Ae.get.bind(n,n):Cr,Ue=!qe(Ae)&&qe(Ae.set)?Ae.set.bind(n):Cr,ot=Ju({get:et,set:Ue});Object.defineProperty(r,ee,{enumerable:!0,configurable:!0,get:()=>ot.value,set:ht=>ot.value=ht})}if(l)for(const ee in l)Bg(l[ee],r,n,ee);if(a){const ee=qe(a)?a.call(n):a;Reflect.ownKeys(ee).forEach(Ae=>{CS(Ae,ee[Ae])})}u&&Ih(u,t,"c");function be(ee,Ae){Re(Ae)?Ae.forEach(et=>ee(et.bind(n))):Ae&&ee(Ae.bind(n))}if(be(sS,d),be(Pg,h),be(lS,m),be(aS,g),be(rS,b),be(oS,k),be(fS,K),be(dS,V),be(uS,j),be($g,A),be(cf,B),be(cS,E),Re(S))if(S.length){const ee=t.exposed||(t.exposed={});S.forEach(Ae=>{Object.defineProperty(ee,Ae,{get:()=>n[Ae],set:et=>n[Ae]=et})})}else t.exposed||(t.exposed={});D&&t.render===Cr&&(t.render=D),F!=null&&(t.inheritAttrs=F),C&&(t.components=C),ue&&(t.directives=ue),E&&Mg(t)}function bS(t,e,n=Cr){Re(t)&&(t=Uu(t));for(const r in t){const o=t[r];let i;kt(o)?"default"in o?i=Yl(o.from||r,o.default,!0):i=Yl(o.from||r):i=Yl(o),It(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:s=>i.value=s}):e[r]=i}}function Ih(t,e,n){Or(Re(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Bg(t,e,n,r){let o=r.includes(".")?Yg(n,r):()=>n[r];if(Rt(t)){const i=e[t];qe(i)&&Xl(o,i)}else if(qe(t))Xl(o,t.bind(n));else if(kt(t))if(Re(t))t.forEach(i=>Bg(i,e,n,r));else{const i=qe(t.handler)?t.handler.bind(n):e[t.handler];qe(i)&&Xl(o,i,t)}}function Rg(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:o,optionsCache:i,config:{optionMergeStrategies:s}}=t.appContext,l=i.get(e);let a;return l?a=l:!o.length&&!n&&!r?a=e:(a={},o.length&&o.forEach(c=>Ca(a,c,s,!0)),Ca(a,e,s)),kt(e)&&i.set(e,a),a}function Ca(t,e,n,r=!1){const{mixins:o,extends:i}=e;i&&Ca(t,i,n,!0),o&&o.forEach(s=>Ca(t,s,n,!0));for(const s in e)if(!(r&&s==="expose")){const l=vS[s]||n&&n[s];t[s]=l?l(t[s],e[s]):e[s]}return t}const vS={data:Bh,props:Rh,emits:Rh,methods:ps,computed:ps,beforeCreate:gn,created:gn,beforeMount:gn,mounted:gn,beforeUpdate:gn,updated:gn,beforeDestroy:gn,beforeUnmount:gn,destroyed:gn,unmounted:gn,activated:gn,deactivated:gn,errorCaptured:gn,serverPrefetch:gn,components:ps,directives:ps,watch:SS,provide:Bh,inject:wS};function Bh(t,e){return e?t?function(){return dn(qe(t)?t.call(this,this):t,qe(e)?e.call(this,this):e)}:e:t}function wS(t,e){return ps(Uu(t),Uu(e))}function Uu(t){if(Re(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function gn(t,e){return t?[...new Set([].concat(t,e))]:e}function ps(t,e){return t?dn(Object.create(null),t,e):e}function Rh(t,e){return t?Re(t)&&Re(e)?[...new Set([...t,...e])]:dn(Object.create(null),Dh(t),Dh(e??{})):e}function SS(t,e){if(!t)return e;if(!e)return t;const n=dn(Object.create(null),t);for(const r in e)n[r]=gn(t[r],e[r]);return n}function Lg(){return{app:null,config:{isNativeTag:sw,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let kS=0;function xS(t,e){return function(r,o=null){qe(r)||(r=dn({},r)),o!=null&&!kt(o)&&(o=null);const i=Lg(),s=new WeakSet,l=[];let a=!1;const c=i.app={_uid:kS++,_component:r,_props:o,_container:null,_context:i,_instance:null,version:ik,get config(){return i.config},set config(u){},use(u,...d){return s.has(u)||(u&&qe(u.install)?(s.add(u),u.install(c,...d)):qe(u)&&(s.add(u),u(c,...d))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,d){return d?(i.components[u]=d,c):i.components[u]},directive(u,d){return d?(i.directives[u]=d,c):i.directives[u]},mount(u,d,h){if(!a){const m=c._ceVNode||wt(r,o);return m.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),t(m,u,h),a=!0,c._container=u,u.__vue_app__=c,vc(m.component)}},onUnmount(u){l.push(u)},unmount(){a&&(Or(l,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,d){return i.provides[u]=d,c},runWithContext(u){const d=Vi;Vi=c;try{return u()}finally{Vi=d}}};return c}}let Vi=null;function CS(t,e){if(en){let n=en.provides;const r=en.parent&&en.parent.provides;r===n&&(n=en.provides=Object.create(r)),n[t]=e}}function Yl(t,e,n=!1){const r=en||Dn;if(r||Vi){const o=Vi?Vi._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(o&&t in o)return o[t];if(arguments.length>1)return n&&qe(e)?e.call(r&&r.proxy):e}}const Vg={},Fg=()=>Object.create(Vg),jg=t=>Object.getPrototypeOf(t)===Vg;function TS(t,e,n,r=!1){const o={},i=Fg();t.propsDefaults=Object.create(null),Hg(t,e,o,i);for(const s in t.propsOptions[0])s in o||(o[s]=void 0);n?t.props=r?o:Vw(o):t.type.props?t.props=o:t.props=i,t.attrs=i}function ES(t,e,n,r){const{props:o,attrs:i,vnode:{patchFlag:s}}=t,l=at(o),[a]=t.propsOptions;let c=!1;if((r||s>0)&&!(s&16)){if(s&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(gc(t.emitsOptions,h))continue;const m=e[h];if(a)if(dt(i,h))m!==i[h]&&(i[h]=m,c=!0);else{const g=or(h);o[g]=Wu(a,l,g,m,t,!1)}else m!==i[h]&&(i[h]=m,c=!0)}}}else{Hg(t,e,o,i)&&(c=!0);let u;for(const d in l)(!e||!dt(e,d)&&((u=ci(d))===d||!dt(e,u)))&&(a?n&&(n[d]!==void 0||n[u]!==void 0)&&(o[d]=Wu(a,l,d,void 0,t,!0)):delete o[d]);if(i!==l)for(const d in i)(!e||!dt(e,d))&&(delete i[d],c=!0)}c&&Vr(t.attrs,"set","")}function Hg(t,e,n,r){const[o,i]=t.propsOptions;let s=!1,l;if(e)for(let a in e){if(Cs(a))continue;const c=e[a];let u;o&&dt(o,u=or(a))?!i||!i.includes(u)?n[u]=c:(l||(l={}))[u]=c:gc(t.emitsOptions,a)||(!(a in r)||c!==r[a])&&(r[a]=c,s=!0)}if(i){const a=at(n),c=l||yt;for(let u=0;u<i.length;u++){const d=i[u];n[d]=Wu(o,a,d,c[d],t,!dt(c,d))}}return s}function Wu(t,e,n,r,o,i){const s=t[n];if(s!=null){const l=dt(s,"default");if(l&&r===void 0){const a=s.default;if(s.type!==Function&&!s.skipFactory&&qe(a)){const{propsDefaults:c}=o;if(n in c)r=c[n];else{const u=hl(o);r=c[n]=a.call(null,e),u()}}else r=a;o.ce&&o.ce._setProp(n,r)}s[0]&&(i&&!l?r=!1:s[1]&&(r===""||r===ci(n))&&(r=!0))}return r}const OS=new WeakMap;function zg(t,e,n=!1){const r=n?OS:e.propsCache,o=r.get(t);if(o)return o;const i=t.props,s={},l=[];let a=!1;if(!qe(t)){const u=d=>{a=!0;const[h,m]=zg(d,e,!0);dn(s,h),m&&l.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!a)return kt(t)&&r.set(t,Di),Di;if(Re(i))for(let u=0;u<i.length;u++){const d=or(i[u]);Lh(d)&&(s[d]=yt)}else if(i)for(const u in i){const d=or(u);if(Lh(d)){const h=i[u],m=s[d]=Re(h)||qe(h)?{type:h}:dn({},h),g=m.type;let b=!1,k=!0;if(Re(g))for(let T=0;T<g.length;++T){const A=g[T],N=qe(A)&&A.name;if(N==="Boolean"){b=!0;break}else N==="String"&&(k=!1)}else b=qe(g)&&g.name==="Boolean";m[0]=b,m[1]=k,(b||dt(m,"default"))&&l.push(d)}}const c=[s,l];return kt(t)&&r.set(t,c),c}function Lh(t){return t[0]!=="$"&&!Cs(t)}const Kg=t=>t[0]==="_"||t==="$stable",uf=t=>Re(t)?t.map(kr):[kr(t)],AS=(t,e,n)=>{if(e._n)return e;const r=Og((...o)=>uf(e(...o)),n);return r._c=!1,r},Ug=(t,e,n)=>{const r=t._ctx;for(const o in t){if(Kg(o))continue;const i=t[o];if(qe(i))e[o]=AS(o,i,r);else if(i!=null){const s=uf(i);e[o]=()=>s}}},Wg=(t,e)=>{const n=uf(e);t.slots.default=()=>n},qg=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},MS=(t,e,n)=>{const r=t.slots=Fg();if(t.vnode.shapeFlag&32){const o=e._;o?(qg(r,e,n),n&&Qm(r,"_",o,!0)):Ug(e,r)}else e&&Wg(t,e)},_S=(t,e,n)=>{const{vnode:r,slots:o}=t;let i=!0,s=yt;if(r.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:qg(o,e,n):(i=!e.$stable,Ug(e,o)),s=e}else e&&(Wg(t,e),s={default:1});if(i)for(const l in o)!Kg(l)&&s[l]==null&&delete o[l]},zn=US;function NS(t){return PS(t)}function PS(t,e){const n=ac();n.__VUE__=!0;const{insert:r,remove:o,patchProp:i,createElement:s,createText:l,createComment:a,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:m=Cr,insertStaticContent:g}=t,b=(O,_,R,L=null,U=null,J=null,oe=void 0,G=null,Z=!!_.dynamicChildren)=>{if(O===_)return;O&&!ds(O,_)&&(L=H(O),ht(O,U,J,!0),O=null),_.patchFlag===-2&&(Z=!1,_.dynamicChildren=null);const{type:Y,ref:ge,shapeFlag:le}=_;switch(Y){case yc:k(O,_,R,L);break;case ri:T(O,_,R,L);break;case Zc:O==null&&A(_,R,L,oe);break;case rt:C(O,_,R,L,U,J,oe,G,Z);break;default:le&1?D(O,_,R,L,U,J,oe,G,Z):le&6?ue(O,_,R,L,U,J,oe,G,Z):(le&64||le&128)&&Y.process(O,_,R,L,U,J,oe,G,Z,W)}ge!=null&&U&&xa(ge,O&&O.ref,J,_||O,!_)},k=(O,_,R,L)=>{if(O==null)r(_.el=l(_.children),R,L);else{const U=_.el=O.el;_.children!==O.children&&c(U,_.children)}},T=(O,_,R,L)=>{O==null?r(_.el=a(_.children||""),R,L):_.el=O.el},A=(O,_,R,L)=>{[O.el,O.anchor]=g(O.children,_,R,L,O.el,O.anchor)},N=({el:O,anchor:_},R,L)=>{let U;for(;O&&O!==_;)U=h(O),r(O,R,L),O=U;r(_,R,L)},B=({el:O,anchor:_})=>{let R;for(;O&&O!==_;)R=h(O),o(O),O=R;o(_)},D=(O,_,R,L,U,J,oe,G,Z)=>{_.type==="svg"?oe="svg":_.type==="math"&&(oe="mathml"),O==null?V(_,R,L,U,J,oe,G,Z):E(O,_,U,J,oe,G,Z)},V=(O,_,R,L,U,J,oe,G)=>{let Z,Y;const{props:ge,shapeFlag:le,transition:he,dirs:pe}=O;if(Z=O.el=s(O.type,J,ge&&ge.is,ge),le&8?u(Z,O.children):le&16&&K(O.children,Z,null,L,U,Xc(O,J),oe,G),pe&&Do(O,null,L,"created"),j(Z,O,O.scopeId,oe,L),ge){for(const ke in ge)ke!=="value"&&!Cs(ke)&&i(Z,ke,null,ge[ke],J,L);"value"in ge&&i(Z,"value",null,ge.value,J),(Y=ge.onVnodeBeforeMount)&&br(Y,L,O)}pe&&Do(O,null,L,"beforeMount");const te=$S(U,he);te&&he.beforeEnter(Z),r(Z,_,R),((Y=ge&&ge.onVnodeMounted)||te||pe)&&zn(()=>{Y&&br(Y,L,O),te&&he.enter(Z),pe&&Do(O,null,L,"mounted")},U)},j=(O,_,R,L,U)=>{if(R&&m(O,R),L)for(let J=0;J<L.length;J++)m(O,L[J]);if(U){let J=U.subTree;if(_===J||Zg(J.type)&&(J.ssContent===_||J.ssFallback===_)){const oe=U.vnode;j(O,oe,oe.scopeId,oe.slotScopeIds,U.parent)}}},K=(O,_,R,L,U,J,oe,G,Z=0)=>{for(let Y=Z;Y<O.length;Y++){const ge=O[Y]=G?oo(O[Y]):kr(O[Y]);b(null,ge,_,R,L,U,J,oe,G)}},E=(O,_,R,L,U,J,oe)=>{const G=_.el=O.el;let{patchFlag:Z,dynamicChildren:Y,dirs:ge}=_;Z|=O.patchFlag&16;const le=O.props||yt,he=_.props||yt;let pe;if(R&&Io(R,!1),(pe=he.onVnodeBeforeUpdate)&&br(pe,R,_,O),ge&&Do(_,O,R,"beforeUpdate"),R&&Io(R,!0),(le.innerHTML&&he.innerHTML==null||le.textContent&&he.textContent==null)&&u(G,""),Y?S(O.dynamicChildren,Y,G,R,L,Xc(_,U),J):oe||Ae(O,_,G,null,R,L,Xc(_,U),J,!1),Z>0){if(Z&16)F(G,le,he,R,U);else if(Z&2&&le.class!==he.class&&i(G,"class",null,he.class,U),Z&4&&i(G,"style",le.style,he.style,U),Z&8){const te=_.dynamicProps;for(let ke=0;ke<te.length;ke++){const Oe=te[ke],me=le[Oe],w=he[Oe];(w!==me||Oe==="value")&&i(G,Oe,me,w,U,R)}}Z&1&&O.children!==_.children&&u(G,_.children)}else!oe&&Y==null&&F(G,le,he,R,U);((pe=he.onVnodeUpdated)||ge)&&zn(()=>{pe&&br(pe,R,_,O),ge&&Do(_,O,R,"updated")},L)},S=(O,_,R,L,U,J,oe)=>{for(let G=0;G<_.length;G++){const Z=O[G],Y=_[G],ge=Z.el&&(Z.type===rt||!ds(Z,Y)||Z.shapeFlag&70)?d(Z.el):R;b(Z,Y,ge,null,L,U,J,oe,!0)}},F=(O,_,R,L,U)=>{if(_!==R){if(_!==yt)for(const J in _)!Cs(J)&&!(J in R)&&i(O,J,_[J],null,U,L);for(const J in R){if(Cs(J))continue;const oe=R[J],G=_[J];oe!==G&&J!=="value"&&i(O,J,G,oe,U,L)}"value"in R&&i(O,"value",_.value,R.value,U)}},C=(O,_,R,L,U,J,oe,G,Z)=>{const Y=_.el=O?O.el:l(""),ge=_.anchor=O?O.anchor:l("");let{patchFlag:le,dynamicChildren:he,slotScopeIds:pe}=_;pe&&(G=G?G.concat(pe):pe),O==null?(r(Y,R,L),r(ge,R,L),K(_.children||[],R,ge,U,J,oe,G,Z)):le>0&&le&64&&he&&O.dynamicChildren?(S(O.dynamicChildren,he,R,U,J,oe,G),(_.key!=null||U&&_===U.subTree)&&Jg(O,_,!0)):Ae(O,_,R,ge,U,J,oe,G,Z)},ue=(O,_,R,L,U,J,oe,G,Z)=>{_.slotScopeIds=G,O==null?_.shapeFlag&512?U.ctx.activate(_,R,L,oe,Z):Q(_,R,L,U,J,oe,Z):xe(O,_,Z)},Q=(O,_,R,L,U,J,oe)=>{const G=O.component=ZS(O,L,U);if(_g(O)&&(G.ctx.renderer=W),QS(G,!1,oe),G.asyncDep){if(U&&U.registerDep(G,be,oe),!O.el){const Z=G.subTree=wt(ri);T(null,Z,_,R)}}else be(G,O,_,R,U,J,oe)},xe=(O,_,R)=>{const L=_.component=O.component;if(zS(O,_,R))if(L.asyncDep&&!L.asyncResolved){ee(L,_,R);return}else L.next=_,L.update();else _.el=O.el,L.vnode=_},be=(O,_,R,L,U,J,oe)=>{const G=()=>{if(O.isMounted){let{next:le,bu:he,u:pe,parent:te,vnode:ke}=O;{const x=Gg(O);if(x){le&&(le.el=ke.el,ee(O,le,oe)),x.asyncDep.then(()=>{O.isUnmounted||G()});return}}let Oe=le,me;Io(O,!1),le?(le.el=ke.el,ee(O,le,oe)):le=ke,he&&Gl(he),(me=le.props&&le.props.onVnodeBeforeUpdate)&&br(me,te,le,ke),Io(O,!0);const w=Fh(O),y=O.subTree;O.subTree=w,b(y,w,d(y.el),H(y),O,U,J),le.el=w.el,Oe===null&&KS(O,w.el),pe&&zn(pe,U),(me=le.props&&le.props.onVnodeUpdated)&&zn(()=>br(me,te,le,ke),U)}else{let le;const{el:he,props:pe}=_,{bm:te,m:ke,parent:Oe,root:me,type:w}=O,y=Os(_);Io(O,!1),te&&Gl(te),!y&&(le=pe&&pe.onVnodeBeforeMount)&&br(le,Oe,_),Io(O,!0);{me.ce&&me.ce._injectChildStyle(w);const x=O.subTree=Fh(O);b(null,x,R,L,O,U,J),_.el=x.el}if(ke&&zn(ke,U),!y&&(le=pe&&pe.onVnodeMounted)){const x=_;zn(()=>br(le,Oe,x),U)}(_.shapeFlag&256||Oe&&Os(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&O.a&&zn(O.a,U),O.isMounted=!0,_=R=L=null}};O.scope.on();const Z=O.effect=new ig(G);O.scope.off();const Y=O.update=Z.run.bind(Z),ge=O.job=Z.runIfDirty.bind(Z);ge.i=O,ge.id=O.uid,Z.scheduler=()=>lf(ge),Io(O,!0),Y()},ee=(O,_,R)=>{_.component=O;const L=O.vnode.props;O.vnode=_,O.next=null,ES(O,_.props,L,R),_S(O,_.children,R),Ao(),Ph(O),Mo()},Ae=(O,_,R,L,U,J,oe,G,Z=!1)=>{const Y=O&&O.children,ge=O?O.shapeFlag:0,le=_.children,{patchFlag:he,shapeFlag:pe}=_;if(he>0){if(he&128){Ue(Y,le,R,L,U,J,oe,G,Z);return}else if(he&256){et(Y,le,R,L,U,J,oe,G,Z);return}}pe&8?(ge&16&&At(Y,U,J),le!==Y&&u(R,le)):ge&16?pe&16?Ue(Y,le,R,L,U,J,oe,G,Z):At(Y,U,J,!0):(ge&8&&u(R,""),pe&16&&K(le,R,L,U,J,oe,G,Z))},et=(O,_,R,L,U,J,oe,G,Z)=>{O=O||Di,_=_||Di;const Y=O.length,ge=_.length,le=Math.min(Y,ge);let he;for(he=0;he<le;he++){const pe=_[he]=Z?oo(_[he]):kr(_[he]);b(O[he],pe,R,null,U,J,oe,G,Z)}Y>ge?At(O,U,J,!0,!1,le):K(_,R,L,U,J,oe,G,Z,le)},Ue=(O,_,R,L,U,J,oe,G,Z)=>{let Y=0;const ge=_.length;let le=O.length-1,he=ge-1;for(;Y<=le&&Y<=he;){const pe=O[Y],te=_[Y]=Z?oo(_[Y]):kr(_[Y]);if(ds(pe,te))b(pe,te,R,null,U,J,oe,G,Z);else break;Y++}for(;Y<=le&&Y<=he;){const pe=O[le],te=_[he]=Z?oo(_[he]):kr(_[he]);if(ds(pe,te))b(pe,te,R,null,U,J,oe,G,Z);else break;le--,he--}if(Y>le){if(Y<=he){const pe=he+1,te=pe<ge?_[pe].el:L;for(;Y<=he;)b(null,_[Y]=Z?oo(_[Y]):kr(_[Y]),R,te,U,J,oe,G,Z),Y++}}else if(Y>he)for(;Y<=le;)ht(O[Y],U,J,!0),Y++;else{const pe=Y,te=Y,ke=new Map;for(Y=te;Y<=he;Y++){const re=_[Y]=Z?oo(_[Y]):kr(_[Y]);re.key!=null&&ke.set(re.key,Y)}let Oe,me=0;const w=he-te+1;let y=!1,x=0;const $=new Array(w);for(Y=0;Y<w;Y++)$[Y]=0;for(Y=pe;Y<=le;Y++){const re=O[Y];if(me>=w){ht(re,U,J,!0);continue}let ie;if(re.key!=null)ie=ke.get(re.key);else for(Oe=te;Oe<=he;Oe++)if($[Oe-te]===0&&ds(re,_[Oe])){ie=Oe;break}ie===void 0?ht(re,U,J,!0):($[ie-te]=Y+1,ie>=x?x=ie:y=!0,b(re,_[ie],R,null,U,J,oe,G,Z),me++)}const I=y?DS($):Di;for(Oe=I.length-1,Y=w-1;Y>=0;Y--){const re=te+Y,ie=_[re],Te=re+1<ge?_[re+1].el:L;$[Y]===0?b(null,ie,R,Te,U,J,oe,G,Z):y&&(Oe<0||Y!==I[Oe]?ot(ie,R,Te,2):Oe--)}}},ot=(O,_,R,L,U=null)=>{const{el:J,type:oe,transition:G,children:Z,shapeFlag:Y}=O;if(Y&6){ot(O.component.subTree,_,R,L);return}if(Y&128){O.suspense.move(_,R,L);return}if(Y&64){oe.move(O,_,R,W);return}if(oe===rt){r(J,_,R);for(let le=0;le<Z.length;le++)ot(Z[le],_,R,L);r(O.anchor,_,R);return}if(oe===Zc){N(O,_,R);return}if(L!==2&&Y&1&&G)if(L===0)G.beforeEnter(J),r(J,_,R),zn(()=>G.enter(J),U);else{const{leave:le,delayLeave:he,afterLeave:pe}=G,te=()=>r(J,_,R),ke=()=>{le(J,()=>{te(),pe&&pe()})};he?he(J,te,ke):ke()}else r(J,_,R)},ht=(O,_,R,L=!1,U=!1)=>{const{type:J,props:oe,ref:G,children:Z,dynamicChildren:Y,shapeFlag:ge,patchFlag:le,dirs:he,cacheIndex:pe}=O;if(le===-2&&(U=!1),G!=null&&xa(G,null,R,O,!0),pe!=null&&(_.renderCache[pe]=void 0),ge&256){_.ctx.deactivate(O);return}const te=ge&1&&he,ke=!Os(O);let Oe;if(ke&&(Oe=oe&&oe.onVnodeBeforeUnmount)&&br(Oe,_,O),ge&6)tt(O.component,R,L);else{if(ge&128){O.suspense.unmount(R,L);return}te&&Do(O,null,_,"beforeUnmount"),ge&64?O.type.remove(O,_,R,W,L):Y&&!Y.hasOnce&&(J!==rt||le>0&&le&64)?At(Y,_,R,!1,!0):(J===rt&&le&384||!U&&ge&16)&&At(Z,_,R),L&&Lt(O)}(ke&&(Oe=oe&&oe.onVnodeUnmounted)||te)&&zn(()=>{Oe&&br(Oe,_,O),te&&Do(O,null,_,"unmounted")},R)},Lt=O=>{const{type:_,el:R,anchor:L,transition:U}=O;if(_===rt){Me(R,L);return}if(_===Zc){B(O);return}const J=()=>{o(R),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(O.shapeFlag&1&&U&&!U.persisted){const{leave:oe,delayLeave:G}=U,Z=()=>oe(R,J);G?G(O.el,J,Z):Z()}else J()},Me=(O,_)=>{let R;for(;O!==_;)R=h(O),o(O),O=R;o(_)},tt=(O,_,R)=>{const{bum:L,scope:U,job:J,subTree:oe,um:G,m:Z,a:Y}=O;Vh(Z),Vh(Y),L&&Gl(L),U.stop(),J&&(J.flags|=8,ht(oe,O,_,R)),G&&zn(G,_),zn(()=>{O.isUnmounted=!0},_),_&&_.pendingBranch&&!_.isUnmounted&&O.asyncDep&&!O.asyncResolved&&O.suspenseId===_.pendingId&&(_.deps--,_.deps===0&&_.resolve())},At=(O,_,R,L=!1,U=!1,J=0)=>{for(let oe=J;oe<O.length;oe++)ht(O[oe],_,R,L,U)},H=O=>{if(O.shapeFlag&6)return H(O.component.subTree);if(O.shapeFlag&128)return O.suspense.next();const _=h(O.anchor||O.el),R=_&&_[tS];return R?h(R):_};let z=!1;const q=(O,_,R)=>{O==null?_._vnode&&ht(_._vnode,null,null,!0):b(_._vnode||null,O,_,null,null,null,R),_._vnode=O,z||(z=!0,Ph(),Cg(),z=!1)},W={p:b,um:ht,m:ot,r:Lt,mt:Q,mc:K,pc:Ae,pbc:S,n:H,o:t};return{render:q,hydrate:void 0,createApp:xS(q)}}function Xc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Io({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function $S(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Jg(t,e,n=!1){const r=t.children,o=e.children;if(Re(r)&&Re(o))for(let i=0;i<r.length;i++){const s=r[i];let l=o[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=o[i]=oo(o[i]),l.el=s.el),!n&&l.patchFlag!==-2&&Jg(s,l)),l.type===yc&&(l.el=s.el)}}function DS(t){const e=t.slice(),n=[0];let r,o,i,s,l;const a=t.length;for(r=0;r<a;r++){const c=t[r];if(c!==0){if(o=n[n.length-1],t[o]<c){e[r]=o,n.push(r);continue}for(i=0,s=n.length-1;i<s;)l=i+s>>1,t[n[l]]<c?i=l+1:s=l;c<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,s=n[i-1];i-- >0;)n[i]=s,s=e[s];return n}function Gg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Gg(e)}function Vh(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const IS=Symbol.for("v-scx"),BS=()=>Yl(IS);function RS(t,e){return df(t,null,e)}function Xl(t,e,n){return df(t,e,n)}function df(t,e,n=yt){const{immediate:r,deep:o,flush:i,once:s}=n,l=dn({},n),a=e&&r||!e&&i!=="post";let c;if(Js){if(i==="sync"){const m=BS();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!a){const m=()=>{};return m.stop=Cr,m.resume=Cr,m.pause=Cr,m}}const u=en;l.call=(m,g,b)=>Or(m,u,g,b);let d=!1;i==="post"?l.scheduler=m=>{zn(m,u&&u.suspense)}:i!=="sync"&&(d=!0,l.scheduler=(m,g)=>{g?m():lf(m)}),l.augmentJob=m=>{e&&(m.flags|=4),d&&(m.flags|=2,u&&(m.id=u.uid,m.i=u))};const h=Xw(t,e,l);return Js&&(c?c.push(h):a&&h()),h}function LS(t,e,n){const r=this.proxy,o=Rt(t)?t.includes(".")?Yg(r,t):()=>r[t]:t.bind(r,r);let i;qe(e)?i=e:(i=e.handler,n=e);const s=hl(this),l=df(o,i.bind(r),n);return s(),l}function Yg(t,e){const n=e.split(".");return()=>{let r=t;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}const VS=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${or(e)}Modifiers`]||t[`${ci(e)}Modifiers`];function FS(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||yt;let o=n;const i=e.startsWith("update:"),s=i&&VS(r,e.slice(7));s&&(s.trim&&(o=n.map(u=>Rt(u)?u.trim():u)),s.number&&(o=n.map(Lu)));let l,a=r[l=Uc(e)]||r[l=Uc(or(e))];!a&&i&&(a=r[l=Uc(ci(e))]),a&&Or(a,t,6,o);const c=r[l+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Or(c,t,6,o)}}function Xg(t,e,n=!1){const r=e.emitsCache,o=r.get(t);if(o!==void 0)return o;const i=t.emits;let s={},l=!1;if(!qe(t)){const a=c=>{const u=Xg(c,e,!0);u&&(l=!0,dn(s,u))};!n&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!i&&!l?(kt(t)&&r.set(t,null),null):(Re(i)?i.forEach(a=>s[a]=null):dn(s,i),kt(t)&&r.set(t,s),s)}function gc(t,e){return!t||!oc(e)?!1:(e=e.slice(2).replace(/Once$/,""),dt(t,e[0].toLowerCase()+e.slice(1))||dt(t,ci(e))||dt(t,e))}function Fh(t){const{type:e,vnode:n,proxy:r,withProxy:o,propsOptions:[i],slots:s,attrs:l,emit:a,render:c,renderCache:u,props:d,data:h,setupState:m,ctx:g,inheritAttrs:b}=t,k=ka(t);let T,A;try{if(n.shapeFlag&4){const B=o||r,D=B;T=kr(c.call(D,B,u,d,m,h,g)),A=l}else{const B=e;T=kr(B.length>1?B(d,{attrs:l,slots:s,emit:a}):B(d,null)),A=e.props?l:jS(l)}}catch(B){Ms.length=0,hc(B,t,1),T=wt(ri)}let N=T;if(A&&b!==!1){const B=Object.keys(A),{shapeFlag:D}=N;B.length&&D&7&&(i&&B.some(Yd)&&(A=HS(A,i)),N=qi(N,A,!1,!0))}return n.dirs&&(N=qi(N,null,!1,!0),N.dirs=N.dirs?N.dirs.concat(n.dirs):n.dirs),n.transition&&af(N,n.transition),T=N,ka(k),T}const jS=t=>{let e;for(const n in t)(n==="class"||n==="style"||oc(n))&&((e||(e={}))[n]=t[n]);return e},HS=(t,e)=>{const n={};for(const r in t)(!Yd(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function zS(t,e,n){const{props:r,children:o,component:i}=t,{props:s,children:l,patchFlag:a}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return r?jh(r,s,c):!!s;if(a&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(s[h]!==r[h]&&!gc(c,h))return!0}}}else return(o||l)&&(!l||!l.$stable)?!0:r===s?!1:r?s?jh(r,s,c):!0:!!s;return!1}function jh(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let o=0;o<r.length;o++){const i=r[o];if(e[i]!==t[i]&&!gc(n,i))return!0}return!1}function KS({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Zg=t=>t.__isSuspense;function US(t,e){e&&e.pendingBranch?Re(t)?e.effects.push(...t):e.effects.push(t):eS(t)}const rt=Symbol.for("v-fgt"),yc=Symbol.for("v-txt"),ri=Symbol.for("v-cmt"),Zc=Symbol.for("v-stc"),Ms=[];let qn=null;function X(t=!1){Ms.push(qn=t?null:[])}function WS(){Ms.pop(),qn=Ms[Ms.length-1]||null}let qs=1;function Hh(t,e=!1){qs+=t,t<0&&qn&&e&&(qn.hasOnce=!0)}function Qg(t){return t.dynamicChildren=qs>0?qn||Di:null,WS(),qs>0&&qn&&qn.push(t),t}function fe(t,e,n,r,o,i){return Qg(P(t,e,n,r,o,i,!0))}function xt(t,e,n,r,o){return Qg(wt(t,e,n,r,o,!0))}function Ta(t){return t?t.__v_isVNode===!0:!1}function ds(t,e){return t.type===e.type&&t.key===e.key}const ey=({key:t})=>t??null,Zl=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Rt(t)||It(t)||qe(t)?{i:Dn,r:t,k:e,f:!!n}:t:null);function P(t,e=null,n=null,r=0,o=null,i=t===rt?0:1,s=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ey(e),ref:e&&Zl(e),scopeId:Eg,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Dn};return l?(ff(a,n),i&128&&t.normalize(a)):n&&(a.shapeFlag|=Rt(n)?8:16),qs>0&&!s&&qn&&(a.patchFlag>0||i&6)&&a.patchFlag!==32&&qn.push(a),a}const wt=qS;function qS(t,e=null,n=null,r=0,o=null,i=!1){if((!t||t===pS)&&(t=ri),Ta(t)){const l=qi(t,e,!0);return n&&ff(l,n),qs>0&&!i&&qn&&(l.shapeFlag&6?qn[qn.indexOf(t)]=l:qn.push(l)),l.patchFlag=-2,l}if(ok(t)&&(t=t.__vccOpts),e){e=JS(e);let{class:l,style:a}=e;l&&!Rt(l)&&(e.class=dr(l)),kt(a)&&(of(a)&&!Re(a)&&(a=dn({},a)),e.style=Bi(a))}const s=Rt(t)?1:Zg(t)?128:nS(t)?64:kt(t)?4:qe(t)?2:0;return P(t,e,n,r,o,s,i,!0)}function JS(t){return t?of(t)||jg(t)?dn({},t):t:null}function qi(t,e,n=!1,r=!1){const{props:o,ref:i,patchFlag:s,children:l,transition:a}=t,c=e?GS(o||{},e):o,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&ey(c),ref:e&&e.ref?n&&i?Re(i)?i.concat(Zl(e)):[i,Zl(e)]:Zl(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==rt?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&qi(t.ssContent),ssFallback:t.ssFallback&&qi(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&r&&af(u,a.clone(u)),u}function Qn(t=" ",e=0){return wt(yc,null,t,e)}function He(t="",e=!1){return e?(X(),xt(ri,null,t)):wt(ri,null,t)}function kr(t){return t==null||typeof t=="boolean"?wt(ri):Re(t)?wt(rt,null,t.slice()):Ta(t)?oo(t):wt(yc,null,String(t))}function oo(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:qi(t)}function ff(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Re(e))n=16;else if(typeof e=="object")if(r&65){const o=e.default;o&&(o._c&&(o._d=!1),ff(t,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!jg(e)?e._ctx=Dn:o===3&&Dn&&(Dn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else qe(e)?(e={default:e,_ctx:Dn},n=32):(e=String(e),r&64?(n=16,e=[Qn(e)]):n=8);t.children=e,t.shapeFlag|=n}function GS(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const o in r)if(o==="class")e.class!==r.class&&(e.class=dr([e.class,r.class]));else if(o==="style")e.style=Bi([e.style,r.style]);else if(oc(o)){const i=e[o],s=r[o];s&&i!==s&&!(Re(i)&&i.includes(s))&&(e[o]=i?[].concat(i,s):s)}else o!==""&&(e[o]=r[o])}return e}function br(t,e,n,r=null){Or(t,e,7,[n,r])}const YS=Lg();let XS=0;function ZS(t,e,n){const r=t.type,o=(e?e.appContext:t.appContext)||YS,i={uid:XS++,vnode:t,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new bw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zg(r,o),emitsOptions:Xg(r,o),emit:null,emitted:null,propsDefaults:yt,inheritAttrs:r.inheritAttrs,ctx:yt,data:yt,props:yt,attrs:yt,slots:yt,refs:yt,setupState:yt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=FS.bind(null,i),t.ce&&t.ce(i),i}let en=null;const bc=()=>en||Dn;let Ea,qu;{const t=ac(),e=(n,r)=>{let o;return(o=t[n])||(o=t[n]=[]),o.push(r),i=>{o.length>1?o.forEach(s=>s(i)):o[0](i)}};Ea=e("__VUE_INSTANCE_SETTERS__",n=>en=n),qu=e("__VUE_SSR_SETTERS__",n=>Js=n)}const hl=t=>{const e=en;return Ea(t),t.scope.on(),()=>{t.scope.off(),Ea(e)}},zh=()=>{en&&en.scope.off(),Ea(null)};function ty(t){return t.vnode.shapeFlag&4}let Js=!1;function QS(t,e=!1,n=!1){e&&qu(e);const{props:r,children:o}=t.vnode,i=ty(t);TS(t,r,i,e),MS(t,o,n);const s=i?ek(t,e):void 0;return e&&qu(!1),s}function ek(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,gS);const{setup:r}=n;if(r){Ao();const o=t.setupContext=r.length>1?nk(t):null,i=hl(t),s=fl(r,t,0,[t.props,o]),l=Ym(s);if(Mo(),i(),(l||t.sp)&&!Os(t)&&Mg(t),l){if(s.then(zh,zh),e)return s.then(a=>{Kh(t,a)}).catch(a=>{hc(a,t,0)});t.asyncDep=s}else Kh(t,s)}else ny(t)}function Kh(t,e,n){qe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:kt(e)&&(t.setupState=Sg(e)),ny(t)}function ny(t,e,n){const r=t.type;t.render||(t.render=r.render||Cr);{const o=hl(t);Ao();try{yS(t)}finally{Mo(),o()}}}const tk={get(t,e){return on(t,"get",""),t[e]}};function nk(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,tk),slots:t.slots,emit:t.emit,expose:e}}function vc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Sg(wg(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in As)return As[n](t)},has(e,n){return n in e||n in As}})):t.proxy}function rk(t,e=!0){return qe(t)?t.displayName||t.name:t.name||e&&t.__name}function ok(t){return qe(t)&&"__vccOpts"in t}const Ju=(t,e)=>Gw(t,e,Js);function ry(t,e,n){const r=arguments.length;return r===2?kt(e)&&!Re(e)?Ta(e)?wt(t,null,[e]):wt(t,e):wt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ta(n)&&(n=[n]),wt(t,e,n))}const ik="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Gu;const Uh=typeof window<"u"&&window.trustedTypes;if(Uh)try{Gu=Uh.createPolicy("vue",{createHTML:t=>t})}catch{}const oy=Gu?t=>Gu.createHTML(t):t=>t,sk="http://www.w3.org/2000/svg",lk="http://www.w3.org/1998/Math/MathML",Br=typeof document<"u"?document:null,Wh=Br&&Br.createElement("template"),ak={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const o=e==="svg"?Br.createElementNS(sk,t):e==="mathml"?Br.createElementNS(lk,t):n?Br.createElement(t,{is:n}):Br.createElement(t);return t==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:t=>Br.createTextNode(t),createComment:t=>Br.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Br.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,o,i){const s=n?n.previousSibling:e.lastChild;if(o&&(o===i||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===i||!(o=o.nextSibling)););else{Wh.innerHTML=oy(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const l=Wh.content;if(r==="svg"||r==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,n)}return[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},ck=Symbol("_vtc");function uk(t,e,n){const r=t[ck];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const qh=Symbol("_vod"),dk=Symbol("_vsh"),fk=Symbol(""),hk=/(^|;)\s*display\s*:/;function pk(t,e,n){const r=t.style,o=Rt(n);let i=!1;if(n&&!o){if(e)if(Rt(e))for(const s of e.split(";")){const l=s.slice(0,s.indexOf(":")).trim();n[l]==null&&Ql(r,l,"")}else for(const s in e)n[s]==null&&Ql(r,s,"");for(const s in n)s==="display"&&(i=!0),Ql(r,s,n[s])}else if(o){if(e!==n){const s=r[fk];s&&(n+=";"+s),r.cssText=n,i=hk.test(n)}}else e&&t.removeAttribute("style");qh in t&&(t[qh]=i?r.display:"",t[dk]&&(r.display="none"))}const Jh=/\s*!important$/;function Ql(t,e,n){if(Re(n))n.forEach(r=>Ql(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=mk(t,e);Jh.test(n)?t.setProperty(ci(r),n.replace(Jh,""),"important"):t[r]=n}}const Gh=["Webkit","Moz","ms"],Qc={};function mk(t,e){const n=Qc[e];if(n)return n;let r=or(e);if(r!=="filter"&&r in t)return Qc[e]=r;r=lc(r);for(let o=0;o<Gh.length;o++){const i=Gh[o]+r;if(i in t)return Qc[e]=i}return e}const Yh="http://www.w3.org/1999/xlink";function Xh(t,e,n,r,o,i=gw(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Yh,e.slice(6,e.length)):t.setAttributeNS(Yh,e,n):n==null||i&&!eg(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Er(n)?String(n):n)}function Zh(t,e,n,r,o){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?oy(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,a=n==null?t.type==="checkbox"?"on":"":String(n);(l!==a||!("_value"in t))&&(t.value=a),n==null&&t.removeAttribute(e),t._value=n;return}let s=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=eg(n):n==null&&l==="string"?(n="",s=!0):l==="number"&&(n=0,s=!0)}try{t[e]=n}catch{}s&&t.removeAttribute(o||e)}function jo(t,e,n,r){t.addEventListener(e,n,r)}function gk(t,e,n,r){t.removeEventListener(e,n,r)}const Qh=Symbol("_vei");function yk(t,e,n,r,o=null){const i=t[Qh]||(t[Qh]={}),s=i[e];if(r&&s)s.value=r;else{const[l,a]=bk(e);if(r){const c=i[e]=Sk(r,o);jo(t,l,c,a)}else s&&(gk(t,l,s,a),i[e]=void 0)}}const ep=/(?:Once|Passive|Capture)$/;function bk(t){let e;if(ep.test(t)){e={};let r;for(;r=t.match(ep);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ci(t.slice(2)),e]}let eu=0;const vk=Promise.resolve(),wk=()=>eu||(vk.then(()=>eu=0),eu=Date.now());function Sk(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Or(kk(r,n.value),e,5,[r])};return n.value=t,n.attached=wk(),n}function kk(t,e){if(Re(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>o=>!o._stopped&&r&&r(o))}else return e}const tp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,xk=(t,e,n,r,o,i)=>{const s=o==="svg";e==="class"?uk(t,r,s):e==="style"?pk(t,n,r):oc(e)?Yd(e)||yk(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Ck(t,e,r,s))?(Zh(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Xh(t,e,r,s,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Rt(r))?Zh(t,or(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Xh(t,e,r,s))};function Ck(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&tp(e)&&qe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const o=t.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return tp(e)&&Rt(n)?!1:e in t}const Oa=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Re(e)?n=>Gl(e,n):e};function Tk(t){t.target.composing=!0}function np(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Fi=Symbol("_assign"),xn={created(t,{modifiers:{lazy:e,trim:n,number:r}},o){t[Fi]=Oa(o);const i=r||o.props&&o.props.type==="number";jo(t,e?"change":"input",s=>{if(s.target.composing)return;let l=t.value;n&&(l=l.trim()),i&&(l=Lu(l)),t[Fi](l)}),n&&jo(t,"change",()=>{t.value=t.value.trim()}),e||(jo(t,"compositionstart",Tk),jo(t,"compositionend",np),jo(t,"change",np))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:o,number:i}},s){if(t[Fi]=Oa(s),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?Lu(t.value):t.value,a=e??"";l!==a&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||o&&t.value.trim()===a)||(t.value=a))}},Ek={deep:!0,created(t,e,n){t[Fi]=Oa(n),jo(t,"change",()=>{const r=t._modelValue,o=Ok(t),i=t.checked,s=t[Fi];if(Re(r)){const l=tg(r,o),a=l!==-1;if(i&&!a)s(r.concat(o));else if(!i&&a){const c=[...r];c.splice(l,1),s(c)}}else if(ic(r)){const l=new Set(r);i?l.add(o):l.delete(o),s(l)}else s(iy(t,i))})},mounted:rp,beforeUpdate(t,e,n){t[Fi]=Oa(n),rp(t,e,n)}};function rp(t,{value:e,oldValue:n},r){t._modelValue=e;let o;if(Re(e))o=tg(e,r.props.value)>-1;else if(ic(e))o=e.has(r.props.value);else{if(e===n)return;o=cc(e,iy(t,!0))}t.checked!==o&&(t.checked=o)}function Ok(t){return"_value"in t?t._value:t.value}function iy(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Ak=dn({patchProp:xk},ak);let op;function Mk(){return op||(op=NS(Ak))}const _k=(...t)=>{const e=Mk().createApp(...t),{mount:n}=e;return e.mount=r=>{const o=Pk(r);if(!o)return;const i=e._component;!qe(i)&&!i.render&&!i.template&&(i.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const s=n(o,!1,Nk(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),s},e};function Nk(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Pk(t){return Rt(t)?document.querySelector(t):t}const Ct=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Bt=Object.keys,cn=Array.isArray;function Cn(t,e){return typeof e!="object"||Bt(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||Ct.Promise||(Ct.Promise=Promise);const Gs=Object.getPrototypeOf,$k={}.hasOwnProperty;function Gn(t,e){return $k.call(t,e)}function Ji(t,e){typeof e=="function"&&(e=e(Gs(t))),(typeof Reflect>"u"?Bt:Reflect.ownKeys)(e).forEach(n=>{Kr(t,n,e[n])})}const sy=Object.defineProperty;function Kr(t,e,n,r){sy(t,e,Cn(n&&Gn(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function ji(t){return{from:function(e){return t.prototype=Object.create(e.prototype),Kr(t.prototype,"constructor",t),{extend:Ji.bind(null,t.prototype)}}}}const Dk=Object.getOwnPropertyDescriptor;function hf(t,e){let n;return Dk(t,e)||(n=Gs(t))&&hf(n,e)}const Ik=[].slice;function Aa(t,e,n){return Ik.call(t,e,n)}function ly(t,e){return e(t)}function ms(t){if(!t)throw new Error("Assertion Failed")}function ay(t){Ct.setImmediate?setImmediate(t):setTimeout(t,0)}function cy(t,e){return t.reduce((n,r,o)=>{var i=e(r,o);return i&&(n[i[0]]=i[1]),n},{})}function Ur(t,e){if(typeof e=="string"&&Gn(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,o=e.length;r<o;++r){var i=Ur(t,e[r]);n.push(i)}return n}var s=e.indexOf(".");if(s!==-1){var l=t[e.substr(0,s)];return l==null?void 0:Ur(l,e.substr(s+1))}}function hr(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){ms(typeof n!="string"&&"length"in n);for(var r=0,o=e.length;r<o;++r)hr(t,e[r],n[r])}else{var i=e.indexOf(".");if(i!==-1){var s=e.substr(0,i),l=e.substr(i+1);if(l==="")n===void 0?cn(t)&&!isNaN(parseInt(s))?t.splice(s,1):delete t[s]:t[s]=n;else{var a=t[s];a&&Gn(t,s)||(a=t[s]={}),hr(a,l,n)}}else n===void 0?cn(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function uy(t){var e={};for(var n in t)Gn(t,n)&&(e[n]=t[n]);return e}const Bk=[].concat;function dy(t){return Bk.apply([],t)}const fy="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(dy([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>Ct[t]),Rk=fy.map(t=>Ct[t]);cy(fy,t=>[t,!0]);let io=null;function pl(t){io=typeof WeakMap<"u"&&new WeakMap;const e=Yu(t);return io=null,e}function Yu(t){if(!t||typeof t!="object")return t;let e=io&&io.get(t);if(e)return e;if(cn(t)){e=[],io&&io.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(Yu(t[n]))}else if(Rk.indexOf(t.constructor)>=0)e=t;else{const i=Gs(t);for(var o in e=i===Object.prototype?{}:Object.create(i),io&&io.set(t,e),t)Gn(t,o)&&(e[o]=Yu(t[o]))}return e}const{toString:Lk}={};function Xu(t){return Lk.call(t).slice(8,-1)}const Zu=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Vk=typeof Zu=="symbol"?function(t){var e;return t!=null&&(e=t[Zu])&&e.apply(t)}:function(){return null},Ti={};function jr(t){var e,n,r,o;if(arguments.length===1){if(cn(t))return t.slice();if(this===Ti&&typeof t=="string")return[t];if(o=Vk(t)){for(n=[];!(r=o.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const pf=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Nr=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function hy(t,e){Nr=t,py=e}var py=()=>!0;const Fk=!new Error("").stack;function ui(){if(Fk)try{throw ui.arguments,new Error}catch(t){return t}return new Error}function Qu(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(py).map(r=>`
`+r).join("")):""}var my=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],mf=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(my),jk={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Hi(t,e){this._e=ui(),this.name=t,this.message=e}function gy(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,o)=>o.indexOf(n)===r).join(`
`)}function Ma(t,e,n,r){this._e=ui(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=gy(t,e)}function _s(t,e){this._e=ui(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=gy(t,e)}ji(Hi).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Qu(this._e,2))}},toString:function(){return this.name+": "+this.message}}),ji(Ma).from(Hi),ji(_s).from(Hi);var gf=mf.reduce((t,e)=>(t[e]=e+"Error",t),{});const Hk=Hi;var je=mf.reduce((t,e)=>{var n=e+"Error";function r(o,i){this._e=ui(),this.name=n,o?typeof o=="string"?(this.message=`${o}${i?`
 `+i:""}`,this.inner=i||null):typeof o=="object"&&(this.message=`${o.name} ${o.message}`,this.inner=o):(this.message=jk[e]||n,this.inner=null)}return ji(r).from(Hk),t[e]=r,t},{});je.Syntax=SyntaxError,je.Type=TypeError,je.Range=RangeError;var ip=my.reduce((t,e)=>(t[e+"Error"]=je[e],t),{}),ea=mf.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=je[e]),t),{});function bt(){}function Ys(t){return t}function zk(t,e){return t==null||t===Ys?e:function(n){return e(t(n))}}function oi(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function Kk(t,e){return t===bt?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?oi(r,this.onsuccess):r),o&&(this.onerror=this.onerror?oi(o,this.onerror):o),i!==void 0?i:n}}function Uk(t,e){return t===bt?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?oi(n,this.onsuccess):n),r&&(this.onerror=this.onerror?oi(r,this.onerror):r)}}function Wk(t,e){return t===bt?e:function(n){var r=t.apply(this,arguments);Cn(n,r);var o=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?oi(o,this.onsuccess):o),i&&(this.onerror=this.onerror?oi(i,this.onerror):i),r===void 0?s===void 0?void 0:s:Cn(r,s)}}function qk(t,e){return t===bt?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function yf(t,e){return t===bt?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return n.then(function(){return e.apply(r,i)})}return e.apply(this,arguments)}}ea.ModifyError=Ma,ea.DexieError=Hi,ea.BulkError=_s;var Xs={};const yy=100,[ed,_a,td]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,Gs(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,Gs(e),t]})(),by=_a&&_a.then,ta=ed&&ed.constructor,bf=!!td;var nd=!1,Jk=td?()=>{td.then(Al)}:Ct.setImmediate?setImmediate.bind(null,Al):Ct.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Al(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Al,0)},Ns=function(t,e){gs.push([t,e]),Na&&(Jk(),Na=!1)},rd=!0,Na=!0,Go=[],na=[],od=null,id=Ys,zi={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ap,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{ap(t[0],t[1])}catch{}})}},$e=zi,gs=[],Yo=0,ra=[];function Se(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=bt,this._lib=!1;var e=this._PSD=$e;if(Nr&&(this._stackHolder=ui(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==Xs)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ld(this,this._value))}this._state=null,this._value=null,++e.ref,wy(this,t)}const sd={get:function(){var t=$e,e=Pa;function n(r,o){var i=!t.global&&(t!==$e||e!==Pa);const s=i&&!Gr();var l=new Se((a,c)=>{vf(this,new vy($a(r,t,i,s),$a(o,t,i,s),a,c,t))});return Nr&&xy(l,this),l}return n.prototype=Xs,n},set:function(t){Kr(this,"then",t&&t.prototype===Xs?sd:{get:function(){return t},set:sd.set})}};function vy(t,e,n,r,o){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=o}function wy(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&ml();n&&typeof n.then=="function"?wy(t,(o,i)=>{n instanceof Se?n._then(o,i):n.then(o,i)}):(t._state=!0,t._value=n,Sy(t)),r&&gl()}},ld.bind(null,t))}catch(n){ld(t,n)}}function ld(t,e){if(na.push(e),t._state===null){var n=t._lib&&ml();e=id(e),t._state=!1,t._value=e,Nr&&e!==null&&typeof e=="object"&&!e._promise&&function(r,o,i){try{r.apply(null,i)}catch{}}(()=>{var r=hf(e,"stack");e._promise=t,Kr(e,"stack",{get:()=>nd?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){Go.some(o=>o._value===r._value)||Go.push(r)}(t),Sy(t),n&&gl()}}function Sy(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)vf(t,e[n]);var o=t._PSD;--o.ref||o.finalize(),Yo===0&&(++Yo,Ns(()=>{--Yo==0&&wf()},[]))}function vf(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Yo,Ns(Gk,[n,t,e])}else t._listeners.push(e)}function Gk(t,e,n){try{od=e;var r,o=e._value;e._state?r=t(o):(na.length&&(na=[]),r=t(o),na.indexOf(o)===-1&&function(i){for(var s=Go.length;s;)if(Go[--s]._value===i._value)return void Go.splice(s,1)}(e)),n.resolve(r)}catch(i){n.reject(i)}finally{od=null,--Yo==0&&wf(),--n.psd.ref||n.psd.finalize()}}function ky(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var o,i,s=t._value;s!=null?(o=s.name||"Error",i=s.message||s,r=Qu(s,0)):(o=s,i=""),e.push(o+(i?": "+i:"")+r)}return Nr&&((r=Qu(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&ky(t._prev,e,n)),e}function xy(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Al(){ml()&&gl()}function ml(){var t=rd;return rd=!1,Na=!1,t}function gl(){var t,e,n;do for(;gs.length>0;)for(t=gs,gs=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(gs.length>0);rd=!0,Na=!0}function wf(){var t=Go;Go=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=ra.slice(0),n=e.length;n;)e[--n]()}function Ml(t){return new Se(Xs,!1,t)}function Et(t,e){var n=$e;return function(){var r=ml(),o=$e;try{return xo(n,!0),t.apply(this,arguments)}catch(i){e&&e(i)}finally{xo(o,!1),r&&gl()}}}Ji(Se.prototype,{then:sd,_then:function(t,e){vf(this,new vy(null,null,t,e,$e))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):Ml(r)):this.then(null,r=>r&&r.name===e?n(r):Ml(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),Ml(e)))},stack:{get:function(){if(this._stack)return this._stack;try{nd=!0;var t=ky(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{nd=!1}}},timeout:function(t,e){return t<1/0?new Se((n,r)=>{var o=setTimeout(()=>r(new je.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,o))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Kr(Se.prototype,Symbol.toStringTag,"Dexie.Promise"),zi.env=Cy(),Ji(Se,{all:function(){var t=jr.apply(null,arguments).map(_l);return new Se(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((o,i)=>Se.resolve(o).then(s=>{t[i]=s,--r||e(t)},n))})},resolve:t=>{if(t instanceof Se)return t;if(t&&typeof t.then=="function")return new Se((n,r)=>{t.then(n,r)});var e=new Se(Xs,!0,t);return xy(e,od),e},reject:Ml,race:function(){var t=jr.apply(null,arguments).map(_l);return new Se((e,n)=>{t.map(r=>Se.resolve(r).then(e,n))})},PSD:{get:()=>$e,set:t=>$e=t},totalEchoes:{get:()=>Pa},newPSD:ko,usePSD:is,scheduler:{get:()=>Ns,set:t=>{Ns=t}},rejectionMapper:{get:()=>id,set:t=>{id=t}},follow:(t,e)=>new Se((n,r)=>ko((o,i)=>{var s=$e;s.unhandleds=[],s.onunhandled=i,s.finalize=oi(function(){(function(l){function a(){l(),ra.splice(ra.indexOf(a),1)}ra.push(a),++Yo,Ns(()=>{--Yo==0&&wf()},[])})(()=>{this.unhandleds.length===0?o():i(this.unhandleds[0])})},s.finalize),t()},e,n,r))}),ta&&(ta.allSettled&&Kr(Se,"allSettled",function(){const t=jr.apply(null,arguments).map(_l);return new Se(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((o,i)=>Se.resolve(o).then(s=>r[i]={status:"fulfilled",value:s},s=>r[i]={status:"rejected",reason:s}).then(()=>--n||e(r)))})}),ta.any&&typeof AggregateError<"u"&&Kr(Se,"any",function(){const t=jr.apply(null,arguments).map(_l);return new Se((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const o=new Array(r);t.forEach((i,s)=>Se.resolve(i).then(l=>e(l),l=>{o[s]=l,--r||n(new AggregateError(o))}))})}));const ln={awaits:0,echoes:0,id:0};var Yk=0,oa=[],tu=0,Pa=0,Xk=0;function ko(t,e,n,r){var o=$e,i=Object.create(o);i.parent=o,i.ref=0,i.global=!1,i.id=++Xk;var s=zi.env;i.env=bf?{Promise:Se,PromiseProp:{value:Se,configurable:!0,writable:!0},all:Se.all,race:Se.race,allSettled:Se.allSettled,any:Se.any,resolve:Se.resolve,reject:Se.reject,nthen:sp(s.nthen,i),gthen:sp(s.gthen,i)}:{},e&&Cn(i,e),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=is(i,t,n,r);return i.ref===0&&i.finalize(),l}function rs(){return ln.id||(ln.id=++Yk),++ln.awaits,ln.echoes+=yy,ln.id}function Gr(){return!!ln.awaits&&(--ln.awaits==0&&(ln.id=0),ln.echoes=ln.awaits*yy,!0)}function _l(t){return ln.echoes&&t&&t.constructor===ta?(rs(),t.then(e=>(Gr(),e),e=>(Gr(),Ht(e)))):t}function Zk(t){++Pa,ln.echoes&&--ln.echoes!=0||(ln.echoes=ln.id=0),oa.push($e),xo(t,!0)}function Qk(){var t=oa[oa.length-1];oa.pop(),xo(t,!1)}function xo(t,e){var n=$e;if((e?!ln.echoes||tu++&&t===$e:!tu||--tu&&t===$e)||Ty(e?Zk.bind(null,t):Qk),t!==$e&&($e=t,n===zi&&(zi.env=Cy()),bf)){var r=zi.env.Promise,o=t.env;_a.then=o.nthen,r.prototype.then=o.gthen,(n.global||t.global)&&(Object.defineProperty(Ct,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject,o.allSettled&&(r.allSettled=o.allSettled),o.any&&(r.any=o.any))}}function Cy(){var t=Ct.Promise;return bf?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(Ct,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:_a.then,gthen:t.prototype.then}:{}}function is(t,e,n,r,o){var i=$e;try{return xo(t,!0),e(n,r,o)}finally{xo(i,!1)}}function Ty(t){by.call(ed,t)}function $a(t,e,n,r){return typeof t!="function"?t:function(){var o=$e;n&&rs(),xo(e,!0);try{return t.apply(this,arguments)}finally{xo(o,!1),r&&Ty(Gr)}}}function sp(t,e){return function(n,r){return t.call(this,$a(n,e),$a(r,e))}}(""+by).indexOf("[native code]")===-1&&(rs=Gr=bt);const lp="unhandledrejection";function ap(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,o={promise:e,reason:t};if(Ct.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(lp,!0,!0),Cn(r,o)):Ct.CustomEvent&&Cn(r=new CustomEvent(lp,{detail:o}),o),r&&Ct.dispatchEvent&&(dispatchEvent(r),!Ct.PromiseRejectionEvent&&Ct.onunhandledrejection))try{Ct.onunhandledrejection(r)}catch{}Nr&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var Ht=Se.reject;function ad(t,e,n,r){if(t.idbdb&&(t._state.openComplete||$e.letThrough||t._vip)){var o=t._createTransaction(e,n,t._dbSchema);try{o.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===gf.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>ad(t,e,n,r))):Ht(i)}return o._promise(e,(i,s)=>ko(()=>($e.trans=o,r(i,s,o)))).then(i=>o._completion.then(()=>i))}if(t._state.openComplete)return Ht(new je.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return Ht(new je.DatabaseClosed);t.open().catch(bt)}return t._state.dbReadyPromise.then(()=>ad(t,e,n,r))}const cp="3.2.7",Ko="￿",cd=-1/0,Dr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ey="String expected.",Ps=[],wc=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),ex=wc,tx=wc,Oy=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),Sc="__dbnames",nu="readonly",ru="readwrite";function ii(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const Ay={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Nl(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=pl(e))[t],e)}let nx=class{_trans(e,n,r){const o=this._tx||$e.trans,i=this.name;function s(a,c,u){if(!u.schema[i])throw new je.NotFound("Table "+i+" not part of transaction");return n(u.idbtrans,u)}const l=ml();try{return o&&o.db===this.db?o===$e.trans?o._promise(e,s,r):ko(()=>o._promise(e,s,r),{trans:o,transless:$e.transless||$e}):ad(this.db,e,[this.name],s)}finally{l&&gl()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(o=>this.hook.reading.fire(o))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(cn(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=Bt(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(c=>{if(c.compound&&n.every(u=>c.keyPath.indexOf(u)>=0)){for(let u=0;u<n.length;++u)if(n.indexOf(c.keyPath[u])===-1)return!1;return!0}return!1}).sort((c,u)=>c.keyPath.length-u.keyPath.length)[0];if(r&&this.db._maxKey!==Ko){const c=r.keyPath.slice(0,n.length);return this.where(c).equals(c.map(u=>e[u]))}!r&&Nr&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:o}=this.schema,i=this.db._deps.indexedDB;function s(c,u){try{return i.cmp(c,u)===0}catch{return!1}}const[l,a]=n.reduce(([c,u],d)=>{const h=o[d],m=e[d];return[c||h,c||!h?ii(u,h&&h.multi?g=>{const b=Ur(g,d);return cn(b)&&b.some(k=>s(m,k))}:g=>s(m,Ur(g,d))):u]},[null,null]);return l?this.where(l.name).equals(e[l.keyPath]).filter(a):r?this.filter(a):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,cn(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const o=Object.create(e.prototype);for(var i in r)if(Gn(r,i))try{o[i]=r[i]}catch{}return o};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){Cn(this,e)})}add(e,n){const{auto:r,keyPath:o}=this.schema.primKey;let i=e;return o&&r&&(i=Nl(o)(e)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[i]})).then(s=>s.numFailures?Se.reject(s.failures[0]):s.lastResult).then(s=>{if(o)try{hr(e,o,s)}catch{}return s})}update(e,n){if(typeof e!="object"||cn(e))return this.where(":id").equals(e).modify(n);{const r=Ur(e,this.schema.primKey.keyPath);if(r===void 0)return Ht(new je.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?Bt(n).forEach(o=>{hr(e,o,n[o])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:o}=this.schema.primKey;let i=e;return o&&r&&(i=Nl(o)(e)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"put",values:[i],keys:n!=null?[n]:null})).then(s=>s.numFailures?Se.reject(s.failures[0]):s.lastResult).then(s=>{if(o)try{hr(e,o,s)}catch{}return s})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?Se.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:Ay})).then(e=>e.numFailures?Se.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(o=>this.hook.reading.fire(o))))}bulkAdd(e,n,r){const o=Array.isArray(n)?n:void 0,i=(r=r||(o?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:l,keyPath:a}=this.schema.primKey;if(a&&o)throw new je.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new je.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=a&&l?e.map(Nl(a)):e;return this.core.mutate({trans:s,type:"add",keys:o,values:u,wantResults:i}).then(({numFailures:d,results:h,lastResult:m,failures:g})=>{if(d===0)return i?h:m;throw new _s(`${this.name}.bulkAdd(): ${d} of ${c} operations failed`,g)})})}bulkPut(e,n,r){const o=Array.isArray(n)?n:void 0,i=(r=r||(o?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:l,keyPath:a}=this.schema.primKey;if(a&&o)throw new je.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new je.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=a&&l?e.map(Nl(a)):e;return this.core.mutate({trans:s,type:"put",keys:o,values:u,wantResults:i}).then(({numFailures:d,results:h,lastResult:m,failures:g})=>{if(d===0)return i?h:m;throw new _s(`${this.name}.bulkPut(): ${d} of ${c} operations failed`,g)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:o,failures:i})=>{if(r===0)return o;throw new _s(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,i)})}};function $s(t){var e={},n=function(s,l){if(l){for(var a=arguments.length,c=new Array(a-1);--a;)c[a-1]=arguments[a];return e[s].subscribe.apply(null,c),t}if(typeof s=="string")return e[s]};n.addEventType=i;for(var r=1,o=arguments.length;r<o;++r)i(arguments[r]);return n;function i(s,l,a){if(typeof s!="object"){var c;l||(l=qk),a||(a=bt);var u={subscribers:[],fire:a,subscribe:function(d){u.subscribers.indexOf(d)===-1&&(u.subscribers.push(d),u.fire=l(u.fire,d))},unsubscribe:function(d){u.subscribers=u.subscribers.filter(function(h){return h!==d}),u.fire=u.subscribers.reduce(l,a)}};return e[s]=n[s]=u,u}Bt(c=s).forEach(function(d){var h=c[d];if(cn(h))i(d,c[d][0],c[d][1]);else{if(h!=="asap")throw new je.InvalidArgument("Invalid event config");var m=i(d,Ys,function(){for(var g=arguments.length,b=new Array(g);g--;)b[g]=arguments[g];m.subscribers.forEach(function(k){ay(function(){k.apply(null,b)})})})}})}}function fs(t,e){return ji(e).from({prototype:t}),e}function bi(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function ou(t,e){t.filter=ii(t.filter,e)}function iu(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>ii(r(),e()):e,t.justLimit=n&&!r}function ia(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new je.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function up(t,e,n){const r=ia(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function Pl(t,e,n,r){const o=t.replayFilter?ii(t.filter,t.replayFilter()):t.filter;if(t.or){const i={},s=(l,a,c)=>{if(!o||o(a,c,h=>a.stop(h),h=>a.fail(h))){var u=a.primaryKey,d=""+u;d==="[object ArrayBuffer]"&&(d=""+new Uint8Array(u)),Gn(i,d)||(i[d]=!0,e(l,a,c))}};return Promise.all([t.or._iterate(s,n),dp(up(t,r,n),t.algorithm,s,!t.keysOnly&&t.valueMapper)])}return dp(up(t,r,n),ii(t.algorithm,o),e,!t.keysOnly&&t.valueMapper)}function dp(t,e,n,r){var o=Et(r?(i,s,l)=>n(r(i),s,l):n);return t.then(i=>{if(i)return i.start(()=>{var s=()=>i.continue();e&&!e(i,l=>s=l,l=>{i.stop(l),s=bt},l=>{i.fail(l),s=bt})||o(i.value,i,l=>s=l),s()})})}function Sn(t,e){try{const n=fp(t),r=fp(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(o,i){const s=o.length,l=i.length,a=s<l?s:l;for(let c=0;c<a;++c)if(o[c]!==i[c])return o[c]<i[c]?-1:1;return s===l?0:s<l?-1:1}(hp(t),hp(e));case"Array":return function(o,i){const s=o.length,l=i.length,a=s<l?s:l;for(let c=0;c<a;++c){const u=Sn(o[c],i[c]);if(u!==0)return u}return s===l?0:s<l?-1:1}(t,e)}}catch{}return NaN}function fp(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=Xu(t);return n==="ArrayBuffer"?"binary":n}function hp(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}let rx=class{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,Ht.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,Ht.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=ii(n.algorithm,e)}_iterate(e,n){return Pl(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&Cn(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>Pl(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,o=r.table.core;if(bi(r,!0))return o.count({trans:n,query:{index:ia(r,o.schema),range:r.range}}).then(s=>Math.min(s,r.limit));var i=0;return Pl(r,()=>(++i,!1),n,o).then(()=>i)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),o=r[0],i=r.length-1;function s(c,u){return u?s(c[r[u]],u-1):c[o]}var l=this._ctx.dir==="next"?1:-1;function a(c,u){var d=s(c,i),h=s(u,i);return d<h?-l:d>h?l:0}return this.toArray(function(c){return c.sort(a)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&bi(r,!0)&&r.limit>0){const{valueMapper:o}=r,i=ia(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then(({result:s})=>o?s.map(o):s)}{const o=[];return Pl(r,i=>o.push(i),n,r.table.core).then(()=>o)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,bi(n)?iu(n,()=>{var r=e;return(o,i)=>r===0||(r===1?(--r,!1):(i(()=>{o.advance(r),r=0}),!1))}):iu(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),iu(this._ctx,()=>{var n=e;return function(r,o,i){return--n<=0&&o(i),n>=0}},!0),this}until(e,n){return ou(this._ctx,function(r,o,i){return!e(r.value)||(o(i),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return ou(this._ctx,function(o){return e(o.value)}),n=this._ctx,r=e,n.isMatch=ii(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,o){e(o.key,o)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,o){e(o.primaryKey,o)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(o,i){r.push(i.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&bi(n,!0)&&n.limit>0)return this._read(o=>{var i=ia(n,n.table.core.schema);return n.table.core.query({trans:o,values:!1,limit:n.limit,query:{index:i,range:n.range}})}).then(({result:o})=>o).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(o,i){r.push(i.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return ou(this._ctx,function(o){var i=o.primaryKey.toString(),s=Gn(r,i);return r[i]=!0,!s}),this}modify(e){var n=this._ctx;return this._write(r=>{var o;if(typeof e=="function")o=e;else{var i=Bt(e),s=i.length;o=function(b){for(var k=!1,T=0;T<s;++T){var A=i[T],N=e[A];Ur(b,A)!==N&&(hr(b,A,N),k=!0)}return k}}const l=n.table.core,{outbound:a,extractKey:c}=l.schema.primaryKey,u=this.db._options.modifyChunkSize||200,d=[];let h=0;const m=[],g=(b,k)=>{const{failures:T,numFailures:A}=k;h+=b-A;for(let N of Bt(T))d.push(T[N])};return this.clone().primaryKeys().then(b=>{const k=T=>{const A=Math.min(u,b.length-T);return l.getMany({trans:r,keys:b.slice(T,T+A),cache:"immutable"}).then(N=>{const B=[],D=[],V=a?[]:null,j=[];for(let E=0;E<A;++E){const S=N[E],F={value:pl(S),primKey:b[T+E]};o.call(F,F.value,F)!==!1&&(F.value==null?j.push(b[T+E]):a||Sn(c(S),c(F.value))===0?(D.push(F.value),a&&V.push(b[T+E])):(j.push(b[T+E]),B.push(F.value)))}const K=bi(n)&&n.limit===1/0&&(typeof e!="function"||e===su)&&{index:n.index,range:n.range};return Promise.resolve(B.length>0&&l.mutate({trans:r,type:"add",values:B}).then(E=>{for(let S in E.failures)j.splice(parseInt(S),1);g(B.length,E)})).then(()=>(D.length>0||K&&typeof e=="object")&&l.mutate({trans:r,type:"put",keys:V,values:D,criteria:K,changeSpec:typeof e!="function"&&e}).then(E=>g(D.length,E))).then(()=>(j.length>0||K&&e===su)&&l.mutate({trans:r,type:"delete",keys:j,criteria:K}).then(E=>g(j.length,E))).then(()=>b.length>T+A&&k(T+u))})};return k(0).then(()=>{if(d.length>0)throw new Ma("Error modifying one or more objects",d,h,m);return b.length})})})}delete(){var e=this._ctx,n=e.range;return bi(e)&&(e.isPrimKey&&!tx||n.type===3)?this._write(r=>{const{primaryKey:o}=e.table.core.schema,i=n;return e.table.core.count({trans:r,query:{index:o,range:i}}).then(s=>e.table.core.mutate({trans:r,type:"deleteRange",range:i}).then(({failures:l,lastResult:a,results:c,numFailures:u})=>{if(u)throw new Ma("Could not delete some values",Object.keys(l).map(d=>l[d]),s-u);return s-u}))}):this.modify(su)}};const su=(t,e)=>e.value=null;function ox(t,e){return t<e?-1:t===e?0:1}function ix(t,e){return t>e?-1:t===e?0:1}function jn(t,e,n){var r=t instanceof _y?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function vi(t){return new t.Collection(t,()=>My("")).limit(0)}function sx(t,e,n,r,o,i){for(var s=Math.min(t.length,r.length),l=-1,a=0;a<s;++a){var c=e[a];if(c!==r[a])return o(t[a],n[a])<0?t.substr(0,a)+n[a]+n.substr(a+1):o(t[a],r[a])<0?t.substr(0,a)+r[a]+n.substr(a+1):l>=0?t.substr(0,l)+e[l]+n.substr(l+1):null;o(t[a],c)<0&&(l=a)}return s<r.length&&i==="next"?t+n.substr(t.length):s<t.length&&i==="prev"?t.substr(0,n.length):l<0?null:t.substr(0,l)+r[l]+n.substr(l+1)}function $l(t,e,n,r){var o,i,s,l,a,c,u,d=n.length;if(!n.every(b=>typeof b=="string"))return jn(t,Ey);function h(b){o=function(T){return T==="next"?A=>A.toUpperCase():A=>A.toLowerCase()}(b),i=function(T){return T==="next"?A=>A.toLowerCase():A=>A.toUpperCase()}(b),s=b==="next"?ox:ix;var k=n.map(function(T){return{lower:i(T),upper:o(T)}}).sort(function(T,A){return s(T.lower,A.lower)});l=k.map(function(T){return T.upper}),a=k.map(function(T){return T.lower}),c=b,u=b==="next"?"":r}h("next");var m=new t.Collection(t,()=>to(l[0],a[d-1]+r));m._ondirectionchange=function(b){h(b)};var g=0;return m._addAlgorithm(function(b,k,T){var A=b.key;if(typeof A!="string")return!1;var N=i(A);if(e(N,a,g))return!0;for(var B=null,D=g;D<d;++D){var V=sx(A,N,l[D],a[D],s,c);V===null&&B===null?g=D+1:(B===null||s(B,V)>0)&&(B=V)}return k(B!==null?function(){b.continue(B+u)}:T),!1}),m}function to(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function My(t){return{type:1,lower:t,upper:t}}let _y=class{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,o){r=r!==!1,o=o===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||o)&&(!r||!o)?vi(this):new this.Collection(this,()=>to(e,n,!r,!o))}catch{return jn(this,Dr)}}equals(e){return e==null?jn(this,Dr):new this.Collection(this,()=>My(e))}above(e){return e==null?jn(this,Dr):new this.Collection(this,()=>to(e,void 0,!0))}aboveOrEqual(e){return e==null?jn(this,Dr):new this.Collection(this,()=>to(e,void 0,!1))}below(e){return e==null?jn(this,Dr):new this.Collection(this,()=>to(void 0,e,!1,!0))}belowOrEqual(e){return e==null?jn(this,Dr):new this.Collection(this,()=>to(void 0,e))}startsWith(e){return typeof e!="string"?jn(this,Ey):this.between(e,e+Ko,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):$l(this,(n,r)=>n.indexOf(r[0])===0,[e],Ko)}equalsIgnoreCase(e){return $l(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=jr.apply(Ti,arguments);return e.length===0?vi(this):$l(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=jr.apply(Ti,arguments);return e.length===0?vi(this):$l(this,(n,r)=>r.some(o=>n.indexOf(o)===0),e,Ko)}anyOf(){const e=jr.apply(Ti,arguments);let n=this._cmp;try{e.sort(n)}catch{return jn(this,Dr)}if(e.length===0)return vi(this);const r=new this.Collection(this,()=>to(e[0],e[e.length-1]));r._ondirectionchange=i=>{n=i==="next"?this._ascending:this._descending,e.sort(n)};let o=0;return r._addAlgorithm((i,s,l)=>{const a=i.key;for(;n(a,e[o])>0;)if(++o,o===e.length)return s(l),!1;return n(a,e[o])===0||(s(()=>{i.continue(e[o])}),!1)}),r}notEqual(e){return this.inAnyRange([[cd,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=jr.apply(Ti,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return jn(this,Dr)}const n=e.reduce((r,o)=>r?r.concat([[r[r.length-1][1],o]]):[[cd,o]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,o=this._ascending,i=this._descending,s=this._min,l=this._max;if(e.length===0)return vi(this);if(!e.every(A=>A[0]!==void 0&&A[1]!==void 0&&o(A[0],A[1])<=0))return jn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",je.InvalidArgument);const a=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let u,d=o;function h(A,N){return d(A[0],N[0])}try{u=e.reduce(function(A,N){let B=0,D=A.length;for(;B<D;++B){const V=A[B];if(r(N[0],V[1])<0&&r(N[1],V[0])>0){V[0]=s(V[0],N[0]),V[1]=l(V[1],N[1]);break}}return B===D&&A.push(N),A},[]),u.sort(h)}catch{return jn(this,Dr)}let m=0;const g=c?A=>o(A,u[m][1])>0:A=>o(A,u[m][1])>=0,b=a?A=>i(A,u[m][0])>0:A=>i(A,u[m][0])>=0;let k=g;const T=new this.Collection(this,()=>to(u[0][0],u[u.length-1][1],!a,!c));return T._ondirectionchange=A=>{A==="next"?(k=g,d=o):(k=b,d=i),u.sort(h)},T._addAlgorithm((A,N,B)=>{for(var D=A.key;k(D);)if(++m,m===u.length)return N(B),!1;return!!function(V){return!g(V)&&!b(V)}(D)||(this._cmp(D,u[m][1])===0||this._cmp(D,u[m][0])===0||N(()=>{d===o?A.continue(u[m][0]):A.continue(u[m][1])}),!1)}),T}startsWithAnyOf(){const e=jr.apply(Ti,arguments);return e.every(n=>typeof n=="string")?e.length===0?vi(this):this.inAnyRange(e.map(n=>[n,n+Ko])):jn(this,"startsWithAnyOf() only works with strings")}};function Sr(t){return Et(function(e){return Zs(e),t(e.target.error),!1})}function Zs(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const Qs="storagemutated",co="x-storagemutated-1",Co=$s(null,Qs);class lx{_lock(){return ms(!$e.global),++this._reculock,this._reculock!==1||$e.global||($e.lockOwnerFor=this),this}_unlock(){if(ms(!$e.global),--this._reculock==0)for($e.global||($e.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{is(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&$e.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(ms(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new je.DatabaseClosed(r);case"MissingAPIError":throw new je.MissingAPI(r.message,r);default:throw new je.OpenFailed(r)}if(!this.active)throw new je.TransactionInactive;return ms(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Et(o=>{Zs(o),this._reject(e.error)}),e.onabort=Et(o=>{Zs(o),this.active&&this._reject(new je.Abort(e.error)),this.active=!1,this.on("abort").fire(o)}),e.oncomplete=Et(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&Co.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return Ht(new je.ReadOnly("Transaction is readonly"));if(!this.active)return Ht(new je.TransactionInactive);if(this._locked())return new Se((i,s)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(i,s)},$e])});if(r)return ko(()=>{var i=new Se((s,l)=>{this._lock();const a=n(s,l,this);a&&a.then&&a.then(s,l)});return i.finally(()=>this._unlock()),i._lib=!0,i});var o=new Se((i,s)=>{var l=n(i,s,this);l&&l.then&&l.then(i,s)});return o._lib=!0,o}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=Se.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var o=n.idbtrans.objectStore(n.storeNames[0]);(function s(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(o.get(-1/0).onsuccess=s)})()}var i=n._waitingFor;return new Se((s,l)=>{r.then(a=>n._waitingQueue.push(Et(s.bind(null,a))),a=>n._waitingQueue.push(Et(l.bind(null,a)))).finally(()=>{n._waitingFor===i&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new je.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(Gn(n,e))return n[e];const r=this.schema[e];if(!r)throw new je.NotFound("Table "+e+" not part of transaction");const o=new this.db.Table(e,r,this);return o.core=this.db.core.table(e),n[e]=o,o}}function ud(t,e,n,r,o,i,s){return{name:t,keyPath:e,unique:n,multi:r,auto:o,compound:i,src:(n&&!s?"&":"")+(r?"*":"")+(o?"++":"")+Ny(e)}}function Ny(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Py(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:cy(n,r=>[r.name,r])}}let el=t=>{try{return t.only([[]]),el=()=>[[]],[[]]}catch{return el=()=>Ko,Ko}};function dd(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>Ur(r,e)}(t):e=>Ur(e,t)}function pp(t){return[].slice.call(t)}let ax=0;function Ds(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function cx(t,e,n){function r(a){if(a.type===3)return null;if(a.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:u,lowerOpen:d,upperOpen:h}=a;return c===void 0?u===void 0?null:e.upperBound(u,!!h):u===void 0?e.lowerBound(c,!!d):e.bound(c,u,!!d,!!h)}const{schema:o,hasGetAll:i}=function(a,c){const u=pp(a.objectStoreNames);return{schema:{name:a.name,tables:u.map(d=>c.objectStore(d)).map(d=>{const{keyPath:h,autoIncrement:m}=d,g=cn(h),b=h==null,k={},T={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b,compound:g,keyPath:h,autoIncrement:m,unique:!0,extractKey:dd(h)},indexes:pp(d.indexNames).map(A=>d.index(A)).map(A=>{const{name:N,unique:B,multiEntry:D,keyPath:V}=A,j={name:N,compound:cn(V),keyPath:V,unique:B,multiEntry:D,extractKey:dd(V)};return k[Ds(V)]=j,j}),getIndexByKeyPath:A=>k[Ds(A)]};return k[":id"]=T.primaryKey,h!=null&&(k[Ds(h)]=T.primaryKey),T})},hasGetAll:u.length>0&&"getAll"in c.objectStore(u[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),s=o.tables.map(a=>function(c){const u=c.name;return{name:u,schema:c,mutate:function({trans:d,type:h,keys:m,values:g,range:b}){return new Promise((k,T)=>{k=Et(k);const A=d.objectStore(u),N=A.keyPath==null,B=h==="put"||h==="add";if(!B&&h!=="delete"&&h!=="deleteRange")throw new Error("Invalid operation type: "+h);const{length:D}=m||g||{length:1};if(m&&g&&m.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(D===0)return k({numFailures:0,failures:{},results:[],lastResult:void 0});let V;const j=[],K=[];let E=0;const S=C=>{++E,Zs(C)};if(h==="deleteRange"){if(b.type===4)return k({numFailures:E,failures:K,results:[],lastResult:void 0});b.type===3?j.push(V=A.clear()):j.push(V=A.delete(r(b)))}else{const[C,ue]=B?N?[g,m]:[g,null]:[m,null];if(B)for(let Q=0;Q<D;++Q)j.push(V=ue&&ue[Q]!==void 0?A[h](C[Q],ue[Q]):A[h](C[Q])),V.onerror=S;else for(let Q=0;Q<D;++Q)j.push(V=A[h](C[Q])),V.onerror=S}const F=C=>{const ue=C.target.result;j.forEach((Q,xe)=>Q.error!=null&&(K[xe]=Q.error)),k({numFailures:E,failures:K,results:h==="delete"?m:j.map(Q=>Q.result),lastResult:ue})};V.onerror=C=>{S(C),F(C)},V.onsuccess=F})},getMany:({trans:d,keys:h})=>new Promise((m,g)=>{m=Et(m);const b=d.objectStore(u),k=h.length,T=new Array(k);let A,N=0,B=0;const D=j=>{const K=j.target;T[K._pos]=K.result,++B===N&&m(T)},V=Sr(g);for(let j=0;j<k;++j)h[j]!=null&&(A=b.get(h[j]),A._pos=j,A.onsuccess=D,A.onerror=V,++N);N===0&&m(T)}),get:({trans:d,key:h})=>new Promise((m,g)=>{m=Et(m);const b=d.objectStore(u).get(h);b.onsuccess=k=>m(k.target.result),b.onerror=Sr(g)}),query:function(d){return h=>new Promise((m,g)=>{m=Et(m);const{trans:b,values:k,limit:T,query:A}=h,N=T===1/0?void 0:T,{index:B,range:D}=A,V=b.objectStore(u),j=B.isPrimaryKey?V:V.index(B.name),K=r(D);if(T===0)return m({result:[]});if(d){const E=k?j.getAll(K,N):j.getAllKeys(K,N);E.onsuccess=S=>m({result:S.target.result}),E.onerror=Sr(g)}else{let E=0;const S=k||!("openKeyCursor"in j)?j.openCursor(K):j.openKeyCursor(K),F=[];S.onsuccess=C=>{const ue=S.result;return ue?(F.push(k?ue.value:ue.primaryKey),++E===T?m({result:F}):void ue.continue()):m({result:F})},S.onerror=Sr(g)}})}(i),openCursor:function({trans:d,values:h,query:m,reverse:g,unique:b}){return new Promise((k,T)=>{k=Et(k);const{index:A,range:N}=m,B=d.objectStore(u),D=A.isPrimaryKey?B:B.index(A.name),V=g?b?"prevunique":"prev":b?"nextunique":"next",j=h||!("openKeyCursor"in D)?D.openCursor(r(N),V):D.openKeyCursor(r(N),V);j.onerror=Sr(T),j.onsuccess=Et(K=>{const E=j.result;if(!E)return void k(null);E.___id=++ax,E.done=!1;const S=E.continue.bind(E);let F=E.continuePrimaryKey;F&&(F=F.bind(E));const C=E.advance.bind(E),ue=()=>{throw new Error("Cursor not stopped")};E.trans=d,E.stop=E.continue=E.continuePrimaryKey=E.advance=()=>{throw new Error("Cursor not started")},E.fail=Et(T),E.next=function(){let Q=1;return this.start(()=>Q--?this.continue():this.stop()).then(()=>this)},E.start=Q=>{const xe=new Promise((ee,Ae)=>{ee=Et(ee),j.onerror=Sr(Ae),E.fail=Ae,E.stop=et=>{E.stop=E.continue=E.continuePrimaryKey=E.advance=ue,ee(et)}}),be=()=>{if(j.result)try{Q()}catch(ee){E.fail(ee)}else E.done=!0,E.start=()=>{throw new Error("Cursor behind last entry")},E.stop()};return j.onsuccess=Et(ee=>{j.onsuccess=be,be()}),E.continue=S,E.continuePrimaryKey=F,E.advance=C,be(),xe},k(E)},T)})},count({query:d,trans:h}){const{index:m,range:g}=d;return new Promise((b,k)=>{const T=h.objectStore(u),A=m.isPrimaryKey?T:T.index(m.name),N=r(g),B=N?A.count(N):A.count();B.onsuccess=Et(D=>b(D.target.result)),B.onerror=Sr(k)})}}}(a)),l={};return s.forEach(a=>l[a.name]=a),{stack:"dbcore",transaction:t.transaction.bind(t),table(a){if(!l[a])throw new Error(`Table '${a}' not found`);return l[a]},MIN_KEY:-1/0,MAX_KEY:el(e),schema:o}}function fd({_novip:t},e){const n=e.db,r=function(o,i,{IDBKeyRange:s,indexedDB:l},a){return{dbcore:function(u,d){return d.reduce((h,{create:m})=>({...h,...m(h)}),u)}(cx(i,s,a),o.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(o=>{const i=o.name;t.core.schema.tables.some(s=>s.name===i)&&(o.core=t.core.table(i),t[i]instanceof t.Table&&(t[i].core=o.core))})}function Da({_novip:t},e,n,r){n.forEach(o=>{const i=r[o];e.forEach(s=>{const l=hf(s,o);(!l||"value"in l&&l.value===void 0)&&(s===t.Transaction.prototype||s instanceof t.Transaction?Kr(s,o,{get(){return this.table(o)},set(a){sy(this,o,{value:a,writable:!0,configurable:!0,enumerable:!0})}}):s[o]=new t.Table(o,i))})})}function hd({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function ux(t,e){return t._cfg.version-e._cfg.version}function dx(t,e,n,r){const o=t._dbSchema,i=t._createTransaction("readwrite",t._storeNames,o);i.create(n),i._completion.catch(r);const s=i._reject.bind(i),l=$e.transless||$e;ko(()=>{$e.trans=i,$e.transless=l,e===0?(Bt(o).forEach(a=>{lu(n,a,o[a].primKey,o[a].indexes)}),fd(t,n),Se.follow(()=>t.on.populate.fire(i)).catch(s)):function({_novip:a},c,u,d){const h=[],m=a._versions;let g=a._dbSchema=md(a,a.idbdb,d),b=!1;const k=m.filter(A=>A._cfg.version>=c);function T(){return h.length?Se.resolve(h.shift()(u.idbtrans)).then(T):Se.resolve()}return k.forEach(A=>{h.push(()=>{const N=g,B=A._cfg.dbschema;gd(a,N,d),gd(a,B,d),g=a._dbSchema=B;const D=$y(N,B);D.add.forEach(j=>{lu(d,j[0],j[1].primKey,j[1].indexes)}),D.change.forEach(j=>{if(j.recreate)throw new je.Upgrade("Not yet support for changing primary key");{const K=d.objectStore(j.name);j.add.forEach(E=>pd(K,E)),j.change.forEach(E=>{K.deleteIndex(E.name),pd(K,E)}),j.del.forEach(E=>K.deleteIndex(E))}});const V=A._cfg.contentUpgrade;if(V&&A._cfg.version>c){fd(a,d),u._memoizedTables={},b=!0;let j=uy(B);D.del.forEach(F=>{j[F]=N[F]}),hd(a,[a.Transaction.prototype]),Da(a,[a.Transaction.prototype],Bt(j),j),u.schema=j;const K=pf(V);let E;K&&rs();const S=Se.follow(()=>{if(E=V(u),E&&K){var F=Gr.bind(null,null);E.then(F,F)}});return E&&typeof E.then=="function"?Se.resolve(E):S.then(()=>E)}}),h.push(N=>{(!b||!ex)&&function(B,D){[].slice.call(D.db.objectStoreNames).forEach(V=>B[V]==null&&D.db.deleteObjectStore(V))}(A._cfg.dbschema,N),hd(a,[a.Transaction.prototype]),Da(a,[a.Transaction.prototype],a._storeNames,a._dbSchema),u.schema=a._dbSchema})}),T().then(()=>{var A,N;N=d,Bt(A=g).forEach(B=>{N.db.objectStoreNames.contains(B)||lu(N,B,A[B].primKey,A[B].indexes)})})}(t,e,i,n).catch(s)})}function $y(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const o=t[r],i=e[r];if(o){const s={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||o.primKey.auto!==i.primKey.auto&&!wc)s.recreate=!0,n.change.push(s);else{const l=o.idxByName,a=i.idxByName;let c;for(c in l)a[c]||s.del.push(c);for(c in a){const u=l[c],d=a[c];u?u.src!==d.src&&s.change.push(d):s.add.push(d)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}else n.add.push([r,i])}return n}function lu(t,e,n,r){const o=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(i=>pd(o,i)),o}function pd(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function md(t,e,n){const r={};return Aa(e.objectStoreNames,0).forEach(o=>{const i=n.objectStore(o);let s=i.keyPath;const l=ud(Ny(s),s||"",!1,!1,!!i.autoIncrement,s&&typeof s!="string",!0),a=[];for(let u=0;u<i.indexNames.length;++u){const d=i.index(i.indexNames[u]);s=d.keyPath;var c=ud(d.name,s,!!d.unique,!!d.multiEntry,!1,s&&typeof s!="string",!1);a.push(c)}r[o]=Py(o,l,a)}),r}function gd({_novip:t},e,n){const r=n.db.objectStoreNames;for(let o=0;o<r.length;++o){const i=r[o],s=n.objectStore(i);t._hasGetAll="getAll"in s;for(let l=0;l<s.indexNames.length;++l){const a=s.indexNames[l],c=s.index(a).keyPath,u=typeof c=="string"?c:"["+Aa(c).join("+")+"]";if(e[i]){const d=e[i].idxByName[u];d&&(d.name=a,delete e[i].idxByName[u],e[i].idxByName[a]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Ct.WorkerGlobalScope&&Ct instanceof Ct.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}let fx=class{_parseStoresSpec(e,n){Bt(e).forEach(r=>{if(e[r]!==null){var o=e[r].split(",").map((s,l)=>{const a=(s=s.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return ud(a,c||null,/\&/.test(s),/\*/.test(s),/\+\+/.test(s),cn(c),l===0)}),i=o.shift();if(i.multi)throw new je.Schema("Primary key cannot be multi-valued");o.forEach(s=>{if(s.auto)throw new je.Schema("Only primary key can be marked as autoIncrement (++)");if(!s.keyPath)throw new je.Schema("Index must have a name and cannot be an empty string")}),n[r]=Py(r,i,o)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?Cn(this._cfg.storesSource,e):e;const r=n._versions,o={};let i={};return r.forEach(s=>{Cn(o,s._cfg.storesSource),i=s._cfg.dbschema={},s._parseStoresSpec(o,i)}),n._dbSchema=i,hd(n,[n._allTables,n,n.Transaction.prototype]),Da(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],Bt(i),i),n._storeNames=Bt(i),this}upgrade(e){return this._cfg.contentUpgrade=yf(this._cfg.contentUpgrade||bt,e),this}};function Sf(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new jt(Sc,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function kf(t){return t&&typeof t.databases=="function"}function yd(t){return ko(function(){return $e.letThrough=!0,t()})}function hx(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function px(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?Ht(e.dbOpenError):t);Nr&&(e.openCanceller._stackHolder=ui()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function o(){if(e.openCanceller!==r)throw new je.DatabaseClosed("db.open() was cancelled")}let i=e.dbReadyResolve,s=null,l=!1;const a=()=>new Se((c,u)=>{if(o(),!n)throw new je.MissingAPI;const d=t.name,h=e.autoSchema?n.open(d):n.open(d,Math.round(10*t.verno));if(!h)throw new je.MissingAPI;h.onerror=Sr(u),h.onblocked=Et(t._fireOnBlocked),h.onupgradeneeded=Et(m=>{if(s=h.transaction,e.autoSchema&&!t._options.allowEmptyDB){h.onerror=Zs,s.abort(),h.result.close();const b=n.deleteDatabase(d);b.onsuccess=b.onerror=Et(()=>{u(new je.NoSuchDatabase(`Database ${d} doesnt exist`))})}else{s.onerror=Sr(u);var g=m.oldVersion>Math.pow(2,62)?0:m.oldVersion;l=g<1,t._novip.idbdb=h.result,dx(t,g/10,s,u)}},u),h.onsuccess=Et(()=>{s=null;const m=t._novip.idbdb=h.result,g=Aa(m.objectStoreNames);if(g.length>0)try{const k=m.transaction((b=g).length===1?b[0]:b,"readonly");e.autoSchema?function({_novip:T},A,N){T.verno=A.version/10;const B=T._dbSchema=md(0,A,N);T._storeNames=Aa(A.objectStoreNames,0),Da(T,[T._allTables],Bt(B),B)}(t,m,k):(gd(t,t._dbSchema,k),function(T,A){const N=$y(md(0,T.idbdb,A),T._dbSchema);return!(N.add.length||N.change.some(B=>B.add.length||B.change.length))}(t,k)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),fd(t,k)}catch{}var b;Ps.push(t),m.onversionchange=Et(k=>{e.vcFired=!0,t.on("versionchange").fire(k)}),m.onclose=Et(k=>{t.on("close").fire(k)}),l&&function({indexedDB:k,IDBKeyRange:T},A){!kf(k)&&A!==Sc&&Sf(k,T).put({name:A}).catch(bt)}(t._deps,d),c()},u)}).catch(c=>c&&c.name==="UnknownError"&&e.PR1398_maxLoop>0?(e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),a()):Se.reject(c));return Se.race([r,(typeof navigator>"u"?Se.resolve():hx()).then(a)]).then(()=>(o(),e.onReadyBeingFired=[],Se.resolve(yd(()=>t.on.ready.fire(t.vip))).then(function c(){if(e.onReadyBeingFired.length>0){let u=e.onReadyBeingFired.reduce(yf,bt);return e.onReadyBeingFired=[],Se.resolve(yd(()=>u(t.vip))).then(c)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(c=>{e.dbOpenError=c;try{s&&s.abort()}catch{}return r===e.openCanceller&&t._close(),Ht(c)}).finally(()=>{e.openComplete=!0,i()})}function bd(t){var e=i=>t.next(i),n=o(e),r=o(i=>t.throw(i));function o(i){return s=>{var l=i(s),a=l.value;return l.done?a:a&&typeof a.then=="function"?a.then(n,r):cn(a)?Promise.all(a).then(n,r):n(a)}}return o(e)()}function mx(t,e,n){var r=arguments.length;if(r<2)throw new je.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];return n=o.pop(),[t,dy(o),n]}function Dy(t,e,n,r,o){return Se.resolve().then(()=>{const i=$e.transless||$e,s=t._createTransaction(e,n,t._dbSchema,r),l={trans:s,transless:i};if(r)s.idbtrans=r.idbtrans;else try{s.create(),t._state.PR1398_maxLoop=3}catch(d){return d.name===gf.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Dy(t,e,n,null,o))):Ht(d)}const a=pf(o);let c;a&&rs();const u=Se.follow(()=>{if(c=o.call(s,s),c)if(a){var d=Gr.bind(null,null);c.then(d,d)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=bd(c))},l);return(c&&typeof c.then=="function"?Se.resolve(c).then(d=>s.active?d:Ht(new je.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>c)).then(d=>(r&&s._resolve(),s._completion.then(()=>d))).catch(d=>(s._reject(d),Ht(d)))})}function Dl(t,e,n){const r=cn(t)?t.slice():[t];for(let o=0;o<n;++o)r.push(e);return r}const gx={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,o={},i=[];function s(u,d,h){const m=Ds(u),g=o[m]=o[m]||[],b=u==null?0:typeof u=="string"?1:u.length,k=d>0,T={...h,isVirtual:k,keyTail:d,keyLength:b,extractKey:dd(u),unique:!k&&h.unique};return g.push(T),T.isPrimaryKey||i.push(T),b>1&&s(b===2?u[0]:u.slice(0,b-1),d+1,h),g.sort((A,N)=>A.keyTail-N.keyTail),T}const l=s(r.primaryKey.keyPath,0,r.primaryKey);o[":id"]=[l];for(const u of r.indexes)s(u.keyPath,0,u);function a(u){const d=u.query.index;return d.isVirtual?{...u,query:{index:d,range:(h=u.query.range,m=d.keyTail,{type:h.type===1?2:h.type,lower:Dl(h.lower,h.lowerOpen?t.MAX_KEY:t.MIN_KEY,m),lowerOpen:!0,upper:Dl(h.upper,h.upperOpen?t.MIN_KEY:t.MAX_KEY,m),upperOpen:!0})}}:u;var h,m}return{...n,schema:{...r,primaryKey:l,indexes:i,getIndexByKeyPath:function(u){const d=o[Ds(u)];return d&&d[0]}},count:u=>n.count(a(u)),query:u=>n.query(a(u)),openCursor(u){const{keyTail:d,isVirtual:h,keyLength:m}=u.query.index;return h?n.openCursor(a(u)).then(g=>g&&function(b){return Object.create(b,{continue:{value:function(T){T!=null?b.continue(Dl(T,u.reverse?t.MAX_KEY:t.MIN_KEY,d)):u.unique?b.continue(b.key.slice(0,m).concat(u.reverse?t.MIN_KEY:t.MAX_KEY,d)):b.continue()}},continuePrimaryKey:{value(T,A){b.continuePrimaryKey(Dl(T,t.MAX_KEY,d),A)}},primaryKey:{get:()=>b.primaryKey},key:{get(){const T=b.key;return m===1?T[0]:T.slice(0,m)}},value:{get:()=>b.value}})}(g)):n.openCursor(u)}}}}}};function xf(t,e,n,r){return n=n||{},r=r||"",Bt(t).forEach(o=>{if(Gn(e,o)){var i=t[o],s=e[o];if(typeof i=="object"&&typeof s=="object"&&i&&s){const l=Xu(i);l!==Xu(s)?n[r+o]=e[o]:l==="Object"?xf(i,s,n,r+o+"."):i!==s&&(n[r+o]=e[o])}else i!==s&&(n[r+o]=e[o])}else n[r+o]=void 0}),Bt(e).forEach(o=>{Gn(t,o)||(n[r+o]=e[o])}),n}const yx={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(i){const s=$e.trans,{deleting:l,creating:a,updating:c}=s.table(e).hook;switch(i.type){case"add":if(a.fire===bt)break;return s._promise("readwrite",()=>u(i),!0);case"put":if(a.fire===bt&&c.fire===bt)break;return s._promise("readwrite",()=>u(i),!0);case"delete":if(l.fire===bt)break;return s._promise("readwrite",()=>u(i),!0);case"deleteRange":if(l.fire===bt)break;return s._promise("readwrite",()=>function(h){return d(h.trans,h.range,1e4)}(i),!0)}return n.mutate(i);function u(h){const m=$e.trans,g=h.keys||function(b,k){return k.type==="delete"?k.keys:k.keys||k.values.map(b.extractKey)}(r,h);if(!g)throw new Error("Keys missing");return(h=h.type==="add"||h.type==="put"?{...h,keys:g}:{...h}).type!=="delete"&&(h.values=[...h.values]),h.keys&&(h.keys=[...h.keys]),function(b,k,T){return k.type==="add"?Promise.resolve([]):b.getMany({trans:k.trans,keys:T,cache:"immutable"})}(n,h,g).then(b=>{const k=g.map((T,A)=>{const N=b[A],B={onerror:null,onsuccess:null};if(h.type==="delete")l.fire.call(B,T,N,m);else if(h.type==="add"||N===void 0){const D=a.fire.call(B,T,h.values[A],m);T==null&&D!=null&&(T=D,h.keys[A]=T,r.outbound||hr(h.values[A],r.keyPath,T))}else{const D=xf(N,h.values[A]),V=c.fire.call(B,D,T,N,m);if(V){const j=h.values[A];Object.keys(V).forEach(K=>{Gn(j,K)?j[K]=V[K]:hr(j,K,V[K])})}}return B});return n.mutate(h).then(({failures:T,results:A,numFailures:N,lastResult:B})=>{for(let D=0;D<g.length;++D){const V=A?A[D]:g[D],j=k[D];V==null?j.onerror&&j.onerror(T[D]):j.onsuccess&&j.onsuccess(h.type==="put"&&b[D]?h.values[D]:V)}return{failures:T,results:A,numFailures:N,lastResult:B}}).catch(T=>(k.forEach(A=>A.onerror&&A.onerror(T)),Promise.reject(T)))})}function d(h,m,g){return n.query({trans:h,values:!1,query:{index:r,range:m},limit:g}).then(({result:b})=>u({type:"delete",keys:b,trans:h}).then(k=>k.numFailures>0?Promise.reject(k.failures[0]):b.length<g?{failures:[],numFailures:0,lastResult:void 0}:d(h,{...m,lower:b[b.length-1],lowerOpen:!0},g)))}}}}})};function Iy(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let o=0,i=0;o<e.keys.length&&i<t.length;++o)Sn(e.keys[o],t[i])===0&&(r.push(n?pl(e.values[o]):e.values[o]),++i);return r.length===t.length?r:null}catch{return null}}const bx={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const o=Iy(r.keys,r.trans._cache,r.cache==="clone");return o?Se.resolve(o):n.getMany(r).then(i=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?pl(i):i},i))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Cf(t){return!("from"in t)}const Lr=function(t,e){if(!this){const n=new Lr;return t&&"d"in t&&Cn(n,t),n}Cn(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function tl(t,e,n){const r=Sn(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Cf(t))return Cn(t,{from:e,to:n,d:1});const o=t.l,i=t.r;if(Sn(n,t.from)<0)return o?tl(o,e,n):t.l={from:e,to:n,d:1,l:null,r:null},mp(t);if(Sn(e,t.to)>0)return i?tl(i,e,n):t.r={from:e,to:n,d:1,l:null,r:null},mp(t);Sn(e,t.from)<0&&(t.from=e,t.l=null,t.d=i?i.d+1:1),Sn(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const s=!t.r;o&&!t.l&&Ia(t,o),i&&s&&Ia(t,i)}function Ia(t,e){Cf(e)||function n(r,{from:o,to:i,l:s,r:l}){tl(r,o,i),s&&n(r,s),l&&n(r,l)}(t,e)}function vx(t,e){const n=vd(e);let r=n.next();if(r.done)return!1;let o=r.value;const i=vd(t);let s=i.next(o.from),l=s.value;for(;!r.done&&!s.done;){if(Sn(l.from,o.to)<=0&&Sn(l.to,o.from)>=0)return!0;Sn(o.from,l.from)<0?o=(r=n.next(l.from)).value:l=(s=i.next(o.from)).value}return!1}function vd(t){let e=Cf(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&Sn(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||Sn(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function mp(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),o=r>1?"r":r<-1?"l":"";if(o){const i=o==="r"?"l":"r",s={...t},l=t[o];t.from=l.from,t.to=l.to,t[o]=l[o],s[o]=l[i],t[i]=s,s.d=gp(s)}t.d=gp(t)}function gp({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}Ji(Lr.prototype,{add(t){return Ia(this,t),this},addKey(t){return tl(this,t,t),this},addKeys(t){return t.forEach(e=>tl(this,e,e)),this},[Zu](){return vd(this)}});const wx={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new Lr(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const o=t.table(r),{schema:i}=o,{primaryKey:s}=i,{extractKey:l,outbound:a}=s,c={...o,mutate:h=>{const m=h.trans,g=m.mutatedParts||(m.mutatedParts={}),b=V=>{const j=`idb://${e}/${r}/${V}`;return g[j]||(g[j]=new Lr)},k=b(""),T=b(":dels"),{type:A}=h;let[N,B]=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[];const D=h.trans._cache;return o.mutate(h).then(V=>{if(cn(N)){A!=="delete"&&(N=V.results),k.addKeys(N);const j=Iy(N,D);j||A==="add"||T.addKeys(N),(j||B)&&function(K,E,S,F){function C(ue){const Q=K(ue.name||"");function xe(ee){return ee!=null?ue.extractKey(ee):null}const be=ee=>ue.multiEntry&&cn(ee)?ee.forEach(Ae=>Q.addKey(Ae)):Q.addKey(ee);(S||F).forEach((ee,Ae)=>{const et=S&&xe(S[Ae]),Ue=F&&xe(F[Ae]);Sn(et,Ue)!==0&&(et!=null&&be(et),Ue!=null&&be(Ue))})}E.indexes.forEach(C)}(b,i,j,B)}else if(N){const j={from:N.lower,to:N.upper};T.add(j),k.add(j)}else k.add(n),T.add(n),i.indexes.forEach(j=>b(j.name).add(n));return V})}},u=({query:{index:h,range:m}})=>{var g,b;return[h,new Lr((g=m.lower)!==null&&g!==void 0?g:t.MIN_KEY,(b=m.upper)!==null&&b!==void 0?b:t.MAX_KEY)]},d={get:h=>[s,new Lr(h.key)],getMany:h=>[s,new Lr().addKeys(h.keys)],count:u,query:u,openCursor:u};return Bt(d).forEach(h=>{c[h]=function(m){const{subscr:g}=$e;if(g){const b=B=>{const D=`idb://${e}/${r}/${B}`;return g[D]||(g[D]=new Lr)},k=b(""),T=b(":dels"),[A,N]=d[h](m);if(b(A.name||"").add(N),!A.isPrimaryKey){if(h!=="count"){const B=h==="query"&&a&&m.values&&o.query({...m,values:!1});return o[h].apply(this,arguments).then(D=>{if(h==="query"){if(a&&m.values)return B.then(({result:j})=>(k.addKeys(j),D));const V=m.values?D.result.map(l):D.result;m.values?k.addKeys(V):T.addKeys(V)}else if(h==="openCursor"){const V=D,j=m.values;return V&&Object.create(V,{key:{get:()=>(T.addKey(V.primaryKey),V.key)},primaryKey:{get(){const K=V.primaryKey;return T.addKey(K),K}},value:{get:()=>(j&&k.addKey(V.primaryKey),V.value)}})}return D})}T.add(n)}}return o[h].apply(this,arguments)}}),c}}}};let jt=class sa{constructor(e,n){this._middlewares={},this.verno=0;const r=sa.dependencies;this._options=n={addons:sa.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:o}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:bt,dbReadyPromise:null,cancelOpen:bt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var s;i.dbReadyPromise=new Se(l=>{i.dbReadyResolve=l}),i.openCanceller=new Se((l,a)=>{i.cancelOpen=a}),this._state=i,this.name=e,this.on=$s(this,"populate","blocked","versionchange","close",{ready:[yf,bt]}),this.on.ready.subscribe=ly(this.on.ready.subscribe,l=>(a,c)=>{sa.vip(()=>{const u=this._state;if(u.openComplete)u.dbOpenError||Se.resolve().then(a),c&&l(a);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(a),c&&l(a);else{l(a);const d=this;c||l(function h(){d.on.ready.unsubscribe(a),d.on.ready.unsubscribe(h)})}})}),this.Collection=(s=this,fs(rx.prototype,function(l,a){this.db=s;let c=Ay,u=null;if(a)try{c=a()}catch(g){u=g}const d=l._ctx,h=d.table,m=h.hook.reading.fire;this._ctx={table:h,index:d.index,isPrimKey:!d.index||h.schema.primKey.keyPath&&d.index===h.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:u,or:d.or,valueMapper:m!==Ys?m:null}})),this.Table=function(l){return fs(nx.prototype,function(a,c,u){this.db=l,this._tx=u,this.name=a,this.schema=c,this.hook=l._allTables[a]?l._allTables[a].hook:$s(null,{creating:[Kk,bt],reading:[zk,Ys],updating:[Wk,bt],deleting:[Uk,bt]})})}(this),this.Transaction=function(l){return fs(lx.prototype,function(a,c,u,d,h){this.db=l,this.mode=a,this.storeNames=c,this.schema=u,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=$s(this,"complete","error","abort"),this.parent=h||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Se((m,g)=>{this._resolve=m,this._reject=g}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},m=>{var g=this.active;return this.active=!1,this.on.error.fire(m),this.parent?this.parent._reject(m):g&&this.idbtrans&&this.idbtrans.abort(),Ht(m)})})}(this),this.Version=function(l){return fs(fx.prototype,function(a){this.db=l,this._cfg={version:a,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(l){return fs(_y.prototype,function(a,c,u){this.db=l,this._ctx={table:a,index:c===":id"?null:c,or:u};const d=l._deps.indexedDB;if(!d)throw new je.MissingAPI;this._cmp=this._ascending=d.cmp.bind(d),this._descending=(h,m)=>d.cmp(m,h),this._max=(h,m)=>d.cmp(h,m)>0?h:m,this._min=(h,m)=>d.cmp(h,m)<0?h:m,this._IDBKeyRange=l._deps.IDBKeyRange})}(this),this.on("versionchange",l=>{l.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",l=>{!l.newVersion||l.newVersion<l.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${l.oldVersion/10}`)}),this._maxKey=el(n.IDBKeyRange),this._createTransaction=(l,a,c,u)=>new this.Transaction(l,a,c,this._options.chromeTransactionDurability,u),this._fireOnBlocked=l=>{this.on("blocked").fire(l),Ps.filter(a=>a.name===this.name&&a!==this&&!a._state.vcFired).map(a=>a.on("versionchange").fire(l))},this.use(gx),this.use(yx),this.use(wx),this.use(bx),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach(l=>l(this))}version(e){if(isNaN(e)||e<.1)throw new je.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new je.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(o=>o._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(ux),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||$e.letThrough||this._vip)?e():new Se((n,r)=>{if(this._state.openComplete)return r(new je.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new je.DatabaseClosed);this.open().catch(bt)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:o}){o&&this.unuse({stack:e,name:o});const i=this._middlewares[e]||(this._middlewares[e]=[]);return i.push({stack:e,create:n,level:r??10,name:o}),i.sort((s,l)=>s.level-l.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(o=>r?o.create!==r:!!n&&o.name!==n)),this}open(){return px(this)}_close(){const e=this._state,n=Ps.indexOf(this);if(n>=0&&Ps.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new Se(r=>{e.dbReadyResolve=r}),e.openCanceller=new Se((r,o)=>{e.cancelOpen=o})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new je.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new Se((r,o)=>{const i=()=>{this.close();var s=this._deps.indexedDB.deleteDatabase(this.name);s.onsuccess=Et(()=>{(function({indexedDB:l,IDBKeyRange:a},c){!kf(l)&&c!==Sc&&Sf(l,a).delete(c).catch(bt)})(this._deps,this.name),r()}),s.onerror=Sr(o),s.onblocked=this._fireOnBlocked};if(e)throw new je.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(i):i()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Bt(this._allTables).map(e=>this._allTables[e])}transaction(){const e=mx.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let o=$e.trans;o&&o.db===this&&e.indexOf("!")===-1||(o=null);const i=e.indexOf("?")!==-1;let s,l;e=e.replace("!","").replace("?","");try{if(l=n.map(c=>{var u=c instanceof this.Table?c.name:c;if(typeof u!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),e=="r"||e===nu)s=nu;else{if(e!="rw"&&e!=ru)throw new je.InvalidArgument("Invalid transaction mode: "+e);s=ru}if(o){if(o.mode===nu&&s===ru){if(!i)throw new je.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&l.forEach(c=>{if(o&&o.storeNames.indexOf(c)===-1){if(!i)throw new je.SubTransaction("Table "+c+" not included in parent transaction.");o=null}}),i&&o&&!o.active&&(o=null)}}catch(c){return o?o._promise(null,(u,d)=>{d(c)}):Ht(c)}const a=Dy.bind(null,this,s,l,o,r);return o?o._promise(s,a,"lock"):$e.trans?is($e.transless,()=>this._whenReady(a)):this._whenReady(a)}table(e){if(!Gn(this._allTables,e))throw new je.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}};const Sx=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";let kx=class{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[Sx](){return this}};function By(t,e){return Bt(e).forEach(n=>{Ia(t[n]||(t[n]=new Lr),e[n])}),t}function Ry(t){let e,n=!1;const r=new kx(o=>{const i=pf(t);let s=!1,l={},a={};const c={get closed(){return s},unsubscribe:()=>{s=!0,Co.storagemutated.unsubscribe(m)}};o.start&&o.start(c);let u=!1,d=!1;function h(){return Bt(a).some(b=>l[b]&&vx(l[b],a[b]))}const m=b=>{By(l,b),h()&&g()},g=()=>{if(u||s)return;l={};const b={},k=function(T){i&&rs();const A=()=>ko(t,{subscr:T,trans:null}),N=$e.trans?is($e.transless,A):A();return i&&N.then(Gr,Gr),N}(b);d||(Co(Qs,m),d=!0),u=!0,Promise.resolve(k).then(T=>{n=!0,e=T,u=!1,s||(h()?g():(l={},a=b,o.next&&o.next(T)))},T=>{u=!1,n=!1,o.error&&o.error(T),c.unsubscribe()})};return g(),c});return r.hasValue=()=>n,r.getValue=()=>e,r}let wd;try{wd={indexedDB:Ct.indexedDB||Ct.mozIndexedDB||Ct.webkitIndexedDB||Ct.msIndexedDB,IDBKeyRange:Ct.IDBKeyRange||Ct.webkitIDBKeyRange}}catch{wd={indexedDB:null,IDBKeyRange:null}}const Bo=jt;function la(t){let e=Hr;try{Hr=!0,Co.storagemutated.fire(t)}finally{Hr=e}}Ji(Bo,{...ea,delete:t=>new Bo(t,{addons:[]}).delete(),exists:t=>new Bo(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return kf(e)?Promise.resolve(e.databases()).then(r=>r.map(o=>o.name).filter(o=>o!==Sc)):Sf(e,n).toCollection().primaryKeys()}(Bo.dependencies).then(t)}catch{return Ht(new je.MissingAPI)}},defineClass:()=>function(t){Cn(this,t)},ignoreTransaction:t=>$e.trans?is($e.transless,t):t(),vip:yd,async:function(t){return function(){try{var e=bd(t.apply(this,arguments));return e&&typeof e.then=="function"?e:Se.resolve(e)}catch(n){return Ht(n)}}},spawn:function(t,e,n){try{var r=bd(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:Se.resolve(r)}catch(o){return Ht(o)}},currentTransaction:{get:()=>$e.trans||null},waitFor:function(t,e){const n=Se.resolve(typeof t=="function"?Bo.ignoreTransaction(t):t).timeout(e||6e4);return $e.trans?$e.trans.waitFor(n):n},Promise:Se,debug:{get:()=>Nr,set:t=>{hy(t,t==="dexie"?()=>!0:Oy)}},derive:ji,extend:Cn,props:Ji,override:ly,Events:$s,on:Co,liveQuery:Ry,extendObservabilitySet:By,getByKeyPath:Ur,setByKeyPath:hr,delByKeyPath:function(t,e){typeof e=="string"?hr(t,e,void 0):"length"in e&&[].map.call(e,function(n){hr(t,n,void 0)})},shallowClone:uy,deepClone:pl,getObjectDiff:xf,cmp:Sn,asap:ay,minKey:cd,addons:[],connections:Ps,errnames:gf,dependencies:wd,semVer:cp,version:cp.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),Bo.maxKey=el(Bo.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Co(Qs,t=>{if(!Hr){let e;wc?(e=document.createEvent("CustomEvent"),e.initCustomEvent(co,!0,!0,t)):e=new CustomEvent(co,{detail:t}),Hr=!0,dispatchEvent(e),Hr=!1}}),addEventListener(co,({detail:t})=>{Hr||la(t)}));let Hr=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(co);typeof t.unref=="function"&&t.unref(),Co(Qs,e=>{Hr||t.postMessage(e)}),t.onmessage=e=>{e.data&&la(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Co(Qs,e=>{try{Hr||(typeof localStorage<"u"&&localStorage.setItem(co,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:co,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===co){const n=JSON.parse(e.newValue);n&&la(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===co&&la(e.changedParts)})}Se.rejectionMapper=function(t,e){if(!t||t instanceof Hi||t instanceof TypeError||t instanceof SyntaxError||!t.name||!ip[t.name])return t;var n=new ip[t.name](e||t.message,t);return"stack"in t&&Kr(n,"stack",{get:function(){return this.inner.stack}}),n},hy(Nr,Oy);var yp={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ba=function(){return Ba=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ba.apply(this,arguments)};function To(t,e,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function l(u){try{c(r.next(u))}catch(d){s(d)}}function a(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):o(u.value).then(l,a)}c((r=r.apply(t,[])).next())})}function ur(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(u){return a([c,u])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(i=c[0]&2?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,o=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],o=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function xx(t){var e=[t.schema.primKey].concat(t.schema.indexes);return e.map(function(n){return n.src}).join(",")}function Cx(t){for(var e={},n=0,r=t.tables;n<r.length;n++){var o=r[n];e[o.name]=o.schema}return e}function Ly(t,e){return new Promise(function(n,r){var o=new FileReader;o.onabort=function(i){return r(new Error("file read aborted"))},o.onerror=function(i){return r(i.target.error)},o.onload=function(i){return n(i.target.result)},e==="binary"?o.readAsArrayBuffer(t):o.readAsText(t)})}function Vy(t,e){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync,r=e==="binary"?n.readAsArrayBuffer(t):n.readAsText(t);return r}var Sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tf(t,e){return e={exports:{}},t(e,e.exports),e.exports}var kc=Tf(function(t,e){(function(n,r){t.exports=r()})(Sd,function(){function n(H){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(z){return typeof z}:n=function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},n(H)}function r(H,z,q,W,ae,O,_){try{var R=H[O](_),L=R.value}catch(U){q(U);return}R.done?z(L):Promise.resolve(L).then(W,ae)}function o(H){return function(){var z=this,q=arguments;return new Promise(function(W,ae){var O=H.apply(z,q);function _(L){r(O,W,ae,_,R,"next",L)}function R(L){r(O,W,ae,_,R,"throw",L)}_(void 0)})}}function i(H,z){if(!(H instanceof z))throw new TypeError("Cannot call a class as a function")}function s(H,z){for(var q=0;q<z.length;q++){var W=z[q];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(H,W.key,W)}}function l(H,z,q){return z&&s(H.prototype,z),H}function a(H,z,q){return z in H?Object.defineProperty(H,z,{value:q,enumerable:!0,configurable:!0,writable:!0}):H[z]=q,H}function c(H,z){var q=Object.keys(H);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(H);z&&(W=W.filter(function(ae){return Object.getOwnPropertyDescriptor(H,ae).enumerable})),q.push.apply(q,W)}return q}function u(H){for(var z=1;z<arguments.length;z++){var q=arguments[z]!=null?arguments[z]:{};z%2?c(Object(q),!0).forEach(function(W){a(H,W,q[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(q)):c(Object(q)).forEach(function(W){Object.defineProperty(H,W,Object.getOwnPropertyDescriptor(q,W))})}return H}function d(H,z){return g(H)||k(H,z)||A()}function h(H){return m(H)||b(H)||T()}function m(H){if(Array.isArray(H)){for(var z=0,q=new Array(H.length);z<H.length;z++)q[z]=H[z];return q}}function g(H){if(Array.isArray(H))return H}function b(H){if(Symbol.iterator in Object(H)||Object.prototype.toString.call(H)==="[object Arguments]")return Array.from(H)}function k(H,z){if(Symbol.iterator in Object(H)||Object.prototype.toString.call(H)==="[object Arguments]"){var q=[],W=!0,ae=!1,O=void 0;try{for(var _=H[Symbol.iterator](),R;!(W=(R=_.next()).done)&&(q.push(R.value),!(z&&q.length===z));W=!0);}catch(L){ae=!0,O=L}finally{try{!W&&_.return!=null&&_.return()}finally{if(ae)throw O}}return q}}function T(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function A(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var N=function H(z){i(this,H),this.p=new Promise(z)};N.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(N.prototype[Symbol.toStringTag]="TypesonPromise"),N.prototype.then=function(H,z){var q=this;return new N(function(W,ae){q.p.then(function(O){W(H?H(O):O)}).catch(function(O){return z?z(O):Promise.reject(O)}).then(W,ae)})},N.prototype.catch=function(H){return this.then(null,H)},N.resolve=function(H){return new N(function(z){z(H)})},N.reject=function(H){return new N(function(z,q){q(H)})},["all","race"].forEach(function(H){N[H]=function(z){return new N(function(q,W){Promise[H](z.map(function(ae){return ae&&ae.constructor&&ae.constructor.__typeson__type__==="TypesonPromise"?ae.p:ae})).then(q,W)})}});var B={},D=B.toString,V={}.hasOwnProperty,j=Object.getPrototypeOf,K=V.toString;function E(H,z){return Q(H)&&typeof H.then=="function"&&(!z||typeof H.catch=="function")}function S(H){return D.call(H).slice(8,-1)}function F(H,z){if(!H||n(H)!=="object")return!1;var q=j(H);if(!q)return z===null;var W=V.call(q,"constructor")&&q.constructor;return typeof W!="function"?z===null:z===W||z!==null&&K.call(W)===K.call(z)||typeof z=="function"&&typeof W.__typeson__type__=="string"&&W.__typeson__type__===z.__typeson__type__}function C(H){if(!H||S(H)!=="Object")return!1;var z=j(H);return z?F(H,Object):!0}function ue(H){if(!H||S(H)!=="Object")return!1;var z=j(H);return z?F(H,Object)||ue(z):!0}function Q(H){return H&&n(H)==="object"}function xe(H){return H.replace(/~/g,"~0").replace(/\./g,"~1")}function be(H){return H.replace(/~1/g,".").replace(/~0/g,"~")}function ee(H,z){if(z==="")return H;var q=z.indexOf(".");if(q>-1){var W=H[be(z.slice(0,q))];return W===void 0?void 0:ee(W,z.slice(q+1))}return H[be(z)]}function Ae(H,z,q){if(z==="")return q;var W=z.indexOf(".");if(W>-1){var ae=H[be(z.slice(0,W))];return Ae(ae,z.slice(W+1),q)}return H[be(z)]=q,H}function et(H){return H===null?"null":Array.isArray(H)?"array":n(H)}var Ue=Object.keys,ot=Array.isArray,ht={}.hasOwnProperty,Lt=["type","replaced","iterateIn","iterateUnsetNumeric"];function Me(H,z){if(H.keypath==="")return-1;var q=H.keypath.match(/\./g)||0,W=z.keypath.match(/\./g)||0;return q&&(q=q.length),W&&(W=W.length),q>W?-1:q<W?1:H.keypath<z.keypath?-1:H.keypath>z.keypath}var tt=function(){function H(z){i(this,H),this.options=z,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return l(H,[{key:"stringify",value:function(q,W,ae,O){O=u({},this.options,{},O,{stringification:!0});var _=this.encapsulate(q,null,O);return ot(_)?JSON.stringify(_[0],W,ae):_.then(function(R){return JSON.stringify(R,W,ae)})}},{key:"stringifySync",value:function(q,W,ae,O){return this.stringify(q,W,ae,u({throwOnBadSyncType:!0},O,{sync:!0}))}},{key:"stringifyAsync",value:function(q,W,ae,O){return this.stringify(q,W,ae,u({throwOnBadSyncType:!0},O,{sync:!1}))}},{key:"parse",value:function(q,W,ae){return ae=u({},this.options,{},ae,{parse:!0}),this.revive(JSON.parse(q,W),ae)}},{key:"parseSync",value:function(q,W,ae){return this.parse(q,W,u({throwOnBadSyncType:!0},ae,{sync:!0}))}},{key:"parseAsync",value:function(q,W,ae){return this.parse(q,W,u({throwOnBadSyncType:!0},ae,{sync:!1}))}},{key:"specialTypeNames",value:function(q,W){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ae.returnTypeNames=!0,this.encapsulate(q,W,ae)}},{key:"rootTypeName",value:function(q,W){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ae.iterateNone=!0,this.encapsulate(q,W,ae)}},{key:"encapsulate",value:function(q,W,ae){ae=u({sync:!0},this.options,{},ae);var O=ae,_=O.sync,R=this,L={},U=[],J=[],oe=[],G="cyclic"in ae?ae.cyclic:!0,Z=ae,Y=Z.encapsulateObserver,ge=ke("",q,G,W||{},oe);function le(me){var w=Object.values(L);if(ae.iterateNone)return w.length?w[0]:H.getJSONType(me);if(w.length){if(ae.returnTypeNames)return h(new Set(w));!me||!C(me)||ht.call(me,"$types")?me={$:me,$types:{$:L}}:me.$types=L}else Q(me)&&ht.call(me,"$types")&&(me={$:me,$types:!0});return ae.returnTypeNames?!1:me}function he(me,w){return pe.apply(this,arguments)}function pe(){return pe=o(regeneratorRuntime.mark(function me(w,y){var x;return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,Promise.all(y.map(function(re){return re[1].p}));case 2:return x=I.sent,I.next=5,Promise.all(x.map(function(){var re=o(regeneratorRuntime.mark(function ie(Te){var ve,Ie,Ge,Xe,ye,it,nt,pt,mt,Le,Vt,Ee,de,Pe;return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:if(ve=[],Ie=y.splice(0,1),Ge=d(Ie,1),Xe=Ge[0],ye=d(Xe,7),it=ye[0],nt=ye[2],pt=ye[3],mt=ye[4],Le=ye[5],Vt=ye[6],Ee=ke(it,Te,nt,pt,ve,!0,Vt),de=F(Ee,N),!(it&&de)){Be.next=11;break}return Be.next=8,Ee.p;case 8:return Pe=Be.sent,mt[Le]=Pe,Be.abrupt("return",he(w,ve));case 11:return it?mt[Le]=Ee:de?w=Ee.p:w=Ee,Be.abrupt("return",he(w,ve));case 13:case"end":return Be.stop()}},ie)}));return function(ie){return re.apply(this,arguments)}}()));case 5:return I.abrupt("return",w);case 6:case"end":return I.stop()}},me)})),pe.apply(this,arguments)}function te(me,w,y){Object.assign(me,w);var x=Lt.map(function($){var I=me[$];return delete me[$],I});y(),Lt.forEach(function($,I){me[$]=x[I]})}function ke(me,w,y,x,$,I,re){var ie,Te={},ve=n(w),Ie=Y?function(de){var Pe=re||x.type||H.getJSONType(w);Y(Object.assign(de||Te,{keypath:me,value:w,cyclic:y,stateObj:x,promisesData:$,resolvingTypesonPromise:I,awaitingTypesonPromise:F(w,N)},{type:Pe}))}:null;if(["string","boolean","number","undefined"].includes(ve))return w===void 0||ve==="number"&&(isNaN(w)||w===-1/0||w===1/0)?(x.replaced?ie=w:ie=Oe(me,w,x,$,!1,I,Ie),ie!==w&&(Te={replaced:ie})):ie=w,Ie&&Ie(),ie;if(w===null)return Ie&&Ie(),w;if(y&&!x.iterateIn&&!x.iterateUnsetNumeric&&w&&n(w)==="object"){var Ge=U.indexOf(w);if(Ge<0)y===!0&&(U.push(w),J.push(me));else return L[me]="#",Ie&&Ie({cyclicKeypath:J[Ge]}),"#"+J[Ge]}var Xe=C(w),ye=ot(w),it=(Xe||ye)&&(!R.plainObjectReplacers.length||x.replaced)||x.iterateIn?w:Oe(me,w,x,$,Xe||ye,null,Ie),nt;if(it!==w?(ie=it,Te={replaced:it}):me===""&&F(w,N)?($.push([me,w,y,x,void 0,void 0,x.type]),ie=w):ye&&x.iterateIn!=="object"||x.iterateIn==="array"?(nt=new Array(w.length),Te={clone:nt}):!["function","symbol"].includes(n(w))&&!("toJSON"in w)&&!F(w,N)&&!F(w,Promise)&&!F(w,ArrayBuffer)||Xe||x.iterateIn==="object"?(nt={},x.addLength&&(nt.length=w.length),Te={clone:nt}):ie=w,Ie&&Ie(),ae.iterateNone)return nt||ie;if(!nt)return ie;if(x.iterateIn){var pt=function(Pe){var _e={ownKeys:ht.call(w,Pe)};te(x,_e,function(){var Be=me+(me?".":"")+xe(Pe),Ze=ke(Be,w[Pe],!!y,x,$,I);F(Ze,N)?$.push([Be,Ze,!!y,x,nt,Pe,x.type]):Ze!==void 0&&(nt[Pe]=Ze)})};for(var mt in w)pt(mt);Ie&&Ie({endIterateIn:!0,end:!0})}else Ue(w).forEach(function(de){var Pe=me+(me?".":"")+xe(de),_e={ownKeys:!0};te(x,_e,function(){var Be=ke(Pe,w[de],!!y,x,$,I);F(Be,N)?$.push([Pe,Be,!!y,x,nt,de,x.type]):Be!==void 0&&(nt[de]=Be)})}),Ie&&Ie({endIterateOwn:!0,end:!0});if(x.iterateUnsetNumeric){for(var Le=w.length,Vt=function(Pe){if(!(Pe in w)){var _e=me+(me?".":"")+Pe,Be={ownKeys:!1};te(x,Be,function(){var Ze=ke(_e,void 0,!!y,x,$,I);F(Ze,N)?$.push([_e,Ze,!!y,x,nt,Pe,x.type]):Ze!==void 0&&(nt[Pe]=Ze)})}},Ee=0;Ee<Le;Ee++)Vt(Ee);Ie&&Ie({endIterateUnsetNumeric:!0,end:!0})}return nt}function Oe(me,w,y,x,$,I,re){for(var ie=$?R.plainObjectReplacers:R.nonplainObjectReplacers,Te=ie.length;Te--;){var ve=ie[Te];if(ve.test(w,y)){var Ie=ve.type;if(R.revivers[Ie]){var Ge=L[me];L[me]=Ge?[Ie].concat(Ge):Ie}if(Object.assign(y,{type:Ie,replaced:!0}),(_||!ve.replaceAsync)&&!ve.replace)return re&&re({typeDetected:!0}),ke(me,w,G&&"readonly",y,x,I,Ie);re&&re({replacing:!0});var Xe=_||!ve.replaceAsync?"replace":"replaceAsync";return ke(me,ve[Xe](w,y),G&&"readonly",y,x,I,Ie)}}return w}return oe.length?_&&ae.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(he(ge,oe)).then(le):!_&&ae.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():ae.stringification&&_?[le(ge)]:_?le(ge):Promise.resolve(le(ge))}},{key:"encapsulateSync",value:function(q,W,ae){return this.encapsulate(q,W,u({throwOnBadSyncType:!0},ae,{sync:!0}))}},{key:"encapsulateAsync",value:function(q,W,ae){return this.encapsulate(q,W,u({throwOnBadSyncType:!0},ae,{sync:!1}))}},{key:"revive",value:function(q,W){var ae=q&&q.$types;if(!ae)return q;if(ae===!0)return q.$;W=u({sync:!0},this.options,{},W);var O=W,_=O.sync,R=[],L={},U=!0;ae.$&&C(ae.$)&&(q=q.$,ae=ae.$,U=!1);var J=this;function oe(pe,te){var ke=J.revivers[pe]||[],Oe=d(ke,1),me=Oe[0];if(!me)throw new Error("Unregistered type: "+pe);return _&&!("revive"in me)?te:me[_&&me.revive?"revive":!_&&me.reviveAsync?"reviveAsync":"revive"](te,L)}function G(){var pe=[];if(Object.entries(ae).forEach(function(te){var ke=d(te,2),Oe=ke[0],me=ke[1];me!=="#"&&[].concat(me).forEach(function(w){var y=J.revivers[w]||[null,{}],x=d(y,2),$=x[1].plain;$&&(pe.push({keypath:Oe,type:w}),delete ae[Oe])})}),!!pe.length)return pe.sort(Me).reduce(function te(ke,Oe){var me=Oe.keypath,w=Oe.type;if(E(ke))return ke.then(function($){return te($,{keypath:me,type:w})});var y=ee(q,me);if(y=oe(w,y),F(y,N))return y.then(function($){var I=Ae(q,me,$);I===$&&(q=I)});var x=Ae(q,me,y);x===y&&(q=x)},void 0)}var Z=[];function Y(pe,te,ke,Oe,me){if(!(U&&pe==="$types")){var w=ae[pe],y=ot(te);if(y||C(te)){var x=y?new Array(te.length):{};for(Ue(te).forEach(function(Ge){var Xe=Y(pe+(pe?".":"")+xe(Ge),te[Ge],ke||x,x,Ge),ye=function(nt){return F(nt,At)?x[Ge]=void 0:nt!==void 0&&(x[Ge]=nt),nt};F(Xe,N)?Z.push(Xe.then(function(it){return ye(it)})):ye(Xe)}),te=x;R.length;){var $=d(R[0],4),I=$[0],re=$[1],ie=$[2],Te=$[3],ve=ee(I,re);if(ve!==void 0)ie[Te]=ve;else break;R.splice(0,1)}}if(!w)return te;if(w==="#"){var Ie=ee(ke,te.slice(1));return Ie===void 0&&R.push([ke,te.slice(1),Oe,me]),Ie}return[].concat(w).reduce(function Ge(Xe,ye){return F(Xe,N)?Xe.then(function(it){return Ge(it,ye)}):oe(ye,Xe)},te)}}function ge(pe){return F(pe,At)?void 0:pe}var le=G(),he;return F(le,N)?he=le.then(function(){return q}):(he=Y("",q,null),Z.length&&(he=N.resolve(he).then(function(pe){return N.all([pe].concat(Z))}).then(function(pe){var te=d(pe,1),ke=te[0];return ke}))),E(he)?_&&W.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():F(he,N)?he.p.then(ge):he:!_&&W.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():_?ge(he):Promise.resolve(ge(he))}},{key:"reviveSync",value:function(q,W){return this.revive(q,u({throwOnBadSyncType:!0},W,{sync:!0}))}},{key:"reviveAsync",value:function(q,W){return this.revive(q,u({throwOnBadSyncType:!0},W,{sync:!1}))}},{key:"register",value:function(q,W){return W=W||{},[].concat(q).forEach(function ae(O){var _=this;if(ot(O))return O.map(function(R){return ae.call(_,R)});O&&Ue(O).forEach(function(R){if(R==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(H.JSON_TYPES.includes(R))throw new TypeError("Plain JSON object types are reserved as type names");var L=O[R],U=L&&L.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,J=U.filter(function(ke){return ke.type===R});if(J.length&&(U.splice(U.indexOf(J[0]),1),delete this.revivers[R],delete this.types[R]),typeof L=="function"){var oe=L;L={test:function(Oe){return Oe&&Oe.constructor===oe},replace:function(Oe){return u({},Oe)},revive:function(Oe){return Object.assign(Object.create(oe.prototype),Oe)}}}else if(ot(L)){var G=L,Z=d(G,3),Y=Z[0],ge=Z[1],le=Z[2];L={test:Y,replace:ge,revive:le}}if(!(!L||!L.test)){var he={type:R,test:L.test.bind(L)};L.replace&&(he.replace=L.replace.bind(L)),L.replaceAsync&&(he.replaceAsync=L.replaceAsync.bind(L));var pe=typeof W.fallback=="number"?W.fallback:W.fallback?0:1/0;if(L.testPlainObjects?this.plainObjectReplacers.splice(pe,0,he):this.nonplainObjectReplacers.splice(pe,0,he),L.revive||L.reviveAsync){var te={};L.revive&&(te.revive=L.revive.bind(L)),L.reviveAsync&&(te.reviveAsync=L.reviveAsync.bind(L)),this.revivers[R]=[te,{plain:L.testPlainObjects}]}this.types[R]=L}},this)},this),this}}]),H}(),At=function H(){i(this,H)};return At.__typeson__type__="TypesonUndefined",tt.Undefined=At,tt.Promise=N,tt.isThenable=E,tt.toStringTag=S,tt.hasConstructorOf=F,tt.isObject=Q,tt.isPlainObject=C,tt.isUserObject=ue,tt.escapeKeyPathComponent=xe,tt.unescapeKeyPathComponent=be,tt.getByKeyPath=ee,tt.getJSONType=et,tt.JSON_TYPES=["null","boolean","number","string","array","object"],tt})}),Tx=Tf(function(t,e){(function(n,r){t.exports=r()})(Sd,function(){function n(w){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(w)}function r(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function o(w,y){for(var x=0;x<y.length;x++){var $=y[x];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(w,$.key,$)}}function i(w,y,x){return y in w?Object.defineProperty(w,y,{value:x,enumerable:!0,configurable:!0,writable:!0}):w[y]=x,w}function s(w,y){var x=Object.keys(w);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(w);y&&($=$.filter(function(I){return Object.getOwnPropertyDescriptor(w,I).enumerable})),x.push.apply(x,$)}return x}function l(w){return function(x){if(Array.isArray(x))return a(x)}(w)||function(x){if(typeof Symbol<"u"&&Symbol.iterator in Object(x))return Array.from(x)}(w)||function(x,$){if(x){if(typeof x=="string")return a(x,$);var I=Object.prototype.toString.call(x).slice(8,-1);if(I==="Object"&&x.constructor&&(I=x.constructor.name),I==="Map"||I==="Set")return Array.from(x);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return a(x,$)}}(w)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function a(w,y){(y==null||y>w.length)&&(y=w.length);for(var x=0,$=new Array(y);x<y;x++)$[x]=w[x];return $}function c(w){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(w)}function u(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function d(w,y){for(var x=0;x<y.length;x++){var $=y[x];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(w,$.key,$)}}function h(w,y,x){return y in w?Object.defineProperty(w,y,{value:x,enumerable:!0,configurable:!0,writable:!0}):w[y]=x,w}function m(w,y){var x=Object.keys(w);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(w);y&&($=$.filter(function(I){return Object.getOwnPropertyDescriptor(w,I).enumerable})),x.push.apply(x,$)}return x}function g(w){for(var y=1;y<arguments.length;y++){var x=arguments[y]!=null?arguments[y]:{};y%2?m(Object(x),!0).forEach(function($){h(w,$,x[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(x)):m(Object(x)).forEach(function($){Object.defineProperty(w,$,Object.getOwnPropertyDescriptor(x,$))})}return w}function b(w,y){return function($){if(Array.isArray($))return $}(w)||function($,I){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object($)))){var re=[],ie=!0,Te=!1,ve=void 0;try{for(var Ie,Ge=$[Symbol.iterator]();!(ie=(Ie=Ge.next()).done)&&(re.push(Ie.value),!I||re.length!==I);ie=!0);}catch(Xe){Te=!0,ve=Xe}finally{try{ie||Ge.return==null||Ge.return()}finally{if(Te)throw ve}}return re}}(w,y)||T(w,y)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function k(w){return function(x){if(Array.isArray(x))return A(x)}(w)||function(x){if(typeof Symbol<"u"&&Symbol.iterator in Object(x))return Array.from(x)}(w)||T(w)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function T(w,y){if(w){if(typeof w=="string")return A(w,y);var x=Object.prototype.toString.call(w).slice(8,-1);return x==="Object"&&w.constructor&&(x=w.constructor.name),x==="Map"||x==="Set"?Array.from(w):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?A(w,y):void 0}}function A(w,y){(y==null||y>w.length)&&(y=w.length);for(var x=0,$=new Array(y);x<y;x++)$[x]=w[x];return $}var N=function w(y){u(this,w),this.p=new Promise(y)};N.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(N.prototype[Symbol.toStringTag]="TypesonPromise"),N.prototype.then=function(w,y){var x=this;return new N(function($,I){x.p.then(function(re){$(w?w(re):re)}).catch(function(re){return y?y(re):Promise.reject(re)}).then($,I)})},N.prototype.catch=function(w){return this.then(null,w)},N.resolve=function(w){return new N(function(y){y(w)})},N.reject=function(w){return new N(function(y,x){x(w)})},["all","race"].forEach(function(w){N[w]=function(y){return new N(function(x,$){Promise[w](y.map(function(I){return I&&I.constructor&&I.constructor.__typeson__type__==="TypesonPromise"?I.p:I})).then(x,$)})}});var B={}.toString,D={}.hasOwnProperty,V=Object.getPrototypeOf,j=D.toString;function K(w,y){return C(w)&&typeof w.then=="function"&&(!y||typeof w.catch=="function")}function E(w){return B.call(w).slice(8,-1)}function S(w,y){if(!w||c(w)!=="object")return!1;var x=V(w);if(!x)return y===null;var $=D.call(x,"constructor")&&x.constructor;return typeof $!="function"?y===null:y===$||y!==null&&j.call($)===j.call(y)||typeof y=="function"&&typeof $.__typeson__type__=="string"&&$.__typeson__type__===y.__typeson__type__}function F(w){return!(!w||E(w)!=="Object")&&(!V(w)||S(w,Object))}function C(w){return w&&c(w)==="object"}function ue(w){return w.replace(/~/g,"~0").replace(/\./g,"~1")}function Q(w){return w.replace(/~1/g,".").replace(/~0/g,"~")}function xe(w,y){if(y==="")return w;var x=y.indexOf(".");if(x>-1){var $=w[Q(y.slice(0,x))];return $===void 0?void 0:xe($,y.slice(x+1))}return w[Q(y)]}function be(w,y,x){if(y==="")return x;var $=y.indexOf(".");return $>-1?be(w[Q(y.slice(0,$))],y.slice($+1),x):(w[Q(y)]=x,w)}function ee(w,y,x){return x?y?y(w):w:(w&&w.then||(w=Promise.resolve(w)),y?w.then(y):w)}var Ae=Object.keys,et=Array.isArray,Ue={}.hasOwnProperty,ot=["type","replaced","iterateIn","iterateUnsetNumeric"];function ht(w){return function(){for(var y=[],x=0;x<arguments.length;x++)y[x]=arguments[x];try{return Promise.resolve(w.apply(this,y))}catch($){return Promise.reject($)}}}function Lt(w,y){if(w.keypath==="")return-1;var x=w.keypath.match(/\./g)||0,$=y.keypath.match(/\./g)||0;return x&&(x=x.length),$&&($=$.length),x>$?-1:x<$?1:w.keypath<y.keypath?-1:w.keypath>y.keypath}var Me=function(){function w(y){u(this,w),this.options=y,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(x,$,I){return $&&d(x.prototype,$),x}(w,[{key:"stringify",value:function(x,$,I,re){re=g(g(g({},this.options),re),{},{stringification:!0});var ie=this.encapsulate(x,null,re);return et(ie)?JSON.stringify(ie[0],$,I):ie.then(function(Te){return JSON.stringify(Te,$,I)})}},{key:"stringifySync",value:function(x,$,I,re){return this.stringify(x,$,I,g(g({throwOnBadSyncType:!0},re),{},{sync:!0}))}},{key:"stringifyAsync",value:function(x,$,I,re){return this.stringify(x,$,I,g(g({throwOnBadSyncType:!0},re),{},{sync:!1}))}},{key:"parse",value:function(x,$,I){return I=g(g(g({},this.options),I),{},{parse:!0}),this.revive(JSON.parse(x,$),I)}},{key:"parseSync",value:function(x,$,I){return this.parse(x,$,g(g({throwOnBadSyncType:!0},I),{},{sync:!0}))}},{key:"parseAsync",value:function(x,$,I){return this.parse(x,$,g(g({throwOnBadSyncType:!0},I),{},{sync:!1}))}},{key:"specialTypeNames",value:function(x,$){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return I.returnTypeNames=!0,this.encapsulate(x,$,I)}},{key:"rootTypeName",value:function(x,$){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return I.iterateNone=!0,this.encapsulate(x,$,I)}},{key:"encapsulate",value:function(x,$,I){var re=ht(function(Ee,de){return ee(Promise.all(de.map(function(Pe){return Pe[1].p})),function(Pe){return ee(Promise.all(Pe.map(ht(function(_e){var Be=!1,Ze=[],hn=b(de.splice(0,1),1),gt=b(hn[0],7),tn=gt[0],_n=gt[2],ut=gt[3],Nn=gt[4],ft=gt[5],pn=gt[6],qt=Le(tn,_e,_n,ut,Ze,!0,pn),Ln=S(qt,N);return function(We,fi){var Qr=We();return Qr&&Qr.then?Qr.then(fi):fi(Qr)}(function(){if(tn&&Ln)return ee(qt.p,function(Vn){return Nn[ft]=Vn,Be=!0,re(Ee,Ze)})},function(Vn){return Be?Vn:(tn?Nn[ft]=qt:Ee=Ln?qt.p:qt,re(Ee,Ze))})}))),function(){return Ee})})}),ie=(I=g(g({sync:!0},this.options),I)).sync,Te=this,ve={},Ie=[],Ge=[],Xe=[],ye=!("cyclic"in I)||I.cyclic,it=I.encapsulateObserver,nt=Le("",x,ye,$||{},Xe);function pt(Ee){var de=Object.values(ve);if(I.iterateNone)return de.length?de[0]:w.getJSONType(Ee);if(de.length){if(I.returnTypeNames)return k(new Set(de));Ee&&F(Ee)&&!Ue.call(Ee,"$types")?Ee.$types=ve:Ee={$:Ee,$types:{$:ve}}}else C(Ee)&&Ue.call(Ee,"$types")&&(Ee={$:Ee,$types:!0});return!I.returnTypeNames&&Ee}function mt(Ee,de,Pe){Object.assign(Ee,de);var _e=ot.map(function(Be){var Ze=Ee[Be];return delete Ee[Be],Ze});Pe(),ot.forEach(function(Be,Ze){Ee[Be]=_e[Ze]})}function Le(Ee,de,Pe,_e,Be,Ze,hn){var gt,tn={},_n=c(de),ut=it?function(gr){var Jt=hn||_e.type||w.getJSONType(de);it(Object.assign(gr||tn,{keypath:Ee,value:de,cyclic:Pe,stateObj:_e,promisesData:Be,resolvingTypesonPromise:Ze,awaitingTypesonPromise:S(de,N)},{type:Jt}))}:null;if(["string","boolean","number","undefined"].includes(_n))return de===void 0||Number.isNaN(de)||de===Number.NEGATIVE_INFINITY||de===Number.POSITIVE_INFINITY?(gt=_e.replaced?de:Vt(Ee,de,_e,Be,!1,Ze,ut))!==de&&(tn={replaced:gt}):gt=de,ut&&ut(),gt;if(de===null)return ut&&ut(),de;if(Pe&&!_e.iterateIn&&!_e.iterateUnsetNumeric&&de&&c(de)==="object"){var Nn=Ie.indexOf(de);if(!(Nn<0))return ve[Ee]="#",ut&&ut({cyclicKeypath:Ge[Nn]}),"#"+Ge[Nn];Pe===!0&&(Ie.push(de),Ge.push(Ee))}var ft,pn=F(de),qt=et(de),Ln=(pn||qt)&&(!Te.plainObjectReplacers.length||_e.replaced)||_e.iterateIn?de:Vt(Ee,de,_e,Be,pn||qt,null,ut);if(Ln!==de?(gt=Ln,tn={replaced:Ln}):Ee===""&&S(de,N)?(Be.push([Ee,de,Pe,_e,void 0,void 0,_e.type]),gt=de):qt&&_e.iterateIn!=="object"||_e.iterateIn==="array"?(ft=new Array(de.length),tn={clone:ft}):(["function","symbol"].includes(c(de))||"toJSON"in de||S(de,N)||S(de,Promise)||S(de,ArrayBuffer))&&!pn&&_e.iterateIn!=="object"?gt=de:(ft={},_e.addLength&&(ft.length=de.length),tn={clone:ft}),ut&&ut(),I.iterateNone)return ft||gt;if(!ft)return gt;if(_e.iterateIn){var Vn=function(Jt){var ir={ownKeys:Ue.call(de,Jt)};mt(_e,ir,function(){var sr=Ee+(Ee?".":"")+ue(Jt),yr=Le(sr,de[Jt],!!Pe,_e,Be,Ze);S(yr,N)?Be.push([sr,yr,!!Pe,_e,ft,Jt,_e.type]):yr!==void 0&&(ft[Jt]=yr)})};for(var We in de)Vn(We);ut&&ut({endIterateIn:!0,end:!0})}else Ae(de).forEach(function(gr){var Jt=Ee+(Ee?".":"")+ue(gr);mt(_e,{ownKeys:!0},function(){var ir=Le(Jt,de[gr],!!Pe,_e,Be,Ze);S(ir,N)?Be.push([Jt,ir,!!Pe,_e,ft,gr,_e.type]):ir!==void 0&&(ft[gr]=ir)})}),ut&&ut({endIterateOwn:!0,end:!0});if(_e.iterateUnsetNumeric){for(var fi=de.length,Qr=function(Jt){if(!(Jt in de)){var ir=Ee+(Ee?".":"")+Jt;mt(_e,{ownKeys:!1},function(){var sr=Le(ir,void 0,!!Pe,_e,Be,Ze);S(sr,N)?Be.push([ir,sr,!!Pe,_e,ft,Jt,_e.type]):sr!==void 0&&(ft[Jt]=sr)})}},ls=0;ls<fi;ls++)Qr(ls);ut&&ut({endIterateUnsetNumeric:!0,end:!0})}return ft}function Vt(Ee,de,Pe,_e,Be,Ze,hn){for(var gt=Be?Te.plainObjectReplacers:Te.nonplainObjectReplacers,tn=gt.length;tn--;){var _n=gt[tn];if(_n.test(de,Pe)){var ut=_n.type;if(Te.revivers[ut]){var Nn=ve[Ee];ve[Ee]=Nn?[ut].concat(Nn):ut}return Object.assign(Pe,{type:ut,replaced:!0}),!ie&&_n.replaceAsync||_n.replace?(hn&&hn({replacing:!0}),Le(Ee,_n[ie||!_n.replaceAsync?"replace":"replaceAsync"](de,Pe),ye&&"readonly",Pe,_e,Ze,ut)):(hn&&hn({typeDetected:!0}),Le(Ee,de,ye&&"readonly",Pe,_e,Ze,ut))}}return de}return Xe.length?ie&&I.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(re(nt,Xe)).then(pt):!ie&&I.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():I.stringification&&ie?[pt(nt)]:ie?pt(nt):Promise.resolve(pt(nt))}},{key:"encapsulateSync",value:function(x,$,I){return this.encapsulate(x,$,g(g({throwOnBadSyncType:!0},I),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(x,$,I){return this.encapsulate(x,$,g(g({throwOnBadSyncType:!0},I),{},{sync:!1}))}},{key:"revive",value:function(x,$){var I=x&&x.$types;if(!I)return x;if(I===!0)return x.$;var re=($=g(g({sync:!0},this.options),$)).sync,ie=[],Te={},ve=!0;I.$&&F(I.$)&&(x=x.$,I=I.$,ve=!1);var Ie=this;function Ge(pt,mt){var Le=b(Ie.revivers[pt]||[],1)[0];if(!Le)throw new Error("Unregistered type: "+pt);return re&&!("revive"in Le)?mt:Le[re&&Le.revive?"revive":!re&&Le.reviveAsync?"reviveAsync":"revive"](mt,Te)}var Xe=[];function ye(pt){return S(pt,tt)?void 0:pt}var it,nt=function(){var mt=[];if(Object.entries(I).forEach(function(Le){var Vt=b(Le,2),Ee=Vt[0],de=Vt[1];de!=="#"&&[].concat(de).forEach(function(Pe){b(Ie.revivers[Pe]||[null,{}],2)[1].plain&&(mt.push({keypath:Ee,type:Pe}),delete I[Ee])})}),mt.length)return mt.sort(Lt).reduce(function Le(Vt,Ee){var de=Ee.keypath,Pe=Ee.type;if(K(Vt))return Vt.then(function(Ze){return Le(Ze,{keypath:de,type:Pe})});var _e=xe(x,de);if(S(_e=Ge(Pe,_e),N))return _e.then(function(Ze){var hn=be(x,de,Ze);hn===Ze&&(x=hn)});var Be=be(x,de,_e);Be===_e&&(x=Be)},void 0)}();return S(nt,N)?it=nt.then(function(){return x}):(it=function pt(mt,Le,Vt,Ee,de){if(!ve||mt!=="$types"){var Pe=I[mt],_e=et(Le);if(_e||F(Le)){var Be=_e?new Array(Le.length):{};for(Ae(Le).forEach(function(ft){var pn=pt(mt+(mt?".":"")+ue(ft),Le[ft],Vt||Be,Be,ft),qt=function(Vn){return S(Vn,tt)?Be[ft]=void 0:Vn!==void 0&&(Be[ft]=Vn),Vn};S(pn,N)?Xe.push(pn.then(function(Ln){return qt(Ln)})):qt(pn)}),Le=Be;ie.length;){var Ze=b(ie[0],4),hn=Ze[0],gt=Ze[1],tn=Ze[2],_n=Ze[3],ut=xe(hn,gt);if(ut===void 0)break;tn[_n]=ut,ie.splice(0,1)}}if(!Pe)return Le;if(Pe==="#"){var Nn=xe(Vt,Le.slice(1));return Nn===void 0&&ie.push([Vt,Le.slice(1),Ee,de]),Nn}return[].concat(Pe).reduce(function ft(pn,qt){return S(pn,N)?pn.then(function(Ln){return ft(Ln,qt)}):Ge(qt,pn)},Le)}}("",x,null),Xe.length&&(it=N.resolve(it).then(function(pt){return N.all([pt].concat(Xe))}).then(function(pt){return b(pt,1)[0]}))),K(it)?re&&$.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():S(it,N)?it.p.then(ye):it:!re&&$.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():re?ye(it):Promise.resolve(ye(it))}},{key:"reviveSync",value:function(x,$){return this.revive(x,g(g({throwOnBadSyncType:!0},$),{},{sync:!0}))}},{key:"reviveAsync",value:function(x,$){return this.revive(x,g(g({throwOnBadSyncType:!0},$),{},{sync:!1}))}},{key:"register",value:function(x,$){return $=$||{},[].concat(x).forEach(function I(re){var ie=this;if(et(re))return re.map(function(Te){return I.call(ie,Te)});re&&Ae(re).forEach(function(Te){if(Te==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(w.JSON_TYPES.includes(Te))throw new TypeError("Plain JSON object types are reserved as type names");var ve=re[Te],Ie=ve&&ve.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Ge=Ie.filter(function(mt){return mt.type===Te});if(Ge.length&&(Ie.splice(Ie.indexOf(Ge[0]),1),delete this.revivers[Te],delete this.types[Te]),typeof ve=="function"){var Xe=ve;ve={test:function(Le){return Le&&Le.constructor===Xe},replace:function(Le){return g({},Le)},revive:function(Le){return Object.assign(Object.create(Xe.prototype),Le)}}}else if(et(ve)){var ye=b(ve,3);ve={test:ye[0],replace:ye[1],revive:ye[2]}}if(ve&&ve.test){var it={type:Te,test:ve.test.bind(ve)};ve.replace&&(it.replace=ve.replace.bind(ve)),ve.replaceAsync&&(it.replaceAsync=ve.replaceAsync.bind(ve));var nt=typeof $.fallback=="number"?$.fallback:$.fallback?0:Number.POSITIVE_INFINITY;if(ve.testPlainObjects?this.plainObjectReplacers.splice(nt,0,it):this.nonplainObjectReplacers.splice(nt,0,it),ve.revive||ve.reviveAsync){var pt={};ve.revive&&(pt.revive=ve.revive.bind(ve)),ve.reviveAsync&&(pt.reviveAsync=ve.reviveAsync.bind(ve)),this.revivers[Te]=[pt,{plain:ve.testPlainObjects}]}this.types[Te]=ve}},this)},this),this}}]),w}(),tt=function w(){u(this,w)};tt.__typeson__type__="TypesonUndefined",Me.Undefined=tt,Me.Promise=N,Me.isThenable=K,Me.toStringTag=E,Me.hasConstructorOf=S,Me.isObject=C,Me.isPlainObject=F,Me.isUserObject=function w(y){if(!y||E(y)!=="Object")return!1;var x=V(y);return!x||S(y,Object)||w(x)},Me.escapeKeyPathComponent=ue,Me.unescapeKeyPathComponent=Q,Me.getByKeyPath=xe,Me.getJSONType=function(y){return y===null?"null":Array.isArray(y)?"array":c(y)},Me.JSON_TYPES=["null","boolean","number","string","array","object"];for(var At={userObject:{test:function(y,x){return Me.isUserObject(y)},replace:function(y){return function($){for(var I=1;I<arguments.length;I++){var re=arguments[I]!=null?arguments[I]:{};I%2?s(Object(re),!0).forEach(function(ie){i($,ie,re[ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(re)):s(Object(re)).forEach(function(ie){Object.defineProperty($,ie,Object.getOwnPropertyDescriptor(re,ie))})}return $}({},y)},revive:function(y){return y}}},H=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(y,x){return!!Array.isArray(y)&&(Object.keys(y).some(function($){return String(Number.parseInt($))!==$})&&(x.iterateIn="object",x.addLength=!0),!0)},replace:function(y,x){return x.iterateUnsetNumeric=!0,y},revive:function(y){if(Array.isArray(y))return y;var x=[];return Object.keys(y).forEach(function($){var I=y[$];x[$]=I}),x}}},{sparseUndefined:{test:function(y,x){return y===void 0&&x.ownKeys===!1},replace:function(y){return 0},revive:function(y){}}}],z={undef:{test:function(y,x){return y===void 0&&(x.ownKeys||!("ownKeys"in x))},replace:function(y){return 0},revive:function(y){return new Me.Undefined}}},q={StringObject:{test:function(y){return Me.toStringTag(y)==="String"&&n(y)==="object"},replace:function(y){return String(y)},revive:function(y){return new String(y)}},BooleanObject:{test:function(y){return Me.toStringTag(y)==="Boolean"&&n(y)==="object"},replace:function(y){return!!y},revive:function(y){return new Boolean(y)}},NumberObject:{test:function(y){return Me.toStringTag(y)==="Number"&&n(y)==="object"},replace:function(y){return Number(y)},revive:function(y){return new Number(y)}}},W=[{nan:{test:function(y){return Number.isNaN(y)},replace:function(y){return"NaN"},revive:function(y){return Number.NaN}}},{infinity:{test:function(y){return y===Number.POSITIVE_INFINITY},replace:function(y){return"Infinity"},revive:function(y){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(y){return y===Number.NEGATIVE_INFINITY},replace:function(y){return"-Infinity"},revive:function(y){return Number.NEGATIVE_INFINITY}}}],ae={date:{test:function(y){return Me.toStringTag(y)==="Date"},replace:function(y){var x=y.getTime();return Number.isNaN(x)?"NaN":x},revive:function(y){return y==="NaN"?new Date(Number.NaN):new Date(y)}}},O={regexp:{test:function(y){return Me.toStringTag(y)==="RegExp"},replace:function(y){return{source:y.source,flags:(y.global?"g":"")+(y.ignoreCase?"i":"")+(y.multiline?"m":"")+(y.sticky?"y":"")+(y.unicode?"u":"")}},revive:function(y){var x=y.source,$=y.flags;return new RegExp(x,$)}}},_={map:{test:function(y){return Me.toStringTag(y)==="Map"},replace:function(y){return l(y.entries())},revive:function(y){return new Map(y)}}},R={set:{test:function(y){return Me.toStringTag(y)==="Set"},replace:function(y){return l(y.values())},revive:function(y){return new Set(y)}}},L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U=new Uint8Array(256),J=0;J<L.length;J++)U[L.charCodeAt(J)]=J;var oe=function(y,x,$){$==null&&($=y.byteLength);for(var I=new Uint8Array(y,0,$),re=I.length,ie="",Te=0;Te<re;Te+=3)ie+=L[I[Te]>>2],ie+=L[(3&I[Te])<<4|I[Te+1]>>4],ie+=L[(15&I[Te+1])<<2|I[Te+2]>>6],ie+=L[63&I[Te+2]];return re%3==2?ie=ie.slice(0,-1)+"=":re%3==1&&(ie=ie.slice(0,-2)+"=="),ie},G=function(y){var x,$,I,re,ie=y.length,Te=.75*y.length,ve=0;y[y.length-1]==="="&&(Te--,y[y.length-2]==="="&&Te--);for(var Ie=new ArrayBuffer(Te),Ge=new Uint8Array(Ie),Xe=0;Xe<ie;Xe+=4)x=U[y.charCodeAt(Xe)],$=U[y.charCodeAt(Xe+1)],I=U[y.charCodeAt(Xe+2)],re=U[y.charCodeAt(Xe+3)],Ge[ve++]=x<<2|$>>4,Ge[ve++]=(15&$)<<4|I>>2,Ge[ve++]=(3&I)<<6|63&re;return Ie},Z={arraybuffer:{test:function(y){return Me.toStringTag(y)==="ArrayBuffer"},replace:function(y,x){x.buffers||(x.buffers=[]);var $=x.buffers.indexOf(y);return $>-1?{index:$}:(x.buffers.push(y),oe(y))},revive:function(y,x){if(x.buffers||(x.buffers=[]),n(y)==="object")return x.buffers[y.index];var $=G(y);return x.buffers.push($),$}}},Y=typeof self>"u"?Sd:self,ge={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(w){var y=w,x=Y[y];x&&(ge[w.toLowerCase()]={test:function(I){return Me.toStringTag(I)===y},replace:function(I,re){var ie=I.buffer,Te=I.byteOffset,ve=I.length;re.buffers||(re.buffers=[]);var Ie=re.buffers.indexOf(ie);return Ie>-1?{index:Ie,byteOffset:Te,length:ve}:(re.buffers.push(ie),{encoded:oe(ie),byteOffset:Te,length:ve})},revive:function(I,re){re.buffers||(re.buffers=[]);var ie,Te=I.byteOffset,ve=I.length,Ie=I.encoded,Ge=I.index;return"index"in I?ie=re.buffers[Ge]:(ie=G(Ie),re.buffers.push(ie)),new x(ie,Te,ve)}})});var le={dataview:{test:function(y){return Me.toStringTag(y)==="DataView"},replace:function(y,x){var $=y.buffer,I=y.byteOffset,re=y.byteLength;x.buffers||(x.buffers=[]);var ie=x.buffers.indexOf($);return ie>-1?{index:ie,byteOffset:I,byteLength:re}:(x.buffers.push($),{encoded:oe($),byteOffset:I,byteLength:re})},revive:function(y,x){x.buffers||(x.buffers=[]);var $,I=y.byteOffset,re=y.byteLength,ie=y.encoded,Te=y.index;return"index"in y?$=x.buffers[Te]:($=G(ie),x.buffers.push($)),new DataView($,I,re)}}},he={IntlCollator:{test:function(y){return Me.hasConstructorOf(y,Intl.Collator)},replace:function(y){return y.resolvedOptions()},revive:function(y){return new Intl.Collator(y.locale,y)}},IntlDateTimeFormat:{test:function(y){return Me.hasConstructorOf(y,Intl.DateTimeFormat)},replace:function(y){return y.resolvedOptions()},revive:function(y){return new Intl.DateTimeFormat(y.locale,y)}},IntlNumberFormat:{test:function(y){return Me.hasConstructorOf(y,Intl.NumberFormat)},replace:function(y){return y.resolvedOptions()},revive:function(y){return new Intl.NumberFormat(y.locale,y)}}};function pe(w){for(var y=new Uint8Array(w.length),x=0;x<w.length;x++)y[x]=w.charCodeAt(x);return y.buffer}var te={file:{test:function(y){return Me.toStringTag(y)==="File"},replace:function(y){var x=new XMLHttpRequest;if(x.overrideMimeType("text/plain; charset=x-user-defined"),x.open("GET",URL.createObjectURL(y),!1),x.send(),x.status!==200&&x.status!==0)throw new Error("Bad File access: "+x.status);return{type:y.type,stringContents:x.responseText,name:y.name,lastModified:y.lastModified}},revive:function(y){var x=y.name,$=y.type,I=y.stringContents,re=y.lastModified;return new File([pe(I)],x,{type:$,lastModified:re})},replaceAsync:function(y){return new Me.Promise(function(x,$){var I=new FileReader;I.addEventListener("load",function(){x({type:y.type,stringContents:I.result,name:y.name,lastModified:y.lastModified})}),I.addEventListener("error",function(){$(I.error)}),I.readAsBinaryString(y)})}}},ke={bigint:{test:function(y){return typeof y=="bigint"},replace:function(y){return String(y)},revive:function(y){return BigInt(y)}}},Oe={bigintObject:{test:function(y){return n(y)==="object"&&Me.hasConstructorOf(y,BigInt)},replace:function(y){return String(y)},revive:function(y){return new Object(BigInt(y))}}},me={cryptokey:{test:function(y){return Me.toStringTag(y)==="CryptoKey"&&y.extractable},replaceAsync:function(y){return new Me.Promise(function(x,$){crypto.subtle.exportKey("jwk",y).catch(function(I){$(I)}).then(function(I){x({jwk:I,algorithm:y.algorithm,usages:y.usages})})})},revive:function(y){var x=y.jwk,$=y.algorithm,I=y.usages;return crypto.subtle.importKey("jwk",x,$,!0,I)}}};return[At,z,H,q,W,ae,O,{imagedata:{test:function(y){return Me.toStringTag(y)==="ImageData"},replace:function(y){return{array:l(y.data),width:y.width,height:y.height}},revive:function(y){return new ImageData(new Uint8ClampedArray(y.array),y.width,y.height)}}},{imagebitmap:{test:function(y){return Me.toStringTag(y)==="ImageBitmap"||y&&y.dataset&&y.dataset.toStringTag==="ImageBitmap"},replace:function(y){var x=document.createElement("canvas");return x.getContext("2d").drawImage(y,0,0),x.toDataURL()},revive:function(y){var x=document.createElement("canvas"),$=x.getContext("2d"),I=document.createElement("img");return I.addEventListener("load",function(){$.drawImage(I,0,0)}),I.src=y,x},reviveAsync:function(y){var x=document.createElement("canvas"),$=x.getContext("2d"),I=document.createElement("img");return I.addEventListener("load",function(){$.drawImage(I,0,0)}),I.src=y,createImageBitmap(x)}}},te,{file:te.file,filelist:{test:function(y){return Me.toStringTag(y)==="FileList"},replace:function(y){for(var x=[],$=0;$<y.length;$++)x[$]=y.item($);return x},revive:function(y){return new(function(){function x(){r(this,x),this._files=arguments[0],this.length=this._files.length}return function(I,re,ie){return re&&o(I.prototype,re),I}(x,[{key:"item",value:function(I){return this._files[I]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),x}())(y)}}},{blob:{test:function(y){return Me.toStringTag(y)==="Blob"},replace:function(y){var x=new XMLHttpRequest;if(x.overrideMimeType("text/plain; charset=x-user-defined"),x.open("GET",URL.createObjectURL(y),!1),x.send(),x.status!==200&&x.status!==0)throw new Error("Bad Blob access: "+x.status);return{type:y.type,stringContents:x.responseText}},revive:function(y){var x=y.type,$=y.stringContents;return new Blob([pe($)],{type:x})},replaceAsync:function(y){return new Me.Promise(function(x,$){var I=new FileReader;I.addEventListener("load",function(){x({type:y.type,stringContents:I.result})}),I.addEventListener("error",function(){$(I.error)}),I.readAsBinaryString(y)})}}}].concat(typeof Map=="function"?_:[],typeof Set=="function"?R:[],typeof ArrayBuffer=="function"?Z:[],typeof Uint8Array=="function"?ge:[],typeof DataView=="function"?le:[],typeof Intl<"u"?he:[],typeof crypto<"u"?me:[],typeof BigInt<"u"?[ke,Oe]:[])})}),Mi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ys=new Uint8Array(256);for(var Il=0;Il<Mi.length;Il++)ys[Mi.codePointAt(Il)]=Il;var kd=function(e,n,r){r==null&&(r=e.byteLength);for(var o=new Uint8Array(e,0,r),i=o.length,s="",l=0;l<i;l+=3)s+=Mi[o[l]>>2],s+=Mi[(o[l]&3)<<4|o[l+1]>>4],s+=Mi[(o[l+1]&15)<<2|o[l+2]>>6],s+=Mi[o[l+2]&63];return i%3===2?s=s.slice(0,-1)+"=":i%3===1&&(s=s.slice(0,-2)+"=="),s},Fy=function(e){var n=e.length,r=e.length*.75,o=0,i,s,l,a;e[e.length-1]==="="&&(r--,e[e.length-2]==="="&&r--);for(var c=new ArrayBuffer(r),u=new Uint8Array(c),d=0;d<n;d+=4)i=ys[e.codePointAt(d)],s=ys[e.codePointAt(d+1)],l=ys[e.codePointAt(d+2)],a=ys[e.codePointAt(d+3)],u[o++]=i<<2|s>>4,u[o++]=(s&15)<<4|l>>2,u[o++]=(l&3)<<6|a&63;return c},Ex=typeof self>"u"?global:self,jy={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(t){var e=t,n=Ex[e];n&&(jy[t.toLowerCase()+"2"]={test:function(r){return kc.toStringTag(r)===e},replace:function(r){var o=r.buffer,i=r.byteOffset,s=r.length;return{buffer:o,byteOffset:i,length:s}},revive:function(r){var o=r.buffer,i=r.byteOffset,s=r.length;return new n(o,i,s)}})});var Ox={arraybuffer:{test:function(t){return kc.toStringTag(t)==="ArrayBuffer"},replace:function(t){return kd(t,0,t.byteLength)},revive:function(t){var e=Fy(t);return e}}},Xn=new kc().register(Tx),Ax="FileReaderSync"in self,Ra=[],aa=0;Xn.register([Ox,jy,{blob2:{test:function(t){return kc.toStringTag(t)==="Blob"},replace:function(t){if(t.isClosed)throw new Error("The Blob is closed");if(Ax){var e=Vy(t,"binary"),n=kd(e,0,e.byteLength);return{type:t.type,data:n}}else{Ra.push(t);var r={type:t.type,data:{start:aa,end:aa+t.size}};return aa+=t.size,r}},finalize:function(t,e){t.data=kd(e,0,e.byteLength)},revive:function(t){var e=t.type,n=t.data;return new Blob([Fy(n)],{type:e})}}}]);Xn.mustFinalize=function(){return Ra.length>0};Xn.finalize=function(t){return To(void 0,void 0,void 0,function(){var e,n,r,o,i,s,l,a,c,u,d,h;return ur(this,function(m){switch(m.label){case 0:return[4,Ly(new Blob(Ra),"binary")];case 1:if(e=m.sent(),t){for(n=0,r=t;n<r.length;n++)if(o=r[n],o.$types){i=o.$types,s=i.$,s&&(i=i.$);for(l in i)a=i[l],c=Xn.types[a],c&&c.finalize&&(u=jt.getByKeyPath(o,s?"$."+l:l),c.finalize(u,e.slice((d=u.data)===null||d===void 0?void 0:d.start,(h=u.data)===null||h===void 0?void 0:h.end)))}}return Ra=[],aa=0,[2]}})})};var Mx=2e3;function _x(t,e){return To(this,void 0,void 0,function(){function n(){return To(this,void 0,void 0,function(){var d,h,m,g,b,k,T,A,N,B;return ur(this,function(D){switch(D.label){case 0:return[4,Promise.all(o.map(function(V){return V.count()}))];case 1:d=D.sent(),d.forEach(function(V,j){return s[j].rowCount=V}),u.totalRows=d.reduce(function(V,j){return V+j}),h=JSON.stringify(a,void 0,l?2:void 0),m=h.lastIndexOf("]"),g=h.substring(0,m),i.push(g),b=e.filter,k=e.transform,T=function(V){var j,K,E,S,F,C,ue,Q,xe,be,ee,Ae;return ur(this,function(et){switch(et.label){case 0:j=t.table(V),K=j.schema.primKey,E=!!K.keyPath,S=e.numRowsPerChunk||Mx,F=E?{tableName:j.name,inbound:!0,rows:[]}:{tableName:j.name,inbound:!1,rows:[]},C=JSON.stringify(F,void 0,l?2:void 0),l&&(C=C.split(`
`).join(`
    `)),ue=C.lastIndexOf("]"),i.push(C.substring(0,ue)),Q=null,xe=0,be=!0,ee=function(){var Ue,ot,ht,Lt,Me,z,tt,At,H,z;return ur(this,function(q){switch(q.label){case 0:return c&&jt.ignoreTransaction(function(){return c(u)}),Ue=Q==null?j.limit(S):j.where(":id").above(Q).limit(S),[4,Ue.toArray()];case 1:return ot=q.sent(),ot.length===0?[2,"break"]:(Q!=null&&xe>0&&(i.push(","),l&&i.push(`
      `)),be=ot.length===S,E?(ht=b?ot.filter(function(W){return b(V,W)}):ot,Lt=k?ht.map(function(W){return k(V,W).value}):ht,Me=Lt.map(function(W){return Xn.encapsulate(W)}),Xn.mustFinalize()?[4,jt.waitFor(Xn.finalize(Me))]:[3,3]):[3,4]);case 2:q.sent(),q.label=3;case 3:return z=JSON.stringify(Me,void 0,l?2:void 0),l&&(z=z.split(`
`).join(`
      `)),i.push(new Blob([z.substring(1,z.length-1)])),xe=Lt.length,Q=ot.length>0?jt.getByKeyPath(ot[ot.length-1],K.keyPath):null,[3,8];case 4:return[4,Ue.primaryKeys()];case 5:return tt=q.sent(),At=tt.map(function(W,ae){return[W,ot[ae]]}),b&&(At=At.filter(function(W){var ae=W[0],O=W[1];return b(V,O,ae)})),k&&(At=At.map(function(W){var ae=W[0],O=W[1],_=k(V,O,ae);return[_.key,_.value]})),H=At.map(function(W){return Xn.encapsulate(W)}),Xn.mustFinalize()?[4,jt.waitFor(Xn.finalize(H))]:[3,7];case 6:q.sent(),q.label=7;case 7:z=JSON.stringify(H,void 0,l?2:void 0),l&&(z=z.split(`
`).join(`
      `)),i.push(new Blob([z.substring(1,z.length-1)])),xe=At.length,Q=tt.length>0?tt[tt.length-1]:null,q.label=8;case 8:return u.completedRows+=ot.length,[2]}})},et.label=1;case 1:return be?[5,ee()]:[3,3];case 2:return Ae=et.sent(),Ae==="break"?[3,3]:[3,1];case 3:return i.push(C.substr(ue)),u.completedTables+=1,u.completedTables<u.totalTables&&i.push(","),[2]}})},A=0,N=s,D.label=2;case 2:return A<N.length?(B=N[A].name,[5,T(B)]):[3,5];case 3:D.sent(),D.label=4;case 4:return A++,[3,2];case 5:return i.push(h.substr(m)),u.done=!0,c&&jt.ignoreTransaction(function(){return c(u)}),[2]}})})}var r,o,i,s,l,a,c,u;return ur(this,function(d){switch(d.label){case 0:e=e||{},r=e.skipTables?e.skipTables:[],o=t.tables.filter(function(h){return!r.includes(h.name)}),i=[],s=o.map(function(h){return{name:h.name,schema:xx(h),rowCount:0}}),l=e.prettyJson,a={formatName:"dexie",formatVersion:1,data:{databaseName:t.name,databaseVersion:t.verno,tables:s,data:[]}},c=e.progressCallback,u={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:s.length},d.label=1;case 1:return d.trys.push([1,,6,7]),e.noTransaction?[4,n()]:[3,3];case 2:return d.sent(),[3,5];case 3:return[4,t.transaction("r",t.tables,n)];case 4:d.sent(),d.label=5;case 5:return[3,7];case 6:return Xn.finalize(),[7];case 7:return[2,new Blob(i,{type:"text/json"})]}})})}var Nx=1,Px={Stream:function(){}},$x=Tf(function(t,e){(function(n){var r=typeof process=="object"&&yp?yp:self;n.parser=function(E){return new m(E)},n.CParser=m,n.CStream=b,n.createStream=g,n.MAX_BUFFER_LENGTH=10*1024*1024,n.DEBUG=r.CDEBUG==="debug",n.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",n.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var o={textNode:void 0,numberNode:""},i=n.EVENTS.filter(function(E){return E!=="error"&&E!=="end"}),s=0,l;n.STATE={BEGIN:s++,VALUE:s++,OPEN_OBJECT:s++,CLOSE_OBJECT:s++,OPEN_ARRAY:s++,CLOSE_ARRAY:s++,TEXT_ESCAPE:s++,STRING:s++,BACKSLASH:s++,END:s++,OPEN_KEY:s++,CLOSE_KEY:s++,TRUE:s++,TRUE2:s++,TRUE3:s++,FALSE:s++,FALSE2:s++,FALSE3:s++,FALSE4:s++,NULL:s++,NULL2:s++,NULL3:s++,NUMBER_DECIMAL_POINT:s++,NUMBER_DIGIT:s++};for(var a in n.STATE)n.STATE[n.STATE[a]]=a;s=n.STATE;const c={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(E){function S(){this.__proto__=E}return S.prototype=E,new S}),Object.getPrototypeOf||(Object.getPrototypeOf=function(E){return E.__proto__}),Object.keys||(Object.keys=function(E){var S=[];for(var F in E)E.hasOwnProperty(F)&&S.push(F);return S});function u(E){var S=Math.max(n.MAX_BUFFER_LENGTH,10),F=0;for(var C in o){var ue=E[C]===void 0?0:E[C].length;if(ue>S)switch(C){case"text":closeText(E);break;default:D(E,"Max buffer length exceeded: "+C)}F=Math.max(F,ue)}E.bufferCheckPosition=n.MAX_BUFFER_LENGTH-F+E.position}function d(E){for(var S in o)E[S]=o[S]}var h=/[\\"\n]/g;function m(E){if(!(this instanceof m))return new m(E);var S=this;d(S),S.bufferCheckPosition=n.MAX_BUFFER_LENGTH,S.q=S.c=S.p="",S.opt=E||{},S.closed=S.closedRoot=S.sawRoot=!1,S.tag=S.error=null,S.state=s.BEGIN,S.stack=new Array,S.position=S.column=0,S.line=1,S.slashed=!1,S.unicodeI=0,S.unicodeS=null,S.depth=0,k(S,"onready")}m.prototype={end:function(){V(this)},write:K,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{l=Px.Stream}catch{l=function(){}}function g(E){return new b(E)}function b(E){if(!(this instanceof b))return new b(E);this._parser=new m(E),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var S=this;l.apply(S),this._parser.onend=function(){S.emit("end")},this._parser.onerror=function(F){S.emit("error",F),S._parser.error=null},i.forEach(function(F){Object.defineProperty(S,"on"+F,{get:function(){return S._parser["on"+F]},set:function(C){if(!C)return S.removeAllListeners(F),S._parser["on"+F]=C,C;S.on(F,C)},enumerable:!0,configurable:!1})})}b.prototype=Object.create(l.prototype,{constructor:{value:b}}),b.prototype.write=function(E){E=new Buffer(E);for(var S=0;S<E.length;S++){var F=E[S];if(this.bytes_remaining>0){for(var C=0;C<this.bytes_remaining;C++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+C]=E[C];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,S=S+C-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&F>=128)if(F>=194&&F<=223&&(this.bytes_in_sequence=2),F>=224&&F<=239&&(this.bytes_in_sequence=3),F>=240&&F<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+S>E.length){for(var ue=0;ue<=E.length-1-S;ue++)this.temp_buffs[this.bytes_in_sequence][ue]=E[S+ue];return this.bytes_remaining=S+this.bytes_in_sequence-E.length,!0}else{this.string=E.slice(S,S+this.bytes_in_sequence).toString(),S=S+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var Q=S;Q<E.length&&!(E[Q]>=128);Q++);this.string=E.slice(S,Q).toString(),this._parser.write(this.string),this.emit("data",this.string),S=Q-1}},b.prototype.end=function(E){return E&&E.length&&this._parser.write(E.toString()),this._parser.end(),!0},b.prototype.on=function(E,S){var F=this;return!F._parser["on"+E]&&i.indexOf(E)!==-1&&(F._parser["on"+E]=function(){var C=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);C.splice(0,0,E),F.emit.apply(F,C)}),l.prototype.on.call(F,E,S)},b.prototype.destroy=function(){d(this._parser),this.emit("close")};function k(E,S,F){n.INFO&&console.log("-- emit",S,F),E[S]&&E[S](F)}function T(E,S,F){A(E),k(E,S,F)}function A(E,S){E.textNode=B(E.opt,E.textNode),E.textNode!==void 0&&k(E,S||"onvalue",E.textNode),E.textNode=void 0}function N(E){E.numberNode&&k(E,"onvalue",parseFloat(E.numberNode)),E.numberNode=""}function B(E,S){return S===void 0||(E.trim&&(S=S.trim()),E.normalize&&(S=S.replace(/\s+/g," "))),S}function D(E,S){return A(E),S+=`
Line: `+E.line+`
Column: `+E.column+`
Char: `+E.c,S=new Error(S),E.error=S,k(E,"onerror",S),E}function V(E){return(E.state!==s.VALUE||E.depth!==0)&&D(E,"Unexpected end"),A(E),E.c="",E.closed=!0,k(E,"onend"),m.call(E,E.opt),E}function j(E){return E===c.carriageReturn||E===c.lineFeed||E===c.space||E===c.tab}function K(E){var S=this;if(this.error)throw this.error;if(S.closed)return D(S,"Cannot write after close. Assign an onready handler.");if(E===null)return V(S);var F=0,C=E.charCodeAt(0),ue=S.p;for(n.DEBUG&&console.log("write -> ["+E+"]");C&&(ue=C,S.c=C=E.charCodeAt(F++),ue!==C?S.p=ue:ue=S.p,!!C);)switch(n.DEBUG&&console.log(F,C,n.STATE[S.state]),S.position++,C===c.lineFeed?(S.line++,S.column=0):S.column++,S.state){case s.BEGIN:C===c.openBrace?S.state=s.OPEN_OBJECT:C===c.openBracket?S.state=s.OPEN_ARRAY:j(C)||D(S,"Non-whitespace before {[.");continue;case s.OPEN_KEY:case s.OPEN_OBJECT:if(j(C))continue;if(S.state===s.OPEN_KEY)S.stack.push(s.CLOSE_KEY);else if(C===c.closeBrace){k(S,"onopenobject"),this.depth++,k(S,"oncloseobject"),this.depth--,S.state=S.stack.pop()||s.VALUE;continue}else S.stack.push(s.CLOSE_OBJECT);C===c.doubleQuote?S.state=s.STRING:D(S,'Malformed object key should start with "');continue;case s.CLOSE_KEY:case s.CLOSE_OBJECT:if(j(C))continue;S.state,s.CLOSE_KEY,C===c.colon?(S.state===s.CLOSE_OBJECT?(S.stack.push(s.CLOSE_OBJECT),A(S,"onopenobject"),this.depth++):A(S,"onkey"),S.state=s.VALUE):C===c.closeBrace?(T(S,"oncloseobject"),this.depth--,S.state=S.stack.pop()||s.VALUE):C===c.comma?(S.state===s.CLOSE_OBJECT&&S.stack.push(s.CLOSE_OBJECT),A(S),S.state=s.OPEN_KEY):D(S,"Bad object");continue;case s.OPEN_ARRAY:case s.VALUE:if(j(C))continue;if(S.state===s.OPEN_ARRAY)if(k(S,"onopenarray"),this.depth++,S.state=s.VALUE,C===c.closeBracket){k(S,"onclosearray"),this.depth--,S.state=S.stack.pop()||s.VALUE;continue}else S.stack.push(s.CLOSE_ARRAY);C===c.doubleQuote?S.state=s.STRING:C===c.openBrace?S.state=s.OPEN_OBJECT:C===c.openBracket?S.state=s.OPEN_ARRAY:C===c.t?S.state=s.TRUE:C===c.f?S.state=s.FALSE:C===c.n?S.state=s.NULL:C===c.minus?S.numberNode+="-":c._0<=C&&C<=c._9?(S.numberNode+=String.fromCharCode(C),S.state=s.NUMBER_DIGIT):D(S,"Bad value");continue;case s.CLOSE_ARRAY:if(C===c.comma)S.stack.push(s.CLOSE_ARRAY),A(S,"onvalue"),S.state=s.VALUE;else if(C===c.closeBracket)T(S,"onclosearray"),this.depth--,S.state=S.stack.pop()||s.VALUE;else{if(j(C))continue;D(S,"Bad array")}continue;case s.STRING:S.textNode===void 0&&(S.textNode="");var Q=F-1,xe=S.slashed,be=S.unicodeI;e:for(;;){for(n.DEBUG&&console.log(F,C,n.STATE[S.state],xe);be>0;)if(S.unicodeS+=String.fromCharCode(C),C=E.charCodeAt(F++),S.position++,be===4?(S.textNode+=String.fromCharCode(parseInt(S.unicodeS,16)),be=0,Q=F-1):be++,!C)break e;if(C===c.doubleQuote&&!xe){S.state=S.stack.pop()||s.VALUE,S.textNode+=E.substring(Q,F-1),S.position+=F-1-Q;break}if(C===c.backslash&&!xe&&(xe=!0,S.textNode+=E.substring(Q,F-1),S.position+=F-1-Q,C=E.charCodeAt(F++),S.position++,!C))break;if(xe){if(xe=!1,C===c.n?S.textNode+=`
`:C===c.r?S.textNode+="\r":C===c.t?S.textNode+="	":C===c.f?S.textNode+="\f":C===c.b?S.textNode+="\b":C===c.u?(be=1,S.unicodeS=""):S.textNode+=String.fromCharCode(C),C=E.charCodeAt(F++),S.position++,Q=F-1,C)continue;break}h.lastIndex=F;var ee=h.exec(E);if(ee===null){F=E.length+1,S.textNode+=E.substring(Q,F-1),S.position+=F-1-Q;break}if(F=ee.index+1,C=E.charCodeAt(ee.index),!C){S.textNode+=E.substring(Q,F-1),S.position+=F-1-Q;break}}S.slashed=xe,S.unicodeI=be;continue;case s.TRUE:C===c.r?S.state=s.TRUE2:D(S,"Invalid true started with t"+C);continue;case s.TRUE2:C===c.u?S.state=s.TRUE3:D(S,"Invalid true started with tr"+C);continue;case s.TRUE3:C===c.e?(k(S,"onvalue",!0),S.state=S.stack.pop()||s.VALUE):D(S,"Invalid true started with tru"+C);continue;case s.FALSE:C===c.a?S.state=s.FALSE2:D(S,"Invalid false started with f"+C);continue;case s.FALSE2:C===c.l?S.state=s.FALSE3:D(S,"Invalid false started with fa"+C);continue;case s.FALSE3:C===c.s?S.state=s.FALSE4:D(S,"Invalid false started with fal"+C);continue;case s.FALSE4:C===c.e?(k(S,"onvalue",!1),S.state=S.stack.pop()||s.VALUE):D(S,"Invalid false started with fals"+C);continue;case s.NULL:C===c.u?S.state=s.NULL2:D(S,"Invalid null started with n"+C);continue;case s.NULL2:C===c.l?S.state=s.NULL3:D(S,"Invalid null started with nu"+C);continue;case s.NULL3:C===c.l?(k(S,"onvalue",null),S.state=S.stack.pop()||s.VALUE):D(S,"Invalid null started with nul"+C);continue;case s.NUMBER_DECIMAL_POINT:C===c.period?(S.numberNode+=".",S.state=s.NUMBER_DIGIT):D(S,"Leading zero not followed by .");continue;case s.NUMBER_DIGIT:c._0<=C&&C<=c._9?S.numberNode+=String.fromCharCode(C):C===c.period?(S.numberNode.indexOf(".")!==-1&&D(S,"Invalid number has two dots"),S.numberNode+="."):C===c.e||C===c.E?((S.numberNode.indexOf("e")!==-1||S.numberNode.indexOf("E")!==-1)&&D(S,"Invalid number has two exponential"),S.numberNode+="e"):C===c.plus||C===c.minus?(ue===c.e||ue===c.E||D(S,"Invalid symbol in number"),S.numberNode+=String.fromCharCode(C)):(N(S),F--,S.state=S.stack.pop()||s.VALUE);continue;default:D(S,"Unknown state: "+S.state)}return S.position>=S.bufferCheckPosition&&u(S),S}})(e)});function Dx(t){var e=0,n=Ix(),r={pullAsync:function(o){return To(this,void 0,void 0,function(){var i,s,l;return ur(this,function(a){switch(a.label){case 0:return i=t.slice(e,e+o),e+=o,[4,Ly(i,"text")];case 1:return s=a.sent(),l=n.write(s),r.result=l||{},[2,l]}})})},pullSync:function(o){var i=t.slice(e,e+o);e+=o;var s=Vy(i,"text"),l=n.write(s);return r.result=l||{},l},done:function(){return n.done()},eof:function(){return e>=t.size},result:{}};return r}function Ix(t){var e=$x.parser(),n=0,r,o=[],i,s,l=!1,a=!1;return e.onopenobject=function(c){var u={};u.incomplete=!0,r||(r=u),i&&(o.push([s,i,a]),a?i.push(u):i[s]=u),i=u,s=c,a=!1,++n},e.onkey=function(c){return s=c},e.onvalue=function(c){return a?i.push(c):i[s]=c},e.oncloseobject=function(){var c;delete i.incomplete,s=null,--n===0?l=!0:(c=o.pop(),s=c[0],i=c[1],a=c[2])},e.onopenarray=function(){var c=[];c.incomplete=!0,r||(r=c),i&&(o.push([s,i,a]),a?i.push(c):i[s]=c),i=c,a=!0,s=null,++n},e.onclosearray=function(){var c;delete i.incomplete,s=null,--n===0?l=!0:(c=o.pop(),s=c[0],i=c[1],a=c[2])},{write:function(c){return e.write(c),r},done:function(){return l}}}var Hy=1024;function zy(t,e){return To(this,void 0,void 0,function(){var n,r,o,i;return ur(this,function(s){switch(s.label){case 0:return e=e||{},n=e.chunkSizeBytes||Hy*1024,[4,Uy(t,n)];case 1:return r=s.sent(),o=r.result.data,i=new jt(e.name!==void 0?e.name:o.databaseName),i.version(o.databaseVersion).stores(Cx(o)),[4,Ky(i,r,e.name!==void 0?Ba(Ba({},e),{acceptNameDiff:!0}):e)];case 2:return s.sent(),[2,i]}})})}function Ky(t,e,n){return To(this,void 0,void 0,function(){function r(){return To(this,void 0,void 0,function(){var b,k,T,A,N;return ur(this,function(B){switch(B.label){case 0:b=function(D){var V,j,K,E,S,F,C,ue,Q,xe,be,ee,Ae;return ur(this,function(et){switch(et.label){case 0:if(c.includes(D.tableName))return[2,"continue"];if(!D.rows)return[2,"break"];if(!D.rows.incomplete&&D.rows.length===0)return[2,"continue"];if(u&&jt.ignoreTransaction(function(){return u(d)}),V=D.tableName,j=t.table(V),K=a.tables.filter(function(Ue){return Ue.name===V})[0].schema,!j){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(D.tableName," is missing in installed database"))}if(!n.acceptChangedPrimaryKey&&K.split(",")[0]!=j.schema.primKey.src)throw new Error("Primary key differs for table ".concat(D.tableName,". "));for(E=D.rows,S=[],F=0;F<E.length&&(C=E[F],!C.incomplete);F++)S.push(Xn.revive(C));return ue=n.filter,Q=n.transform,xe=ue?D.inbound?S.filter(function(Ue){return ue(V,Ue)}):S.filter(function(Ue){var ot=Ue[0],ht=Ue[1];return ue(V,ht,ot)}):S,Q&&(xe=xe.map(D.inbound?function(Ue){return Q(V,Ue).value}:function(Ue){var ot=Ue[0],ht=Ue[1],Lt=Q(V,ht,ot);return[Lt.key,Lt.value]})),be=D.inbound?[void 0,xe]:[xe.map(function(Ue){return Ue[0]}),S.map(function(Ue){return Ue[1]})],ee=be[0],Ae=be[1],n.overwriteValues?[4,j.bulkPut(Ae,ee)]:[3,2];case 1:return et.sent(),[3,4];case 2:return[4,j.bulkAdd(Ae,ee)];case 3:et.sent(),et.label=4;case 4:return d.completedRows+=S.length,S.incomplete||(d.completedTables+=1),E.splice(0,S.length),[2]}})},k=0,T=a.data,B.label=1;case 1:return k<T.length?(A=T[k],[5,b(A)]):[3,4];case 2:if(N=B.sent(),N==="break")return[3,4];B.label=3;case 3:return k++,[3,1];case 4:for(;a.data.length>0&&a.data[0].rows&&!a.data[0].rows.incomplete;)a.data.splice(0,1);return!i.done()&&!i.eof()?l?(i.pullSync(o),[3,7]):[3,5]:[3,8];case 5:return[4,jt.waitFor(i.pullAsync(o))];case 6:B.sent(),B.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var o,i,s,l,a,c,u,d,h,m,g;return ur(this,function(b){switch(b.label){case 0:return n=n||{},o=n.chunkSizeBytes||Hy*1024,[4,Uy(e,o)];case 1:if(i=b.sent(),s=i.result,l="FileReaderSync"in self,a=s.data,c=n.skipTables?n.skipTables:[],!n.acceptNameDiff&&t.name!==a.databaseName)throw new Error("Name differs. Current database name is ".concat(t.name," but export is ").concat(a.databaseName));if(!n.acceptVersionDiff&&t.verno!==a.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(t.verno," but export is ").concat(a.databaseVersion));if(u=n.progressCallback,d={done:!1,completedRows:0,completedTables:0,totalRows:a.tables.reduce(function(k,T){return k+T.rowCount},0),totalTables:a.tables.length},u&&jt.ignoreTransaction(function(){return u(d)}),!n.clearTablesBeforeImport)return[3,5];h=0,m=t.tables,b.label=2;case 2:return h<m.length?(g=m[h],c.includes(g.name)?[3,4]:[4,g.clear()]):[3,5];case 3:b.sent(),b.label=4;case 4:return h++,[3,2];case 5:return n.noTransaction?[4,r()]:[3,7];case 6:return b.sent(),[3,9];case 7:return[4,t.transaction("rw",t.tables,r)];case 8:b.sent(),b.label=9;case 9:return d.done=!0,u&&jt.ignoreTransaction(function(){return u(d)}),[2]}})})}function Uy(t,e){return To(this,void 0,void 0,function(){var n,r;return ur(this,function(o){switch(o.label){case 0:n="slice"in t?Dx(t):t,o.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(e)];case 2:return o.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(r=n.result,!r||r.formatName!="dexie")throw new Error("Given file is not a dexie export");if(r.formatVersion>Nx)throw new Error("Format version ".concat(r.formatVersion," not supported"));if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}})})}jt.prototype.export=function(t){return _x(this,t)};jt.prototype.import=function(t,e){return Ky(this,t,e)};jt.import=function(t,e){return zy(t,e)};function Bx(t){return og()?(vw(t),!0):!1}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function Rx(t,e){const n=sf(e==null?void 0:e.initialValue),r=t.subscribe({next:o=>n.value=o,error:e==null?void 0:e.onError});return Bx(()=>{r.unsubscribe()}),n}let Bl;const Lx=new Uint8Array(16);function Vx(){if(!Bl&&(Bl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Bl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Bl(Lx)}const Gt=[];for(let t=0;t<256;++t)Gt.push((t+256).toString(16).slice(1));function Fx(t,e=0){return Gt[t[e+0]]+Gt[t[e+1]]+Gt[t[e+2]]+Gt[t[e+3]]+"-"+Gt[t[e+4]]+Gt[t[e+5]]+"-"+Gt[t[e+6]]+Gt[t[e+7]]+"-"+Gt[t[e+8]]+Gt[t[e+9]]+"-"+Gt[t[e+10]]+Gt[t[e+11]]+Gt[t[e+12]]+Gt[t[e+13]]+Gt[t[e+14]]+Gt[t[e+15]]}const jx=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),bp={randomUUID:jx};function Hx(t,e,n){if(bp.randomUUID&&!e&&!t)return bp.randomUUID();t=t||{};const r=t.random||(t.rng||Vx)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let o=0;o<16;++o)e[n+o]=r[o];return e}return Fx(r)}const zx=async t=>await t.export(),Kx={data(){return{dbRef:null,db:null,databaseName:null,dblist:[],useObservable:Rx,liveQuery:Ry,uuid:Hx,syncdb:{},DBstores:{Settings:"uuid, settings, lastupdated",Writer:"uuid, title, description, files, lastupdated",Cards:"uuid, title,description,content,style,labels,options,lastupdated",Files:"uuid, writerid, title, content, lastupdated",Snowflake:"uuid, title, description,content,lastupdated",Timeline:"uuid, title, description,content,lastupdated",Gridplanner:"uuid, title, description,content,lastupdated",Mindmap:"uuid, title, description,content,lastupdated",ImageLibrary:"uuid, title, base64"}}},methods:{async getDatabases(){},async initDatabase(){console.log(this.databaseName),this.databaseName||(console.log("New Db Created"),this.databaseName=this.uuid()),this.db||(console.log("Creating new database"),this.db=await new jt(this.databaseName),console.log("Creating new stores"),this.db.version(1).stores(this.DBstores));let t=await this.db.Settings.toArray(),e={};if(t){if(t.length)e=t[0],this.dbRef=e.uuid;else{let n=JSON.parse(JSON.stringify(this.$root.SettingsTemplate));n.uuid=this.$root.uuid(),n.ProjectName="New Project",await this.$root.AddRecord("Settings",n),this.dbRef=n.uuid}if(this.syncdb.Settings=await this.useObservable(this.liveQuery(async()=>await this.db.Settings.get(this.dbRef))),this.syncdb.Cards=await this.useObservable(this.liveQuery(async()=>await this.db.Cards.toArray())),this.syncdb.Files=await this.useObservable(this.liveQuery(async()=>await this.db.Files.toArray())),this.syncdb.Gridplanner=await this.useObservable(this.liveQuery(async()=>await this.db.Gridplanner.toArray())),this.syncdb.ImageLibrary=await this.useObservable(this.liveQuery(async()=>await this.db.ImageLibrary.toArray())),this.syncdb.Mindmap=await this.useObservable(this.liveQuery(async()=>await this.db.Mindmap.toArray())),this.syncdb.Snowflake=await this.useObservable(this.liveQuery(async()=>await this.db.Snowflake.toArray())),this.syncdb.Timeline=await this.useObservable(this.liveQuery(async()=>await this.db.Timeline.toArray())),this.syncdb.Writer=await this.useObservable(this.liveQuery(async()=>await this.db.Writer.toArray())),console.log(this.$root.currentTool,this.$root.urlSelected),this.$root.currentTool){console.log("New Window link");const n=this.$root.currentTool,r=n.charAt(0).toUpperCase()+n.slice(1);this.$root.urlSelected&&(this.$root.tools[this.$root.currentTool].selected=await this.db[r].get(this.$root.urlSelected))}}},async dbImport(t){this.databaseName=t.data.databaseName;const e=new Blob([JSON.stringify(t)],{type:"text/json;charset=utf-8"});this.db=await zy(e,{clearTablesBeforeImport:!0}),await this.initDatabase()},async dbExport(){const t=await new jt(this.databaseName).open(),e=await zx(t);return t.close(),e},async getImage(t){return await this.$root.db.ImageLibrary.get(t)},async AddRecord(t,e){return e.lastupdated=Date.now(),await this.db[t].add(e)},async UpdateRecord(t,e,n){return n.uuid=e,n.lastupdated=Date.now(),await this.db[t].put(JSON.parse(JSON.stringify(n)))},async DeleteRecord(t,e){return await this.db[t].delete(e)},clearDatabase(){this.$root.db.Settings.clear(),this.$root.db.Writer.clear(),this.$root.db.Cards.clear(),this.$root.db.Files.clear(),this.$root.db.Mindmap.clear(),this.$root.db.ImageLibrary.clear(),this.$root.db.Gridplanner.clear(),this.$root.db.Snowflake.clear(),this.$root.db.Timeline.clear()},async closeProject(){this.$swal({title:"Are you sure?",text:"This will close the project any unsaved changes will be lost!",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, close it!"}).then(async t=>{t.isConfirmed&&(window.removeEventListener("beforeunload",this.$root.unloadEvent),this.dbRef=null,this.$root.clearDatabase(),await this.$root.db.delete(),location.reload())})},async closeAndDeleteDatabase(){this.db&&(await this.db.close(),await jt.delete(this.databaseName),console.log(`Database ${this.databaseName} closed and deleted.`))}},async mounted(){this.databaseName?await this.initDatabase():this.getDatabases(),console.log("closing db",this.$root.mainwindow),this.$root.mainwindow&&(console.log("closing db"),window.addEventListener("beforeunload",this.closeAndDeleteDatabase))},beforeDestroy(){console.log("closing db",this.$root.mainwindow),this.$root.mainwindow&&(console.log("closing db"),window.addEventListener("beforeunload",this.closeAndDeleteDatabase))}},Ux={data(){return{SettingsTemplate:{documentprefs:{align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-align")),fontsize:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-fontsize")),lspacing:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-lspacing")),indentation:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-indentation")),pspacing:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-pspacing")),page:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-page")),font:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-font")),color:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-color")),bgcolor:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-bgcolor")),h1align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h1align")),h2align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h2align")),h3align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h3align")),h4align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h4align")),distractionfree_font:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--distractionfree-font")),distractionfree_bg:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--distractionfree-bg")),distractionfree_fg:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--distractionfree-fg")),typesound:!1,caretfocus:!1}},writerTemplate:{title:"Another Great Novel",author:"A.N. Author",description:" ... ",files:[]},fileTemplate:{title:"New Section",content:"",notes:[]}}},methods:{dotrim(t){return t[0]===" "&&(t=t.substring(1)),t},async makeNewCard(t){let e=this.$root.uuid();t&&(e=t);let n={};n.uuid=e,n.title="",n.description="",n.showdesc=!1,n.content="",n.labels=[],n.images=[],n.style="",n.options={},n.color="cardcolor0",console.log(n),await this.$root.AddRecord("Cards",n),this.$root.modal=!0,this.$root.tools.cards.selected=n},async makeMindmap(){let t=this.$root.uuid(),e={};e.uuid=t,e.title="New Mindmap",e.description="",e.content={links:[],nodes:{}},await this.$root.AddRecord("Mindmap",e),this.$root.tools.mindmap.selected=e},async makeTimeline(){let t=this.$root.uuid(),e={};e.uuid=t,e.title="New Timeline",e.description="",e.content={items:[]},await this.$root.AddRecord("Timeline",e),this.$root.tools.timeline.selected=e},async makeGridplanner(){let t=this.$root.uuid(),e={};e.uuid=t,e.title="New Gridplanner",e.description="",e.content={headers:[],rows:[]},await this.$root.AddRecord("Gridplanner",e),this.$root.tools.gridplanner.selected=e},async makeSnowflake(){let t=this.$root.uuid(),e={};e.uuid=t,e.title="",e.description="",e.content=[],await this.$root.AddRecord("Snowflake",e),this.$root.tools.snowflake.selected=e}}},Wx={data(){return{}},methods:{handleKeyPress(t){this.$root.databaseName&&t.keyCode==83&&(navigator.userAgent.includes("Mac")?t.metaKey:t.ctrlKey)&&(t.preventDefault(),this.saveFile())},async openFile(){try{[this.$root.fileHandle]=await window.showOpenFilePicker({types:[{description:"Wavemaker Cards File",accept:{"application/json":[".wmc"]},extensions:["wmc"]}]});const e=await(await this.$root.fileHandle.getFile()).text();this.$root.jsonData=JSON.parse(e),this.$root.dbImport(this.$root.jsonData)}catch(t){console.error("Error opening file:",t)}},async snapShot(){let t=this.sanitizeFilename(this.$root.syncdb.Settings.ProjectName);const n=await(await this.$root.dbExport()).text();this.$root.jsonData=JSON.parse(n);const r=new Blob([JSON.stringify(this.$root.jsonData,null,2)],{type:"application/json"}),o=URL.createObjectURL(r),i=document.createElement("a");i.href=o,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)},sanitizeFilename(t){const e=new Date,n=`${e.getDate()}-${e.getMonth()+1}-${e.getFullYear()}-${e.getHours()}-${e.getMinutes()}-${e.getSeconds()}`;return t.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")+`-${n}.wmc`},async saveFile(){const e=await(await this.$root.dbExport()).text();this.$root.jsonData=JSON.parse(e);try{this.$root.fileHandle||(this.$root.fileHandle=await window.showSaveFilePicker({suggestedName:"untitled.wmc",types:[{description:"Wavemaker Cards File",accept:{"application/json":[".wmc"]}}]}));const n=await this.$root.fileHandle.createWritable();await n.write(JSON.stringify(this.$root.jsonData,null,2)),await n.close(),this.$swal({title:"Your File Was saved",text:"The file was saved successfully",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK"})}catch{this.$swal({title:"Your file was not saved",text:"Please try again, or use other export tools to make a backup.",icon:"error",confirmButtonColor:"#3085d6",confirmButtonText:"OK"})}},async clearFile(){this.$root.closeProject()}},created(){"launchQueue"in window&&"files"in window.LaunchParams.prototype&&window.launchQueue.setConsumer(async t=>{if(!t.files.length)return;this.$root.fileHandle=t.files[0];const n=await(await this.$root.fileHandle.getFile()).text();this.$root.jsonData=JSON.parse(n),await this.$root.dbImport(this.$root.jsonData)})},mounted(){window.addEventListener("keydown",this.handleKeyPress)},beforeDestroy(){window.removeEventListener("keydown",this.handleKeyPress)}},qx={data(){return{windowID:null,parentID:null,mainwindow:!0,childWindows:[]}},methods:{openNewWindow(){let t="",e="";this.$root.currentTool&&(t=this.$root.currentTool,this.$root.tools[this.$root.currentTool].selected&&(e=this.$root.tools[this.$root.currentTool].selected.uuid,console.log(e)));let n=window.location.href;n=n+"?parentid="+this.windowID,n=n+"&dbname="+this.$root.databaseName,n=n+"&tool="+t,n=n+"&selected="+e;const r=window.open(n,"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=800,height=600");this.childWindows.push(r),r.onload=function(){new URL(r.location)}},closeChildWindows(){this.childWindows.forEach(t=>{t&&!t.closed&&t.close()}),this.childWindows=[]}},async created(){const t=new URLSearchParams(window.location.search);for(const[e,n]of t.entries())console.log(`${e}: ${n}`);this.parentID=t.get("parentid"),this.$root.databaseName=t.get("dbname"),this.$root.currentTool=t.get("tool"),this.$root.urlSelected=t.get("selected"),console.log("SubWindow",this.parentID),this.parentID&&(this.mainwindow=!1),this.windowID=this.uuid(),window.addEventListener("beforeunload",this.closeChildWindows)},beforeDestroy(){window.removeEventListener("beforeunload",this.closeChildWindows)}},ct=(t,e)=>{const n=t.__vccOpts||t;for(const[r,o]of e)n[r]=o;return n},Jx={},Gx={xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 453.543 453.543","xml:space":"preserve",class:"logo"};function Yx(t,e){return X(),fe("svg",Gx,e[0]||(e[0]=[P("path",{d:"M464.632 212.901 337.566 83.292a55.653 55.653 0 0 0-79.771 0l-126.63 129.386a19.322 19.322 0 0 0 0 27.122l38.359 39.127 25.5 24.232c7.628 7.114 19.18 7.114 26.808 0l51.219-48.242c14.167-13.338 35.744-13.338 49.693 0l51.219 48.242c7.629 7.114 19.18 7.114 26.809 0l25.501-24.232 38.359-38.904c7.193-7.337 7.193-19.563 0-27.122z",class:"logotop",transform:"matrix(.6795 0 0 .6795 21.648 1.33)"},null,-1),P("path",{d:"m58.804 367.853 198.991 202.973a55.657 55.657 0 0 0 79.771 0l198.991-202.973c34.437-35.125 10.244-45.574-15.039-70.029L490.35 267.59c-7.409-7.336-19.18-7.113-26.808 0l-51.218 48.242c-14.169 13.339-35.744 13.339-49.694 0l-51.219-48.242a19.508 19.508 0 0 0-26.809 0l-51.219 48.242c-14.167 13.339-35.744 13.339-49.693 0l-51.219-48.242a19.508 19.508 0 0 0-26.809 0l-28.77 27.123c-26.37 24.899-54.05 36.236-18.088 73.14z",class:"logobtm",transform:"matrix(.6795 0 0 .6795 21.648 1.33)"},null,-1)]))}const Ef=ct(Jx,[["render",Yx],["__scopeId","data-v-c0fdd851"]]),Xx={methods:{update(){this.$root.UpdateRecord("Settings",this.$root.syncdb.Settings.uuid,this.$root.syncdb.Settings)}}},Zx={key:0};function Qx(t,e,n,r,o,i){return this.$root.syncdb.Settings?(X(),fe("span",Zx,[an(P("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>this.$root.syncdb.Settings.ProjectName=s),placeholder:"Project Name",onBlur:e[1]||(e[1]=s=>i.update())},null,544),[[xn,this.$root.syncdb.Settings.ProjectName]])])):He("",!0)}const Wy=ct(Xx,[["render",Qx]]),eC={components:{Logo:Ef,ProjectName:Wy},methods:{}},tC={class:"toptoolbar"},nC={class:"floatRight"},rC={key:3};function oC(t,e,n,r,o,i){const s=Qe("Logo"),l=Qe("ProjectName");return X(),fe("div",tC,[P("button",{onClick:e[0]||(e[0]=a=>t.$root.currentTool=null),class:"titlebtn"},[wt(s,{style:{width:"30px",height:"30px"}})]),wt(l,{class:"projectname"}),P("span",nC,[t.$root.dbRef?He("",!0):(X(),fe("button",{key:0,onClick:e[1]||(e[1]=(...a)=>t.$root.openFileFromGoogleDrive&&t.$root.openFileFromGoogleDrive(...a))},e[8]||(e[8]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[P("title",null,"Google Drive"),P("path",{d:"M7.71,3.5L1.15,15L4.58,21L11.13,9.5M9.73,15L6.3,21H19.42L22.85,15M22.28,14L15.42,2H8.58L8.57,2L15.43,14H22.28Z"})],-1)]))),t.$root.dbRef?He("",!0):(X(),fe("button",{key:1,onClick:e[2]||(e[2]=(...a)=>t.$root.openFileFromDropBox&&t.$root.openFileFromDropBox(...a))},e[9]||(e[9]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[P("title",null,"Dropbox"),P("path",{d:"M3 6.2L8 9.39L13 6.2L8 3L3 6.2M13 6.2L18 9.39L23 6.2L18 3L13 6.2M3 12.55L8 15.74L13 12.55L8 9.35L3 12.55M18 9.35L13 12.55L18 15.74L23 12.55L18 9.35M8.03 16.8L13.04 20L18.04 16.8L13.04 13.61L8.03 16.8Z"})],-1)]))),t.$root.dbRef?He("",!0):(X(),fe("button",{key:2,onClick:e[3]||(e[3]=a=>t.$root.openFile())},e[10]||(e[10]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[P("title",null,"Load your Project"),P("path",{d:"M20 18H4V8H20M20 6H12L10 4H4A2 2 0 0 0 2 6V18A2 2 0 0 0 4 20H20A2 2 0 0 0 22 18V8A2 2 0 0 0 20 6M16 17H14V13H11L15 9L19 13H16Z"})],-1)]))),t.$root.dbRef?(X(),fe("span",rC,[P("button",{title:"Open in a new window",onClick:e[4]||(e[4]=a=>t.$root.openNewWindow())},e[11]||(e[11]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[P("title",null,"Open New Window"),P("path",{d:"M12,10L8,14H11V20H13V14H16M19,4H5C3.89,4 3,4.9 3,6V18A2,2 0 0,0 5,20H9V18H5V8H19V18H15V20H19A2,2 0 0,0 21,18V6A2,2 0 0,0 19,4Z"})],-1)])),P("button",{onClick:e[5]||(e[5]=a=>t.$root.snapShot())},e[12]||(e[12]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[P("title",null,"Snapshot Project"),P("path",{d:"M20,4H16.83L15,2H9L7.17,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6A2,2 0 0,0 20,4M20,18H4V6H8.05L9.88,4H14.12L15.95,6H20V18M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15Z"})],-1)])),P("button",{onClick:e[6]||(e[6]=a=>t.$root.saveFile())},e[13]||(e[13]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[P("title",null,"Save Project"),P("path",{d:"M17 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3M19 19H5V5H16.17L19 7.83V19M12 12C10.34 12 9 13.34 9 15S10.34 18 12 18 15 16.66 15 15 13.66 12 12 12M6 6H15V10H6V6Z"})],-1)])),P("button",{onClick:e[7]||(e[7]=a=>t.$root.clearFile())},e[14]||(e[14]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[P("title",null,"Close Project"),P("path",{d:"M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V5H19V19M17,8.4L13.4,12L17,15.6L15.6,17L12,13.4L8.4,17L7,15.6L10.6,12L7,8.4L8.4,7L12,10.6L15.6,7L17,8.4Z"})],-1)]))])):He("",!0)])])}const iC=ct(eC,[["render",oC],["__scopeId","data-v-6290f712"]]),sC={name:"CardEditor",data(){return{colorlist:["cardcolor0","cardcolor1","cardcolor2","cardcolor3","cardcolor4","cardcolor5","cardcolor6"]}},methods:{update(){this.$root.UpdateRecord("Cards",this.$root.tools.cards.selected.uuid,this.$root.tools.cards.selected)},setColor(t){console.log(t),this.$root.tools.cards.selected.color=t,this.update()}}},lC={key:0},aC=["onClick"];function cC(t,e,n,r,o,i){return X(),fe(rt,null,[t.$root.tools.cards.selected?He("",!0):(X(),fe("div",lC,[e[9]||(e[9]=Qn(" no card picked - so its gonna be link or new ")),P("button",{onClick:e[0]||(e[0]=s=>t.$root.makeNewCard())},"New Card")])),t.$root.tools.cards.selected?(X(),fe("div",{key:1,class:dr(["card",t.$root.tools.cards.selected.color])},[P("div",null,[(X(!0),fe(rt,null,pr(o.colorlist,s=>(X(),fe("button",{class:dr(["colorbtn",s]),onClick:l=>i.setColor(s)},null,10,aC))),256))]),P("h1",null,[an(P("input",{type:"text",placeholder:"Card Title","onUpdate:modelValue":e[1]||(e[1]=s=>t.$root.tools.cards.selected.title=s),onBlur:e[2]||(e[2]=s=>i.update())},null,544),[[xn,t.$root.tools.cards.selected.title]])]),e[11]||(e[11]=P("h2",null,"Description",-1)),P("label",null,[an(P("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=s=>t.$root.tools.cards.selected.showdesc=s),onBlur:e[4]||(e[4]=s=>i.update())},null,544),[[Ek,t.$root.tools.cards.selected.showdesc]]),e[10]||(e[10]=Qn(" Show on card"))]),P("p",null,[an(P("textarea",{placeholder:"card summary","onUpdate:modelValue":e[5]||(e[5]=s=>t.$root.tools.cards.selected.description=s),onBlur:e[6]||(e[6]=s=>i.update())},null,544),[[xn,t.$root.tools.cards.selected.description]])]),e[12]||(e[12]=P("h2",null,"Content",-1)),P("p",null,[an(P("textarea",{placeholder:"card details","onUpdate:modelValue":e[7]||(e[7]=s=>t.$root.tools.cards.selected.content=s),onBlur:e[8]||(e[8]=s=>i.update())},null,544),[[xn,t.$root.tools.cards.selected.content]])]),e[13]||(e[13]=P("p",null,null,-1))],2)):He("",!0)],64)}const uC=ct(sC,[["render",cC],["__scopeId","data-v-ab29f6c2"]]),dC={components:{CardEditor:uC}},fC={class:"centreme"};function hC(t,e,n,r,o,i){const s=Qe("CardEditor");return X(),fe(rt,null,[P("div",{class:"blackout",onClick:e[0]||(e[0]=l=>t.$root.modal=!1)}),P("div",fC,[P("button",{onClick:e[1]||(e[1]=l=>t.$root.modal=!1),class:"modalclose"},e[2]||(e[2]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[P("title",null,"close-circle-outline"),P("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})],-1)])),wt(s)])],64)}const pC=ct(dC,[["render",hC],["__scopeId","data-v-21b499cb"]]),mC={},gC={class:"footerbar"};function yC(t,e){return X(),fe("div",gC," Wavemaker Cards v5 © 2021 ")}const bC=ct(mC,[["render",yC]]),vC={data(){return{deferredPrompt:null,showInstallBanner:!1}},mounted(){window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),this.deferredPrompt=t,this.showInstallBanner=!0})},methods:{async installApp(){this.showInstallBanner=!1,this.deferredPrompt.prompt();const{outcome:t}=await this.deferredPrompt.userChoice;console.log(t==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),this.deferredPrompt=null}}},wC={key:0,class:"install-banner"};function SC(t,e,n,r,o,i){return o.showInstallBanner?(X(),fe("div",wC,[e[1]||(e[1]=P("p",null,"Install our app for a better experience!",-1)),P("button",{onClick:e[0]||(e[0]=(...s)=>i.installApp&&i.installApp(...s))},"Install")])):He("",!0)}const kC=ct(vC,[["render",SC],["__scopeId","data-v-7d957fbf"]]),xC={name:"About",components:{Logo:Ef},data(){return{}},methods:{async newProject(){this.$root.initDatabase()}}},CC={class:"center-box"},TC={class:"hero"},EC={style:{display:"flex","justify-content":"center","align-items":"center"}},OC={style:{display:"block"}};function AC(t,e,n,r,o,i){const s=Qe("Logo");return X(),fe("div",CC,[P("div",TC,[P("div",EC,[wt(s,{style:{width:"50px"}}),e[2]||(e[2]=P("h1",null,"Wavemaker Cards",-1))]),e[5]||(e[5]=P("p",null,[P("strong",null,"Version 5")],-1)),e[6]||(e[6]=P("p",{style:{padding:"10px","font-size":"1rem"}},"Start Writing",-1)),P("div",OC,[P("button",{class:"btn welcomebtn",onClick:e[0]||(e[0]=l=>i.newProject())},e[3]||(e[3]=[P("svg",{class:"icon",viewBox:"0 0 24 24"},[P("path",{d:"M10,16.5V7.5L16,12M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"})],-1),Qn(" Create a new project")])),P("button",{class:"btn welcomebtn",onClick:e[1]||(e[1]=l=>t.$root.openFile())},e[4]||(e[4]=[P("svg",{class:"icon",viewBox:"0 0 24 24"},[P("path",{d:"M19,20H4C2.89,20 2,19.1 2,18V6C2,4.89 2.89,4 4,4H10L12,6H19A2,2 0 0,1 21,8H21L4,8V18L6.14,10H23.21L20.93,18.5C20.7,19.37 19.92,20 19,20Z"})],-1),P("span",null," Load a project (.wmc file) ",-1)]))])])])}const MC=ct(xC,[["render",AC],["__scopeId","data-v-200f914c"]]),_C={data(){return{currentdate:new Date,wordcountprogress:0,month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},computed:{monthDays(){const t=new Date(this.currentdate),e=t.getFullYear(),n=t.getMonth();return new Date(e,n+1,0).getDate()},prevMonthDays(){const t=new Date(this.currentdate),e=t.getFullYear(),n=t.getMonth();return new Date(e,n,0).getDate()},nextMonthDays(){const t=new Date(this.currentdate),e=t.getFullYear(),n=t.getMonth();return new Date(e,n-1,0).getDate()}},mounted(){this.$root.syncdb.Settings.tracker||(this.$root.syncdb.Settings.tracker={wordcount:0,target:2500,log:{"2025-02-01":123,"2025-02-02":432,"2025-02-03":234,"2025-02-04":345,"2025-02-05":456,"2025-02-06":567,"2025-02-07":678,"2025-02-08":789,"2025-02-09":890,"2025-02-10":901,"2025-02-11":123,"2025-02-12":234,"2025-02-13":345,"2025-02-14":456,"2025-02-15":567,"2025-02-16":678,"2025-02-17":789,"2025-02-18":890,"2025-02-19":901,"2025-02-20":123,"2025-02-21":234,"2025-02-22":345,"2025-02-23":456,"2025-02-24":567,"2025-02-25":678,"2025-02-26":789,"2025-02-27":890,"2025-02-28":901,"2025-03-01":123,"2025-03-02":234,"2025-03-03":345,"2025-03-04":456,"2025-03-05":567,"2025-03-06":678,"2025-03-07":789,"2025-03-08":890,"2025-03-09":901,"2025-03-10":123,"2025-03-11":234,"2025-03-12":345,"2025-03-13":456,"2025-03-14":567,"2025-03-15":678,"2025-03-16":789,"2025-03-17":890,"2025-03-18":901,"2025-03-19":123,"2025-03-20":234,"2025-03-21":345}})},methods:{update(){this.$root.UpdateRecord("Settings",this.$root.syncdb.Settings.uuid,this.$root.syncdb.Settings)},monthName(t=0){let e=this.currentdate.getMonth()+t;return e===-1&&(e=11),e===12&&(e=0),this.month[e]},getLogValue(t,e){const n=this.currentdate.getFullYear(),r=this.currentdate.getMonth()+e,o=String(t).padStart(2,"0"),i=`${n}-${String(r).padStart(2,"0")}-${o}`,s=this.$root.syncdb.Settings.tracker.log[i]||0,l=this.$root.syncdb.Settings.tracker.target||1,a=s/l;return{count:s,percent:a}},advanceMonth(){const t=new Date(this.currentdate);t.setMonth(t.getMonth()+1),this.currentdate=t},reduceMonth(){const t=new Date(this.currentdate);t.setMonth(t.getMonth()-1),this.currentdate=t}}},NC={key:0},PC={class:"calendars"},$C={class:"month"},DC={class:"calendar"},IC=["title"],BC={class:"month"},RC={class:"calendar"},LC=["title"],VC={class:"progress-container"},FC={class:"progress-circle",viewBox:"0 0 36 36"};function jC(t,e,n,r,o,i){return this.$root.syncdb.Settings.tracker?(X(),fe("div",NC,[P("h3",null,kn(t.$root.syncdb.Settings.tracker.wordcount)+" Words",1),P("label",null,[e[3]||(e[3]=Qn("Daily Wordcount Target ")),an(P("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=s=>t.$root.syncdb.Settings.tracker.target=s)},null,512),[[xn,t.$root.syncdb.Settings.tracker.target]])]),e[5]||(e[5]=P("p",{style:{"text-align":"center"}},"Your Goals",-1)),P("div",null,[P("button",{onClick:e[1]||(e[1]=(...s)=>i.reduceMonth&&i.reduceMonth(...s))},"Previous Month"),P("button",{onClick:e[2]||(e[2]=(...s)=>i.advanceMonth&&i.advanceMonth(...s))},"Next Month")]),P("div",PC,[P("div",null,[P("div",$C,kn(i.monthName(-1)),1),P("div",DC,[(X(!0),fe(rt,null,pr(i.prevMonthDays,s=>(X(),fe("div",{class:"day",title:i.getLogValue(s,0).count+" Words"},[P("div",{class:"block",style:Bi(`opacity:${i.getLogValue(s,0).percent}`)},null,4)],8,IC))),256))])]),P("div",null,[P("div",BC,kn(i.monthName()),1),P("div",RC,[(X(!0),fe(rt,null,pr(i.monthDays,s=>(X(),fe("div",{class:"day",title:i.getLogValue(s,1).count+" Words"},[P("div",{class:"block",style:Bi(`opacity:${i.getLogValue(s,1).percent}`)},null,4)],8,LC))),256))])]),P("div",VC,[(X(),fe("svg",FC,[e[4]||(e[4]=P("path",{class:"circle-bg",d:`M18 2.0845
                     a 15.9155 15.9155 0 0 1 0 31.831
                     a 15.9155 15.9155 0 0 1 0 -31.831`},null,-1)),P("path",{class:"circle",style:Bi(`stroke-dasharray: ${o.wordcountprogress}, 100`),d:`M18 2.0845
                     a 15.9155 15.9155 0 0 1 0 31.831
                     a 15.9155 15.9155 0 0 1 0 -31.831`},null,4)]))])])])):He("",!0)}const HC=ct(_C,[["render",jC]]),zC={name:"ProjectHome",components:{Logo:Ef,ProjectName:Wy,GridLogger:HC},mounted(){this.$root.tools.writer.selected=null,this.$root.tools.gridplanner.selected=null,this.$root.tools.timeline.selected=null,this.$root.tools.mindmap.selected=null,this.$root.tools.snowflake.selected=null,this.$root.tools.planningboard.selected=null},methods:{}},KC={key:0,class:"project-home"},UC={style:{"text-align":"center"}},WC={open:""},qC={class:"inputstyle"},JC={class:"mainnav"};function GC(t,e,n,r,o,i){const s=Qe("Logo"),l=Qe("ProjectName"),a=Qe("GridLogger");return this.$root.syncdb.Settings?(X(),fe("div",KC,[P("div",UC,[wt(s,{style:{width:"150px",height:"150px"}})]),P("details",WC,[e[6]||(e[6]=P("summary",null,"Project Settings",-1)),e[7]||(e[7]=P("p",{style:{"text-align":"center"}},"What is this project called?",-1)),P("h2",qC,[wt(l)]),wt(a)]),P("div",JC,[P("button",{onClick:e[0]||(e[0]=c=>t.$root.currentTool="writer")},e[8]||(e[8]=[P("svg",{"data-v-92328502":"",version:"1.1",viewBox:"0 0 24 24"},[P("path",{"data-v-92328502":"",d:"M19 2L14 6.5V17.5L19 13V2M6.5 5C4.55 5 2.45 5.4 1 6.5V21.16C1 21.41 1.25 21.66 1.5 21.66C1.6 21.66 1.65 21.59 1.75 21.59C3.1 20.94 5.05 20.5 6.5 20.5C8.45 20.5 10.55 20.9 12 22C13.35 21.15 15.8 20.5 17.5 20.5C19.15 20.5 20.85 20.81 22.25 21.56C22.35 21.61 22.4 21.59 22.5 21.59C22.75 21.59 23 21.34 23 21.09V6.5C22.4 6.05 21.75 5.75 21 5.5V19C19.9 18.65 18.7 18.5 17.5 18.5C15.8 18.5 13.35 19.15 12 20V6.5C10.55 5.4 8.45 5 6.5 5Z"})],-1),Qn(" Your Books")])),P("button",{onClick:e[1]||(e[1]=c=>t.$root.currentTool="gridplanner")},e[9]||(e[9]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[P("title",null,"view-grid"),P("path",{d:"M3,11H11V3H3M3,21H11V13H3M13,21H21V13H13M13,3V11H21V3"})],-1),Qn(" Grid Planner ")])),P("button",{onClick:e[2]||(e[2]=c=>t.$root.currentTool="mindmap")},e[10]||(e[10]=[P("svg",{"data-v-92328502":"",version:"1.1",viewBox:"0 0 24 24"},[P("path",{"data-v-92328502":"",d:"M21 16V13C21 11.89 20.11 11 19 11H13V8H15V2H9V8H11V11H5C3.89 11 3 11.89 3 13V16H1V22H7V16H5V13H11V16H9V22H15V16H13V13H19V16H17V22H23V16H21M11 4H13V6H11V4M5 20H3V18H5V20M13 20H11V18H13V20M21 20H19V18H21V20Z"})],-1),Qn(" Mindmap Builder")])),P("button",{onClick:e[3]||(e[3]=c=>t.$root.currentTool="timeline")},e[11]||(e[11]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[P("title",null,"timeline-outline"),P("path",{d:"M4 2V8H2V2H4M2 22V16H4V22H2M5 12C5 13.11 4.11 14 3 14C1.9 14 1 13.11 1 12C1 10.9 1.9 10 3 10C4.11 10 5 10.9 5 12M24 6V18C24 19.11 23.11 20 22 20H10C8.9 20 8 19.11 8 18V14L6 12L8 10V6C8 4.89 8.9 4 10 4H22C23.11 4 24 4.89 24 6M10 6V18H22V6H10Z"})],-1),Qn(" Timeline Creator")])),P("button",{onClick:e[4]||(e[4]=c=>t.$root.currentTool="snowflake")},e[12]||(e[12]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[P("title",null,"snowflake"),P("path",{d:"M20.79,13.95L18.46,14.57L16.46,13.44V10.56L18.46,9.43L20.79,10.05L21.31,8.12L19.54,7.65L20,5.88L18.07,5.36L17.45,7.69L15.45,8.82L13,7.38V5.12L14.71,3.41L13.29,2L12,3.29L10.71,2L9.29,3.41L11,5.12V7.38L8.5,8.82L6.5,7.69L5.92,5.36L4,5.88L4.47,7.65L2.7,8.12L3.22,10.05L5.55,9.43L7.55,10.56V13.45L5.55,14.58L3.22,13.96L2.7,15.89L4.47,16.36L4,18.12L5.93,18.64L6.55,16.31L8.55,15.18L11,16.62V18.88L9.29,20.59L10.71,22L12,20.71L13.29,22L14.7,20.59L13,18.88V16.62L15.5,15.17L17.5,16.3L18.12,18.63L20,18.12L19.53,16.35L21.3,15.88L20.79,13.95M9.5,10.56L12,9.11L14.5,10.56V13.44L12,14.89L9.5,13.44V10.56Z"})],-1),Qn(" Snowflake Tool")])),P("button",{onClick:e[5]||(e[5]=c=>t.$root.currentTool="cardsdatabase")},e[13]||(e[13]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[P("title",null,"cards-outline"),P("path",{d:"M11.19,2.25C10.93,2.25 10.67,2.31 10.42,2.4L3.06,5.45C2.04,5.87 1.55,7.04 1.97,8.05L6.93,20C7.24,20.77 7.97,21.23 8.74,21.25C9,21.25 9.27,21.22 9.53,21.1L16.9,18.05C17.65,17.74 18.11,17 18.13,16.25C18.14,16 18.09,15.71 18,15.45L13,3.5C12.71,2.73 11.97,2.26 11.19,2.25M14.67,2.25L18.12,10.6V4.25A2,2 0 0,0 16.12,2.25M20.13,3.79V12.82L22.56,6.96C22.97,5.94 22.5,4.78 21.47,4.36M11.19,4.22L16.17,16.24L8.78,19.3L3.8,7.29"})],-1),Qn(" Cards Database")]))])])):He("",!0)}const YC=ct(zC,[["render",GC],["__scopeId","data-v-220df877"]]);var XC=Object.defineProperty,La=Object.getOwnPropertySymbols,qy=Object.prototype.hasOwnProperty,Jy=Object.prototype.propertyIsEnumerable,vp=(t,e,n)=>e in t?XC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_i=(t,e)=>{for(var n in e||(e={}))qy.call(e,n)&&vp(t,n,e[n]);if(La)for(var n of La(e))Jy.call(e,n)&&vp(t,n,e[n]);return t},Gy=(t,e)=>{var n={};for(var r in t)qy.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&La)for(var r of La(t))e.indexOf(r)<0&&Jy.call(t,r)&&(n[r]=t[r]);return n};const Yy="[vue-draggable-plus]: ";function ZC(t){console.warn(Yy+t)}function QC(t){console.error(Yy+t)}function wp(t,e,n){return n>=0&&n<t.length&&t.splice(n,0,t.splice(e,1)[0]),t}function eT(t){return t.replace(/-(\w)/g,(e,n)=>n?n.toUpperCase():"")}function tT(t){return Object.keys(t).reduce((e,n)=>(typeof t[n]<"u"&&(e[eT(n)]=t[n]),e),{})}function Sp(t,e){return Array.isArray(t)&&t.splice(e,1),t}function kp(t,e,n){return Array.isArray(t)&&t.splice(e,0,n),t}function nT(t){return typeof t>"u"}function rT(t){return typeof t=="string"}function xp(t,e,n){const r=t.children[n];t.insertBefore(e,r)}function au(t){t.parentNode&&t.parentNode.removeChild(t)}function oT(t,e=document){var n;let r=null;return typeof(e==null?void 0:e.querySelector)=="function"?r=(n=e==null?void 0:e.querySelector)==null?void 0:n.call(e,t):r=document.querySelector(t),r||ZC(`Element not found: ${t}`),r}function iT(t,e,n=null){return function(...r){return t.apply(n,r),e.apply(n,r)}}function sT(t,e){const n=_i({},t);return Object.keys(e).forEach(r=>{n[r]?n[r]=iT(t[r],e[r]):n[r]=e[r]}),n}function lT(t){return t instanceof HTMLElement}function Cp(t,e){Object.keys(t).forEach(n=>{e(n,t[n])})}function aT(t){return t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97)}const cT=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Tp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Ar(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tp(Object(n),!0).forEach(function(r){uT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tp(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ca(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ca=function(e){return typeof e}:ca=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ca(t)}function uT(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yr(){return Yr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yr.apply(this,arguments)}function dT(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,i;for(i=0;i<r.length;i++)o=r[i],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function fT(t,e){if(t==null)return{};var n=dT(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var hT="1.15.2";function Wr(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Zr=Wr(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),yl=Wr(/Edge/i),Ep=Wr(/firefox/i),Is=Wr(/safari/i)&&!Wr(/chrome/i)&&!Wr(/android/i),Xy=Wr(/iP(ad|od|hone)/i),Zy=Wr(/chrome/i)&&Wr(/android/i),Qy={capture:!1,passive:!1};function lt(t,e,n){t.addEventListener(e,n,!Zr&&Qy)}function st(t,e,n){t.removeEventListener(e,n,!Zr&&Qy)}function Va(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function pT(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function ar(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Va(t,e):Va(t,e))||r&&t===n)return t;if(t===n)break}while(t=pT(t))}return null}var Op=/\s+/g;function Hn(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(Op," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(Op," ")}}function Ve(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function Ki(t,e){var n="";if(typeof t=="string")n=t;else do{var r=Ve(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function eb(t,e,n){if(t){var r=t.getElementsByTagName(e),o=0,i=r.length;if(n)for(;o<i;o++)n(r[o],o);return r}return[]}function Tr(){var t=document.scrollingElement;return t||document.documentElement}function $t(t,e,n,r,o){if(!(!t.getBoundingClientRect&&t!==window)){var i,s,l,a,c,u,d;if(t!==window&&t.parentNode&&t!==Tr()?(i=t.getBoundingClientRect(),s=i.top,l=i.left,a=i.bottom,c=i.right,u=i.height,d=i.width):(s=0,l=0,a=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(o=o||t.parentNode,!Zr))do if(o&&o.getBoundingClientRect&&(Ve(o,"transform")!=="none"||n&&Ve(o,"position")!=="static")){var h=o.getBoundingClientRect();s-=h.top+parseInt(Ve(o,"border-top-width")),l-=h.left+parseInt(Ve(o,"border-left-width")),a=s+i.height,c=l+i.width;break}while(o=o.parentNode);if(r&&t!==window){var m=Ki(o||t),g=m&&m.a,b=m&&m.d;m&&(s/=b,l/=g,d/=g,u/=b,a=s+u,c=l+d)}return{top:s,left:l,bottom:a,right:c,width:d,height:u}}}function Ap(t,e,n){for(var r=ho(t,!0),o=$t(t)[e];r;){var i=$t(r)[n],s=void 0;if(s=o>=i,!s)return r;if(r===Tr())break;r=ho(r,!1)}return!1}function Gi(t,e,n,r){for(var o=0,i=0,s=t.children;i<s.length;){if(s[i].style.display!=="none"&&s[i]!==Fe.ghost&&(r||s[i]!==Fe.dragged)&&ar(s[i],n.draggable,t,!1)){if(o===e)return s[i];o++}i++}return null}function Of(t,e){for(var n=t.lastElementChild;n&&(n===Fe.ghost||Ve(n,"display")==="none"||e&&!Va(n,e));)n=n.previousElementSibling;return n||null}function Yn(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Fe.clone&&(!e||Va(t,e))&&n++;return n}function Mp(t){var e=0,n=0,r=Tr();if(t)do{var o=Ki(t),i=o.a,s=o.d;e+=t.scrollLeft*i,n+=t.scrollTop*s}while(t!==r&&(t=t.parentNode));return[e,n]}function mT(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function ho(t,e){if(!t||!t.getBoundingClientRect)return Tr();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=Ve(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Tr();if(r||e)return n;r=!0}}while(n=n.parentNode);return Tr()}function gT(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function cu(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Bs;function tb(t,e){return function(){if(!Bs){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),Bs=setTimeout(function(){Bs=void 0},e)}}}function yT(){clearTimeout(Bs),Bs=void 0}function nb(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function rb(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function ob(t,e,n){var r={};return Array.from(t.children).forEach(function(o){var i,s,l,a;if(!(!ar(o,e.draggable,t,!1)||o.animated||o===n)){var c=$t(o);r.left=Math.min((i=r.left)!==null&&i!==void 0?i:1/0,c.left),r.top=Math.min((s=r.top)!==null&&s!==void 0?s:1/0,c.top),r.right=Math.max((l=r.right)!==null&&l!==void 0?l:-1/0,c.right),r.bottom=Math.max((a=r.bottom)!==null&&a!==void 0?a:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var Un="Sortable"+new Date().getTime();function bT(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(r){if(!(Ve(r,"display")==="none"||r===Fe.ghost)){t.push({target:r,rect:$t(r)});var o=Ar({},t[t.length-1].rect);if(r.thisAnimationDuration){var i=Ki(r,!0);i&&(o.top-=i.f,o.left-=i.e)}r.fromRect=o}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(mT(t,{target:n}),1)},animateAll:function(n){var r=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var o=!1,i=0;t.forEach(function(s){var l=0,a=s.target,c=a.fromRect,u=$t(a),d=a.prevFromRect,h=a.prevToRect,m=s.rect,g=Ki(a,!0);g&&(u.top-=g.f,u.left-=g.e),a.toRect=u,a.thisAnimationDuration&&cu(d,u)&&!cu(c,u)&&(m.top-u.top)/(m.left-u.left)===(c.top-u.top)/(c.left-u.left)&&(l=wT(m,d,h,r.options)),cu(u,c)||(a.prevFromRect=c,a.prevToRect=u,l||(l=r.options.animation),r.animate(a,m,u,l)),l&&(o=!0,i=Math.max(i,l),clearTimeout(a.animationResetTimer),a.animationResetTimer=setTimeout(function(){a.animationTime=0,a.prevFromRect=null,a.fromRect=null,a.prevToRect=null,a.thisAnimationDuration=null},l),a.thisAnimationDuration=l)}),clearTimeout(e),o?e=setTimeout(function(){typeof n=="function"&&n()},i):typeof n=="function"&&n(),t=[]},animate:function(n,r,o,i){if(i){Ve(n,"transition",""),Ve(n,"transform","");var s=Ki(this.el),l=s&&s.a,a=s&&s.d,c=(r.left-o.left)/(l||1),u=(r.top-o.top)/(a||1);n.animatingX=!!c,n.animatingY=!!u,Ve(n,"transform","translate3d("+c+"px,"+u+"px,0)"),this.forRepaintDummy=vT(n),Ve(n,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),Ve(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){Ve(n,"transition",""),Ve(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},i)}}}}function vT(t){return t.offsetWidth}function wT(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var wi=[],uu={initializeByDefault:!0},bl={mount:function(t){for(var e in uu)uu.hasOwnProperty(e)&&!(e in t)&&(t[e]=uu[e]);wi.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),wi.push(t)},pluginEvent:function(t,e,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var o=t+"Global";wi.forEach(function(i){e[i.pluginName]&&(e[i.pluginName][o]&&e[i.pluginName][o](Ar({sortable:e},n)),e.options[i.pluginName]&&e[i.pluginName][t]&&e[i.pluginName][t](Ar({sortable:e},n)))})},initializePlugins:function(t,e,n,r){wi.forEach(function(s){var l=s.pluginName;if(!(!t.options[l]&&!s.initializeByDefault)){var a=new s(t,e,t.options);a.sortable=t,a.options=t.options,t[l]=a,Yr(n,a.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var i=this.modifyOption(t,o,t.options[o]);typeof i<"u"&&(t.options[o]=i)}},getEventProperties:function(t,e){var n={};return wi.forEach(function(r){typeof r.eventProperties=="function"&&Yr(n,r.eventProperties.call(e[r.pluginName],t))}),n},modifyOption:function(t,e,n){var r;return wi.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[e]=="function"&&(r=o.optionListeners[e].call(t[o.pluginName],n))}),r}};function ST(t){var e=t.sortable,n=t.rootEl,r=t.name,o=t.targetEl,i=t.cloneEl,s=t.toEl,l=t.fromEl,a=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,h=t.originalEvent,m=t.putSortable,g=t.extraEventProperties;if(e=e||n&&n[Un],!!e){var b,k=e.options,T="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Zr&&!yl?b=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(b=document.createEvent("Event"),b.initEvent(r,!0,!0)),b.to=s||n,b.from=l||n,b.item=o||n,b.clone=i,b.oldIndex=a,b.newIndex=c,b.oldDraggableIndex=u,b.newDraggableIndex=d,b.originalEvent=h,b.pullMode=m?m.lastPutMode:void 0;var A=Ar(Ar({},g),bl.getEventProperties(r,e));for(var N in A)b[N]=A[N];n&&n.dispatchEvent(b),k[T]&&k[T].call(e,b)}}var kT=["evt"],$n=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.evt,o=fT(n,kT);bl.pluginEvent.bind(Fe)(t,e,Ar({dragEl:ce,parentEl:Mt,ghostEl:Ke,rootEl:Tt,nextEl:Fo,lastDownEl:ua,cloneEl:Ot,cloneHidden:uo,dragStarted:bs,putSortable:Yt,activeSortable:Fe.active,originalEvent:r,oldIndex:Ni,oldDraggableIndex:Rs,newIndex:Kn,newDraggableIndex:so,hideGhostForTarget:ab,unhideGhostForTarget:cb,cloneNowHidden:function(){uo=!0},cloneNowShown:function(){uo=!1},dispatchSortableEvent:function(i){yn({sortable:e,name:i,originalEvent:r})}},o))};function yn(t){ST(Ar({putSortable:Yt,cloneEl:Ot,targetEl:ce,rootEl:Tt,oldIndex:Ni,oldDraggableIndex:Rs,newIndex:Kn,newDraggableIndex:so},t))}var ce,Mt,Ke,Tt,Fo,ua,Ot,uo,Ni,Kn,Rs,so,Rl,Yt,Ei=!1,Fa=!1,ja=[],Ro,lr,du,fu,_p,Np,bs,Si,Ls,Vs=!1,Ll=!1,da,nn,hu=[],xd=!1,Ha=[],xc=typeof document<"u",Vl=Xy,Pp=yl||Zr?"cssFloat":"float",xT=xc&&!Zy&&!Xy&&"draggable"in document.createElement("div"),ib=function(){if(xc){if(Zr)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),sb=function(t,e){var n=Ve(t),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=Gi(t,0,e),i=Gi(t,1,e),s=o&&Ve(o),l=i&&Ve(i),a=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+$t(o).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+$t(i).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&s.float&&s.float!=="none"){var u=s.float==="left"?"left":"right";return i&&(l.clear==="both"||l.clear===u)?"vertical":"horizontal"}return o&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||a>=r&&n[Pp]==="none"||i&&n[Pp]==="none"&&a+c>r)?"vertical":"horizontal"},CT=function(t,e,n){var r=n?t.left:t.top,o=n?t.right:t.bottom,i=n?t.width:t.height,s=n?e.left:e.top,l=n?e.right:e.bottom,a=n?e.width:e.height;return r===s||o===l||r+i/2===s+a/2},TT=function(t,e){var n;return ja.some(function(r){var o=r[Un].options.emptyInsertThreshold;if(!(!o||Of(r))){var i=$t(r),s=t>=i.left-o&&t<=i.right+o,l=e>=i.top-o&&e<=i.bottom+o;if(s&&l)return n=r}}),n},lb=function(t){function e(o,i){return function(s,l,a,c){var u=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(o==null&&(i||u))return!0;if(o==null||o===!1)return!1;if(i&&o==="clone")return o;if(typeof o=="function")return e(o(s,l,a,c),i)(s,l,a,c);var d=(i?s:l).options.group.name;return o===!0||typeof o=="string"&&o===d||o.join&&o.indexOf(d)>-1}}var n={},r=t.group;(!r||ca(r)!="object")&&(r={name:r}),n.name=r.name,n.checkPull=e(r.pull,!0),n.checkPut=e(r.put),n.revertClone=r.revertClone,t.group=n},ab=function(){!ib&&Ke&&Ve(Ke,"display","none")},cb=function(){!ib&&Ke&&Ve(Ke,"display","")};xc&&!Zy&&document.addEventListener("click",function(t){if(Fa)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Fa=!1,!1},!0);var Lo=function(t){if(ce){t=t.touches?t.touches[0]:t;var e=TT(t.clientX,t.clientY);if(e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[Un]._onDragOver(n)}}},ET=function(t){ce&&ce.parentNode[Un]._isOutsideThisEl(t.target)};function Fe(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Yr({},e),t[Un]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return sb(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,s){i.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Fe.supportPointer!==!1&&"PointerEvent"in window&&!Is,emptyInsertThreshold:5};bl.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);lb(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:xT,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?lt(t,"pointerdown",this._onTapStart):(lt(t,"mousedown",this._onTapStart),lt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(lt(t,"dragover",this),lt(t,"dragenter",this)),ja.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Yr(this,bT())}Fe.prototype={constructor:Fe,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Si=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,ce):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,r=this.options,o=r.preventOnFilter,i=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(s||t).target,a=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,c=r.filter;if(DT(n),!ce&&!(/mousedown|pointerdown/.test(i)&&t.button!==0||r.disabled)&&!a.isContentEditable&&!(!this.nativeDraggable&&Is&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=ar(l,r.draggable,n,!1),!(l&&l.animated)&&ua!==l)){if(Ni=Yn(l),Rs=Yn(l,r.draggable),typeof c=="function"){if(c.call(this,t,l,this)){yn({sortable:e,rootEl:a,name:"filter",targetEl:l,toEl:n,fromEl:n}),$n("filter",e,{evt:t}),o&&t.cancelable&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(u){if(u=ar(a,u.trim(),n,!1),u)return yn({sortable:e,rootEl:u,name:"filter",targetEl:l,fromEl:n,toEl:n}),$n("filter",e,{evt:t}),!0}),c)){o&&t.cancelable&&t.preventDefault();return}r.handle&&!ar(a,r.handle,n,!1)||this._prepareDragStart(t,s,l)}}},_prepareDragStart:function(t,e,n){var r=this,o=r.el,i=r.options,s=o.ownerDocument,l;if(n&&!ce&&n.parentNode===o){var a=$t(n);if(Tt=o,ce=n,Mt=ce.parentNode,Fo=ce.nextSibling,ua=n,Rl=i.group,Fe.dragged=ce,Ro={target:ce,clientX:(e||t).clientX,clientY:(e||t).clientY},_p=Ro.clientX-a.left,Np=Ro.clientY-a.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,ce.style["will-change"]="all",l=function(){if($n("delayEnded",r,{evt:t}),Fe.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Ep&&r.nativeDraggable&&(ce.draggable=!0),r._triggerDragStart(t,e),yn({sortable:r,name:"choose",originalEvent:t}),Hn(ce,i.chosenClass,!0)},i.ignore.split(",").forEach(function(c){eb(ce,c.trim(),pu)}),lt(s,"dragover",Lo),lt(s,"mousemove",Lo),lt(s,"touchmove",Lo),lt(s,"mouseup",r._onDrop),lt(s,"touchend",r._onDrop),lt(s,"touchcancel",r._onDrop),Ep&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ce.draggable=!0),$n("delayStart",this,{evt:t}),i.delay&&(!i.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(yl||Zr))){if(Fe.eventCanceled){this._onDrop();return}lt(s,"mouseup",r._disableDelayedDrag),lt(s,"touchend",r._disableDelayedDrag),lt(s,"touchcancel",r._disableDelayedDrag),lt(s,"mousemove",r._delayedDragTouchMoveHandler),lt(s,"touchmove",r._delayedDragTouchMoveHandler),i.supportPointer&&lt(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,i.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ce&&pu(ce),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;st(t,"mouseup",this._disableDelayedDrag),st(t,"touchend",this._disableDelayedDrag),st(t,"touchcancel",this._disableDelayedDrag),st(t,"mousemove",this._delayedDragTouchMoveHandler),st(t,"touchmove",this._delayedDragTouchMoveHandler),st(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?lt(document,"pointermove",this._onTouchMove):e?lt(document,"touchmove",this._onTouchMove):lt(document,"mousemove",this._onTouchMove):(lt(ce,"dragend",this),lt(Tt,"dragstart",this._onDragStart));try{document.selection?fa(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(Ei=!1,Tt&&ce){$n("dragStarted",this,{evt:e}),this.nativeDraggable&&lt(document,"dragover",ET);var n=this.options;!t&&Hn(ce,n.dragClass,!1),Hn(ce,n.ghostClass,!0),Fe.active=this,t&&this._appendGhost(),yn({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(lr){this._lastX=lr.clientX,this._lastY=lr.clientY,ab();for(var t=document.elementFromPoint(lr.clientX,lr.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(lr.clientX,lr.clientY),t!==e);)e=t;if(ce.parentNode[Un]._isOutsideThisEl(t),e)do{if(e[Un]){var n=void 0;if(n=e[Un]._onDragOver({clientX:lr.clientX,clientY:lr.clientY,target:t,rootEl:e}),n&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);cb()}},_onTouchMove:function(t){if(Ro){var e=this.options,n=e.fallbackTolerance,r=e.fallbackOffset,o=t.touches?t.touches[0]:t,i=Ke&&Ki(Ke,!0),s=Ke&&i&&i.a,l=Ke&&i&&i.d,a=Vl&&nn&&Mp(nn),c=(o.clientX-Ro.clientX+r.x)/(s||1)+(a?a[0]-hu[0]:0)/(s||1),u=(o.clientY-Ro.clientY+r.y)/(l||1)+(a?a[1]-hu[1]:0)/(l||1);if(!Fe.active&&!Ei){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(Ke){i?(i.e+=c-(du||0),i.f+=u-(fu||0)):i={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");Ve(Ke,"webkitTransform",d),Ve(Ke,"mozTransform",d),Ve(Ke,"msTransform",d),Ve(Ke,"transform",d),du=c,fu=u,lr=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Ke){var t=this.options.fallbackOnBody?document.body:Tt,e=$t(ce,!0,Vl,!0,t),n=this.options;if(Vl){for(nn=t;Ve(nn,"position")==="static"&&Ve(nn,"transform")==="none"&&nn!==document;)nn=nn.parentNode;nn!==document.body&&nn!==document.documentElement?(nn===document&&(nn=Tr()),e.top+=nn.scrollTop,e.left+=nn.scrollLeft):nn=Tr(),hu=Mp(nn)}Ke=ce.cloneNode(!0),Hn(Ke,n.ghostClass,!1),Hn(Ke,n.fallbackClass,!0),Hn(Ke,n.dragClass,!0),Ve(Ke,"transition",""),Ve(Ke,"transform",""),Ve(Ke,"box-sizing","border-box"),Ve(Ke,"margin",0),Ve(Ke,"top",e.top),Ve(Ke,"left",e.left),Ve(Ke,"width",e.width),Ve(Ke,"height",e.height),Ve(Ke,"opacity","0.8"),Ve(Ke,"position",Vl?"absolute":"fixed"),Ve(Ke,"zIndex","100000"),Ve(Ke,"pointerEvents","none"),Fe.ghost=Ke,t.appendChild(Ke),Ve(Ke,"transform-origin",_p/parseInt(Ke.style.width)*100+"% "+Np/parseInt(Ke.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,r=t.dataTransfer,o=n.options;if($n("dragStart",this,{evt:t}),Fe.eventCanceled){this._onDrop();return}$n("setupClone",this),Fe.eventCanceled||(Ot=rb(ce),Ot.removeAttribute("id"),Ot.draggable=!1,Ot.style["will-change"]="",this._hideClone(),Hn(Ot,this.options.chosenClass,!1),Fe.clone=Ot),n.cloneId=fa(function(){$n("clone",n),!Fe.eventCanceled&&(n.options.removeCloneOnHide||Tt.insertBefore(Ot,ce),n._hideClone(),yn({sortable:n,name:"clone"}))}),!e&&Hn(ce,o.dragClass,!0),e?(Fa=!0,n._loopId=setInterval(n._emulateDragOver,50)):(st(document,"mouseup",n._onDrop),st(document,"touchend",n._onDrop),st(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(n,r,ce)),lt(document,"drop",n),Ve(ce,"transform","translateZ(0)")),Ei=!0,n._dragStartId=fa(n._dragStarted.bind(n,e,t)),lt(document,"selectstart",n),bs=!0,Is&&Ve(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,n=t.target,r,o,i,s=this.options,l=s.group,a=Fe.active,c=Rl===l,u=s.sort,d=Yt||a,h,m=this,g=!1;if(xd)return;function b(ee,Ae){$n(ee,m,Ar({evt:t,isOwner:c,axis:h?"vertical":"horizontal",revert:i,dragRect:r,targetRect:o,canSort:u,fromSortable:d,target:n,completed:T,onMove:function(et,Ue){return Fl(Tt,e,ce,r,et,$t(et),t,Ue)},changed:A},Ae))}function k(){b("dragOverAnimationCapture"),m.captureAnimationState(),m!==d&&d.captureAnimationState()}function T(ee){return b("dragOverCompleted",{insertion:ee}),ee&&(c?a._hideClone():a._showClone(m),m!==d&&(Hn(ce,Yt?Yt.options.ghostClass:a.options.ghostClass,!1),Hn(ce,s.ghostClass,!0)),Yt!==m&&m!==Fe.active?Yt=m:m===Fe.active&&Yt&&(Yt=null),d===m&&(m._ignoreWhileAnimating=n),m.animateAll(function(){b("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(n===ce&&!ce.animated||n===e&&!n.animated)&&(Si=null),!s.dragoverBubble&&!t.rootEl&&n!==document&&(ce.parentNode[Un]._isOutsideThisEl(t.target),!ee&&Lo(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function A(){Kn=Yn(ce),so=Yn(ce,s.draggable),yn({sortable:m,name:"change",toEl:e,newIndex:Kn,newDraggableIndex:so,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=ar(n,s.draggable,e,!0),b("dragOver"),Fe.eventCanceled)return g;if(ce.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||m._ignoreWhileAnimating===n)return T(!1);if(Fa=!1,a&&!s.disabled&&(c?u||(i=Mt!==Tt):Yt===this||(this.lastPutMode=Rl.checkPull(this,a,ce,t))&&l.checkPut(this,a,ce,t))){if(h=this._getDirection(t,n)==="vertical",r=$t(ce),b("dragOverValid"),Fe.eventCanceled)return g;if(i)return Mt=Tt,k(),this._hideClone(),b("revert"),Fe.eventCanceled||(Fo?Tt.insertBefore(ce,Fo):Tt.appendChild(ce)),T(!0);var N=Of(e,s.draggable);if(!N||_T(t,h,this)&&!N.animated){if(N===ce)return T(!1);if(N&&e===t.target&&(n=N),n&&(o=$t(n)),Fl(Tt,e,ce,r,n,o,t,!!n)!==!1)return k(),N&&N.nextSibling?e.insertBefore(ce,N.nextSibling):e.appendChild(ce),Mt=e,A(),T(!0)}else if(N&&MT(t,h,this)){var B=Gi(e,0,s,!0);if(B===ce)return T(!1);if(n=B,o=$t(n),Fl(Tt,e,ce,r,n,o,t,!1)!==!1)return k(),e.insertBefore(ce,B),Mt=e,A(),T(!0)}else if(n.parentNode===e){o=$t(n);var D=0,V,j=ce.parentNode!==e,K=!CT(ce.animated&&ce.toRect||r,n.animated&&n.toRect||o,h),E=h?"top":"left",S=Ap(n,"top","top")||Ap(ce,"top","top"),F=S?S.scrollTop:void 0;Si!==n&&(V=o[E],Vs=!1,Ll=!K&&s.invertSwap||j),D=NT(t,n,o,h,K?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Ll,Si===n);var C;if(D!==0){var ue=Yn(ce);do ue-=D,C=Mt.children[ue];while(C&&(Ve(C,"display")==="none"||C===Ke))}if(D===0||C===n)return T(!1);Si=n,Ls=D;var Q=n.nextElementSibling,xe=!1;xe=D===1;var be=Fl(Tt,e,ce,r,n,o,t,xe);if(be!==!1)return(be===1||be===-1)&&(xe=be===1),xd=!0,setTimeout(AT,30),k(),xe&&!Q?e.appendChild(ce):n.parentNode.insertBefore(ce,xe?Q:n),S&&nb(S,0,F-S.scrollTop),Mt=ce.parentNode,V!==void 0&&!Ll&&(da=Math.abs(V-$t(n)[E])),A(),T(!0)}if(e.contains(ce))return T(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){st(document,"mousemove",this._onTouchMove),st(document,"touchmove",this._onTouchMove),st(document,"pointermove",this._onTouchMove),st(document,"dragover",Lo),st(document,"mousemove",Lo),st(document,"touchmove",Lo)},_offUpEvents:function(){var t=this.el.ownerDocument;st(t,"mouseup",this._onDrop),st(t,"touchend",this._onDrop),st(t,"pointerup",this._onDrop),st(t,"touchcancel",this._onDrop),st(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;if(Kn=Yn(ce),so=Yn(ce,n.draggable),$n("drop",this,{evt:t}),Mt=ce&&ce.parentNode,Kn=Yn(ce),so=Yn(ce,n.draggable),Fe.eventCanceled){this._nulling();return}Ei=!1,Ll=!1,Vs=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Cd(this.cloneId),Cd(this._dragStartId),this.nativeDraggable&&(st(document,"drop",this),st(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Is&&Ve(document.body,"user-select",""),Ve(ce,"transform",""),t&&(bs&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),Ke&&Ke.parentNode&&Ke.parentNode.removeChild(Ke),(Tt===Mt||Yt&&Yt.lastPutMode!=="clone")&&Ot&&Ot.parentNode&&Ot.parentNode.removeChild(Ot),ce&&(this.nativeDraggable&&st(ce,"dragend",this),pu(ce),ce.style["will-change"]="",bs&&!Ei&&Hn(ce,Yt?Yt.options.ghostClass:this.options.ghostClass,!1),Hn(ce,this.options.chosenClass,!1),yn({sortable:this,name:"unchoose",toEl:Mt,newIndex:null,newDraggableIndex:null,originalEvent:t}),Tt!==Mt?(Kn>=0&&(yn({rootEl:Mt,name:"add",toEl:Mt,fromEl:Tt,originalEvent:t}),yn({sortable:this,name:"remove",toEl:Mt,originalEvent:t}),yn({rootEl:Mt,name:"sort",toEl:Mt,fromEl:Tt,originalEvent:t}),yn({sortable:this,name:"sort",toEl:Mt,originalEvent:t})),Yt&&Yt.save()):Kn!==Ni&&Kn>=0&&(yn({sortable:this,name:"update",toEl:Mt,originalEvent:t}),yn({sortable:this,name:"sort",toEl:Mt,originalEvent:t})),Fe.active&&((Kn==null||Kn===-1)&&(Kn=Ni,so=Rs),yn({sortable:this,name:"end",toEl:Mt,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){$n("nulling",this),Tt=ce=Mt=Ke=Fo=Ot=ua=uo=Ro=lr=bs=Kn=so=Ni=Rs=Si=Ls=Yt=Rl=Fe.dragged=Fe.ghost=Fe.clone=Fe.active=null,Ha.forEach(function(t){t.checked=!0}),Ha.length=du=fu=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":ce&&(this._onDragOver(t),OT(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,n=this.el.children,r=0,o=n.length,i=this.options;r<o;r++)e=n[r],ar(e,i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||$T(e));return t},sort:function(t,e){var n={},r=this.el;this.toArray().forEach(function(o,i){var s=r.children[i];ar(s,this.options.draggable,r,!1)&&(n[o]=s)},this),e&&this.captureAnimationState(),t.forEach(function(o){n[o]&&(r.removeChild(n[o]),r.appendChild(n[o]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return ar(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(e===void 0)return n[t];var r=bl.modifyOption(this,t,e);typeof r<"u"?n[t]=r:n[t]=e,t==="group"&&lb(n)},destroy:function(){$n("destroy",this);var t=this.el;t[Un]=null,st(t,"mousedown",this._onTapStart),st(t,"touchstart",this._onTapStart),st(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(st(t,"dragover",this),st(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ja.splice(ja.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!uo){if($n("hideClone",this),Fe.eventCanceled)return;Ve(Ot,"display","none"),this.options.removeCloneOnHide&&Ot.parentNode&&Ot.parentNode.removeChild(Ot),uo=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(uo){if($n("showClone",this),Fe.eventCanceled)return;ce.parentNode==Tt&&!this.options.group.revertClone?Tt.insertBefore(Ot,ce):Fo?Tt.insertBefore(Ot,Fo):Tt.appendChild(Ot),this.options.group.revertClone&&this.animate(ce,Ot),Ve(Ot,"display",""),uo=!1}}};function OT(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Fl(t,e,n,r,o,i,s,l){var a,c=t[Un],u=c.options.onMove,d;return window.CustomEvent&&!Zr&&!yl?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=e,a.from=t,a.dragged=n,a.draggedRect=r,a.related=o||e,a.relatedRect=i||$t(e),a.willInsertAfter=l,a.originalEvent=s,t.dispatchEvent(a),u&&(d=u.call(c,a,s)),d}function pu(t){t.draggable=!1}function AT(){xd=!1}function MT(t,e,n){var r=$t(Gi(n.el,0,n.options,!0)),o=ob(n.el,n.options,Ke),i=10;return e?t.clientX<o.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<o.top-i||t.clientY<r.bottom&&t.clientX<r.left}function _T(t,e,n){var r=$t(Of(n.el,n.options.draggable)),o=ob(n.el,n.options,Ke),i=10;return e?t.clientX>o.right+i||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>o.bottom+i||t.clientX>r.right&&t.clientY>r.top}function NT(t,e,n,r,o,i,s,l){var a=r?t.clientY:t.clientX,c=r?n.height:n.width,u=r?n.top:n.left,d=r?n.bottom:n.right,h=!1;if(!s){if(l&&da<c*o){if(!Vs&&(Ls===1?a>u+c*i/2:a<d-c*i/2)&&(Vs=!0),Vs)h=!0;else if(Ls===1?a<u+da:a>d-da)return-Ls}else if(a>u+c*(1-o)/2&&a<d-c*(1-o)/2)return PT(e)}return h=h||s,h&&(a<u+c*i/2||a>d-c*i/2)?a>u+c/2?1:-1:0}function PT(t){return Yn(ce)<Yn(t)?1:-1}function $T(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function DT(t){Ha.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&Ha.push(r)}}function fa(t){return setTimeout(t,0)}function Cd(t){return clearTimeout(t)}xc&&lt(document,"touchmove",function(t){(Fe.active||Ei)&&t.cancelable&&t.preventDefault()});Fe.utils={on:lt,off:st,css:Ve,find:eb,is:function(t,e){return!!ar(t,e,t,!1)},extend:gT,throttle:tb,closest:ar,toggleClass:Hn,clone:rb,index:Yn,nextTick:fa,cancelNextTick:Cd,detectDirection:sb,getChild:Gi};Fe.get=function(t){return t[Un]};Fe.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Fe.utils=Ar(Ar({},Fe.utils),r.utils)),bl.mount(r)})};Fe.create=function(t,e){return new Fe(t,e)};Fe.version=hT;var Pt=[],vs,Td,Ed=!1,mu,gu,za,ws;function IT(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?lt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?lt(document,"pointermove",this._handleFallbackAutoScroll):n.touches?lt(document,"touchmove",this._handleFallbackAutoScroll):lt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?st(document,"dragover",this._handleAutoScroll):(st(document,"pointermove",this._handleFallbackAutoScroll),st(document,"touchmove",this._handleFallbackAutoScroll),st(document,"mousemove",this._handleFallbackAutoScroll)),$p(),ha(),yT()},nulling:function(){za=Td=vs=Ed=ws=mu=gu=null,Pt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var r=this,o=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,s=document.elementFromPoint(o,i);if(za=e,n||this.options.forceAutoScrollFallback||yl||Zr||Is){yu(e,this.options,s,n);var l=ho(s,!0);Ed&&(!ws||o!==mu||i!==gu)&&(ws&&$p(),ws=setInterval(function(){var a=ho(document.elementFromPoint(o,i),!0);a!==l&&(l=a,ha()),yu(e,r.options,a,n)},10),mu=o,gu=i)}else{if(!this.options.bubbleScroll||ho(s,!0)===Tr()){ha();return}yu(e,this.options,ho(s,!1),!1)}}},Yr(t,{pluginName:"scroll",initializeByDefault:!0})}function ha(){Pt.forEach(function(t){clearInterval(t.pid)}),Pt=[]}function $p(){clearInterval(ws)}var yu=tb(function(t,e,n,r){if(e.scroll){var o=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,s=e.scrollSensitivity,l=e.scrollSpeed,a=Tr(),c=!1,u;Td!==n&&(Td=n,ha(),vs=e.scroll,u=e.scrollFn,vs===!0&&(vs=ho(n,!0)));var d=0,h=vs;do{var m=h,g=$t(m),b=g.top,k=g.bottom,T=g.left,A=g.right,N=g.width,B=g.height,D=void 0,V=void 0,j=m.scrollWidth,K=m.scrollHeight,E=Ve(m),S=m.scrollLeft,F=m.scrollTop;m===a?(D=N<j&&(E.overflowX==="auto"||E.overflowX==="scroll"||E.overflowX==="visible"),V=B<K&&(E.overflowY==="auto"||E.overflowY==="scroll"||E.overflowY==="visible")):(D=N<j&&(E.overflowX==="auto"||E.overflowX==="scroll"),V=B<K&&(E.overflowY==="auto"||E.overflowY==="scroll"));var C=D&&(Math.abs(A-o)<=s&&S+N<j)-(Math.abs(T-o)<=s&&!!S),ue=V&&(Math.abs(k-i)<=s&&F+B<K)-(Math.abs(b-i)<=s&&!!F);if(!Pt[d])for(var Q=0;Q<=d;Q++)Pt[Q]||(Pt[Q]={});(Pt[d].vx!=C||Pt[d].vy!=ue||Pt[d].el!==m)&&(Pt[d].el=m,Pt[d].vx=C,Pt[d].vy=ue,clearInterval(Pt[d].pid),(C!=0||ue!=0)&&(c=!0,Pt[d].pid=setInterval((function(){r&&this.layer===0&&Fe.active._onTouchMove(za);var xe=Pt[this.layer].vy?Pt[this.layer].vy*l:0,be=Pt[this.layer].vx?Pt[this.layer].vx*l:0;typeof u=="function"&&u.call(Fe.dragged.parentNode[Un],be,xe,t,za,Pt[this.layer].el)!=="continue"||nb(Pt[this.layer].el,be,xe)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&h!==a&&(h=ho(h,!1)));Ed=c}},30),ub=function(t){var e=t.originalEvent,n=t.putSortable,r=t.dragEl,o=t.activeSortable,i=t.dispatchSortableEvent,s=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var a=n||o;s();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,u=document.elementFromPoint(c.clientX,c.clientY);l(),a&&!a.el.contains(u)&&(i("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function Af(){}Af.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=Gi(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(e,r):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:ub};Yr(Af,{pluginName:"revertOnSpill"});function Mf(){}Mf.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable,r=n||this.sortable;r.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),r.animateAll()},drop:ub};Yr(Mf,{pluginName:"removeOnSpill"});Fe.mount(new IT);Fe.mount(Mf,Af);function BT(t){return t==null?t:JSON.parse(JSON.stringify(t))}function RT(t){bc()&&cf(t)}function LT(t){bc()?Pg(t):pc(t)}let db=null,fb=null;function Dp(t=null,e=null){db=t,fb=e}function VT(){return{data:db,clonedData:fb}}const Ip=Symbol("cloneElement");function FT(...t){var e,n;const r=(e=bc())==null?void 0:e.proxy;let o=null;const i=t[0];let[,s,l]=t;Array.isArray(bn(s))||(l=s,s=null);let a=null;const{immediate:c=!0,clone:u=BT,customUpdate:d}=(n=bn(l))!=null?n:{};function h(K){var E;const{from:S,oldIndex:F,item:C}=K;o=Array.from(S.childNodes);const ue=bn((E=bn(s))==null?void 0:E[F]),Q=u(ue);Dp(ue,Q),C[Ip]=Q}function m(K){const E=K.item[Ip];if(!nT(E)){if(au(K.item),It(s)){const S=[...bn(s)];s.value=kp(S,K.newDraggableIndex,E);return}kp(bn(s),K.newDraggableIndex,E)}}function g(K){const{from:E,item:S,oldIndex:F,oldDraggableIndex:C,pullMode:ue,clone:Q}=K;if(xp(E,S,F),ue==="clone"){au(Q);return}if(It(s)){const xe=[...bn(s)];s.value=Sp(xe,C);return}Sp(bn(s),C)}function b(K){if(d){d(K);return}const{from:E,item:S,oldIndex:F,oldDraggableIndex:C,newDraggableIndex:ue}=K;if(au(S),xp(E,S,F),It(s)){const Q=[...bn(s)];s.value=wp(Q,C,ue);return}wp(bn(s),C,ue)}function k(K){const{newIndex:E,oldIndex:S,from:F,to:C}=K;let ue=null;const Q=E===S&&F===C;try{if(Q){let xe=null;o==null||o.some((be,ee)=>{if(xe&&(o==null?void 0:o.length)!==C.childNodes.length)return F.insertBefore(xe,be.nextSibling),!0;const Ae=C.childNodes[ee];xe=C==null?void 0:C.replaceChild(be,Ae)})}}catch(xe){ue=xe}finally{o=null}pc(()=>{if(Dp(),ue)throw ue})}const T={onUpdate:b,onStart:h,onAdd:m,onRemove:g,onEnd:k};function A(K){const E=bn(i);return K||(K=rT(E)?oT(E,r==null?void 0:r.$el):E),K&&!lT(K)&&(K=K.$el),K||QC("Root element not found"),K}function N(){var K;const E=(K=bn(l))!=null?K:{},{immediate:S,clone:F}=E,C=Gy(E,["immediate","clone"]);return Cp(C,(ue,Q)=>{aT(ue)&&(C[ue]=(xe,...be)=>{const ee=VT();return cT(xe,ee),Q(xe,...be)})}),sT(s===null?{}:T,C)}const B=K=>{K=A(K),a&&D.destroy(),a=new Fe(K,N())};Xl(()=>l,()=>{a&&Cp(N(),(K,E)=>{a==null||a.option(K,E)})},{deep:!0});const D={option:(K,E)=>a==null?void 0:a.option(K,E),destroy:()=>{a==null||a.destroy(),a=null},save:()=>a==null?void 0:a.save(),toArray:()=>a==null?void 0:a.toArray(),closest:(...K)=>a==null?void 0:a.closest(...K)},V=()=>D==null?void 0:D.option("disabled",!0),j=()=>D==null?void 0:D.option("disabled",!1);return LT(()=>{c&&B()}),RT(D.destroy),_i({start:B,pause:V,resume:j},D)}const Od=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],jT=["clone","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...Od.map(t=>`on${t.replace(/^\S/,e=>e.toUpperCase())}`)],HT=Ag({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:jT,emits:["update:modelValue",...Od],setup(t,{slots:e,emit:n,expose:r,attrs:o}){const i=Od.reduce((u,d)=>{const h=`on${d.replace(/^\S/,m=>m.toUpperCase())}`;return u[h]=(...m)=>n(d,...m),u},{}),s=Ju(()=>{const u=Uw(t),{modelValue:d}=u,h=Gy(u,["modelValue"]),m=Object.entries(h).reduce((g,[b,k])=>{const T=bn(k);return T!==void 0&&(g[b]=T),g},{});return _i(_i({},i),tT(_i(_i({},o),m)))}),l=Ju({get:()=>t.modelValue,set:u=>n("update:modelValue",u)}),a=sf(),c=fc(FT(t.target||a,l,s));return r(c),()=>{var u;return ry(t.tag||"div",{ref:a},(u=e==null?void 0:e.default)==null?void 0:u.call(e,c))}}}),zT={props:["myuuid","formmode"],data(){return{myfile:null,editme:!1}},async mounted(){this.formmode&&(this.editme=!0),this.myfile=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Files.get(this.myuuid)))},methods:{update(){this.myfile.title==""&&(this.myfile.title="...."),console.log(this.myfile),this.$root.UpdateRecord("Files",this.myuuid,this.myfile),this.formmode||(this.editme=!1)}}},KT={key:0};function UT(t,e,n,r,o,i){return o.myfile?(X(),fe("span",KT,[o.editme?He("",!0):(X(),fe("div",{key:0,onDblclick:e[0]||(e[0]=s=>o.editme=!0)},kn(o.myfile.title),33)),o.editme?an((X(),fe("input",{key:1,type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>o.myfile.title=s),placeholder:"......",onBlur:e[2]||(e[2]=s=>i.update())},null,544)),[[xn,o.myfile.title]]):He("",!0)])):He("",!0)}const hb=ct(zT,[["render",UT]]),WT={props:{modelValue:{required:!0,type:Array}},components:{VueDraggable:HT,FileName:hb},computed:{list:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},methods:{handleChange(t){this.$root.UpdateRecord("Writer",this.$root.tools.writer.selected.uuid,this.$root.tools.writer.selected)}},name:"DocStructureNode"},qT={class:"btn"},JT=["onClick"],GT={key:0,viewBox:"0 0 24 24"},YT={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},XT=["onClick"];function ZT(t,e,n,r,o,i){const s=Qe("FileName"),l=Qe("DocStructureNode",!0),a=Qe("VueDraggable");return X(),xt(a,{class:"dragArea",tag:"ul",modelValue:i.list,"onUpdate:modelValue":e[0]||(e[0]=c=>i.list=c),group:"files","item-key":"name",onEnd:i.handleChange},{default:Og(()=>[(X(!0),fe(rt,null,pr(n.modelValue,(c,u)=>(X(),fe("li",{class:"node",key:u},[P("div",qT,[P("button",{onClick:d=>c.open=!c.open,class:"toggle"},[c.open?He("",!0):(X(),fe("svg",GT,e[1]||(e[1]=[P("title",null,"chevron-right",-1),P("path",{d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"},null,-1)]))),c.open?(X(),fe("svg",YT,e[2]||(e[2]=[P("title",null,"chevron-down-box",-1),P("path",{d:"M19,3H5A2,2 0 0,0 3,5V19C3,20.11 3.9,21 5,21H19C20.11,21 21,20.11 21,19V5A2,2 0 0,0 19,3M12,15.71L6,9.71L7.41,8.29L12,12.88L16.59,8.29L18,9.71L12,15.71Z"},null,-1)]))):He("",!0)],8,JT),P("button",{class:dr(["labelbtn",{selected:t.$root.tools.writer.selectednode===c.uuid}]),onClick:d=>t.$root.tools.writer.selectednode=c.uuid},[(X(),xt(s,{myuuid:c.uuid,key:c.uuid},null,8,["myuuid"]))],10,XT)]),c.open?(X(),xt(l,{key:0,modelValue:c.files,"onUpdate:modelValue":d=>c.files=d},null,8,["modelValue","onUpdate:modelValue"])):He("",!0)]))),128))]),_:1},8,["modelValue","onEnd"])}const QT=ct(WT,[["render",ZT],["__scopeId","data-v-451b7a3a"]]),eE={name:"DocStructure",components:{DocStructureNode:QT},data(){return{bookwatch:null}},async mounted(){this.bookwatch=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Writer.get(this.$root.tools.writer.selected.uuid))),this.$watch("bookwatch",(t,e)=>{this.$root.tools.writer.selected=JSON.parse(JSON.stringify(t))})},methods:{async addNode(){let t=JSON.parse(JSON.stringify(this.$root.fileTemplate));t.writerid=this.$root.tools.writer.selected,t.uuid=this.$root.uuid(),await this.$root.AddRecord("Files",t);let e={};e.open=!1,e.uuid=t.uuid,e.files=[];let n=null;this.$root.tools.writer.selectednode?n=this.findNodeByUUID(this.$root.tools.writer.selectednode,this.$root.tools.writer.selected):n=this.$root.tools.writer.selected,n.files.push(e),n.open=!0,this.$root.UpdateRecord("Writer",this.$root.tools.writer.selected,this.$root.tools.writer.selected)},findNodeByUUID(t,e){if(e.uuid===t)return e;for(let n of e.files){let r=this.findNodeByUUID(t,n);if(r)return r}return null}}},tE={key:0,class:"documentStructure"},nE={class:"lhstools"},rE={class:"docsettings"},oE={style:{padding:"10px"}},iE={class:"lhsscrollcontainer"};function sE(t,e,n,r,o,i){const s=Qe("DocStructureNode");return this.$root.tools.writer.selected?(X(),fe("div",tE,[P("div",nE,[P("button",{onClick:e[0]||(e[0]=(...l)=>i.addNode&&i.addNode(...l)),class:"btn"},e[3]||(e[3]=[P("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[P("title",null,"Add File"),P("path",{d:"M14 2H6C4.89 2 4 2.89 4 4V20C4 21.11 4.89 22 6 22H13.81C13.28 21.09 13 20.05 13 19C13 15.69 15.69 13 19 13C19.34 13 19.67 13.03 20 13.08V8L14 2M13 9V3.5L18.5 9H13M23 20H20V23H18V20H15V18H18V15H20V18H23V20Z"})],-1),P("span",null,"Add",-1)]))]),P("div",null,[P("div",rE,[P("button",{class:"btn",onClick:e[1]||(e[1]=l=>t.$root.tools.writer.selectednode=null)},e[4]||(e[4]=[P("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[P("title",null,"book-open-page-variant-outline"),P("path",{d:"M19 1L14 6V17L19 12.5V1M21 5V18.5C19.9 18.15 18.7 18 17.5 18C15.8 18 13.35 18.65 12 19.5V6C10.55 4.9 8.45 4.5 6.5 4.5C4.55 4.5 2.45 4.9 1 6V20.65C1 20.9 1.25 21.15 1.5 21.15C1.6 21.15 1.65 21.1 1.75 21.1C3.1 20.45 5.05 20 6.5 20C8.45 20 10.55 20.4 12 21.5C13.35 20.65 15.8 20 17.5 20C19.15 20 20.85 20.3 22.25 21.05C22.35 21.1 22.4 21.1 22.5 21.1C22.75 21.1 23 20.85 23 20.6V6C22.4 5.55 21.75 5.25 21 5M10 18.41C8.75 18.09 7.5 18 6.5 18C5.44 18 4.18 18.19 3 18.5V7.13C3.91 6.73 5.14 6.5 6.5 6.5C7.86 6.5 9.09 6.73 10 7.13V18.41Z"})],-1),Qn(" Document Settings ")]))]),P("div",oE,[P("div",iE,[this.$root.tools.writer.selected.files.length?(X(),xt(s,{key:0,modelValue:this.$root.tools.writer.selected.files,"onUpdate:modelValue":e[2]||(e[2]=l=>this.$root.tools.writer.selected.files=l)},null,8,["modelValue"])):He("",!0)])])])])):He("",!0)}const lE=ct(eE,[["render",sE],["__scopeId","data-v-9d6f2238"]]);function Xt(t){this.content=t}Xt.prototype={constructor:Xt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),i=r.content.slice();return o==-1?i.push(n||t,e):(i[o+1]=e,n&&(i[o]=n)),new Xt(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Xt(n)},addToStart:function(t,e){return new Xt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Xt(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),i=r.find(t);return o.splice(i==-1?o.length:i,0,e,n),new Xt(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Xt.from(t),t.size?new Xt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Xt.from(t),t.size?new Xt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Xt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Xt.from=function(t){if(t instanceof Xt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Xt(e)};function pb(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),i=e.child(r);if(o==i){n+=o.nodeSize;continue}if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(let s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){let s=pb(o.content,i.content,n+1);if(s!=null)return s}n+=o.nodeSize}}function mb(t,e,n,r){for(let o=t.childCount,i=e.childCount;;){if(o==0||i==0)return o==i?null:{a:n,b:r};let s=t.child(--o),l=e.child(--i),a=s.nodeSize;if(s==l){n-=a,r-=a;continue}if(!s.sameMarkup(l))return{a:n,b:r};if(s.isText&&s.text!=l.text){let c=0,u=Math.min(s.text.length,l.text.length);for(;c<u&&s.text[s.text.length-c-1]==l.text[l.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||l.content.size){let c=mb(s.content,l.content,n-1,r-1);if(c)return c}n-=a,r-=a}}class ne{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,i){for(let s=0,l=0;l<n;s++){let a=this.content[s],c=l+a.nodeSize;if(c>e&&r(a,o+l,i||null,s)!==!1&&a.content.size){let u=l+1;a.nodesBetween(Math.max(0,e-u),Math.min(a.content.size,n-u),r,o+u)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let i="",s=!0;return this.nodesBetween(e,n,(l,a)=>{let c=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?o?typeof o=="function"?o(l):o:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&r&&(s?s=!1:i+=r),i+=c},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)o.push(e.content[i]);return new ne(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let i=0,s=0;s<n;i++){let l=this.content[i],a=s+l.nodeSize;a>e&&((s<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,n-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,n-s-1))),r.push(l),o+=l.nodeSize),s=a}return new ne(r,o)}cutByIndex(e,n){return e==n?ne.empty:e==0&&n==this.content.length?this:new ne(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new ne(o,i)}addToStart(e){return new ne([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ne(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return pb(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return mb(this,e,n,r)}findIndex(e,n=-1){if(e==0)return jl(0,e);if(e==this.size)return jl(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let i=this.child(r),s=o+i.nodeSize;if(s>=e)return s==e||n>0?jl(r+1,s):jl(r,o);o=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return ne.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new ne(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ne.empty;let n,r=0;for(let o=0;o<e.length;o++){let i=e[o];r+=i.nodeSize,o&&i.isText&&e[o-1].sameMarkup(i)?(n||(n=e.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new ne(n||e,r)}static from(e){if(!e)return ne.empty;if(e instanceof ne)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ne([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ne.empty=new ne([],0);const bu={index:0,offset:0};function jl(t,e){return bu.index=t,bu.offset=e,bu}function Ka(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Ka(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Ka(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let vt=class Ad{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let i=e[o];if(this.eq(i))return e;if(this.type.excludes(i.type))n||(n=e.slice(0,o));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ka(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Ad.none;if(e instanceof Ad)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};vt.none=[];class Ua extends Error{}class we{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=yb(this.content,e+this.openStart,n);return r&&new we(r,this.openStart,this.openEnd)}removeBetween(e,n){return new we(gb(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return we.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new we(ne.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)o++;return new we(e,r,o)}}we.empty=new we(ne.empty,0,0);function gb(t,e,n){let{index:r,offset:o}=t.findIndex(e),i=t.maybeChild(r),{index:s,offset:l}=t.findIndex(n);if(o==e||i.isText){if(l!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(gb(i.content,e-o-1,n-o-1)))}function yb(t,e,n,r){let{index:o,offset:i}=t.findIndex(e),s=t.maybeChild(o);if(i==e||s.isText)return t.cut(0,e).append(n).append(t.cut(e));let l=yb(s.content,e-i-1,n);return l&&t.replaceChild(o,s.copy(l))}function aE(t,e,n){if(n.openStart>t.depth)throw new Ua("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Ua("Inconsistent open depths");return bb(t,e,n,0)}function bb(t,e,n,r){let o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let s=bb(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,l=s.content;return Zo(s,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:s,end:l}=cE(n,t);return Zo(i,wb(t,s,l,e,r))}else return Zo(i,Wa(t,e,r))}function vb(t,e){if(!e.type.compatibleContent(t.type))throw new Ua("Cannot join "+e.type.name+" onto "+t.type.name)}function Md(t,e,n){let r=t.node(n);return vb(r,e.node(n)),r}function Xo(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Fs(t,e,n,r){let o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(Xo(t.nodeAfter,r),i++));for(let l=i;l<s;l++)Xo(o.child(l),r);e&&e.depth==n&&e.textOffset&&Xo(e.nodeBefore,r)}function Zo(t,e){return t.type.checkContent(e),t.copy(e)}function wb(t,e,n,r,o){let i=t.depth>o&&Md(t,e,o+1),s=r.depth>o&&Md(n,r,o+1),l=[];return Fs(null,t,o,l),i&&s&&e.index(o)==n.index(o)?(vb(i,s),Xo(Zo(i,wb(t,e,n,r,o+1)),l)):(i&&Xo(Zo(i,Wa(t,e,o+1)),l),Fs(e,n,o,l),s&&Xo(Zo(s,Wa(n,r,o+1)),l)),Fs(r,null,o,l),new ne(l)}function Wa(t,e,n){let r=[];if(Fs(null,t,n,r),t.depth>n){let o=Md(t,e,n+1);Xo(Zo(o,Wa(t,e,n+1)),r)}return Fs(e,null,n,r),new ne(r)}function cE(t,e){let n=e.depth-t.openStart,o=e.node(n).copy(t.content);for(let i=n-1;i>=0;i--)o=e.node(i).copy(ne.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}class nl{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let i=0;i<e;i++)o+=r.child(i).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return vt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let l=r;r=o,o=l}let i=r.marks;for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!o||!i[s].isInSet(o.marks))&&(i=i[s--].removeFromSet(i));return i}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!o||!r[i].isInSet(o.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new qa(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,i=n;for(let s=e;;){let{index:l,offset:a}=s.content.findIndex(i),c=i-a;if(r.push(s,l,o+a),!c||(s=s.child(l),s.isText))break;i=c-1,o+=a+1}return new nl(n,r,i)}static resolveCached(e,n){let r=Bp.get(e);if(r)for(let i=0;i<r.elts.length;i++){let s=r.elts[i];if(s.pos==n)return s}else Bp.set(e,r=new uE);let o=r.elts[r.i]=nl.resolve(e,n);return r.i=(r.i+1)%dE,o}}class uE{constructor(){this.elts=[],this.i=0}}const dE=12,Bp=new WeakMap;class qa{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const fE=Object.create(null);let bo=class _d{constructor(e,n,r,o=vt.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||ne.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Ka(this.attrs,n||e.defaultAttrs||fE)&&vt.sameSet(this.marks,r||vt.none)}copy(e=null){return e==this.content?this:new _d(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new _d(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return we.empty;let o=this.resolve(e),i=this.resolve(n),s=r?0:o.sharedDepth(n),l=o.start(s),c=o.node(s).content.cut(o.pos-l,i.pos-l);return new we(c,o.depth-s,i.depth-s)}replace(e,n,r){return aE(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return nl.resolveCached(this,e)}resolveNoCache(e){return nl.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,i=>(r.isInSet(i.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Sb(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=ne.empty,o=0,i=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,o,i),l=s&&s.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=o;a<i;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let i=this.contentMatchAt(e).matchType(r),s=i&&i.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=vt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!vt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=ne.fromJSON(e,n.content),i=e.nodeType(n.type).create(n.attrs,o,r);return i.type.checkAttrs(i.attrs),i}};bo.prototype.text=void 0;class Ja extends bo{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Sb(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ja(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ja(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Sb(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class si{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new hE(e,n);if(r.next==null)return si.empty;let o=kb(r);r.next&&r.err("Unexpected trailing text");let i=wE(vE(o));return SE(i,r),i}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let i=n;o&&i<r;i++)o=o.matchType(e.child(i).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function i(s,l){let a=s.matchFragment(e,r);if(a&&(!n||a.validEnd))return ne.from(l.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:d}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&o.indexOf(d)==-1){o.push(d);let h=i(d,l.concat(u));if(h)return h}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),i=o.match;if(i.matchType(e)){let s=[];for(let l=o;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<i.next.length;s++){let{type:l,next:a}=i.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!o.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:o}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let i=o+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)i+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return i}).join(`
`)}}si.empty=new si(!0);class hE{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function kb(t){let e=[];do e.push(pE(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function pE(t){let e=[];do e.push(mE(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function mE(t){let e=bE(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=gE(t,e);else break;return e}function Rp(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function gE(t,e){let n=Rp(t),r=n;return t.eat(",")&&(t.next!="}"?r=Rp(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function yE(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let i in n){let s=n[i];s.isInGroup(e)&&o.push(s)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function bE(t){if(t.eat("(")){let e=kb(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=yE(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function vE(t){let e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(s,l,a){let c={term:a,to:l};return e[s].push(c),c}function o(s,l){s.forEach(a=>a.to=l)}function i(s,l){if(s.type=="choice")return s.exprs.reduce((a,c)=>a.concat(i(c,l)),[]);if(s.type=="seq")for(let a=0;;a++){let c=i(s.exprs[a],l);if(a==s.exprs.length-1)return c;o(c,l=n())}else if(s.type=="star"){let a=n();return r(l,a),o(i(s.expr,a),a),[r(a)]}else if(s.type=="plus"){let a=n();return o(i(s.expr,l),a),o(i(s.expr,a),a),[r(a)]}else{if(s.type=="opt")return[r(l)].concat(i(s.expr,l));if(s.type=="range"){let a=l;for(let c=0;c<s.min;c++){let u=n();o(i(s.expr,a),u),a=u}if(s.max==-1)o(i(s.expr,a),a);else for(let c=s.min;c<s.max;c++){let u=n();r(a,u),o(i(s.expr,a),u),a=u}return[r(a)]}else{if(s.type=="name")return[r(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function xb(t,e){return e-t}function Lp(t,e){let n=[];return r(e),n.sort(xb);function r(o){let i=t[o];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(o);for(let s=0;s<i.length;s++){let{term:l,to:a}=i[s];!l&&n.indexOf(a)==-1&&r(a)}}}function wE(t){let e=Object.create(null);return n(Lp(t,0));function n(r){let o=[];r.forEach(s=>{t[s].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let u=0;u<o.length;u++)o[u][0]==l&&(c=o[u][1]);Lp(t,a).forEach(u=>{c||o.push([l,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let i=e[r.join(",")]=new si(r.indexOf(t.length-1)>-1);for(let s=0;s<o.length;s++){let l=o[s][1].sort(xb);i.next.push({type:o[s][0],next:e[l.join(",")]||n(l)})}return i}}function SE(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],i=!o.validEnd,s=[];for(let l=0;l<o.next.length;l++){let{type:a,next:c}=o.next[l];s.push(a.name),i&&!(a.isText||a.hasRequiredAttrs())&&(i=!1),r.indexOf(c)==-1&&r.push(c)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Cb(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Tb(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let i=t[r];if(i.hasDefault)o=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function Eb(t,e,n,r){for(let o in e)if(!(o in t))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in t){let i=t[o];i.validate&&i.validate(e[o])}}function Ob(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new xE(t,r,e[r]);return n}let Vp=class Ab{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Ob(e,r.attrs),this.defaultAttrs=Cb(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==si.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Tb(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new bo(this,this.computeAttrs(e),ne.from(n),vt.setFrom(r))}createChecked(e=null,n,r){return n=ne.from(n),this.checkContent(n),new bo(this,this.computeAttrs(e),n,vt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=ne.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let o=this.contentMatch.matchFragment(n),i=o&&o.fillBefore(ne.empty,!0);return i?new bo(this,e,n.append(i),vt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Eb(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:vt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((i,s)=>r[i]=new Ab(i,n,s));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function kE(t,e,n){let r=n.split("|");return o=>{let i=o===null?"null":typeof o;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${i}`)}}class xE{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?kE(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Cc{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=Ob(e,o.attrs),this.excluded=null;let i=Cb(this.attrs);this.instance=i?new vt(this,i):null}create(e=null){return!e&&this.instance?this.instance:new vt(this,Tb(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((i,s)=>r[i]=new Cc(i,o++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Eb(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Mb{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=Xt.from(e.nodes),n.marks=Xt.from(e.marks||{}),this.nodes=Vp.compile(this.spec.nodes,this),this.marks=Cc.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let i=this.nodes[o],s=i.spec.content||"",l=i.spec.marks;if(i.contentMatch=r[s]||(r[s]=si.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=l=="_"?null:l?Fp(this,l.split(" ")):l==""||!i.inlineContent?[]:null}for(let o in this.marks){let i=this.marks[o],s=i.spec.excludes;i.excluded=s==null?[i]:s==""?[]:Fp(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Vp){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new Ja(r,r.defaultAttrs,e,vt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return bo.fromJSON(this,e)}markFromJSON(e){return vt.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Fp(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(let l in t.marks){let a=t.marks[l];(o=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=a)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function CE(t){return t.tag!=null}function TE(t){return t.style!=null}let js=class Nd{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if(CE(o))this.tags.push(o);else if(TE(o)){let i=/[^=]*/.exec(o.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let i=e.nodes[o.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new Hp(this,n,!1);return r.addAll(e,vt.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Hp(this,n,!0);return r.addAll(e,vt.none,n.from,n.to),we.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let i=this.tags[o];if(AE(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let s=i.getAttrs(e);if(s===!1)continue;i.attrs=s||void 0}return i}}}matchStyle(e,n,r,o){for(let i=o?this.styles.indexOf(o)+1:0;i<this.styles.length;i++){let s=this.styles[i],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(s.getAttrs){let a=s.getAttrs(n);if(a===!1)continue;s.attrs=a||void 0}return s}}}static schemaRules(e){let n=[];function r(o){let i=o.priority==null?50:o.priority,s=0;for(;s<n.length;s++){let l=n[s];if((l.priority==null?50:l.priority)<i)break}n.splice(s,0,o)}for(let o in e.marks){let i=e.marks[o].spec.parseDOM;i&&i.forEach(s=>{r(s=zp(s)),s.mark||s.ignore||s.clearMark||(s.mark=o)})}for(let o in e.nodes){let i=e.nodes[o].spec.parseDOM;i&&i.forEach(s=>{r(s=zp(s)),s.node||s.ignore||s.mark||(s.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Nd(e,Nd.schemaRules(e)))}};const _b={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},EE={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Nb={ol:!0,ul:!0},rl=1,Pd=2,pa=4;function jp(t,e,n){return e!=null?(e?rl:0)|(e==="full"?Pd:0):t&&t.whitespace=="pre"?rl|Pd:n&-5}class Hl{constructor(e,n,r,o,i,s){this.type=e,this.attrs=n,this.marks=r,this.solid=o,this.options=s,this.content=[],this.activeMarks=vt.none,this.match=i||(s&pa?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(ne.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&rl)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-o[0].length))}}let n=ne.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(ne.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!_b.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Hp{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,i,s=jp(null,n.preserveWhitespace,0)|(r?pa:0);o?i=new Hl(o.type,o.attrs,vt.none,!0,n.topMatch||o.type.contentMatch,s):r?i=new Hl(null,null,vt.none,!0,null,s):i=new Hl(e.schema.topNodeType,null,vt.none,!0,null,s),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,o=this.top,i=o.options&Pd?"full":this.localPreserveWS||(o.options&rl)>0;if(i==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)i!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=o.content[o.content.length-1],l=e.previousSibling;(!s||l&&l.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let o=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),l;Nb.hasOwnProperty(s)&&this.parser.normalizeLists&&OE(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(a?a.ignore:EE.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let c,u=this.needsBlock;if(_b.hasOwnProperty(s))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),c=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=a&&a.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(i),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,a,c,a.consuming===!1?l:void 0)}this.localPreserveWS=o}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let i=this.parser.matchedStyles[o],s=r.getPropertyValue(i);if(s)for(let l=void 0;;){let a=this.parser.matchStyle(i,s,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(c=>!a.clearMark(c)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,o){let i,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r)||this.leafFallback(e,r);else{let a=this.enter(s,n.attrs||null,r,n.preserveWhitespace);a&&(i=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}i&&this.sync(l)&&this.open--}addAll(e,n,r,o){let i=r||0;for(let s=r?e.childNodes[r]:e.firstChild,l=o==null?null:e.childNodes[o];s!=l;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s,n);this.findAtPoint(e,i)}findPlace(e,n){let r,o;for(let i=this.open;i>=0;i--){let s=this.nodes[i],l=s.findWrapping(e);if(l&&(!r||r.length>l.length)&&(r=l,o=s,!l.length)||s.solid)break}if(!r)return null;this.sync(o);for(let i=0;i<r.length;i++)n=this.enterInner(r[i],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let i=vt.none;for(let s of r.concat(e.marks))(o.type?o.type.allowsMarkType(s.type):Kp(s.type,e.type))&&(i=s.addToSet(i));return o.content.push(e.mark(i)),!0}return!1}enter(e,n,r,o){let i=this.findPlace(e.create(n),r);return i&&(i=this.enterInner(e,n,r,!0,o)),i}enterInner(e,n,r,o=!1,i){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let l=jp(e,i,s.options);s.options&pa&&s.content.length==0&&(l|=pa);let a=vt.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):Kp(c.type,e))?(a=c.addToSet(a),!1):!0),this.nodes.push(new Hl(e,n,a,o,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=rl)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=(l,a)=>{for(;l>=0;l--){let c=n[l];if(c==""){if(l==n.length-1||l==0)continue;for(;a>=i;a--)if(s(l-1,a))return!0;return!1}else{let u=a>0||a==0&&o?this.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;a--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function OE(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Nb.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function AE(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function zp(t){let e={};for(let n in t)e[n]=t[n];return e}function Kp(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let i=[],s=l=>{i.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:u}=l.edge(a);if(c==e||i.indexOf(u)<0&&s(u))return!0}};if(s(o.contentMatch))return!0}}class di{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=vu(n).createDocumentFragment());let o=r,i=[];return e.forEach(s=>{if(i.length||s.marks.length){let l=0,a=0;for(;l<i.length&&a<s.marks.length;){let c=s.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(i[l][0])||c.type.spec.spanning===!1)break;l++,a++}for(;l<i.length;)o=i.pop()[1];for(;a<s.marks.length;){let c=s.marks[a++],u=this.serializeMark(c,s.isInline,n);u&&(i.push([c,o]),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=ma(vu(n),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let i=this.serializeMark(e.marks[o],e.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&ma(vu(r),o(e,n),null,e.attrs)}static renderSpec(e,n,r=null,o){return ma(e,n,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new di(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Up(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Up(e.marks)}}function Up(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function vu(t){return t.document||window.document}const Wp=new WeakMap;function ME(t){let e=Wp.get(t);return e===void 0&&Wp.set(t,e=_E(t)),e}function _E(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(t),e}function ma(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],i;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=ME(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=o.indexOf(" ");s>0&&(n=o.slice(0,s),o=o.slice(s+1));let l,a=n?t.createElementNS(n,o):t.createElement(o),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let h=d.indexOf(" ");h>0?a.setAttributeNS(d.slice(0,h),d.slice(h+1),c[d]):a.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let h=e[d];if(h===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:m,contentDOM:g}=ma(t,h,n,r);if(a.appendChild(m),g){if(l)throw new RangeError("Multiple content holes");l=g}}}return{dom:a,contentDOM:l}}const Pb=65535,$b=Math.pow(2,16);function NE(t,e){return t+e*$b}function qp(t){return t&Pb}function PE(t){return(t-(t&Pb))/$b}const Db=1,Ib=2,ga=4,Bb=8;class $d{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Bb)>0}get deletedBefore(){return(this.delInfo&(Db|ga))>0}get deletedAfter(){return(this.delInfo&(Ib|ga))>0}get deletedAcross(){return(this.delInfo&ga)>0}}class Wn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Wn.empty)return Wn.empty}recover(e){let n=0,r=qp(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+PE(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?o:0);if(a>e)break;let c=this.ranges[l+i],u=this.ranges[l+s],d=a+c;if(e<=d){let h=c?e==a?-1:e==d?1:n:n,m=a+o+(h<0?0:u);if(r)return m;let g=e==(n<0?a:d)?null:NE(l/3,e-a),b=e==a?Ib:e==d?Db:ga;return(n<0?e!=a:e!=d)&&(b|=Bb),new $d(m,b,g)}o+=u-c}return r?e+o:new $d(e+o,0,null)}touches(e,n){let r=0,o=qp(n),i=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+i],u=a+c;if(e<=u&&l==o*3)return!0;r+=this.ranges[l+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,i=0;o<this.ranges.length;o+=3){let s=this.ranges[o],l=s-(this.inverted?i:0),a=s+(this.inverted?0:i),c=this.ranges[o+n],u=this.ranges[o+r];e(l,l+c,a,a+u),i+=u-c}}invert(){return new Wn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Wn.empty:new Wn(e<0?[0,-e,0]:[0,0,e])}}Wn.empty=new Wn([]);class ol{constructor(e,n,r=0,o=e?e.length:0){this.mirror=n,this.from=r,this.to=o,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new ol(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let o=e.getMirror(n);this.appendMap(e._maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e._maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new ol;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let i=this.from;i<this.to;i++){let s=this._maps[i],l=s.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(i);if(a!=null&&a>i&&a<this.to){i=a,e=this._maps[a].recover(l.recover);continue}}o|=l.delInfo,e=l.pos}return r?e:new $d(e,o,null)}}const wu=Object.create(null);class fn{getMap(){return Wn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=wu[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in wu)throw new RangeError("Duplicate use of step JSON ID "+e);return wu[e]=n,n.prototype.jsonID=e,n}}class Dt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Dt(e,null)}static fail(e){return new Dt(null,e)}static fromReplace(e,n,r,o){try{return Dt.ok(e.replace(n,r,o))}catch(i){if(i instanceof Ua)return Dt.fail(i.message);throw i}}}function _f(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let i=t.child(o);i.content.size&&(i=i.copy(_f(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return ne.fromArray(r)}class po extends fn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new we(_f(n.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),o),n.openStart,n.openEnd);return Dt.fromReplace(e,this.from,this.to,i)}invert(){return new xr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new po(n.pos,r.pos,this.mark)}merge(e){return e instanceof po&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new po(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new po(n.from,n.to,e.markFromJSON(n.mark))}}fn.jsonID("addMark",po);class xr extends fn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new we(_f(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return Dt.fromReplace(e,this.from,this.to,r)}invert(){return new po(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new xr(n.pos,r.pos,this.mark)}merge(e){return e instanceof xr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new xr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new xr(n.from,n.to,e.markFromJSON(n.mark))}}fn.jsonID("removeMark",xr);class mo extends fn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Dt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Dt.fromReplace(e,this.pos,this.pos+1,new we(ne.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new mo(this.pos,n.marks[o]);return new mo(this.pos,this.mark)}}return new Yi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new mo(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new mo(n.pos,e.markFromJSON(n.mark))}}fn.jsonID("addNodeMark",mo);class Yi extends fn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Dt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Dt.fromReplace(e,this.pos,this.pos+1,new we(ne.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new mo(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Yi(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Yi(n.pos,e.markFromJSON(n.mark))}}fn.jsonID("removeNodeMark",Yi);class zt extends fn{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&Dd(e,this.from,this.to)?Dt.fail("Structure replace would overwrite content"):Dt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Wn([this.from,this.to-this.from,this.slice.size])}invert(e){return new zt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new zt(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof zt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?we.empty:new we(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new zt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?we.empty:new we(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new zt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new zt(n.from,n.to,we.fromJSON(e,n.slice),!!n.structure)}}fn.jsonID("replace",zt);class Kt extends fn{constructor(e,n,r,o,i,s,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=l}apply(e){if(this.structure&&(Dd(e,this.from,this.gapFrom)||Dd(e,this.gapTo,this.to)))return Dt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Dt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Dt.fromReplace(e,this.from,this.to,r):Dt.fail("Content does not fit in gap")}getMap(){return new Wn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Kt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||i>r.pos?null:new Kt(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Kt(n.from,n.to,n.gapFrom,n.gapTo,we.fromJSON(e,n.slice),n.insert,!!n.structure)}}fn.jsonID("replaceAround",Kt);function Dd(t,e,n){let r=t.resolve(e),o=n-e,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let s=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function $E(t,e,n,r){let o=[],i=[],s,l;t.doc.nodesBetween(e,n,(a,c,u)=>{if(!a.isInline)return;let d=a.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,e),m=Math.min(c+a.nodeSize,n),g=r.addToSet(d);for(let b=0;b<d.length;b++)d[b].isInSet(g)||(s&&s.to==h&&s.mark.eq(d[b])?s.to=m:o.push(s=new xr(h,m,d[b])));l&&l.to==h?l.to=m:i.push(l=new po(h,m,r))}}),o.forEach(a=>t.step(a)),i.forEach(a=>t.step(a))}function DE(t,e,n,r){let o=[],i=0;t.doc.nodesBetween(e,n,(s,l)=>{if(!s.isInline)return;i++;let a=null;if(r instanceof Cc){let c=s.marks,u;for(;u=r.isInSet(c);)(a||(a=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(a=[r]):a=s.marks;if(a&&a.length){let c=Math.min(l+s.nodeSize,n);for(let u=0;u<a.length;u++){let d=a[u],h;for(let m=0;m<o.length;m++){let g=o[m];g.step==i-1&&d.eq(o[m].style)&&(h=g)}h?(h.to=c,h.step=i):o.push({style:d,from:Math.max(l,e),to:c,step:i})}}}),o.forEach(s=>t.step(new xr(s.from,s.to,s.style)))}function Nf(t,e,n,r=n.contentMatch,o=!0){let i=t.doc.nodeAt(e),s=[],l=e+1;for(let a=0;a<i.childCount;a++){let c=i.child(a),u=l+c.nodeSize,d=r.matchType(c.type);if(!d)s.push(new zt(l,u,we.empty));else{r=d;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new xr(l,u,c.marks[h]));if(o&&c.isText&&n.whitespace!="pre"){let h,m=/\r?\n|\r/g,g;for(;h=m.exec(c.text);)g||(g=new we(ne.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new zt(l+h.index,l+h.index+h[0].length,g))}}l=u}if(!r.validEnd){let a=r.fillBefore(ne.empty,!0);t.replace(l,l,new we(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function IE(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function ss(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let o=t.$from.node(r),i=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&o.canReplace(i,s,n))return r;if(r==0||o.type.spec.isolating||!IE(o,i,s))break}return null}function BE(t,e,n){let{$from:r,$to:o,depth:i}=e,s=r.before(i+1),l=o.after(i+1),a=s,c=l,u=ne.empty,d=0;for(let g=i,b=!1;g>n;g--)b||r.index(g)>0?(b=!0,u=ne.from(r.node(g).copy(u)),d++):a--;let h=ne.empty,m=0;for(let g=i,b=!1;g>n;g--)b||o.after(g+1)<o.end(g)?(b=!0,h=ne.from(o.node(g).copy(h)),m++):c++;t.step(new Kt(a,c,s,l,new we(u.append(h),d,m),u.size-d,!0))}function Pf(t,e,n=null,r=t){let o=RE(t,e),i=o&&LE(r,e);return i?o.map(Jp).concat({type:e,attrs:n}).concat(i.map(Jp)):null}function Jp(t){return{type:t,attrs:null}}function RE(t,e){let{parent:n,startIndex:r,endIndex:o}=t,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;let s=i.length?i[0]:e;return n.canReplaceWith(r,o,s)?i:null}function LE(t,e){let{parent:n,startIndex:r,endIndex:o}=t,i=n.child(r),s=e.contentMatch.findWrapping(i.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;a&&c<o;c++)a=a.matchType(n.child(c).type);return!a||!a.validEnd?null:s}function VE(t,e,n){let r=ne.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let l=n[s].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ne.from(n[s].type.create(n[s].attrs,r))}let o=e.start,i=e.end;t.step(new Kt(o,i,o,i,new we(r,0,0),n.length,!0))}function FE(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,n,(s,l)=>{let a=typeof o=="function"?o(s):o;if(s.isTextblock&&!s.hasMarkup(r,a)&&jE(t.doc,t.mapping.slice(i).map(l),r)){let c=null;if(r.schema.linebreakReplacement){let m=r.whitespace=="pre",g=!!r.contentMatch.matchType(r.schema.linebreakReplacement);m&&!g?c=!1:!m&&g&&(c=!0)}c===!1&&Lb(t,s,l,i),Nf(t,t.mapping.slice(i).map(l,1),r,void 0,c===null);let u=t.mapping.slice(i),d=u.map(l,1),h=u.map(l+s.nodeSize,1);return t.step(new Kt(d,h,d+1,h-1,new we(ne.from(r.create(a,null,s.marks)),0,0),1,!0)),c===!0&&Rb(t,s,l,i),!1}})}function Rb(t,e,n,r){e.forEach((o,i)=>{if(o.isText){let s,l=/\r?\n|\r/g;for(;s=l.exec(o.text);){let a=t.mapping.slice(r).map(n+1+i+s.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function Lb(t,e,n,r){e.forEach((o,i)=>{if(o.type==o.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+i);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function jE(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function HE(t,e,n,r,o){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let s=n.create(r,null,o||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,s);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Kt(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new we(ne.from(s),0,0),1,!0))}function qr(t,e,n=1,r){let o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,u=n-2;c>i;c--,u--){let d=o.node(c),h=o.index(c);if(d.type.spec.isolating)return!1;let m=d.content.cutByIndex(h,d.childCount),g=r&&r[u+1];g&&(m=m.replaceChild(0,g.type.create(g.attrs)));let b=r&&r[u]||d;if(!d.canReplace(h+1,d.childCount)||!b.type.validContent(m))return!1}let l=o.indexAfter(i),a=r&&r[0];return o.node(i).canReplaceWith(l,l,a?a.type:o.node(i+1).type)}function zE(t,e,n=1,r){let o=t.doc.resolve(e),i=ne.empty,s=ne.empty;for(let l=o.depth,a=o.depth-n,c=n-1;l>a;l--,c--){i=ne.from(o.node(l).copy(i));let u=r&&r[c];s=ne.from(u?u.type.create(u.attrs,s):o.node(l).copy(s))}t.step(new zt(e,e,new we(i.append(s),n,n),!0))}function _o(t,e){let n=t.resolve(e),r=n.index();return Vb(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function KE(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let o=0;o<e.childCount;o++){let i=e.child(o),s=i.type==r?t.type.schema.nodes.text:i.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(i.marks))return!1}return n.validEnd}function Vb(t,e){return!!(t&&e&&!t.isLeaf&&KE(t,e))}function Tc(t,e,n=-1){let r=t.resolve(e);for(let o=r.depth;;o--){let i,s,l=r.index(o);if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),l++,s=r.node(o).maybeChild(l)):(i=r.node(o).maybeChild(l-1),s=r.node(o+1)),i&&!i.isTextblock&&Vb(i,s)&&r.node(o).canReplace(l,l+1))return e;if(o==0)break;e=n<0?r.before(o):r.after(o)}}function UE(t,e,n){let r=null,{linebreakReplacement:o}=t.doc.type.schema,i=t.doc.resolve(e-n),s=i.node().type;if(o&&s.inlineContent){let u=s.whitespace=="pre",d=!!s.contentMatch.matchType(o);u&&!d?r=!1:!u&&d&&(r=!0)}let l=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);Lb(t,u.node(),u.before(),l)}s.inlineContent&&Nf(t,e+n-1,s,i.node().contentMatchAt(i.index()),r==null);let a=t.mapping.slice(l),c=a.map(e-n);if(t.step(new zt(c,a.map(e+n,-1),we.empty,!0)),r===!0){let u=t.doc.resolve(c);Rb(t,u.node(),u.before(),t.steps.length)}return t}function WE(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let i=r.indexAfter(o);if(r.node(o).canReplaceWith(i,i,n))return r.after(o+1);if(i<r.node(o).childCount)return null}return null}function Fb(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let i=0;i<n.openStart;i++)o=o.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let s=r.depth;s>=0;s--){let l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,a=r.index(s)+(l>0?1:0),c=r.node(s),u=!1;if(i==1)u=c.canReplace(a,a,o);else{let d=c.contentMatchAt(a).findWrapping(o.firstChild.type);u=d&&c.canReplaceWith(a,a,d[0])}if(u)return l==0?r.pos:l<0?r.before(s+1):r.after(s+1)}return null}function Ec(t,e,n=e,r=we.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),i=t.resolve(n);return jb(o,i,r)?new zt(e,n,r):new qE(o,i,r).fit()}function jb(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class qE{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=ne.empty;for(let o=0;o<=e.depth;o++){let i=e.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=ne.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let i=this.placed,s=r.depth,l=o.depth;for(;s&&l&&i.childCount==1;)i=i.firstChild.content,s--,l--;let a=new we(i,s,l);return e>-1?new Kt(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new zt(r.pos,o.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let i=n.firstChild;if(n.childCount>1&&(o=0),i.type.spec.isolating&&o<=r){e=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,i=null;r?(i=Su(this.unplaced.content,r-1).firstChild,o=i.content):o=this.unplaced.content;let s=o.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],u,d=null;if(n==1&&(s?c.matchType(s.type)||(d=c.fillBefore(ne.from(s),!1)):i&&a.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:l,parent:i,inject:d};if(n==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:l,parent:i,wrap:u};if(i&&c.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=Su(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new we(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=Su(e,n);if(o.childCount<=1&&n>0){let i=e.size-n<=n+o.size;this.unplaced=new we(Ss(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new we(Ss(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let b=0;b<i.length;b++)this.openFrontierNode(i[b]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[n];if(o){for(let b=0;b<o.childCount;b++)u.push(o.child(b));d=d.matchFragment(o)}let m=l.size+e-(s.content.size-s.openEnd);for(;c<l.childCount;){let b=l.child(c),k=d.matchType(b.type);if(!k)break;c++,(c>1||a==0||b.content.size)&&(d=k,u.push(Hb(b.mark(h.allowedMarks(b.marks)),c==1?a:0,c==l.childCount?m:-1)))}let g=c==l.childCount;g||(m=-1),this.placed=ks(this.placed,n,ne.from(u)),this.frontier[n].match=d,g&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let b=0,k=l;b<m;b++){let T=k.lastChild;this.frontier.push({type:T.type,match:T.contentMatchAt(T.childCount)}),k=T.content}this.unplaced=g?e==0?we.empty:new we(Ss(s.content,e-1,1),e-1,m<0?s.openEnd:e-1):new we(Ss(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!ku(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],i=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=ku(e,n,o,r,i);if(s){for(let l=n-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],u=ku(e,l,c,a,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:i?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=ks(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),i=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,i)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=ks(this.placed,this.depth,ne.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(ne.empty,!0);n.childCount&&(this.placed=ks(this.placed,this.frontier.length,n))}}function Ss(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Ss(t.firstChild.content,e-1,n)))}function ks(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(ks(t.lastChild.content,e-1,n)))}function Su(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Hb(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Hb(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(ne.empty,!0)))),t.copy(r)}function ku(t,e,n,r,o){let i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;let l=r.fillBefore(i.content,!0,s);return l&&!JE(n,i.content,s)?l:null}function JE(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function GE(t){return t.spec.defining||t.spec.definingForContent}function YE(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),i=t.doc.resolve(n);if(jb(o,i,r))return t.step(new zt(e,n,r));let s=Kb(o,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let l=-(o.depth+1);s.unshift(l);for(let h=o.depth,m=o.pos-1;h>0;h--,m--){let g=o.node(h).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;s.indexOf(h)>-1?l=h:o.before(h)==m&&s.splice(1,0,-h)}let a=s.indexOf(l),c=[],u=r.openStart;for(let h=r.content,m=0;;m++){let g=h.firstChild;if(c.push(g),m==r.openStart)break;h=g.content}for(let h=u-1;h>=0;h--){let m=c[h],g=GE(m.type);if(g&&!m.sameMarkup(o.node(Math.abs(l)-1)))u=h;else if(g||!m.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let m=(h+u+1)%(r.openStart+1),g=c[m];if(g)for(let b=0;b<s.length;b++){let k=s[(b+a)%s.length],T=!0;k<0&&(T=!1,k=-k);let A=o.node(k-1),N=o.index(k-1);if(A.canReplaceWith(N,N,g.type,g.marks))return t.replace(o.before(k),T?i.after(k):n,new we(zb(r.content,0,r.openStart,m),m,r.openEnd))}}let d=t.steps.length;for(let h=s.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>d));h--){let m=s[h];m<0||(e=o.before(m),n=i.after(m))}}function zb(t,e,n,r,o){if(e<n){let i=t.firstChild;t=t.replaceChild(0,i.copy(zb(i.content,e+1,n,r,i)))}if(e>r){let i=o.contentMatchAt(0),s=i.fillBefore(t).append(t);t=s.append(i.matchFragment(s).fillBefore(ne.empty,!0))}return t}function XE(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=WE(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new we(ne.from(r),0,0))}function ZE(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),i=Kb(r,o);for(let s=0;s<i.length;s++){let l=i[s],a=s==i.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),o.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),o.indexAfter(l-1))))return t.delete(r.before(l),o.after(l))}for(let s=1;s<=r.depth&&s<=o.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&o.end(s)-n!=o.depth-s&&r.start(s-1)==o.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),o.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function Kb(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let i=t.start(o);if(i<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(i==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==i-1)&&n.push(o)}return n}class Ui extends fn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Dt.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return Dt.fromReplace(e,this.pos,this.pos+1,new we(ne.from(o),0,n.isLeaf?0:1))}getMap(){return Wn.empty}invert(e){return new Ui(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ui(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ui(n.pos,n.attr,n.value)}}fn.jsonID("attr",Ui);class il extends fn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Dt.ok(r)}getMap(){return Wn.empty}invert(e){return new il(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new il(n.attr,n.value)}}fn.jsonID("docAttr",il);let Xi=class extends Error{};Xi=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Xi.prototype=Object.create(Error.prototype);Xi.prototype.constructor=Xi;Xi.prototype.name="TransformError";class QE{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new ol}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Xi(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=we.empty){let o=Ec(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new we(ne.from(r),0,0))}delete(e,n){return this.replace(e,n,we.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return YE(this,e,n,r),this}replaceRangeWith(e,n,r){return XE(this,e,n,r),this}deleteRange(e,n){return ZE(this,e,n),this}lift(e,n){return BE(this,e,n),this}join(e,n=1){return UE(this,e,n),this}wrap(e,n){return VE(this,e,n),this}setBlockType(e,n=e,r,o=null){return FE(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return HE(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new Ui(e,n,r)),this}setDocAttribute(e,n){return this.step(new il(e,n)),this}addNodeMark(e,n){return this.step(new mo(e,n)),this}removeNodeMark(e,n){if(!(n instanceof vt)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Yi(e,n)),this}split(e,n=1,r){return zE(this,e,n,r),this}addMark(e,n,r){return $E(this,e,n,r),this}removeMark(e,n,r){return DE(this,e,n,r),this}clearIncompatible(e,n,r){return Nf(this,e,n,r),this}}const xu=Object.create(null);class Je{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new eO(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=we.empty){let r=n.content.lastChild,o=null;for(let l=0;l<n.openEnd;l++)o=r,r=r.lastChild;let i=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:c}=s[l],u=e.mapping.slice(i);e.replaceRange(u.map(a.pos),u.map(c.pos),l?we.empty:n),l==0&&Xp(e,i,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){let{$from:s,$to:l}=o[i],a=e.mapping.slice(r),c=a.map(s.pos),u=a.map(l.pos);i?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),Xp(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new ze(e):Oi(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let i=e.depth-1;i>=0;i--){let s=n<0?Oi(e.node(0),e.node(i),e.before(i+1),e.index(i),n,r):Oi(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Jn(e.node(0))}static atStart(e){return Oi(e,e,0,0,1)||new Jn(e)}static atEnd(e){return Oi(e,e,e.content.size,e.childCount,-1)||new Jn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=xu[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in xu)throw new RangeError("Duplicate use of selection JSON ID "+e);return xu[e]=n,n.prototype.jsonID=e,n}getBookmark(){return ze.between(this.$anchor,this.$head).getBookmark()}}Je.prototype.visible=!0;class eO{constructor(e,n){this.$from=e,this.$to=n}}let Gp=!1;function Yp(t){!Gp&&!t.parent.inlineContent&&(Gp=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class ze extends Je{constructor(e,n=e){Yp(e),Yp(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Je.near(r);let o=e.resolve(n.map(this.anchor));return new ze(o.parent.inlineContent?o:r,r)}replace(e,n=we.empty){if(super.replace(e,n),n==we.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ze&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Oc(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ze(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let i=Je.findFrom(n,r,!0)||Je.findFrom(n,-r,!0);if(i)n=i.$head;else return Je.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(Je.findFrom(e,-r,!0)||Je.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new ze(e,n)}}Je.jsonID("text",ze);class Oc{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Oc(e.map(this.anchor),e.map(this.head))}resolve(e){return ze.between(e.resolve(this.anchor),e.resolve(this.head))}}class De extends Je{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),i=e.resolve(o);return r?Je.near(i):new De(i)}content(){return new we(ne.from(this.node),0,0)}eq(e){return e instanceof De&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new $f(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new De(e.resolve(n.anchor))}static create(e,n){return new De(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}De.prototype.visible=!1;Je.jsonID("node",De);class $f{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Oc(r,r):new $f(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&De.isSelectable(r)?new De(n):Je.near(n)}}class Jn extends Je{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=we.empty){if(n==we.empty){e.delete(0,e.doc.content.size);let r=Je.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Jn(e)}map(e){return new Jn(e)}eq(e){return e instanceof Jn}getBookmark(){return tO}}Je.jsonID("all",Jn);const tO={map(){return this},resolve(t){return new Jn(t)}};function Oi(t,e,n,r,o,i=!1){if(e.inlineContent)return ze.create(t,n);for(let s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){let l=e.child(s);if(l.isAtom){if(!i&&De.isSelectable(l))return De.create(t,n-(o<0?l.nodeSize:0))}else{let a=Oi(t,l,n+o,o<0?l.childCount:0,o,i);if(a)return a}n+=l.nodeSize*o}return null}function Xp(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof zt||o instanceof Kt))return;let i=t.mapping.maps[r],s;i.forEach((l,a,c,u)=>{s==null&&(s=u)}),t.setSelection(Je.near(t.doc.resolve(s),n))}const Zp=1,Qp=2,em=4;class nO extends QE{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Zp)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&Zp)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Qp,this}ensureMarks(e){return vt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Qp)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||vt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let s=this.doc.resolve(n);i=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,i)),this.selection.empty||this.setSelection(Je.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=em,this}get scrolledIntoView(){return(this.updated&em)>0}}function tm(t,e){return!e||!t?t:t.bind(e)}class xs{constructor(e,n,r){this.name=e,this.init=tm(n.init,r),this.apply=tm(n.apply,r)}}const rO=[new xs("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new xs("selection",{init(t,e){return t.selection||Je.atStart(e.doc)},apply(t){return t.selection}}),new xs("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new xs("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Cu{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=rO.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new xs(r.key,r.spec.state,r))})}}class Pi{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let i=!1;for(let s=0;s<this.config.plugins.length;s++){let l=this.config.plugins[s];if(l.spec.appendTransaction){let a=o?o[s].n:0,c=o?o[s].state:this,u=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",e),!o){o=[];for(let d=0;d<this.config.plugins.length;d++)o.push(d<s?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),i=!0}o&&(o[s]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Pi(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let i=r[o];n[i.name]=i.apply(e,this[i.name],this,n)}return n}get tr(){return new nO(this)}static create(e){let n=new Cu(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Pi(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new Cu(this.schema,e.plugins),r=n.fields,o=new Pi(n);for(let i=0;i<r.length;i++){let s=r[i].name;o[s]=this.hasOwnProperty(s)?this[s]:r[i].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],i=o.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new Cu(e.schema,e.plugins),i=new Pi(o);return o.fields.forEach(s=>{if(s.name=="doc")i.doc=bo.fromJSON(e.schema,n.doc);else if(s.name=="selection")i.selection=Je.fromJSON(i.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],c=a.spec.state;if(a.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){i[s.name]=c.fromJSON.call(a,e,n[l],i);return}}i[s.name]=s.init(e,i)}}),i}}function Ub(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=Ub(o,e,{})),n[r]=o}return n}class Rn{constructor(e){this.spec=e,this.props={},e.props&&Ub(e.props,this,this.props),this.key=e.key?e.key.key:Wb("plugin")}getState(e){return e[this.key]}}const Tu=Object.create(null);function Wb(t){return t in Tu?t+"$"+ ++Tu[t]:(Tu[t]=0,t+"$")}class Pr{constructor(e="key"){this.key=Wb(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Zt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Zi=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Id=null;const Rr=function(t,e,n){let r=Id||(Id=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},oO=function(){Id=null},li=function(t,e,n,r){return n&&(nm(t,e,n,r,-1)||nm(t,e,n,r,1))},iO=/^(img|br|input|textarea|hr)$/i;function nm(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:er(t))){let i=t.parentNode;if(!i||i.nodeType!=1||vl(t)||iO.test(t.nodeName)||t.contentEditable=="false")return!1;e=Zt(t)+(o<0?0:1),t=i}else if(t.nodeType==1){if(t=t.childNodes[e+(o<0?-1:0)],t.contentEditable=="false")return!1;e=o<0?er(t):0}else return!1}}function er(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function sO(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=er(t)}else if(t.parentNode&&!vl(t))e=Zt(t),t=t.parentNode;else return null}}function lO(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!vl(t))e=Zt(t)+1,t=t.parentNode;else return null}}function aO(t,e,n){for(let r=e==0,o=e==er(t);r||o;){if(t==n)return!0;let i=Zt(t);if(t=t.parentNode,!t)return!1;r=r&&i==0,o=o&&i==er(t)}}function vl(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Ac=function(t){return t.focusNode&&li(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Ho(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function cO(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function uO(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(er(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(er(r.startContainer),r.startOffset)}}}const Mr=typeof navigator<"u"?navigator:null,rm=typeof document<"u"?document:null,No=Mr&&Mr.userAgent||"",Bd=/Edge\/(\d+)/.exec(No),qb=/MSIE \d/.exec(No),Rd=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(No),In=!!(qb||Rd||Bd),vo=qb?document.documentMode:Rd?+Rd[1]:Bd?+Bd[1]:0,mr=!In&&/gecko\/(\d+)/i.test(No);mr&&+(/Firefox\/(\d+)/.exec(No)||[0,0])[1];const Ld=!In&&/Chrome\/(\d+)/.exec(No),un=!!Ld,Jb=Ld?+Ld[1]:0,Tn=!In&&!!Mr&&/Apple Computer/.test(Mr.vendor),Qi=Tn&&(/Mobile\/\w+/.test(No)||!!Mr&&Mr.maxTouchPoints>2),Zn=Qi||(Mr?/Mac/.test(Mr.platform):!1),dO=Mr?/Win/.test(Mr.platform):!1,zr=/Android \d/.test(No),wl=!!rm&&"webkitFontSmoothing"in rm.documentElement.style,fO=wl?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function hO(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Ir(t,e){return typeof t=="number"?t:t[e]}function pO(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function om(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=Zi(s);continue}let l=s,a=l==i.body,c=a?hO(i):pO(l),u=0,d=0;if(e.top<c.top+Ir(r,"top")?d=-(c.top-e.top+Ir(o,"top")):e.bottom>c.bottom-Ir(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Ir(o,"top")-c.top:e.bottom-c.bottom+Ir(o,"bottom")),e.left<c.left+Ir(r,"left")?u=-(c.left-e.left+Ir(o,"left")):e.right>c.right-Ir(r,"right")&&(u=e.right-c.right+Ir(o,"right")),u||d)if(a)i.defaultView.scrollBy(u,d);else{let m=l.scrollLeft,g=l.scrollTop;d&&(l.scrollTop+=d),u&&(l.scrollLeft+=u);let b=l.scrollLeft-m,k=l.scrollTop-g;e={left:e.left-b,top:e.top-k,right:e.right-b,bottom:e.bottom-k}}let h=a?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(h))break;s=h=="absolute"?s.offsetParent:Zi(s)}}function mO(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let i=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let l=t.root.elementFromPoint(i,s);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,o=a.top;break}}return{refDOM:r,refTop:o,stack:Gb(t.dom)}}function Gb(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Zi(r));return e}function gO({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Yb(n,r==0?0:r-e)}function Yb(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:i}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let ki=null;function yO(t){if(t.setActive)return t.setActive();if(ki)return t.focus(ki);let e=Gb(t);t.focus(ki==null?{get preventScroll(){return ki={preventScroll:!0},!0}}:void 0),ki||(ki=!1,Yb(e,0))}function Xb(t,e){let n,r=2e8,o,i=0,s=e.top,l=e.top,a,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=Rr(u).getClientRects();else continue;for(let m=0;m<h.length;m++){let g=h[m];if(g.top<=s&&g.bottom>=l){s=Math.max(g.bottom,s),l=Math.min(g.top,l);let b=g.left>e.left?g.left-e.left:g.right<e.left?e.left-g.right:0;if(b<r){n=u,r=b,o=b&&n.nodeType==3?{left:g.right<e.left?g.right:g.left,top:e.top}:e,u.nodeType==1&&b&&(i=d+(e.left>=(g.left+g.right)/2?1:0));continue}}else g.top>e.top&&!a&&g.left<=e.left&&g.right>=e.left&&(a=u,c={left:Math.max(g.left,Math.min(g.right,e.left)),top:g.top});!n&&(e.left>=g.right&&e.top>=g.top||e.left>=g.left&&e.top>=g.bottom)&&(i=d+1)}}return!n&&a&&(n=a,o=c,r=0),n&&n.nodeType==3?bO(n,o):!n||r&&n.nodeType==1?{node:t,offset:i}:Xb(n,o)}function bO(t,e){let n=t.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let i=no(r,1);if(i.top!=i.bottom&&Df(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}function Df(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function vO(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function wO(t,e,n){let{node:r,offset:o}=Xb(e,n),i=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();i=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,o,i)}function SO(t,e,n,r){let o=-1;for(let i=e,s=!1;i!=t.dom;){let l=t.docView.nearestDesc(i,!0),a;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((a=l.dom.getBoundingClientRect()).width||a.height)&&(l.node.isBlock&&l.parent&&(!s&&a.left>r.left||a.top>r.top?o=l.posBefore:(!s&&a.right<r.left||a.bottom<r.top)&&(o=l.posAfter),s=!0),!l.contentDOM&&o<0&&!l.node.isText))return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter;i=l.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function Zb(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=o;;){let s=t.childNodes[i];if(s.nodeType==1){let l=s.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if(Df(e,c))return Zb(s,e,c)}}if((i=(i+1)%r)==o)break}return t}function kO(t,e){let n=t.dom.ownerDocument,r,o=0,i=uO(n,e.left,e.top);i&&({node:r,offset:o}=i);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=t.dom.getBoundingClientRect();if(!Df(e,c)||(s=Zb(t.dom,e,c),!s))return null}if(Tn)for(let c=s;r&&c;c=Zi(c))c.draggable&&(r=void 0);if(s=vO(s,e),r){if(mr&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let u=r.childNodes[o],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&o++}let c;wl&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&o--,r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(l=SO(t,r,o,e))}l==null&&(l=wO(t,s,e));let a=t.docView.nearestDesc(s,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function im(t){return t.top<t.bottom||t.left<t.right}function no(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(im(r))return r}return Array.prototype.find.call(n,im)||t.getBoundingClientRect()}const xO=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Qb(t,e,n){let{node:r,offset:o,atom:i}=t.docView.domFromPos(e,n<0?-1:1),s=wl||mr;if(r.nodeType==3)if(s&&(xO.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let a=no(Rr(r,o,o),n);if(mr&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=no(Rr(r,o-1,o-1),-1);if(c.top==a.top){let u=no(Rr(r,o,o+1),-1);if(u.top!=a.top)return hs(u,u.left<c.left)}}return a}else{let a=o,c=o,u=n<0?1:-1;return n<0&&!o?(c++,u=-1):n>=0&&o==r.nodeValue.length?(a--,u=1):n<0?a--:c++,hs(no(Rr(r,a,c),u),u<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&o&&(n<0||o==er(r))){let a=r.childNodes[o-1];if(a.nodeType==1)return Eu(a.getBoundingClientRect(),!1)}if(i==null&&o<er(r)){let a=r.childNodes[o];if(a.nodeType==1)return Eu(a.getBoundingClientRect(),!0)}return Eu(r.getBoundingClientRect(),n>=0)}if(i==null&&o&&(n<0||o==er(r))){let a=r.childNodes[o-1],c=a.nodeType==3?Rr(a,er(a)-(s?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return hs(no(c,1),!1)}if(i==null&&o<er(r)){let a=r.childNodes[o];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?Rr(a,0,s?0:1):a.nodeType==1?a:null:null;if(c)return hs(no(c,-1),!0)}return hs(no(r.nodeType==3?Rr(r):r,-n),n>=0)}function hs(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Eu(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function ev(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function CO(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return ev(t,e,()=>{let{node:i}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(i,!0);if(!l)break;if(l.node.isBlock){i=l.contentDOM||l.dom;break}i=l.dom.parentNode}let s=Qb(t,o.pos,1);for(let l=i.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=Rr(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let u=a[c];if(u.bottom>u.top+1&&(n=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const TO=/[\u0590-\u08ac]/;function EO(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,i=!o,s=o==r.parent.content.size,l=t.domSelection();return l?!TO.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?i:s:ev(t,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),h=l.caretBidiLevel;l.modify("move",n,"character");let m=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:g,focusOffset:b}=t.domSelectionRange(),k=g&&!m.contains(g.nodeType==1?g:g.parentNode)||a==g&&c==b;try{l.collapse(u,d),a&&(a!=u||c!=d)&&l.extend&&l.extend(a,c)}catch{}return h!=null&&(l.caretBidiLevel=h),k}):r.pos==r.start()||r.pos==r.end()}let sm=null,lm=null,am=!1;function OO(t,e,n){return sm==e&&lm==n?am:(sm=e,lm=n,am=n=="up"||n=="down"?CO(t,e,n):EO(t,e,n))}const rr=0,cm=1,Uo=2,_r=3;class Sl{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=rr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,s;if(e==this.contentDOM)i=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(s)+s.size:this.posAtStart}else{let i,s;if(e==this.contentDOM)i=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>Zt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!1;break}if(i.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!0;break}if(i.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let i=this.getDesc(o),s;if(i&&(!n||i.node))if(r&&(s=i.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return i}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let i=this.getDesc(o);if(i)return i.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],i=r+o.size;if(r==e&&i!=r){for(;!o.border&&o.children.length;)for(let s=0;s<o.children.length;s++){let l=o.children[s];if(l.size){o=l;break}}return o}if(e<i)return o.descAt(e-r-o.border);r=i}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let i=0;r<this.children.length;r++){let s=this.children[r],l=i+s.size;if(l>e||s instanceof nv){o=e-i;break}i=l}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof tv&&i.side>=0;r--);if(n<=0){let i,s=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,s=!1);return i&&n&&s&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?Zt(i.dom)+1:0}}else{let i,s=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,s=!1);return i&&s&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?Zt(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,i=-1;for(let s=r,l=0;;l++){let a=this.children[l],c=s+a.size;if(o==-1&&e<=c){let u=s+a.border;if(e>=u&&n<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,u);e=s;for(let d=l;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){o=Zt(h.dom)+1;break}e-=h.size}o==-1&&(o=0)}if(o>-1&&(c>n||l==this.children.length-1)){n=c;for(let u=l+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=Zt(d.dom);break}n+=d.size}i==-1&&(i=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let i=Math.min(e,n),s=Math.max(e,n);for(let m=0,g=0;m<this.children.length;m++){let b=this.children[m],k=g+b.size;if(i>g&&s<k)return b.setSelection(e-g-b.border,n-g-b.border,r,o);g=k}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((mr||Tn)&&e==n){let{node:m,offset:g}=l;if(m.nodeType==3){if(d=!!(g&&m.nodeValue[g-1]==`
`),d&&g==m.nodeValue.length)for(let b=m,k;b;b=b.parentNode){if(k=b.nextSibling){k.nodeName=="BR"&&(l=a={node:k.parentNode,offset:Zt(k)+1});break}let T=b.pmViewDesc;if(T&&T.node&&T.node.isBlock)break}}else{let b=m.childNodes[g-1];d=b&&(b.nodeName=="BR"||b.contentEditable=="false")}}if(mr&&u.focusNode&&u.focusNode!=a.node&&u.focusNode.nodeType==1){let m=u.focusNode.childNodes[u.focusOffset];m&&m.contentEditable=="false"&&(o=!0)}if(!(o||d&&Tn)&&li(l.node,l.offset,u.anchorNode,u.anchorOffset)&&li(a.node,a.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||e==n)&&!d){c.collapse(l.node,l.offset);try{e!=n&&c.extend(a.node,a.offset),h=!0}catch{}}if(!h){if(e>n){let g=l;l=a,a=g}let m=document.createRange();m.setEnd(a.node,a.offset),m.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(m)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let i=this.children[o],s=r+i.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let l=r+i.border,a=s-i.border;if(e>=l&&n<=a){this.dirty=e==r||n==s?Uo:cm,e==l&&n==a&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=_r:i.markDirty(e-l,n-l);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?Uo:_r}r=s}this.dirty=Uo}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Uo:cm;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class tv extends Sl{constructor(e,n,r,o){let i,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!i)return o;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(s.nodeType!=1){let l=document.createElement("span");l.appendChild(s),s=l}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,i=this}matchesWidget(e){return this.dirty==rr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class AO extends Sl{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ai extends Sl{constructor(e,n,r,o,i){super(e,[],r,o),this.mark=n,this.spec=i}static create(e,n,r,o){let i=o.nodeViews[n.type.name],s=i&&i(n,o,r);return(!s||!s.dom)&&(s=di.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new ai(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&_r||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=_r&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=rr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=rr}}slice(e,n,r){let o=ai.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=Fd(i,n,s,r)),e>0&&(i=Fd(i,0,e,r));for(let l=0;l<i.length;l++)i[l].parent=o;return o.children=i,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class wo extends Sl{constructor(e,n,r,o,i,s,l,a,c){super(e,[],i,s),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=l}static create(e,n,r,o,i,s){let l=i.nodeViews[n.type.name],a,c=l&&l(n,i,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)},r,o),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=di.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let h=u;return u=iv(u,r,n),c?a=new MO(e,n,r,o,u,d||null,h,c,i,s+1):n.isText?new Mc(e,n,r,o,u,h,i):new wo(e,n,r,o,u,d||null,h,i,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ne.empty)}return e}matchesNode(e,n,r){return this.dirty==rr&&e.eq(this.node)&&Ga(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,i=e.composing?this.localCompositionInfo(e,n):null,s=i&&i.pos>-1?i:null,l=i&&i.pos<0,a=new NO(this,s&&s.node,e);DO(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?a.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&a.syncToMarks(u==this.node.childCount?vt.none:this.node.child(u).marks,r,e),a.placeWidget(c,e,o)},(c,u,d,h)=>{a.syncToMarks(c.marks,r,e);let m;a.findNodeMatch(c,u,d,h)||l&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(m=a.findIndexWithChild(i.node))>-1&&a.updateNodeAt(c,u,d,m,e)||a.updateNextNode(c,u,d,e,h,o)||a.addNode(c,u,d,e,o),o+=c.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Uo)&&(s&&this.protectLocalComposition(e,s),rv(this.contentDOM,this.children,e),Qi&&IO(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof ze)||r<n||o>n+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let s=i.nodeValue,l=BO(this.node.content,s,r-n,o-n);return l<0?null:{node:i,pos:l,text:s}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new AO(this,i,n,o);e.input.compositionNodes.push(s),this.children=Fd(this.children,r,r+o.length,e,s)}update(e,n,r,o){return this.dirty==_r||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=rr}updateOuterDeco(e){if(Ga(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=ov(this.dom,this.nodeDOM,Vd(this.outerDeco,this.node,n),Vd(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function um(t,e,n,r,o){iv(r,e,t);let i=new wo(void 0,t,e,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}class Mc extends wo{constructor(e,n,r,o,i,s,l){super(e,n,r,o,i,null,s,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==_r||this.dirty!=rr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=rr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=rr,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),i=document.createTextNode(o.text);return new Mc(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=_r)}get domAtom(){return!1}isText(e){return this.node.text==e}}class nv extends Sl{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==rr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class MO extends wo{constructor(e,n,r,o,i,s,l,a,c,u){super(e,n,r,o,i,s,l,c,u),this.spec=a}update(e,n,r,o){if(this.dirty==_r)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,o),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function rv(t,e,n){let r=t.firstChild,o=!1;for(let i=0;i<e.length;i++){let s=e[i],l=s.dom;if(l.parentNode==t){for(;l!=r;)r=dm(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(l,r);if(s instanceof ai){let a=r?r.previousSibling:t.lastChild;rv(s.contentDOM,s.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=dm(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const Hs=function(t){t&&(this.nodeName=t)};Hs.prototype=Object.create(null);const Wo=[new Hs];function Vd(t,e,n){if(t.length==0)return Wo;let r=n?Wo[0]:new Hs,o=[r];for(let i=0;i<t.length;i++){let s=t[i].type.attrs;if(s){s.nodeName&&o.push(r=new Hs(s.nodeName));for(let l in s){let a=s[l];a!=null&&(n&&o.length==1&&o.push(r=new Hs(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return o}function ov(t,e,n,r){if(n==Wo&&r==Wo)return e;let o=e;for(let i=0;i<r.length;i++){let s=r[i],l=n[i];if(i){let a;l&&l.nodeName==s.nodeName&&o!=t&&(a=o.parentNode)&&a.nodeName.toLowerCase()==s.nodeName||(a=document.createElement(s.nodeName),a.pmIsDeco=!0,a.appendChild(o),l=Wo[0]),o=a}_O(o,l||Wo[0],s)}return o}function _O(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)o.indexOf(r[i])==-1&&t.classList.remove(r[i]);for(let i=0;i<o.length;i++)r.indexOf(o[i])==-1&&t.classList.add(o[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function iv(t,e,n){return ov(t,t,Wo,Vd(e,n,t.nodeType!=1))}function Ga(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function dm(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class NO{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=PO(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let o=0,i=this.stack.length>>1,s=Math.min(i,e.length);for(;o<s&&(o==i-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<i;)this.destroyRest(),this.top.dirty=rr,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let c=this.top.children[a];if(c.matchesMark(e[i])&&!this.isLocked(c.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=ai.create(this.top,e[i],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,i++}}findNodeMatch(e,n,r,o){let i=-1,s;if(o>=this.preMatch.index&&(s=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))i=this.top.children.indexOf(s,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){i=l;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,n,r,o,i){let s=this.top.children[o];return s.dirty==_r&&s.dom==s.contentDOM&&(s.dirty=Uo),s.update(e,n,r,i)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,i,s){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof wo){let c=this.preMatch.matched.get(a);if(c!=null&&c!=i)return!1;let u=a.dom,d,h=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=_r&&Ga(n,a.outerDeco));if(!h&&a.update(e,n,r,o))return this.destroyBetween(this.index,l),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(a,e,n,r,o,s)))return this.destroyBetween(this.index,l),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Uo,d.updateChildren(o,s+1),d.dirty=rr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,i,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Ga(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let l=wo.create(this.top,n,r,o,i,s);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,o,i){let s=wo.create(this.top,e,n,r,o,i);s.contentDOM&&s.updateChildren(o,i+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let i=new tv(this.top,e,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof ai;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Mc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Tn||un)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new nv(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function PO(t,e){let n=e,r=n.children.length,o=t.childCount,i=new Map,s=[];e:for(;o>0;){let l;for(;;)if(r){let c=n.children[r-1];if(c instanceof ai)n=c,r=c.children.length;else{l=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(o-1))break;--o,i.set(l,o),s.push(l)}}return{index:o,matched:i,matches:s.reverse()}}function $O(t,e){return t.type.side-e.type.side}function DO(t,e,n,r){let o=e.locals(t),i=0;if(o.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,o,e.forChild(i,u),c),i+=u.nodeSize}return}let s=0,l=[],a=null;for(let c=0;;){let u,d;for(;s<o.length&&o[s].to==i;){let k=o[s++];k.widget&&(u?(d||(d=[u])).push(k):u=k)}if(u)if(d){d.sort($O);for(let k=0;k<d.length;k++)n(d[k],c,!!a)}else n(u,c,!!a);let h,m;if(a)m=-1,h=a,a=null;else if(c<t.childCount)m=c,h=t.child(c++);else break;for(let k=0;k<l.length;k++)l[k].to<=i&&l.splice(k--,1);for(;s<o.length&&o[s].from<=i&&o[s].to>i;)l.push(o[s++]);let g=i+h.nodeSize;if(h.isText){let k=g;s<o.length&&o[s].from<k&&(k=o[s].from);for(let T=0;T<l.length;T++)l[T].to<k&&(k=l[T].to);k<g&&(a=h.cut(k-i),h=h.cut(0,k-i),g=k,m=-1)}else for(;s<o.length&&o[s].to<g;)s++;let b=h.isInline&&!h.isLeaf?l.filter(k=>!k.inline):l.slice();r(h,b,e.forChild(i,h),m),i=g}}function IO(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function BO(t,e,n,r){for(let o=0,i=0;o<t.childCount&&i<=r;){let s=t.child(o++),l=i;if(i+=s.nodeSize,!s.isText)continue;let a=s.text;for(;o<t.childCount;){let c=t.child(o++);if(i+=c.nodeSize,!c.isText)break;a+=c.text}if(i>=n){if(i>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let c=l<r?a.lastIndexOf(e,r-l-1):-1;if(c>=0&&c+e.length+l>=n)return l+c;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function Fd(t,e,n,r,o){let i=[];for(let s=0,l=0;s<t.length;s++){let a=t[s],c=l,u=l+=a.size;c>=n||u<=e?i.push(a):(c<e&&i.push(a.slice(0,e-c,r)),o&&(i.push(o),o=void 0),u>n&&i.push(a.slice(n-c,a.size,r)))}return i}function If(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),i=o&&o.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let l=r.resolve(s),a,c;if(Ac(n)){for(a=s;o&&!o.node;)o=o.parent;let d=o.node;if(o&&d.isAtom&&De.isSelectable(d)&&o.parent&&!(d.isInline&&aO(n.focusNode,n.focusOffset,o.dom))){let h=o.posBefore;c=new De(s==h?l:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=s,h=s;for(let m=0;m<n.rangeCount;m++){let g=n.getRangeAt(m);d=Math.min(d,t.docView.posFromDOM(g.startContainer,g.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(d<0)return null;[a,s]=h==t.state.selection.anchor?[h,d]:[d,h],l=r.resolve(s)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let u=r.resolve(a);if(!c){let d=e=="pointer"||t.state.selection.head<l.pos&&!i?1:-1;c=Bf(t,u,l,d)}return c}function sv(t){return t.editable?t.hasFocus():av(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Jr(t,e=!1){let n=t.state.selection;if(lv(t,n),!!sv(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&un){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&li(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)LO(t);else{let{anchor:r,head:o}=n,i,s;fm&&!(n instanceof ze)&&(n.$from.parent.inlineContent||(i=hm(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=hm(t,n.to))),t.docView.setSelection(r,o,t,e),fm&&(i&&pm(i),s&&pm(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&RO(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const fm=Tn||un&&Jb<63;function hm(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(Tn&&o&&o.contentEditable=="false")return Ou(o);if((!o||o.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(o)return Ou(o);if(i)return Ou(i)}}function Ou(t){return t.contentEditable="true",Tn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function pm(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function RO(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!sv(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function LO(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setStart(r.parentNode,Zt(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&In&&vo<=11&&(r.disabled=!0,r.disabled=!1)}function lv(t,e){if(e instanceof De){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(mm(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else mm(t)}function mm(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Bf(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||ze.between(e,n,r)}function gm(t){return t.editable&&!t.hasFocus()?!1:av(t)}function av(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function VO(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return li(e.node,e.offset,n.anchorNode,n.anchorOffset)}function jd(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),i=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return i&&Je.findFrom(i,e)}function lo(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function ym(t,e,n){let r=t.state.selection;if(r instanceof ze)if(n.indexOf("s")>-1){let{$head:o}=r,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let s=t.state.doc.resolve(o.pos+i.nodeSize*(e<0?-1:1));return lo(t,new ze(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let o=jd(t.state,e);return o&&o instanceof De?lo(t,o):!1}else if(!(Zn&&n.indexOf("m")>-1)){let o=r.$head,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,s;if(!i||i.isText)return!1;let l=e<0?o.pos-i.nodeSize:o.pos;return i.isAtom||(s=t.docView.descAt(l))&&!s.contentDOM?De.isSelectable(i)?lo(t,new De(e<0?t.state.doc.resolve(o.pos-i.nodeSize):o)):wl?lo(t,new ze(t.state.doc.resolve(e<0?l:l+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof De&&r.node.isInline)return lo(t,new ze(e>0?r.$to:r.$from));{let o=jd(t.state,e);return o?lo(t,o):!1}}}function Ya(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function zs(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function xi(t,e){return e<0?FO(t):jO(t)}function FO(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,i,s=!1;for(mr&&n.nodeType==1&&r<Ya(n)&&zs(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(zs(l,-1))o=n,i=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(cv(n))break;{let l=n.previousSibling;for(;l&&zs(l,-1);)o=n.parentNode,i=Zt(l),l=l.previousSibling;if(l)n=l,r=Ya(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?Hd(t,n,r):o&&Hd(t,o,i)}function jO(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=Ya(n),i,s;for(;;)if(r<o){if(n.nodeType!=1)break;let l=n.childNodes[r];if(zs(l,1))i=n,s=++r;else break}else{if(cv(n))break;{let l=n.nextSibling;for(;l&&zs(l,1);)i=l.parentNode,s=Zt(l)+1,l=l.nextSibling;if(l)n=l,r=0,o=Ya(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}i&&Hd(t,i,s)}function cv(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function HO(t,e){for(;t&&e==t.childNodes.length&&!vl(t);)e=Zt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function zO(t,e){for(;t&&!e&&!vl(t);)e=Zt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Hd(t,e,n){if(e.nodeType!=3){let i,s;(s=HO(e,n))?(e=s,n=0):(i=zO(e,n))&&(e=i,n=i.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Ac(r)){let i=document.createRange();i.setEnd(e,n),i.setStart(e,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&Jr(t)},50)}function bm(t,e){let n=t.state.doc.resolve(e);if(!(un||dO)&&n.parent.inlineContent){let o=t.coordsAtPos(e);if(e>n.start()){let i=t.coordsAtPos(e-1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left<o.left?"ltr":"rtl"}if(e<n.end()){let i=t.coordsAtPos(e+1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left>o.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function vm(t,e,n){let r=t.state.selection;if(r instanceof ze&&!r.empty||n.indexOf("s")>-1||Zn&&n.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=jd(t.state,e);if(s&&s instanceof De)return lo(t,s)}if(!o.parent.inlineContent){let s=e<0?o:i,l=r instanceof Jn?Je.near(s,e):Je.findFrom(s,e);return l?lo(t,l):!1}return!1}function wm(t,e){if(!(t.state.selection instanceof ze))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let s=t.state.tr;return e<0?s.delete(n.pos-i.nodeSize,n.pos):s.delete(n.pos,n.pos+i.nodeSize),t.dispatch(s),!0}return!1}function Sm(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function KO(t){if(!Tn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Sm(t,r,"true"),setTimeout(()=>Sm(t,r,"false"),20)}return!1}function UO(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function WO(t,e){let n=e.keyCode,r=UO(e);if(n==8||Zn&&n==72&&r=="c")return wm(t,-1)||xi(t,-1);if(n==46&&!e.shiftKey||Zn&&n==68&&r=="c")return wm(t,1)||xi(t,1);if(n==13||n==27)return!0;if(n==37||Zn&&n==66&&r=="c"){let o=n==37?bm(t,t.state.selection.from)=="ltr"?-1:1:-1;return ym(t,o,r)||xi(t,o)}else if(n==39||Zn&&n==70&&r=="c"){let o=n==39?bm(t,t.state.selection.from)=="ltr"?1:-1:1;return ym(t,o,r)||xi(t,o)}else{if(n==38||Zn&&n==80&&r=="c")return vm(t,-1,r)||xi(t,-1);if(n==40||Zn&&n==78&&r=="c")return KO(t)||vm(t,1,r)||xi(t,1);if(r==(Zn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Rf(t,e){t.someProp("transformCopied",m=>{e=m(e,t)});let n=[],{content:r,openStart:o,openEnd:i}=e;for(;o>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,i--;let m=r.firstChild;n.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),r=m.content}let s=t.someProp("clipboardSerializer")||di.fromSchema(t.state.schema),l=mv(),a=l.createElement("div");a.appendChild(s.serializeFragment(r,{document:l}));let c=a.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=pv[c.nodeName.toLowerCase()]);){for(let m=u.length-1;m>=0;m--){let g=l.createElement(u[m]);for(;a.firstChild;)g.appendChild(a.firstChild);a.appendChild(g),d++}c=a.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",m=>m(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:h,slice:e}}function uv(t,e,n,r,o){let i=o.parent.type.spec.code,s,l;if(!n&&!e)return null;let a=e&&(r||i||!n);if(a){if(t.someProp("transformPastedText",h=>{e=h(e,i||r,t)}),i)return e?new we(ne.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):we.empty;let d=t.someProp("clipboardTextParser",h=>h(e,o,r,t));if(d)l=d;else{let h=o.marks(),{schema:m}=t.state,g=di.fromSchema(m);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(b=>{let k=s.appendChild(document.createElement("p"));b&&k.appendChild(g.serializeNode(m.text(b,h)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),s=YO(n),wl&&XO(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=s.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;s=h}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||js.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(a||u),context:o,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!qO.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)l=ZO(km(l,+u[1],+u[2]),u[4]);else if(l=we.maxOpen(JO(l.content,o),!0),l.openStart||l.openEnd){let d=0,h=0;for(let m=l.content.firstChild;d<l.openStart&&!m.type.spec.isolating;d++,m=m.firstChild);for(let m=l.content.lastChild;h<l.openEnd&&!m.type.spec.isolating;h++,m=m.lastChild);l=km(l,d,h)}return t.someProp("transformPasted",d=>{l=d(l,t)}),l}const qO=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function JO(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let o=e.node(n).contentMatchAt(e.index(n)),i,s=[];if(t.forEach(l=>{if(!s)return;let a=o.findWrapping(l.type),c;if(!a)return s=null;if(c=s.length&&i.length&&fv(a,i,l,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=hv(s[s.length-1],i.length));let u=dv(l,a);s.push(u),o=o.matchType(u.type),i=a}}),s)return ne.from(s)}return t}function dv(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,ne.from(t));return t}function fv(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let i=fv(t,e,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(ne.from(dv(n,t,o+1))))}}function hv(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,hv(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(ne.empty,!0);return t.copy(n.append(r))}function zd(t,e,n,r,o,i){let s=e<0?t.firstChild:t.lastChild,l=s.content;return t.childCount>1&&(i=0),o<r-1&&(l=zd(l,e,n,r,o+1,i)),o>=n&&(l=e<0?s.contentMatchAt(0).fillBefore(l,i<=o).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(ne.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(l))}function km(t,e,n){return e<t.openStart&&(t=new we(zd(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new we(zd(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const pv={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let xm=null;function mv(){return xm||(xm=document.implementation.createHTMLDocument("title"))}let Au=null;function GO(t){let e=window.trustedTypes;return e?(Au||(Au=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Au.createHTML(t)):t}function YO(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=mv().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&pv[r[1].toLowerCase()])&&(t=o.map(i=>"<"+i+">").join("")+t+o.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=GO(t),o)for(let i=0;i<o.length;i++)n=n.querySelector(o[i])||n;return n}function XO(t){let e=t.querySelectorAll(un?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function ZO(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:o,openStart:i,openEnd:s}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;o=ne.from(a.create(r[l+1],o)),i++,s++}return new we(o,i,s)}const En={},On={},QO={touchstart:!0,touchmove:!0};class eA{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function tA(t){for(let e in En){let n=En[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{rA(t,r)&&!Lf(t,r)&&(t.editable||!(r.type in On))&&n(t,r)},QO[e]?{passive:!0}:void 0)}Tn&&t.dom.addEventListener("input",()=>null),Kd(t)}function go(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function nA(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Kd(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Lf(t,r))})}function Lf(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function rA(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function oA(t,e){!Lf(t,e)&&En[e.type]&&(t.editable||!(e.type in On))&&En[e.type](t,e)}On.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!yv(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(zr&&un&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Qi&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,Ho(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||WO(t,n)?n.preventDefault():go(t,"key")};On.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};On.keypress=(t,e)=>{let n=e;if(yv(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Zn&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof ze)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode);!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",i=>i(t,r.$from.pos,r.$to.pos,o))&&t.dispatch(t.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}};function _c(t){return{left:t.clientX,top:t.clientY}}function iA(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Vf(t,e,n,r,o){if(r==-1)return!1;let i=t.state.doc.resolve(r);for(let s=i.depth+1;s>0;s--)if(t.someProp(e,l=>s>i.depth?l(t,n,i.nodeAfter,i.before(s),o,!0):l(t,n,i.node(s),i.before(s),o,!1)))return!0;return!1}function Wi(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function sA(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&De.isSelectable(r)?(Wi(t,new De(n)),!0):!1}function lA(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof De&&(r=n.node);let i=t.state.doc.resolve(e);for(let s=i.depth+1;s>0;s--){let l=s>i.depth?i.nodeAfter:i.node(s);if(De.isSelectable(l)){r&&n.$from.depth>0&&s>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?o=i.before(n.$from.depth):o=i.before(s);break}}return o!=null?(Wi(t,De.create(t.state.doc,o)),!0):!1}function aA(t,e,n,r,o){return Vf(t,"handleClickOn",e,n,r)||t.someProp("handleClick",i=>i(t,e,r))||(o?lA(t,n):sA(t,n))}function cA(t,e,n,r){return Vf(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function uA(t,e,n,r){return Vf(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||dA(t,n,r)}function dA(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Wi(t,ze.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let i=o.depth+1;i>0;i--){let s=i>o.depth?o.nodeAfter:o.node(i),l=o.before(i);if(s.inlineContent)Wi(t,ze.create(r,l+1,l+1+s.content.size));else if(De.isSelectable(s))Wi(t,De.create(r,l));else continue;return!0}}function Ff(t){return Xa(t)}const gv=Zn?"metaKey":"ctrlKey";En.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Ff(t),o=Date.now(),i="singleClick";o-t.input.lastClick.time<500&&iA(n,t.input.lastClick)&&!n[gv]&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i};let s=t.posAtCoords(_c(n));s&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new fA(t,s,n,!!r)):(i=="doubleClick"?cA:uA)(t,s.pos,s.inside,n)?n.preventDefault():go(t,"pointer"))};class fA{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[gv],this.allowDefault=r.shiftKey;let i,s;if(n.inside>-1)i=e.state.doc.nodeAt(n.inside),s=n.inside;else{let u=e.state.doc.resolve(n.pos);i=u.parent,s=u.depth?u.before():0}const l=o?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:c}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||c instanceof De&&c.from<=s&&c.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&mr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),go(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Jr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(_c(e))),this.updateAllowDefault(e),this.allowDefault||!n?go(this.view,"pointer"):aA(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Tn&&this.mightDrag&&!this.mightDrag.node.isAtom||un&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Wi(this.view,Je.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):go(this.view,"pointer")}move(e){this.updateAllowDefault(e),go(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}En.touchstart=t=>{t.input.lastTouch=Date.now(),Ff(t),go(t,"pointer")};En.touchmove=t=>{t.input.lastTouch=Date.now(),go(t,"pointer")};En.contextmenu=t=>Ff(t);function yv(t,e){return t.composing?!0:Tn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const hA=zr?5e3:-1;On.compositionstart=On.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof ze&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Xa(t,!0),t.markCursor=null;else if(Xa(t,!e.selection.empty),mr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,i=r.focusOffset;o&&o.nodeType==1&&i!=0;){let s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(s.nodeType==3){let l=t.domSelection();l&&l.collapse(s,s.nodeValue.length);break}else o=s,i=-1}}t.input.composing=!0}bv(t,hA)};On.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,bv(t,20))};function bv(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Xa(t),e))}function vv(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=mA());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function pA(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=sO(e.focusNode,e.focusOffset),r=lO(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!o||!o.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function mA(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Xa(t,e=!1){if(!(zr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),vv(t),e||t.docView&&t.docView.dirty){let n=If(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function gA(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const sl=In&&vo<15||Qi&&fO<604;En.copy=On.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let i=sl?null:n.clipboardData,s=r.content(),{dom:l,text:a}=Rf(t,s);i?(n.preventDefault(),i.clearData(),i.setData("text/html",l.innerHTML),i.setData("text/plain",a)):gA(t,l),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function yA(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function bA(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ll(t,r.value,null,o,e):ll(t,r.textContent,r.innerHTML,o,e)},50)}function ll(t,e,n,r,o){let i=uv(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,o,i||we.empty)))return!0;if(!i)return!1;let s=yA(i),l=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(i);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function wv(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}On.paste=(t,e)=>{let n=e;if(t.composing&&!zr)return;let r=sl?null:n.clipboardData,o=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&ll(t,wv(r),r.getData("text/html"),o,n)?n.preventDefault():bA(t,n)};class Sv{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const kv=Zn?"altKey":"ctrlKey";En.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,i=o.empty?null:t.posAtCoords(_c(n)),s;if(!(i&&i.pos>=o.from&&i.pos<=(o instanceof De?o.to-1:o.to))){if(r&&r.mightDrag)s=De.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(s=De.create(t.state.doc,d.posBefore))}}let l=(s||t.state.selection).content(),{dom:a,text:c,slice:u}=Rf(t,l);(!n.dataTransfer.files.length||!un||Jb>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(sl?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",sl||n.dataTransfer.setData("text/plain",c),t.dragging=new Sv(u,!n[kv],s)};En.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};On.dragover=On.dragenter=(t,e)=>e.preventDefault();On.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords(_c(n));if(!o)return;let i=t.state.doc.resolve(o.pos),s=r&&r.slice;s?t.someProp("transformPasted",g=>{s=g(s,t)}):s=uv(t,wv(n.dataTransfer),sl?null:n.dataTransfer.getData("text/html"),!1,i);let l=!!(r&&!n[kv]);if(t.someProp("handleDrop",g=>g(t,n,s||we.empty,l))){n.preventDefault();return}if(!s)return;n.preventDefault();let a=s?Fb(t.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let c=t.state.tr;if(l){let{node:g}=r;g?g.replace(c):c.deleteSelection()}let u=c.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(h))return;let m=c.doc.resolve(u);if(d&&De.isSelectable(s.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new De(m));else{let g=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((b,k,T,A)=>g=A),c.setSelection(Bf(t,m,c.doc.resolve(g)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};En.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Jr(t)},20))};En.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};En.beforeinput=(t,e)=>{if(un&&zr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,Ho(8,"Backspace")))))return;let{$cursor:o}=t.state.selection;o&&o.pos>0&&t.dispatch(t.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let t in On)En[t]=On[t];function al(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Za{constructor(e,n){this.toDOM=e,this.spec=n||Qo,this.side=this.spec.side||0}map(e,n,r,o){let{pos:i,deleted:s}=e.mapResult(n.from+o,this.side<0?-1:1);return s?null:new tr(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Za&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&al(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class So{constructor(e,n){this.attrs=e,this.spec=n||Qo}map(e,n,r,o){let i=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return i>=s?null:new tr(i,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof So&&al(this.attrs,e.attrs)&&al(this.spec,e.spec)}static is(e){return e.type instanceof So}destroy(){}}class jf{constructor(e,n){this.attrs=e,this.spec=n||Qo}map(e,n,r,o){let i=e.mapResult(n.from+o,1);if(i.deleted)return null;let s=e.mapResult(n.to+o,-1);return s.deleted||s.pos<=i.pos?null:new tr(i.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),i;return o==n.from&&!(i=e.child(r)).isText&&o+i.nodeSize==n.to}eq(e){return this==e||e instanceof jf&&al(this.attrs,e.attrs)&&al(this.spec,e.spec)}destroy(){}}class tr{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new tr(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new tr(e,e,new Za(n,r))}static inline(e,n,r,o){return new tr(e,n,new So(r,o))}static node(e,n,r,o){return new tr(e,n,new jf(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof So}get widget(){return this.type instanceof Za}}const Ai=[],Qo={};class Ft{constructor(e,n){this.local=e.length?e:Ai,this.children=n.length?n:Ai}static create(e,n){return n.length?Qa(n,e,0,Qo):rn}find(e,n,r){let o=[];return this.findInner(e??0,n??1e9,o,0,r),o}findInner(e,n,r,o,i){for(let s=0;s<this.local.length;s++){let l=this.local[s];l.from<=n&&l.to>=e&&(!i||i(l.spec))&&r.push(l.copy(l.from+o,l.to+o))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let l=this.children[s]+1;this.children[s+2].findInner(e-l,n-l,r,o+l,i)}}map(e,n,r){return this==rn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Qo)}mapInner(e,n,r,o,i){let s;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,o);a&&a.type.valid(n,a)?(s||(s=[])).push(a):i.onRemove&&i.onRemove(this.local[l].spec)}return this.children.length?vA(this.children,s||[],e,n,r,o,i):s?new Ft(s.sort(ei),Ai):rn}add(e,n){return n.length?this==rn?Ft.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,i=0;e.forEach((l,a)=>{let c=a+r,u;if(u=Cv(n,l,c)){for(o||(o=this.children.slice());i<o.length&&o[i]<a;)i+=3;o[i]==a?o[i+2]=o[i+2].addInner(l,u,c+1):o.splice(i,0,a,a+l.nodeSize,Qa(u,l,c+1,Qo)),i+=3}});let s=xv(i?Tv(n):n,-r);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||s.splice(l--,1);return new Ft(s.length?this.local.concat(s).sort(ei):this.local,o||this.children)}remove(e){return e.length==0||this==rn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let i=0;i<r.length;i+=3){let s,l=r[i]+n,a=r[i+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>l&&d.to<a&&(e[u]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[i+2].removeInner(s,l+1);c!=rn?r[i+2]=c:(r.splice(i,3),i-=3)}if(o.length){for(let i=0,s;i<e.length;i++)if(s=e[i])for(let l=0;l<o.length;l++)o[l].eq(s,n)&&(o==this.local&&(o=this.local.slice()),o.splice(l--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new Ft(o,r):rn}forChild(e,n){if(this==rn)return this;if(n.isLeaf)return Ft.empty;let r,o;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let i=e+1,s=i+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<s&&a.to>i&&a.type instanceof So){let c=Math.max(i,a.from)-i,u=Math.min(s,a.to)-i;c<u&&(o||(o=[])).push(a.copy(c,u))}}if(o){let l=new Ft(o.sort(ei),Ai);return r?new fo([l,r]):l}return r||rn}eq(e){if(this==e)return!0;if(!(e instanceof Ft)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Hf(this.localsInner(e))}localsInner(e){if(this==rn)return Ai;if(e.inlineContent||!this.local.some(So.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof So||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Ft.empty=new Ft([],[]);Ft.removeOverlap=Hf;const rn=Ft.empty;class fo{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,Qo));return fo.from(r)}forChild(e,n){if(n.isLeaf)return Ft.empty;let r=[];for(let o=0;o<this.members.length;o++){let i=this.members[o].forChild(e,n);i!=rn&&(i instanceof fo?r=r.concat(i.members):r.push(i))}return fo.from(r)}eq(e){if(!(e instanceof fo)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let i=this.members[o].localsInner(e);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let s=0;s<i.length;s++)n.push(i[s])}}return n?Hf(r?n:n.sort(ei)):Ai}static from(e){switch(e.length){case 0:return rn;case 1:return e[0];default:return new fo(e.every(n=>n instanceof Ft)?e:e.reduce((n,r)=>n.concat(r instanceof Ft?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function vA(t,e,n,r,o,i,s){let l=t.slice();for(let c=0,u=i;c<n.maps.length;c++){let d=0;n.maps[c].forEach((h,m,g,b)=>{let k=b-g-(m-h);for(let T=0;T<l.length;T+=3){let A=l[T+1];if(A<0||h>A+u-d)continue;let N=l[T]+u-d;m>=N?l[T+1]=h<=N?-2:-1:h>=u&&k&&(l[T]+=k,l[T+1]+=k)}d+=k}),u=n.maps[c].map(u,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let u=n.map(t[c]+i),d=u-o;if(d<0||d>=r.content.size){a=!0;continue}let h=n.map(t[c+1]+i,-1),m=h-o,{index:g,offset:b}=r.content.findIndex(d),k=r.maybeChild(g);if(k&&b==d&&b+k.nodeSize==m){let T=l[c+2].mapInner(n,k,u+1,t[c]+i+1,s);T!=rn?(l[c]=d,l[c+1]=m,l[c+2]=T):(l[c+1]=-2,a=!0)}else a=!0}if(a){let c=wA(l,t,e,n,o,i,s),u=Qa(c,r,0,s);e=u.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let m=u.children[d];for(;h<l.length&&l[h]<m;)h+=3;l.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new Ft(e.sort(ei),l)}function xv(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new tr(o.from+e,o.to+e,o.type))}return n}function wA(t,e,n,r,o,i,s){function l(a,c){for(let u=0;u<a.local.length;u++){let d=a.local[u].map(r,o,c);d?n.push(d):s.onRemove&&s.onRemove(a.local[u].spec)}for(let u=0;u<a.children.length;u+=3)l(a.children[u+2],a.children[u]+c+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+i+1);return n}function Cv(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let i=0,s;i<t.length;i++)(s=t[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),t[i]=null);return o}function Tv(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Qa(t,e,n,r){let o=[],i=!1;e.forEach((l,a)=>{let c=Cv(t,l,a+n);if(c){i=!0;let u=Qa(c,l,n+a+1,r);u!=rn&&o.push(a,a+l.nodeSize,u)}});let s=xv(i?Tv(t):t,-n).sort(ei);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||(r.onRemove&&r.onRemove(s[l].spec),s.splice(l--,1));return s.length||o.length?new Ft(s,o):rn}function ei(t,e){return t.from-e.from||t.to-e.to}function Hf(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let i=e[o];if(i.from==r.from){i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),Cm(e,o+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),Cm(e,o,r.copy(i.from,r.to)));break}}}return e}function Cm(t,e,n){for(;e<t.length&&ei(n,t[e])>0;)e++;t.splice(e,0,n)}function Mu(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=rn&&e.push(r)}),t.cursorWrapper&&e.push(Ft.create(t.state.doc,[t.cursorWrapper.deco])),fo.from(e)}const SA={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},kA=In&&vo<=11;class xA{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class CA{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new xA,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);In&&vo<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),kA&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,SA)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(gm(this.view)){if(this.suppressingSelectionUpdates)return Jr(this.view);if(In&&vo<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&li(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let i=e.focusNode;i;i=Zi(i))n.add(i);for(let i=e.anchorNode;i;i=Zi(i))if(n.has(i)){r=i;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&gm(e)&&!this.ignoreSelectionChange(r),i=-1,s=-1,l=!1,a=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],a);d&&(i=i<0?d.from:Math.min(d.from,i),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(l=!0))}if(mr&&a.length){let u=a.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,h]=u;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of u){let m=h.parentNode;m&&m.nodeName=="LI"&&(!d||OA(e,d)!=m)&&h.remove()}}}let c=null;i<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ac(r)&&(c=If(e))&&c.eq(Je.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Jr(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||o)&&(i>-1&&(e.docView.markDirty(i,s),TA(e)),this.handleDOMChange(i,s,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Jr(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,i=e.nextSibling;if(In&&vo<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h)}let s=o&&o.parentNode==e.target?Zt(o)+1:0,l=r.localPosFromDOM(e.target,s,-1),a=i&&i.parentNode==e.target?Zt(i):e.target.childNodes.length,c=r.localPosFromDOM(e.target,a,1);return{from:l,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Tm=new WeakMap,Em=!1;function TA(t){if(!Tm.has(t)&&(Tm.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=mr,Em)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Em=!0}}function Om(t,e){let n=e.startContainer,r=e.startOffset,o=e.endContainer,i=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return li(s.node,s.offset,o,i)&&([n,r,o,i]=[o,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}}function EA(t,e){if(e.getComposedRanges){let o=e.getComposedRanges(t.root)[0];if(o)return Om(t,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Om(t,n):null}function OA(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function AA(t,e,n){let{node:r,fromOffset:o,toOffset:i,from:s,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),c,u=a.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:a.anchorOffset}],Ac(a)||c.push({node:a.focusNode,offset:a.focusOffset})),un&&t.input.lastKeyCode===8)for(let k=i;k>o;k--){let T=r.childNodes[k-1],A=T.pmViewDesc;if(T.nodeName=="BR"&&!A){i=k;break}if(!A||A.size)break}let d=t.state.doc,h=t.someProp("domParser")||js.fromSchema(t.state.schema),m=d.resolve(s),g=null,b=h.parse(r,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:o,to:i,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:MA,context:m});if(c&&c[0].pos!=null){let k=c[0].pos,T=c[1]&&c[1].pos;T==null&&(T=k),g={anchor:k+s,head:T+s}}return{doc:b,sel:g,from:s,to:l}}function MA(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Tn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Tn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const _A=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function NA(t,e,n,r,o){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let E=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,S=If(t,E);if(S&&!t.state.selection.eq(S)){if(un&&zr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",C=>C(t,Ho(13,"Enter"))))return;let F=t.state.tr.setSelection(S);E=="pointer"?F.setMeta("pointer",!0):E=="key"&&F.scrollIntoView(),i&&F.setMeta("composition",i),t.dispatch(F)}return}let s=t.state.doc.resolve(e),l=s.sharedDepth(n);e=s.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,c=AA(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),h,m;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,m="end"):(h=t.state.selection.from,m="start"),t.input.lastKeyCode=null;let g=DA(d.content,c.doc.content,c.from,h,m);if(g&&t.input.domChangeCount++,(Qi&&t.input.lastIOSEnter>Date.now()-225||zr)&&o.some(E=>E.nodeType==1&&!_A.test(E.nodeName))&&(!g||g.endA>=g.endB)&&t.someProp("handleKeyDown",E=>E(t,Ho(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!g)if(r&&a instanceof ze&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))g={start:a.from,endA:a.to,endB:a.to};else{if(c.sel){let E=Am(t,t.state.doc,c.sel);if(E&&!E.eq(t.state.selection)){let S=t.state.tr.setSelection(E);i&&S.setMeta("composition",i),t.dispatch(S)}}return}t.state.selection.from<t.state.selection.to&&g.start==g.endB&&t.state.selection instanceof ze&&(g.start>t.state.selection.from&&g.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?g.start=t.state.selection.from:g.endA<t.state.selection.to&&g.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(g.endB+=t.state.selection.to-g.endA,g.endA=t.state.selection.to)),In&&vo<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>c.from&&c.doc.textBetween(g.start-c.from-1,g.start-c.from+1)=="  "&&(g.start--,g.endA--,g.endB--);let b=c.doc.resolveNoCache(g.start-c.from),k=c.doc.resolveNoCache(g.endB-c.from),T=u.resolve(g.start),A=b.sameParent(k)&&b.parent.inlineContent&&T.end()>=g.endA,N;if((Qi&&t.input.lastIOSEnter>Date.now()-225&&(!A||o.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!A&&b.pos<c.doc.content.size&&!b.sameParent(k)&&(N=Je.findFrom(c.doc.resolve(b.pos+1),1,!0))&&N.head==k.pos)&&t.someProp("handleKeyDown",E=>E(t,Ho(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>g.start&&$A(u,g.start,g.endA,b,k)&&t.someProp("handleKeyDown",E=>E(t,Ho(8,"Backspace")))){zr&&un&&t.domObserver.suppressSelectionUpdates();return}un&&g.endB==g.start&&(t.input.lastChromeDelete=Date.now()),zr&&!A&&b.start()!=k.start()&&k.parentOffset==0&&b.depth==k.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==g.endA&&(g.endB-=2,k=c.doc.resolveNoCache(g.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(E){return E(t,Ho(13,"Enter"))})},20));let B=g.start,D=g.endA,V,j,K;if(A){if(b.pos==k.pos)In&&vo<=11&&b.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Jr(t),20)),V=t.state.tr.delete(B,D),j=u.resolve(g.start).marksAcross(u.resolve(g.endA));else if(g.endA==g.endB&&(K=PA(b.parent.content.cut(b.parentOffset,k.parentOffset),T.parent.content.cut(T.parentOffset,g.endA-T.start()))))V=t.state.tr,K.type=="add"?V.addMark(B,D,K.mark):V.removeMark(B,D,K.mark);else if(b.parent.child(b.index()).isText&&b.index()==k.index()-(k.textOffset?0:1)){let E=b.parent.textBetween(b.parentOffset,k.parentOffset);if(t.someProp("handleTextInput",S=>S(t,B,D,E)))return;V=t.state.tr.insertText(E,B,D)}}if(V||(V=t.state.tr.replace(B,D,c.doc.slice(g.start-c.from,g.endB-c.from))),c.sel){let E=Am(t,V.doc,c.sel);E&&!(un&&t.composing&&E.empty&&(g.start!=g.endB||t.input.lastChromeDelete<Date.now()-100)&&(E.head==B||E.head==V.mapping.map(D)-1)||In&&E.empty&&E.head==B)&&V.setSelection(E)}j&&V.ensureMarks(j),i&&V.setMeta("composition",i),t.dispatch(V.scrollIntoView())}function Am(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Bf(t,e.resolve(n.anchor),e.resolve(n.head))}function PA(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,i=r,s,l,a;for(let u=0;u<r.length;u++)o=r[u].removeFromSet(o);for(let u=0;u<n.length;u++)i=n[u].removeFromSet(i);if(o.length==1&&i.length==0)l=o[0],s="add",a=u=>u.mark(l.addToSet(u.marks));else if(o.length==0&&i.length==1)l=i[0],s="remove",a=u=>u.mark(l.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(a(e.child(u)));if(ne.from(c).eq(t))return{mark:l,type:s}}function $A(t,e,n,r,o){if(n-e<=o.pos-r.pos||_u(r,!0,!1)<o.pos)return!1;let i=t.resolve(e);if(!r.parent.isTextblock){let l=i.nodeAfter;return l!=null&&n==e+l.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=t.resolve(_u(i,!0,!0));return!s.parent.isTextblock||s.pos>n||_u(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function _u(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let i=t.node(r).maybeChild(t.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,o++}return o}function DA(t,e,n,r,o){let i=t.findDiffStart(e,n);if(i==null)return null;let{a:s,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let a=Math.max(0,i-Math.min(s,l));r-=s+a-i}if(s<i&&t.size<e.size){let a=r<=i&&r>=s?i-r:0;i-=a,i&&i<e.size&&Mm(e.textBetween(i-1,i+1))&&(i+=a?1:-1),l=i+(l-s),s=i}else if(l<i){let a=r<=i&&r>=l?i-r:0;i-=a,i&&i<t.size&&Mm(t.textBetween(i-1,i+1))&&(i+=a?1:-1),s=i+(s-l),l=i}return{start:i,endA:s,endB:l}}function Mm(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class IA{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new eA,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Dm),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Pm(this),Nm(this),this.nodeViews=$m(this),this.docView=um(this.state.doc,_m(this),Mu(this),this.dom,this),this.domObserver=new CA(this,(r,o,i,s)=>NA(this,r,o,i,s)),this.domObserver.start(),tA(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Kd(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Dm),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let o=this.state,i=!1,s=!1;e.storedMarks&&this.composing&&(vv(this),s=!0),this.state=e;let l=o.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let m=$m(this);RA(m,this.nodeViews)&&(this.nodeViews=m,i=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&Kd(this),this.editable=Pm(this),Nm(this);let a=Mu(this),c=_m(this),u=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",d=i||!this.docView.matchesNode(e.doc,c,a);(d||!e.selection.eq(o.selection))&&(s=!0);let h=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&mO(this);if(s){this.domObserver.stop();let m=d&&(In||un)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&BA(o.selection,e.selection);if(d){let g=un?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=pA(this)),(i||!this.docView.update(e.doc,c,a,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=um(e.doc,c,a,this.dom,this)),g&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&VO(this))?Jr(this,m):(lv(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&gO(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof De){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&om(this,n.getBoundingClientRect(),e)}else om(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(o=i)}this.dragging=new Sv(e.slice,e.move,o<0?void 0:De.create(this.state.doc,o))}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let s=0;s<this.directPlugins.length;s++){let l=this.directPlugins[s].props[e];if(l!=null&&(o=n?n(l):l))return o}let i=this.state.plugins;if(i)for(let s=0;s<i.length;s++){let l=i[s].props[e];if(l!=null&&(o=n?n(l):l))return o}}hasFocus(){if(In){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&yO(this.dom),Jr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return kO(this,e)}coordsAtPos(e,n=1){return Qb(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return OO(this,n||this.state,e)}pasteHTML(e,n){return ll(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return ll(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Rf(this,e)}destroy(){this.docView&&(nA(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Mu(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,oO())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return oA(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Tn&&this.root.nodeType===11&&cO(this.dom.ownerDocument)==this.dom&&EA(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function _m(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[tr.node(0,t.state.doc.content.size,e)]}function Nm(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:tr.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Pm(t){return!t.someProp("editable",e=>e(t.state)===!1)}function BA(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function $m(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function RA(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function Dm(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Eo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ec={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},LA=typeof navigator<"u"&&/Mac/.test(navigator.platform),VA=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Qt=0;Qt<10;Qt++)Eo[48+Qt]=Eo[96+Qt]=String(Qt);for(var Qt=1;Qt<=24;Qt++)Eo[Qt+111]="F"+Qt;for(var Qt=65;Qt<=90;Qt++)Eo[Qt]=String.fromCharCode(Qt+32),ec[Qt]=String.fromCharCode(Qt);for(var Nu in Eo)ec.hasOwnProperty(Nu)||(ec[Nu]=Eo[Nu]);function FA(t){var e=LA&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||VA&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?ec:Eo)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const jA=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function HA(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,i,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))o=!0;else if(/^s(hift)?$/i.test(a))i=!0;else if(/^mod$/i.test(a))jA?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),s&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function zA(t){let e=Object.create(null);for(let n in t)e[HA(n)]=t[n];return e}function Pu(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function KA(t){return new Rn({props:{handleKeyDown:Ev(t)}})}function Ev(t){let e=zA(t);return function(n,r){let o=FA(r),i,s=e[Pu(o,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let l=e[Pu(o,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||o.charCodeAt(0)>127)&&(i=Eo[r.keyCode])&&i!=o){let l=e[Pu(i,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const zf=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Ov(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const Av=(t,e,n)=>{let r=Ov(t,n);if(!r)return!1;let o=Kf(r);if(!o){let s=r.blockRange(),l=s&&ss(s);return l==null?!1:(e&&e(t.tr.lift(s,l).scrollIntoView()),!0)}let i=o.nodeBefore;if(Rv(t,o,e,-1))return!0;if(r.parent.content.size==0&&(es(i,"end")||De.isSelectable(i)))for(let s=r.depth;;s--){let l=Ec(t.doc,r.before(s),r.after(s),we.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(es(i,"end")?Je.findFrom(a.doc.resolve(a.mapping.map(o.pos,-1)),-1):De.create(a.doc,o.pos-i.nodeSize)),e(a.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return i.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-i.nodeSize,o.pos).scrollIntoView()),!0):!1},UA=(t,e,n)=>{let r=Ov(t,n);if(!r)return!1;let o=Kf(r);return o?Mv(t,o,e):!1},WA=(t,e,n)=>{let r=Nv(t,n);if(!r)return!1;let o=Uf(r);return o?Mv(t,o,e):!1};function Mv(t,e,n){let r=e.nodeBefore,o=r,i=e.pos-1;for(;!o.isTextblock;i--){if(o.type.spec.isolating)return!1;let u=o.lastChild;if(!u)return!1;o=u}let s=e.nodeAfter,l=s,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let u=l.firstChild;if(!u)return!1;l=u}let c=Ec(t.doc,i,a,we.empty);if(!c||c.from!=i||c instanceof zt&&c.slice.size>=a-i)return!1;if(n){let u=t.tr.step(c);u.setSelection(ze.create(u.doc,i)),n(u.scrollIntoView())}return!0}function es(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const _v=(t,e,n)=>{let{$head:r,empty:o}=t.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;i=Kf(r)}let s=i&&i.nodeBefore;return!s||!De.isSelectable(s)?!1:(e&&e(t.tr.setSelection(De.create(t.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)};function Kf(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Nv(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Pv=(t,e,n)=>{let r=Nv(t,n);if(!r)return!1;let o=Uf(r);if(!o)return!1;let i=o.nodeAfter;if(Rv(t,o,e,1))return!0;if(r.parent.content.size==0&&(es(i,"start")||De.isSelectable(i))){let s=Ec(t.doc,r.before(),r.after(),we.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=t.tr.step(s);l.setSelection(es(i,"start")?Je.findFrom(l.doc.resolve(l.mapping.map(o.pos)),1):De.create(l.doc,l.mapping.map(o.pos))),e(l.scrollIntoView())}return!0}}return i.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0):!1},$v=(t,e,n)=>{let{$head:r,empty:o}=t.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;i=Uf(r)}let s=i&&i.nodeAfter;return!s||!De.isSelectable(s)?!1:(e&&e(t.tr.setSelection(De.create(t.doc,i.pos)).scrollIntoView()),!0)};function Uf(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const qA=(t,e)=>{let n=t.selection,r=n instanceof De,o;if(r){if(n.node.isTextblock||!_o(t.doc,n.from))return!1;o=n.from}else if(o=Tc(t.doc,n.from,-1),o==null)return!1;if(e){let i=t.tr.join(o);r&&i.setSelection(De.create(i.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},JA=(t,e)=>{let n=t.selection,r;if(n instanceof De){if(n.node.isTextblock||!_o(t.doc,n.to))return!1;r=n.to}else if(r=Tc(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},GA=(t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),i=o&&ss(o);return i==null?!1:(e&&e(t.tr.lift(o,i).scrollIntoView()),!0)},Dv=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Wf(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const YA=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),i=n.indexAfter(-1),s=Wf(o.contentMatchAt(i));if(!s||!o.canReplaceWith(i,i,s))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,s.createAndFill());a.setSelection(Je.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},Iv=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof Jn||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=Wf(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,l=t.tr.insert(s,i.createAndFill());l.setSelection(ze.create(l.doc,s+1)),e(l.scrollIntoView())}return!0},Bv=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(qr(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),o=r&&ss(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)};function XA(t){return(e,n)=>{let{$from:r,$to:o}=e.selection;if(e.selection instanceof De&&e.selection.node.isBlock)return!r.parentOffset||!qr(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],s,l,a=!1,c=!1;for(let m=r.depth;;m--)if(r.node(m).isBlock){a=r.end(m)==r.pos+(r.depth-m),c=r.start(m)==r.pos-(r.depth-m),l=Wf(r.node(m-1).contentMatchAt(r.indexAfter(m-1))),i.unshift(a&&l?{type:l}:null),s=m;break}else{if(m==1)return!1;i.unshift(null)}let u=e.tr;(e.selection instanceof ze||e.selection instanceof Jn)&&u.deleteSelection();let d=u.mapping.map(r.pos),h=qr(u.doc,d,i.length,i);if(h||(i[0]=l?{type:l}:null,h=qr(u.doc,d,i.length,i)),u.split(d,i.length,i),!a&&c&&r.node(s).type!=l){let m=u.mapping.map(r.before(s)),g=u.doc.resolve(m);l&&r.node(s-1).canReplaceWith(g.index(),g.index()+1,l)&&u.setNodeMarkup(u.mapping.map(r.before(s)),l)}return n&&n(u.scrollIntoView()),!0}}const ZA=XA(),QA=(t,e)=>{let{$from:n,to:r}=t.selection,o,i=n.sharedDepth(r);return i==0?!1:(o=n.before(i),e&&e(t.tr.setSelection(De.create(t.doc,o))),!0)};function eM(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,i=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(o.isTextblock||_o(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function Rv(t,e,n,r){let o=e.nodeBefore,i=e.nodeAfter,s,l,a=o.type.spec.isolating||i.type.spec.isolating;if(!a&&eM(t,e,n))return!0;let c=!a&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(l=o.contentMatchAt(o.childCount)).findWrapping(i.type))&&l.matchType(s[0]||i.type).validEnd){if(n){let m=e.pos+i.nodeSize,g=ne.empty;for(let T=s.length-1;T>=0;T--)g=ne.from(s[T].create(null,g));g=ne.from(o.copy(g));let b=t.tr.step(new Kt(e.pos-1,m,e.pos,m,new we(g,1,0),s.length,!0)),k=b.doc.resolve(m+2*s.length);k.nodeAfter&&k.nodeAfter.type==o.type&&_o(b.doc,k.pos)&&b.join(k.pos),n(b.scrollIntoView())}return!0}let u=i.type.spec.isolating||r>0&&a?null:Je.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),h=d&&ss(d);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(d,h).scrollIntoView()),!0;if(c&&es(i,"start",!0)&&es(o,"end")){let m=o,g=[];for(;g.push(m),!m.isTextblock;)m=m.lastChild;let b=i,k=1;for(;!b.isTextblock;b=b.firstChild)k++;if(m.canReplace(m.childCount,m.childCount,b.content)){if(n){let T=ne.empty;for(let N=g.length-1;N>=0;N--)T=ne.from(g[N].copy(T));let A=t.tr.step(new Kt(e.pos-g.length,e.pos+i.nodeSize,e.pos+k,e.pos+i.nodeSize-k,new we(T,g.length,0),0,!0));n(A.scrollIntoView())}return!0}}return!1}function Lv(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return o.node(i).isTextblock?(n&&n(e.tr.setSelection(ze.create(e.doc,t<0?o.start(i):o.end(i)))),!0):!1}}const tM=Lv(-1),nM=Lv(1);function rM(t,e=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i),l=s&&Pf(s,t,e);return l?(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0):!1}}function Im(t,e=null){return function(n,r){let o=!1;for(let i=0;i<n.selection.ranges.length&&!o;i++){let{$from:{pos:s},$to:{pos:l}}=n.selection.ranges[i];n.doc.nodesBetween(s,l,(a,c)=>{if(o)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)o=!0;else{let u=n.doc.resolve(c),d=u.index();o=u.parent.canReplaceWith(d,d+1,t)}})}if(!o)return!1;if(r){let i=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[s];i.setBlockType(l,a,t,e)}r(i.scrollIntoView())}return!0}}function qf(...t){return function(e,n,r){for(let o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}qf(zf,Av,_v);qf(zf,Pv,$v);qf(Dv,Iv,Bv,ZA);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function oM(t,e=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i);if(!s)return!1;let l=r?n.tr:null;return iM(l,s,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function iM(t,e,n,r=null){let o=!1,i=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=s.resolve(e.start-2);i=new qa(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new qa(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let l=Pf(i,n,r,e);return l?(t&&sM(t,e,l,o,n),!0):!1}function sM(t,e,n,r,o){let i=ne.empty;for(let u=n.length-1;u>=0;u--)i=ne.from(n[u].type.create(n[u].attrs,i));t.step(new Kt(e.start-(r?2:0),e.end,e.start,e.end,new we(i,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==o&&(s=u+1);let l=n.length-s,a=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,h=!0;u<d;u++,h=!1)!h&&qr(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=c.child(u).nodeSize;return t}function lM(t){return function(e,n){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,s=>s.childCount>0&&s.firstChild.type==t);return i?n?r.node(i.depth-1).type==t?aM(e,n,t,i):cM(e,n,i):!0:!1}}function aM(t,e,n,r){let o=t.tr,i=r.end,s=r.$to.end(r.depth);i<s&&(o.step(new Kt(i-1,s,i,s,new we(ne.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new qa(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth));const l=ss(r);if(l==null)return!1;o.lift(r,l);let a=o.doc.resolve(o.mapping.map(i,-1)-1);return _o(o.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&o.join(a.pos),e(o.scrollIntoView()),!0}function cM(t,e,n){let r=t.tr,o=n.parent;for(let m=n.end,g=n.endIndex-1,b=n.startIndex;g>b;g--)m-=o.child(g).nodeSize,r.delete(m-1,m+1);let i=r.doc.resolve(n.start),s=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==o.childCount,c=i.node(-1),u=i.index(-1);if(!c.canReplace(u+(l?0:1),u+1,s.content.append(a?ne.empty:ne.from(o))))return!1;let d=i.pos,h=d+s.nodeSize;return r.step(new Kt(d-(l?1:0),h+(a?1:0),d+1,h-1,new we((l?ne.empty:ne.from(o.copy(ne.empty))).append(a?ne.empty:ne.from(o.copy(ne.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function uM(t){return function(e,n){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==t);if(!i)return!1;let s=i.startIndex;if(s==0)return!1;let l=i.parent,a=l.child(s-1);if(a.type!=t)return!1;if(n){let c=a.lastChild&&a.lastChild.type==l.type,u=ne.from(c?t.create():null),d=new we(ne.from(t.create(null,ne.from(l.type.create(null,u)))),c?3:1,0),h=i.start,m=i.end;n(e.tr.step(new Kt(h-(c?3:1),m,h,m,d,1,!0)).scrollIntoView())}return!0}}function Nc(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:i}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}}}class Pc{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:o}=n,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...u)=>{const d=a(...u)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,l=[],a=!!e,c=e||i.tr,u=()=>(!a&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),l.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,m])=>[h,(...b)=>{const k=this.buildProps(c,n),T=m(...b)(k);return l.push(T),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,o=!1,i=e||r.tr,s=this.buildProps(i,o);return{...Object.fromEntries(Object.entries(n).map(([a,c])=>[a,(...u)=>c(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,o)}}buildProps(e,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,l={tr:e,editor:o,view:s,state:Nc({state:i,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,c])=>[a,(...u)=>c(...u)(l)]))}};return l}}class dM{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e]),this}once(e,n){const r=(...o)=>{this.off(e,r),n.apply(this,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function Ce(t,e,n){return t.config[e]===void 0&&t.parent?Ce(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Ce(t.parent,e,n):null}):t.config[e]}function $c(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function Vv(t){const e=[],{nodeExtensions:n,markExtensions:r}=$c(t),o=[...n,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage,extensions:o},a=Ce(s,"addGlobalAttributes",l);if(!a)return;a().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([h,m])=>{e.push({type:d,name:h,attribute:{...i,...m}})})})})}),o.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=Ce(s,"addAttributes",l);if(!a)return;const c=a();Object.entries(c).forEach(([u,d])=>{const h={...i,...d};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:s.name,name:u,attribute:h})})}),e}function Wt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function An(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,i])=>{if(!r[o]){r[o]=i;return}if(o==="class"){const l=i?String(i).split(" "):[],a=r[o]?r[o].split(" "):[],c=l.filter(u=>!a.includes(u));r[o]=[...a,...c].join(" ")}else if(o==="style"){const l=i?i.split(";").map(u=>u.trim()).filter(Boolean):[],a=r[o]?r[o].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;a.forEach(u=>{const[d,h]=u.split(":").map(m=>m.trim());c.set(d,h)}),l.forEach(u=>{const[d,h]=u.split(":").map(m=>m.trim());c.set(d,h)}),r[o]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[o]=i}),r},{})}function Ud(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>An(n,r),{})}function Fv(t){return typeof t=="function"}function Ye(t,e=void 0,...n){return Fv(t)?e?t.bind(e)(...n):t(...n):t}function fM(t={}){return Object.keys(t).length===0&&t.constructor===Object}function hM(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Bm(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((i,s)=>{const l=s.attribute.parseHTML?s.attribute.parseHTML(n):hM(n.getAttribute(s.name));return l==null?i:{...i,[s.name]:l}},{});return{...r,...o}}}}function Rm(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&fM(n)?!1:n!=null))}function pM(t,e){var n;const r=Vv(t),{nodeExtensions:o,markExtensions:i}=$c(t),s=(n=o.find(c=>Ce(c,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(o.map(c=>{const u=r.filter(T=>T.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((T,A)=>{const N=Ce(A,"extendNodeSchema",d);return{...T,...N?N(c):{}}},{}),m=Rm({...h,content:Ye(Ce(c,"content",d)),marks:Ye(Ce(c,"marks",d)),group:Ye(Ce(c,"group",d)),inline:Ye(Ce(c,"inline",d)),atom:Ye(Ce(c,"atom",d)),selectable:Ye(Ce(c,"selectable",d)),draggable:Ye(Ce(c,"draggable",d)),code:Ye(Ce(c,"code",d)),whitespace:Ye(Ce(c,"whitespace",d)),linebreakReplacement:Ye(Ce(c,"linebreakReplacement",d)),defining:Ye(Ce(c,"defining",d)),isolating:Ye(Ce(c,"isolating",d)),attrs:Object.fromEntries(u.map(T=>{var A;return[T.name,{default:(A=T==null?void 0:T.attribute)===null||A===void 0?void 0:A.default}]}))}),g=Ye(Ce(c,"parseHTML",d));g&&(m.parseDOM=g.map(T=>Bm(T,u)));const b=Ce(c,"renderHTML",d);b&&(m.toDOM=T=>b({node:T,HTMLAttributes:Ud(T,u)}));const k=Ce(c,"renderText",d);return k&&(m.toText=k),[c.name,m]})),a=Object.fromEntries(i.map(c=>{const u=r.filter(k=>k.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((k,T)=>{const A=Ce(T,"extendMarkSchema",d);return{...k,...A?A(c):{}}},{}),m=Rm({...h,inclusive:Ye(Ce(c,"inclusive",d)),excludes:Ye(Ce(c,"excludes",d)),group:Ye(Ce(c,"group",d)),spanning:Ye(Ce(c,"spanning",d)),code:Ye(Ce(c,"code",d)),attrs:Object.fromEntries(u.map(k=>{var T;return[k.name,{default:(T=k==null?void 0:k.attribute)===null||T===void 0?void 0:T.default}]}))}),g=Ye(Ce(c,"parseHTML",d));g&&(m.parseDOM=g.map(k=>Bm(k,u)));const b=Ce(c,"renderHTML",d);return b&&(m.toDOM=k=>b({mark:k,HTMLAttributes:Ud(k,u)})),[c.name,m]}));return new Mb({topNode:s,nodes:l,marks:a})}function $u(t,e){return e.nodes[t]||e.marks[t]||null}function Lm(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Jf(t,e){const n=di.fromSchema(e).serializeFragment(t),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}const mM=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(o,i,s,l)=>{var a,c;const u=((c=(a=o.type.spec).toText)===null||c===void 0?void 0:c.call(a,{node:o,pos:i,parent:s,index:l}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?u:u.slice(0,Math.max(0,r-i))}),n};function Gf(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Dc{constructor(e){this.find=e.find,this.handler=e.handler}}const gM=(t,e)=>{if(Gf(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function zl(t){var e;const{editor:n,from:r,to:o,text:i,rules:s,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const c=a.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const d=mM(c)+i;return s.forEach(h=>{if(u)return;const m=gM(d,h.find);if(!m)return;const g=a.state.tr,b=Nc({state:a.state,transaction:g}),k={from:r-(m[0].length-i.length),to:o},{commands:T,chain:A,can:N}=new Pc({editor:n,state:b});h.handler({state:b,range:k,match:m,commands:T,chain:A,can:N})===null||!g.steps.length||(g.setMeta(l,{transform:g,from:r,to:o,text:i}),a.dispatch(g),u=!0)}),u}function yM(t){const{editor:e,rules:n}=t,r=new Rn({state:{init(){return null},apply(o,i,s){const l=o.getMeta(r);if(l)return l;const a=o.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:u}=a;typeof u=="string"?u=u:u=Jf(ne.from(u),s.schema);const{from:d}=a,h=d+u.length;zl({editor:e,from:d,to:h,text:u,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:i}},props:{handleTextInput(o,i,s,l){return zl({editor:e,from:i,to:s,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:i}=o.state.selection;i&&zl({editor:e,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,i){if(i.key!=="Enter")return!1;const{$cursor:s}=o.state.selection;return s?zl({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function bM(t){return Object.prototype.toString.call(t).slice(8,-1)}function Kl(t){return bM(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Ic(t,e){const n={...t};return Kl(t)&&Kl(e)&&Object.keys(e).forEach(r=>{Kl(e[r])&&Kl(t[r])?n[r]=Ic(t[r],e[r]):n[r]=e[r]}),n}class Oo{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ye(Ce(this,"addOptions",{name:this.name}))),this.storage=Ye(Ce(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Oo(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Ic(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Oo(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ye(Ce(n,"addOptions",{name:n.name})),n.storage=Ye(Ce(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const s=o.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const a=s.find(c=>(c==null?void 0:c.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}function vM(t){return typeof t=="number"}class wM{constructor(e){this.find=e.find,this.handler=e.handler}}const SM=(t,e,n)=>{if(Gf(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(o=>{const i=[o.text];return i.index=o.index,i.input=t,i.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(o.replaceWith)),i}):[]};function kM(t){const{editor:e,state:n,from:r,to:o,rule:i,pasteEvent:s,dropEvent:l}=t,{commands:a,chain:c,can:u}=new Pc({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,o,(m,g)=>{if(!m.isTextblock||m.type.spec.code)return;const b=Math.max(r,g),k=Math.min(o,g+m.content.size),T=m.textBetween(b-g,k-g,void 0,"￼");SM(T,i.find,s).forEach(N=>{if(N.index===void 0)return;const B=b+N.index+1,D=B+N[0].length,V={from:n.tr.mapping.map(B),to:n.tr.mapping.map(D)},j=i.handler({state:n,range:V,match:N,commands:a,chain:c,can:u,pasteEvent:s,dropEvent:l});d.push(j)})}),d.every(m=>m!==null)}let Ul=null;const xM=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function CM(t){const{editor:e,rules:n}=t;let r=null,o=!1,i=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const a=({state:u,from:d,to:h,rule:m,pasteEvt:g})=>{const b=u.tr,k=Nc({state:u,transaction:b});if(!(!kM({editor:e,state:k,from:Math.max(d-1,0),to:h.b-1,rule:m,pasteEvent:g,dropEvent:l})||!b.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,b}};return n.map(u=>new Rn({view(d){const h=g=>{var b;r=!((b=d.dom.parentElement)===null||b===void 0)&&b.contains(g.target)?d.dom.parentElement:null,r&&(Ul=e)},m=()=>{Ul&&(Ul=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",m),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",m)}}},props:{handleDOMEvents:{drop:(d,h)=>{if(i=r===d.dom.parentElement,l=h,!i){const m=Ul;m&&setTimeout(()=>{const g=m.state.selection;g&&m.commands.deleteRange({from:g.from,to:g.to})},10)}return!1},paste:(d,h)=>{var m;const g=(m=h.clipboardData)===null||m===void 0?void 0:m.getData("text/html");return s=h,o=!!(g!=null&&g.includes("data-pm-slice")),!1}}},appendTransaction:(d,h,m)=>{const g=d[0],b=g.getMeta("uiEvent")==="paste"&&!o,k=g.getMeta("uiEvent")==="drop"&&!i,T=g.getMeta("applyPasteRules"),A=!!T;if(!b&&!k&&!A)return;if(A){let{text:D}=T;typeof D=="string"?D=D:D=Jf(ne.from(D),m.schema);const{from:V}=T,j=V+D.length,K=xM(D);return a({rule:u,state:m,from:V,to:{b:j},pasteEvt:K})}const N=h.doc.content.findDiffStart(m.doc.content),B=h.doc.content.findDiffEnd(m.doc.content);if(!(!vM(N)||!B||N===B.b))return a({rule:u,state:m,from:N,to:B,pasteEvt:s})}}))}function TM(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class $i{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=$i.resolve(e),this.schema=pM(this.extensions,n),this.setupExtensions()}static resolve(e){const n=$i.sort($i.flatten(e)),r=TM(n.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},o=Ce(n,"addExtensions",r);return o?[n,...this.flatten(o())]:n}).flat(10)}static sort(e){return e.sort((r,o)=>{const i=Ce(r,"priority")||100,s=Ce(o,"priority")||100;return i>s?-1:i<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:$u(n.name,this.schema)},o=Ce(n,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,n=$i.sort([...this.extensions].reverse()),r=[],o=[],i=n.map(s=>{const l={name:s.name,options:s.options,storage:s.storage,editor:e,type:$u(s.name,this.schema)},a=[],c=Ce(s,"addKeyboardShortcuts",l);let u={};if(s.type==="mark"&&Ce(s,"exitable",l)&&(u.ArrowRight=()=>Oo.handleExit({editor:e,mark:s})),c){const b=Object.fromEntries(Object.entries(c()).map(([k,T])=>[k,()=>T({editor:e})]));u={...u,...b}}const d=KA(u);a.push(d);const h=Ce(s,"addInputRules",l);Lm(s,e.options.enableInputRules)&&h&&r.push(...h());const m=Ce(s,"addPasteRules",l);Lm(s,e.options.enablePasteRules)&&m&&o.push(...m());const g=Ce(s,"addProseMirrorPlugins",l);if(g){const b=g();a.push(...b)}return a}).flat();return[yM({editor:e,rules:r}),...CM({editor:e,rules:o}),...i]}get attributes(){return Vv(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=$c(this.extensions);return Object.fromEntries(n.filter(r=>!!Ce(r,"addNodeView")).map(r=>{const o=this.attributes.filter(a=>a.type===r.name),i={name:r.name,options:r.options,storage:r.storage,editor:e,type:Wt(r.name,this.schema)},s=Ce(r,"addNodeView",i);if(!s)return[];const l=(a,c,u,d,h)=>{const m=Ud(a,o);return s()({node:a,view:c,getPos:u,decorations:d,innerDecorations:h,editor:e,extension:r,HTMLAttributes:m})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:$u(e.name,this.schema)};e.type==="mark"&&(!((n=Ye(Ce(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const o=Ce(e,"onBeforeCreate",r),i=Ce(e,"onCreate",r),s=Ce(e,"onUpdate",r),l=Ce(e,"onSelectionUpdate",r),a=Ce(e,"onTransaction",r),c=Ce(e,"onFocus",r),u=Ce(e,"onBlur",r),d=Ce(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),i&&this.editor.on("create",i),s&&this.editor.on("update",s),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class Mn{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ye(Ce(this,"addOptions",{name:this.name}))),this.storage=Ye(Ce(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Mn(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Ic(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Mn({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ye(Ce(n,"addOptions",{name:n.name})),n.storage=Ye(Ce(n,"addStorage",{name:n.name,options:n.options})),n}}function jv(t,e,n){const{from:r,to:o}=e,{blockSeparator:i=`

`,textSerializers:s={}}=n||{};let l="";return t.nodesBetween(r,o,(a,c,u,d)=>{var h;a.isBlock&&c>r&&(l+=i);const m=s==null?void 0:s[a.type.name];if(m)return u&&(l+=m({node:a,pos:c,parent:u,index:d,range:e})),!1;a.isText&&(l+=(h=a==null?void 0:a.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,o-c))}),l}function Hv(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const EM=Mn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Rn({key:new Pr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:i}=o,s=Math.min(...i.map(u=>u.$from.pos)),l=Math.max(...i.map(u=>u.$to.pos)),a=Hv(n);return jv(r,{from:s,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),OM=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),AM=(t=!1)=>({commands:e})=>e.setContent("",t),MM=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:i,$to:s})=>{t.doc.nodesBetween(i.pos,s.pos,(l,a)=>{if(l.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(a)),h=c.resolve(u.map(a+l.nodeSize)),m=d.blockRange(h);if(!m)return;const g=ss(m);if(l.type.isTextblock){const{defaultType:b}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(m.start,b)}(g||g===0)&&e.lift(m,g)})}),!0},_M=t=>e=>t(e),NM=()=>({state:t,dispatch:e})=>Iv(t,e),PM=(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,i=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,i.content),r.setSelection(new ze(r.doc.resolve(s-1))),!0},$M=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===r.type){if(e){const l=o.before(i),a=o.after(i);t.delete(l,a).scrollIntoView()}return!0}return!1},DM=t=>({tr:e,state:n,dispatch:r})=>{const o=Wt(t,n.schema),i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===o){if(r){const a=i.before(s),c=i.after(s);e.delete(a,c).scrollIntoView()}return!0}return!1},IM=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},BM=()=>({state:t,dispatch:e})=>zf(t,e),RM=()=>({commands:t})=>t.keyboardShortcut("Enter"),LM=()=>({state:t,dispatch:e})=>YA(t,e);function tc(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:Gf(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function zv(t,e,n={}){return t.find(r=>r.type===e&&tc(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function Vm(t,e,n={}){return!!zv(t,e,n)}function Yf(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(u=>u.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(u=>u.type===e)||(n=n||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!zv([...o.node.marks],e,n)))return;let s=o.index,l=t.start()+o.offset,a=s+1,c=l+o.node.nodeSize;for(;s>0&&Vm([...t.parent.child(s-1).marks],e,n);)s-=1,l-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&Vm([...t.parent.child(a).marks],e,n);)c+=t.parent.child(a).nodeSize,a+=1;return{from:l,to:c}}function Po(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const VM=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const i=Po(t,r.schema),{doc:s,selection:l}=n,{$from:a,from:c,to:u}=l;if(o){const d=Yf(a,i,e);if(d&&d.from<=c&&d.to>=u){const h=ze.create(s,d.from,d.to);n.setSelection(h)}}return!0},FM=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function Kv(t){return t instanceof ze}function qo(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Uv(t,e=null){if(!e)return null;const n=Je.atStart(t),r=Je.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,i=r.to;return e==="all"?ze.create(t,qo(0,o,i),qo(t.content.size,o,i)):ze.create(t,qo(e,o,i),qo(e,o,i))}function jM(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Xf(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const HM=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:i})=>{e={scrollIntoView:!0,...e};const s=()=>{(Xf()||jM())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(i&&t===null&&!Kv(n.state.selection))return s(),!0;const l=Uv(o.doc,t)||n.state.selection,a=n.state.selection.eq(l);return i&&(a||o.setSelection(l),a&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},zM=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),KM=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),Wv=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&Wv(r)}return t};function Wl(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return Wv(n)}function nc(t,e,n){if(t instanceof bo||t instanceof ne)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,o=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return ne.fromArray(t.map(l=>e.nodeFromJSON(l)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),nc("",e,n)}if(o){if(n.errorOnInvalidContent){let s=!1,l="";const a=new Mb({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,l=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?js.fromSchema(a).parseSlice(Wl(t),n.parseOptions):js.fromSchema(a).parse(Wl(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const i=js.fromSchema(e);return n.slice?i.parseSlice(Wl(t),n.parseOptions).content:i.parse(Wl(t),n.parseOptions)}return nc("",e,n)}function UM(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof zt||o instanceof Kt))return;const i=t.mapping.maps[r];let s=0;i.forEach((l,a,c,u)=>{s===0&&(s=u)}),t.setSelection(Je.near(t.doc.resolve(s),n))}const WM=t=>!("type"in t),qM=(t,e,n)=>({tr:r,dispatch:o,editor:i})=>{var s;if(o){n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;try{l=nc(e,i.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:i.options.enableContentCheck})}catch(g){return i.emit("contentError",{editor:i,error:g,disableCollaboration:()=>{i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}}),!1}let{from:a,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},u=!0,d=!0;if((WM(l)?l:[l]).forEach(g=>{g.check(),u=u?g.isText&&g.marks.length===0:!1,d=d?g.isBlock:!1}),a===c&&d){const{parent:g}=r.doc.resolve(a);g.isTextblock&&!g.type.spec.code&&!g.childCount&&(a-=1,c+=1)}let m;if(u){if(Array.isArray(e))m=e.map(g=>g.text||"").join("");else if(e instanceof ne){let g="";e.forEach(b=>{b.text&&(g+=b.text)}),m=g}else typeof e=="object"&&e&&e.text?m=e.text:m=e;r.insertText(m,a,c)}else m=l,r.replaceWith(a,c,m);n.updateSelection&&UM(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:a,text:m}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:a,text:m})}return!0},JM=()=>({state:t,dispatch:e})=>qA(t,e),GM=()=>({state:t,dispatch:e})=>JA(t,e),YM=()=>({state:t,dispatch:e})=>Av(t,e),XM=()=>({state:t,dispatch:e})=>Pv(t,e),ZM=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Tc(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},QM=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Tc(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},e_=()=>({state:t,dispatch:e})=>UA(t,e),t_=()=>({state:t,dispatch:e})=>WA(t,e);function qv(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function n_(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,i,s;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))o=!0;else if(/^s(hift)?$/i.test(a))i=!0;else if(/^mod$/i.test(a))Xf()||qv()?s=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}const r_=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const i=n_(t).split(/-(?!$)/),s=i.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),l=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,l))});return a==null||a.steps.forEach(c=>{const u=c.map(r.mapping);u&&o&&r.maybeStep(u)}),!0};function cl(t,e,n={}){const{from:r,to:o,empty:i}=t.selection,s=e?Wt(e,t.schema):null,l=[];t.doc.nodesBetween(r,o,(d,h)=>{if(d.isText)return;const m=Math.max(r,h),g=Math.min(o,h+d.nodeSize);l.push({node:d,from:m,to:g})});const a=o-r,c=l.filter(d=>s?s.name===d.node.type.name:!0).filter(d=>tc(d.node.attrs,n,{strict:!1}));return i?!!c.length:c.reduce((d,h)=>d+h.to-h.from,0)>=a}const o_=(t,e={})=>({state:n,dispatch:r})=>{const o=Wt(t,n.schema);return cl(n,o,e)?GA(n,r):!1},i_=()=>({state:t,dispatch:e})=>Bv(t,e),s_=t=>({state:e,dispatch:n})=>{const r=Wt(t,e.schema);return lM(r)(e,n)},l_=()=>({state:t,dispatch:e})=>Dv(t,e);function Bc(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Fm(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}const a_=(t,e)=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const l=Bc(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(i=Wt(t,r.schema)),l==="mark"&&(s=Po(t,r.schema)),o&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(c,u)=>{i&&i===c.type&&n.setNodeMarkup(u,void 0,Fm(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(d=>{s===d.type&&n.addMark(u,u+c.nodeSize,s.create(Fm(d.attrs,e)))})})}),!0):!1},c_=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),u_=()=>({tr:t,dispatch:e})=>{if(e){const n=new Jn(t.doc);t.setSelection(n)}return!0},d_=()=>({state:t,dispatch:e})=>_v(t,e),f_=()=>({state:t,dispatch:e})=>$v(t,e),h_=()=>({state:t,dispatch:e})=>QA(t,e),p_=()=>({state:t,dispatch:e})=>nM(t,e),m_=()=>({state:t,dispatch:e})=>tM(t,e);function Wd(t,e,n={},r={}){return nc(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const g_=(t,e=!1,n={},r={})=>({editor:o,tr:i,dispatch:s,commands:l})=>{var a,c;const{doc:u}=i;if(n.preserveWhitespace!=="full"){const d=Wd(t,o.schema,n,{errorOnInvalidContent:(a=r.errorOnInvalidContent)!==null&&a!==void 0?a:o.options.enableContentCheck});return s&&i.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return s&&i.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:o.options.enableContentCheck})};function Jv(t,e){const n=Po(e,t.schema),{from:r,to:o,empty:i}=t.selection,s=[];i?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,a=>{s.push(...a.marks)});const l=s.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function y_(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function b_(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Zf(t){return e=>b_(e.$from,t)}function v_(t,e){const n={from:0,to:t.content.size};return jv(t,n,e)}function w_(t,e){const n=Wt(e,t.schema),{from:r,to:o}=t.selection,i=[];t.doc.nodesBetween(r,o,l=>{i.push(l)});const s=i.reverse().find(l=>l.type.name===n.name);return s?{...s.attrs}:{}}function S_(t,e){const n=Bc(typeof e=="string"?e:e.name,t.schema);return n==="node"?w_(t,e):n==="mark"?Jv(t,e):{}}function Gv(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(o=>{const i=n.resolve(t),s=Yf(i,o.type);s&&r.push({mark:o,...s})}):n.nodesBetween(t,e,(o,i)=>{!o||(o==null?void 0:o.nodeSize)===void 0||r.push(...o.marks.map(s=>({from:i,to:i+o.nodeSize,mark:s})))}),r}function ya(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(i=>i.type===e&&i.name===r);return o?o.attribute.keepOnSplit:!1}))}function qd(t,e,n={}){const{empty:r,ranges:o}=t.selection,i=e?Po(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>i?i.name===d.type.name:!0).find(d=>tc(d.attrs,n,{strict:!1}));let s=0;const l=[];if(o.forEach(({$from:d,$to:h})=>{const m=d.pos,g=h.pos;t.doc.nodesBetween(m,g,(b,k)=>{if(!b.isText&&!b.marks.length)return;const T=Math.max(m,k),A=Math.min(g,k+b.nodeSize),N=A-T;s+=N,l.push(...b.marks.map(B=>({mark:B,from:T,to:A})))})}),s===0)return!1;const a=l.filter(d=>i?i.name===d.mark.type.name:!0).filter(d=>tc(d.mark.attrs,n,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),c=l.filter(d=>i?d.mark.type!==i&&d.mark.type.excludes(i):!0).reduce((d,h)=>d+h.to-h.from,0);return(a>0?a+c:a)>=s}function k_(t,e,n={}){if(!e)return cl(t,null,n)||qd(t,null,n);const r=Bc(e,t.schema);return r==="node"?cl(t,e,n):r==="mark"?qd(t,e,n):!1}function jm(t,e){const{nodeExtensions:n}=$c(e),r=n.find(s=>s.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},i=Ye(Ce(r,"group",o));return typeof i!="string"?!1:i.split(" ").includes("list")}function Qf(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let o=!0;return t.content.forEach(i=>{o!==!1&&(Qf(i,{ignoreWhitespace:n,checkChildren:e})||(o=!1))}),o}return!1}function x_(t){return t instanceof De}function C_(t,e,n){var r;const{selection:o}=e;let i=null;if(Kv(o)&&(i=o.$cursor),i){const l=(r=t.storedMarks)!==null&&r!==void 0?r:i.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:s}=o;return s.some(({$from:l,$to:a})=>{let c=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(u,d,h)=>{if(c)return!1;if(u.isInline){const m=!h||h.type.allowsMarkType(n),g=!!n.isInSet(u.marks)||!u.marks.some(b=>b.type.excludes(n));c=m&&g}return!c}),c})}const T_=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:i}=n,{empty:s,ranges:l}=i,a=Po(t,r.schema);if(o)if(s){const c=Jv(r,a);n.addStoredMark(a.create({...c,...e}))}else l.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(h,m)=>{const g=Math.max(m,u),b=Math.min(m+h.nodeSize,d);h.marks.find(T=>T.type===a)?h.marks.forEach(T=>{a===T.type&&n.addMark(g,b,a.create({...T.attrs,...e}))}):n.addMark(g,b,a.create(e))})});return C_(r,n,a)},E_=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),O_=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const i=Wt(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),i.isTextblock?o().command(({commands:l})=>Im(i,{...s,...e})(n)?!0:l.clearNodes()).command(({state:l})=>Im(i,{...s,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},A_=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=qo(t,0,r.content.size),i=De.create(r,o);e.setSelection(i)}return!0},M_=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:i}=typeof t=="number"?{from:t,to:t}:t,s=ze.atStart(r).from,l=ze.atEnd(r).to,a=qo(o,s,l),c=qo(i,s,l),u=ze.create(r,a,c);e.setSelection(u)}return!0},__=t=>({state:e,dispatch:n})=>{const r=Wt(t,e.schema);return uM(r)(e,n)};function Hm(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e==null?void 0:e.includes(o.type.name));t.tr.ensureMarks(r)}}const N_=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:i,doc:s}=e,{$from:l,$to:a}=i,c=o.extensionManager.attributes,u=ya(c,l.node().type.name,l.node().attrs);if(i instanceof De&&i.node.isBlock)return!l.parentOffset||!qr(s,l.pos)?!1:(r&&(t&&Hm(n,o.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const d=a.parentOffset===a.parent.content.size,h=l.depth===0?void 0:y_(l.node(-1).contentMatchAt(l.indexAfter(-1)));let m=d&&h?[{type:h,attrs:u}]:void 0,g=qr(e.doc,e.mapping.map(l.pos),1,m);if(!m&&!g&&qr(e.doc,e.mapping.map(l.pos),1,h?[{type:h}]:void 0)&&(g=!0,m=h?[{type:h,attrs:u}]:void 0),r){if(g&&(i instanceof ze&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,m),h&&!d&&!l.parentOffset&&l.parent.type!==h)){const b=e.mapping.map(l.before()),k=e.doc.resolve(b);l.node(-1).canReplaceWith(k.index(),k.index()+1,h)&&e.setNodeMarkup(e.mapping.map(l.before()),h)}t&&Hm(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return g},P_=(t,e={})=>({tr:n,state:r,dispatch:o,editor:i})=>{var s;const l=Wt(t,r.schema),{$from:a,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(c))return!1;const d=a.node(-1);if(d.type!==l)return!1;const h=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(o){let T=ne.empty;const A=a.index(-1)?1:a.index(-2)?2:3;for(let K=a.depth-A;K>=a.depth-3;K-=1)T=ne.from(a.node(K).copy(T));const N=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,B={...ya(h,a.node().type.name,a.node().attrs),...e},D=((s=l.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(B))||void 0;T=T.append(ne.from(l.createAndFill(null,D)||void 0));const V=a.before(a.depth-(A-1));n.replace(V,a.after(-N),new we(T,4-A,0));let j=-1;n.doc.nodesBetween(V,n.doc.content.size,(K,E)=>{if(j>-1)return!1;K.isTextblock&&K.content.size===0&&(j=E+1)}),j>-1&&n.setSelection(ze.near(n.doc.resolve(j))),n.scrollIntoView()}return!0}const m=c.pos===a.end()?d.contentMatchAt(0).defaultType:null,g={...ya(h,d.type.name,d.attrs),...e},b={...ya(h,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,c.pos);const k=m?[{type:l,attrs:g},{type:m,attrs:b}]:[{type:l,attrs:g}];if(!qr(n.doc,a.pos,2))return!1;if(o){const{selection:T,storedMarks:A}=r,{splittableMarks:N}=i.extensionManager,B=A||T.$to.parentOffset&&T.$from.marks();if(n.split(a.pos,2,k).scrollIntoView(),!B||!o)return!0;const D=B.filter(V=>N.includes(V.type.name));n.ensureMarks(D)}return!0},Du=(t,e)=>{const n=Zf(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&_o(t.doc,n.pos)&&t.join(n.pos),!0},Iu=(t,e)=>{const n=Zf(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&_o(t.doc,r)&&t.join(r),!0},$_=(t,e,n,r={})=>({editor:o,tr:i,state:s,dispatch:l,chain:a,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=o.extensionManager,m=Wt(t,s.schema),g=Wt(e,s.schema),{selection:b,storedMarks:k}=s,{$from:T,$to:A}=b,N=T.blockRange(A),B=k||b.$to.parentOffset&&b.$from.marks();if(!N)return!1;const D=Zf(V=>jm(V.type.name,d))(b);if(N.depth>=1&&D&&N.depth-D.depth<=1){if(D.node.type===m)return c.liftListItem(g);if(jm(D.node.type.name,d)&&m.validContent(D.node.content)&&l)return a().command(()=>(i.setNodeMarkup(D.pos,m),!0)).command(()=>Du(i,m)).command(()=>Iu(i,m)).run()}return!n||!B||!l?a().command(()=>u().wrapInList(m,r)?!0:c.clearNodes()).wrapInList(m,r).command(()=>Du(i,m)).command(()=>Iu(i,m)).run():a().command(()=>{const V=u().wrapInList(m,r),j=B.filter(K=>h.includes(K.type.name));return i.ensureMarks(j),V?!0:c.clearNodes()}).wrapInList(m,r).command(()=>Du(i,m)).command(()=>Iu(i,m)).run()},D_=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:i=!1}=n,s=Po(t,r.schema);return qd(r,s,e)?o.unsetMark(s,{extendEmptyMarkRange:i}):o.setMark(s,e)},I_=(t,e,n={})=>({state:r,commands:o})=>{const i=Wt(t,r.schema),s=Wt(e,r.schema),l=cl(r,i,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?o.setNode(s,a):o.setNode(i,{...a,...n})},B_=(t,e={})=>({state:n,commands:r})=>{const o=Wt(t,n.schema);return cl(n,o,e)?r.lift(o):r.wrapIn(o,e)},R_=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let i;if(o.spec.isInputRules&&(i=o.getState(t))){if(e){const s=t.tr,l=i.transform;for(let a=l.steps.length-1;a>=0;a-=1)s.step(l.steps[a].invert(l.docs[a]));if(i.text){const a=s.doc.resolve(i.from).marks();s.replaceWith(i.from,i.to,t.schema.text(i.text,a))}else s.delete(i.from,i.to)}return!0}}return!1},L_=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},V_=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var i;const{extendEmptyMarkRange:s=!1}=e,{selection:l}=n,a=Po(t,r.schema),{$from:c,empty:u,ranges:d}=l;if(!o)return!0;if(u&&s){let{from:h,to:m}=l;const g=(i=c.marks().find(k=>k.type===a))===null||i===void 0?void 0:i.attrs,b=Yf(c,a,g);b&&(h=b.from,m=b.to),n.removeMark(h,m,a)}else d.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,a)});return n.removeStoredMark(a),!0},F_=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const l=Bc(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(i=Wt(t,r.schema)),l==="mark"&&(s=Po(t,r.schema)),o&&n.selection.ranges.forEach(a=>{const c=a.$from.pos,u=a.$to.pos;let d,h,m,g;n.selection.empty?r.doc.nodesBetween(c,u,(b,k)=>{i&&i===b.type&&(m=Math.max(k,c),g=Math.min(k+b.nodeSize,u),d=k,h=b)}):r.doc.nodesBetween(c,u,(b,k)=>{k<c&&i&&i===b.type&&(m=Math.max(k,c),g=Math.min(k+b.nodeSize,u),d=k,h=b),k>=c&&k<=u&&(i&&i===b.type&&n.setNodeMarkup(k,void 0,{...b.attrs,...e}),s&&b.marks.length&&b.marks.forEach(T=>{if(s===T.type){const A=Math.max(k,c),N=Math.min(k+b.nodeSize,u);n.addMark(A,N,s.create({...T.attrs,...e}))}}))}),h&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...h.attrs,...e}),s&&h.marks.length&&h.marks.forEach(b=>{s===b.type&&n.addMark(m,g,s.create({...b.attrs,...e}))}))}),!0):!1},j_=(t,e={})=>({state:n,dispatch:r})=>{const o=Wt(t,n.schema);return rM(o,e)(n,r)},H_=(t,e={})=>({state:n,dispatch:r})=>{const o=Wt(t,n.schema);return oM(o,e)(n,r)};var z_=Object.freeze({__proto__:null,blur:OM,clearContent:AM,clearNodes:MM,command:_M,createParagraphNear:NM,cut:PM,deleteCurrentNode:$M,deleteNode:DM,deleteRange:IM,deleteSelection:BM,enter:RM,exitCode:LM,extendMarkRange:VM,first:FM,focus:HM,forEach:zM,insertContent:KM,insertContentAt:qM,joinBackward:YM,joinDown:GM,joinForward:XM,joinItemBackward:ZM,joinItemForward:QM,joinTextblockBackward:e_,joinTextblockForward:t_,joinUp:JM,keyboardShortcut:r_,lift:o_,liftEmptyBlock:i_,liftListItem:s_,newlineInCode:l_,resetAttributes:a_,scrollIntoView:c_,selectAll:u_,selectNodeBackward:d_,selectNodeForward:f_,selectParentNode:h_,selectTextblockEnd:p_,selectTextblockStart:m_,setContent:g_,setMark:T_,setMeta:E_,setNode:O_,setNodeSelection:A_,setTextSelection:M_,sinkListItem:__,splitBlock:N_,splitListItem:P_,toggleList:$_,toggleMark:D_,toggleNode:I_,toggleWrap:B_,undoInputRule:R_,unsetAllMarks:L_,unsetMark:V_,updateAttributes:F_,wrapIn:j_,wrapInList:H_});const K_=Mn.create({name:"commands",addCommands(){return{...z_}}}),U_=Mn.create({name:"drop",addProseMirrorPlugins(){return[new Rn({key:new Pr("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),W_=Mn.create({name:"editable",addProseMirrorPlugins(){return[new Rn({key:new Pr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),q_=Mn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Rn({key:new Pr("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),J_=Mn.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:l})=>{const{selection:a,doc:c}=l,{empty:u,$anchor:d}=a,{pos:h,parent:m}=d,g=d.parent.isTextblock&&h>0?l.doc.resolve(h-1):d,b=g.parent.type.spec.isolating,k=d.pos-d.parentOffset,T=b&&g.parent.childCount===1?k===d.pos:Je.atStart(c).from===h;return!u||!m.type.isTextblock||m.textContent.length||!T||T&&d.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},i={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Xf()||qv()?i:o},addProseMirrorPlugins(){return[new Rn({key:new Pr("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(b=>b.getMeta("composition")))return;const r=t.some(b=>b.docChanged)&&!e.doc.eq(n.doc),o=t.some(b=>b.getMeta("preventClearDocument"));if(!r||o)return;const{empty:i,from:s,to:l}=e.selection,a=Je.atStart(e.doc).from,c=Je.atEnd(e.doc).to;if(i||!(s===a&&l===c)||!Qf(n.doc))return;const h=n.tr,m=Nc({state:n,transaction:h}),{commands:g}=new Pc({editor:this.editor,state:m});if(g.clearNodes(),!!h.steps.length)return h}})]}}),G_=Mn.create({name:"paste",addProseMirrorPlugins(){return[new Rn({key:new Pr("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),Y_=Mn.create({name:"tabindex",addProseMirrorPlugins(){return[new Rn({key:new Pr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class zo{get name(){return this.node.type.name}constructor(e,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new zo(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new zo(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new zo(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,s=this.pos+r+(i?0:1),l=this.resolvedPos.doc.resolve(s);if(!o&&l.depth<=this.depth)return;const a=new zo(l,this.editor,o,o?n:null);o&&(a.actualDepth=this.depth+1),e.push(new zo(l,this.editor,o,o?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(n).length>0){const i=o.node.attrs,s=Object.keys(n);for(let l=0;l<s.length;l+=1){const a=s[l];if(i[a]!==n[a])break}}else r=o;o=o.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const i=Object.keys(n);return this.children.forEach(s=>{r&&o.length>0||(s.node.type.name===e&&i.every(a=>n[a]===s.node.attrs[a])&&o.push(s),!(r&&o.length>0)&&(o=o.concat(s.querySelectorAll(e,n,r))))}),o}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const X_=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function Z_(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(o),o}let Q_=class extends dM{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:o})=>this.options.onDrop(n,r,o)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Z_(X_,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=Fv(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=n.filter(l=>!l.key.startsWith(s))}),n.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var e,n;const o=[...this.options.enableCoreExtensions?[W_,EM.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),K_,q_,J_,Y_,U_,G_].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new $i(o,this)}createCommandManager(){this.commandManager=new Pc({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=Wd(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(l=>l.name!=="collaboration"),this.createExtensionManager()}}),n=Wd(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=Uv(n,this.options.autofocus);this.view=new IA(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Pi.create({doc:n,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),i=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return S_(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,o=typeof e=="string"?n:e;return k_(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Jf(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return v_(this.state.doc,{blockSeparator:n,textSerializers:{...Hv(this.schema),...r}})}get isEmpty(){return Qf(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new zo(n,this)}get $doc(){return this.$pos(0)}};function ts(t){return new Dc({find:t.find,handler:({state:e,range:n,match:r})=>{const o=Ye(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:i}=e,s=r[r.length-1],l=r[0];if(s){const a=l.search(/\S/),c=n.from+l.indexOf(s),u=c+s.length;if(Gv(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(b=>b===t.type&&b!==m.mark.type)).filter(m=>m.to>c).length)return null;u<n.to&&i.delete(u,n.to),c>n.from&&i.delete(n.from+a,c);const h=n.from+a+s.length;i.addMark(n.from+a,h,t.type.create(o||{})),i.removeStoredMark(t.type)}}})}function eN(t){return new Dc({find:t.find,handler:({state:e,range:n,match:r})=>{const o=Ye(t.getAttributes,void 0,r)||{},{tr:i}=e,s=n.from;let l=n.to;const a=t.type.create(o);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=s+c;u>l?u=l:l=u+r[1].length;const d=r[0][r[0].length-1];i.insertText(d,s+r[0].length-1),i.replaceWith(u,l,a)}else if(r[0]){const c=t.type.isInline?s:s-1;i.insert(c,t.type.create(o)).delete(i.mapping.map(s),i.mapping.map(l))}i.scrollIntoView()}})}function Jd(t){return new Dc({find:t.find,handler:({state:e,range:n,match:r})=>{const o=e.doc.resolve(n.from),i=Ye(t.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,i)}})}function ul(t){return new Dc({find:t.find,handler:({state:e,range:n,match:r,chain:o})=>{const i=Ye(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),a=s.doc.resolve(n.from).blockRange(),c=a&&Pf(a,t.type,i);if(!c)return null;if(s.wrap(a,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:h}=e,{splittableMarks:m}=t.editor.extensionManager,g=h||d.$to.parentOffset&&d.$from.marks();if(g){const b=g.filter(k=>m.includes(k.type.name));s.ensureMarks(b)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(d,i).run()}const u=s.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&_o(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&s.join(n.from-1)}})}class Bn{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ye(Ce(this,"addOptions",{name:this.name}))),this.storage=Ye(Ce(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Bn(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Ic(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Bn(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ye(Ce(n,"addOptions",{name:n.name})),n.storage=Ye(Ce(n,"addStorage",{name:n.name,options:n.options})),n}}function ns(t){return new wM({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:o})=>{const i=Ye(t.getAttributes,void 0,r,o);if(i===!1||i===null)return null;const{tr:s}=e,l=r[r.length-1],a=r[0];let c=n.to;if(l){const u=a.search(/\S/),d=n.from+a.indexOf(l),h=d+l.length;if(Gv(n.from,n.to,e.doc).filter(g=>g.mark.type.excluded.find(k=>k===t.type&&k!==g.mark.type)).filter(g=>g.to>d).length)return null;h<n.to&&s.delete(h,n.to),d>n.from&&s.delete(n.from+u,d),c=n.from+u+l.length,s.addMark(n.from+u,c,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function zm(t){return Kw((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class Yv extends Q_{constructor(e={}){return super(e),this.contentComponent=null,this.appContext=null,this.reactiveState=zm(this.view.state),this.reactiveExtensionStorage=zm(this.extensionStorage),this.on("beforeTransaction",({nextState:n})=>{this.reactiveState.value=n,this.reactiveExtensionStorage.value=this.extensionStorage}),wg(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,n){const r=super.registerPlugin(e,n);return this.reactiveState&&(this.reactiveState.value=r),r}unregisterPlugin(e){const n=super.unregisterPlugin(e);return this.reactiveState&&n&&(this.reactiveState.value=n),n}}const Xv=Ag({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=sf(),n=bc();return RS(()=>{const r=t.editor;r&&r.options.element&&e.value&&pc(()=>{if(!e.value||!r.options.element.firstChild)return;const o=bn(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,n&&(r.appContext={...n.appContext,provides:n.provides}),r.setOptions({element:o}),r.createNodeViews()})}),$g(()=>{const r=t.editor;r&&(r.contentComponent=null,r.appContext=null)}),{rootEl:e}},render(){return ry("div",{ref:t=>{this.rootEl=t}})}}),tN=/^\s*>\s$/,nN=Bn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",An(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ul({find:tN,type:this.type})]}}),rN=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,oN=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,iN=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,sN=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,lN=Oo.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",An(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ts({find:rN,type:this.type}),ts({find:iN,type:this.type})]},addPasteRules(){return[ns({find:oN,type:this.type}),ns({find:sN,type:this.type})]}}),aN="listItem",Km="textStyle",Um=/^\s*([-+*])\s$/,cN=Bn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",An(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(aN,this.editor.getAttributes(Km)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=ul({find:Um,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ul({find:Um,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Km),editor:this.editor})),[t]}}),uN=/(^|[^`])`([^`]+)`(?!`)/,dN=/(^|[^`])`([^`]+)`(?!`)/g,fN=Oo.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",An(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ts({find:uN,type:this.type})]},addPasteRules(){return[ns({find:dN,type:this.type})]}}),hN=/^```([a-z]+)?[\s\n]$/,pN=/^~~~([a-z]+)?[\s\n]$/,mN=Bn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,i=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",An(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:o}=n;if(!o||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!i||!s?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:o,empty:i}=n;if(!i||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const l=o.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:c})=>(c.setSelection(Je.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[Jd({find:hN,type:this.type,getAttributes:t=>({language:t[1]})}),Jd({find:pN,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Rn({key:new Pr("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,i=o==null?void 0:o.mode;if(!n||!i)return!1;const{tr:s,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:i},a)),s.selection.$from.parent.type!==this.type&&s.setSelection(ze.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),gN=Bn.create({name:"doc",topNode:!0,content:"block+"});function yN(t={}){return new Rn({view(e){return new bN(e,t)}})}class bN{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let i=s=>{this[o](s)};return e.dom.addEventListener(o,i),{name:o,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let l=e.nodeBefore,a=e.nodeAfter;if(l||a){let c=this.editorView.nodeDOM(this.cursorPos-(l?l.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=l?u.bottom:u.top;l&&a&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let l=this.editorView.coordsAtPos(this.cursorPos);r={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}let o=this.editorView.dom.offsetParent;this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let i,s;if(!o||o==document.body&&getComputedStyle(o).position=="static")i=-pageXOffset,s=-pageYOffset;else{let l=o.getBoundingClientRect();i=l.left-o.scrollLeft,s=l.top-o.scrollTop}this.element.style.left=r.left-i+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,i=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!i){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=Fb(this.editorView.state.doc,s,this.editorView.dragging.slice);l!=null&&(s=l)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const vN=Mn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[yN(this.options)]}});class _t extends Je{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return _t.valid(r)?new _t(r):Je.near(r)}content(){return we.empty}eq(e){return e instanceof _t&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new _t(e.resolve(n.pos))}getBookmark(){return new eh(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!wN(e)||!SN(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&_t.valid(e))return e;let o=e.pos,i=null;for(let s=e.depth;;s--){let l=e.node(s);if(n>0?e.indexAfter(s)<l.childCount:e.index(s)>0){i=l.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;o+=n;let a=e.doc.resolve(o);if(_t.valid(a))return a}for(;;){let s=n>0?i.firstChild:i.lastChild;if(!s){if(i.isAtom&&!i.isText&&!De.isSelectable(i)){e=e.doc.resolve(o+i.nodeSize*n),r=!1;continue e}break}i=s,o+=n;let l=e.doc.resolve(o);if(_t.valid(l))return l}return null}}}_t.prototype.visible=!1;_t.findFrom=_t.findGapCursorFrom;Je.jsonID("gapcursor",_t);class eh{constructor(e){this.pos=e}map(e){return new eh(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return _t.valid(n)?new _t(n):Je.near(n)}}function wN(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function SN(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function kN(){return new Rn({props:{decorations:EN,createSelectionBetween(t,e,n){return e.pos==n.pos&&_t.valid(n)?new _t(n):null},handleClick:CN,handleKeyDown:xN,handleDOMEvents:{beforeinput:TN}}})}const xN=Ev({ArrowLeft:ql("horiz",-1),ArrowRight:ql("horiz",1),ArrowUp:ql("vert",-1),ArrowDown:ql("vert",1)});function ql(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,i){let s=r.selection,l=e>0?s.$to:s.$from,a=s.empty;if(s instanceof ze){if(!i.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let c=_t.findGapCursorFrom(l,e,a);return c?(o&&o(r.tr.setSelection(new _t(c))),!0):!1}}function CN(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!_t.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&De.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new _t(r))),!0)}function TN(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof _t))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=ne.empty;for(let s=r.length-1;s>=0;s--)o=ne.from(r[s].createAndFill(null,o));let i=t.state.tr.replace(n.pos,n.pos,new we(o,0,0));return i.setSelection(ze.near(i.doc.resolve(n.pos+1))),t.dispatch(i),!1}function EN(t){if(!(t.selection instanceof _t))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ft.create(t.doc,[tr.widget(t.selection.head,e,{key:"gapcursor"})])}const ON=Mn.create({name:"gapCursor",addProseMirrorPlugins(){return[kN()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Ye(Ce(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),AN=Bn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",An(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:o,storedMarks:i}=n;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:l}=r.extensionManager,a=i||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&a&&s){const d=a.filter(h=>l.includes(h.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),MN=Bn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,An(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Jd({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var rc=200,Ut=function(){};Ut.prototype.append=function(e){return e.length?(e=Ut.from(e),!this.length&&e||e.length<rc&&this.leafAppend(e)||this.length<rc&&e.leafPrepend(this)||this.appendInner(e)):this};Ut.prototype.prepend=function(e){return e.length?Ut.from(e).append(this):this};Ut.prototype.appendInner=function(e){return new _N(this,e)};Ut.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Ut.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Ut.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ut.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Ut.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(i,s){return o.push(e(i,s))},n,r),o};Ut.from=function(e){return e instanceof Ut?e:e&&e.length?new Zv(e):Ut.empty};var Zv=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,i){return o==0&&i==this.length?this:new e(this.values.slice(o,i))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,i,s,l){for(var a=i;a<s;a++)if(o(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(o,i,s,l){for(var a=i-1;a>=s;a--)if(o(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=rc)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=rc)return new e(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Ut);Ut.empty=new Zv([]);var _N=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,i,s){var l=this.left.length;if(o<l&&this.left.forEachInner(r,o,Math.min(i,l),s)===!1||i>l&&this.right.forEachInner(r,Math.max(o-l,0),Math.min(this.length,i)-l,s+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,i,s){var l=this.left.length;if(o>l&&this.right.forEachInvertedInner(r,o-l,Math.max(i,l)-l,s+l)===!1||i<l&&this.left.forEachInvertedInner(r,Math.min(o,l),i,s)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var i=this.left.length;return o<=i?this.left.slice(r,o):r>=i?this.right.slice(r-i,o-i):this.left.slice(r,i).append(this.right.slice(0,o-i))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Ut);const NN=500;class cr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,i;n&&(o=this.remapping(r,this.items.length),i=o.maps.length);let s=e.tr,l,a,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){o||(o=this.remapping(r,h+1),i=o.maps.length),i--,u.push(d);return}if(o){u.push(new wr(d.map));let m=d.step.map(o.slice(i)),g;m&&s.maybeStep(m).doc&&(g=s.mapping.maps[s.mapping.maps.length-1],c.push(new wr(g,void 0,void 0,c.length+u.length))),i--,g&&o.appendMap(g,i)}else s.maybeStep(d.step);if(d.selection)return l=o?d.selection.map(o.slice(i)):d.selection,a=new cr(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:s,selection:l}}addTransform(e,n,r,o){let i=[],s=this.eventCount,l=this.items,a=!o&&l.length?l.get(l.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),h=new wr(e.mapping.maps[u],d,n),m;(m=a&&a.merge(h))&&(h=m,u?i.pop():l=l.slice(0,l.length-1)),i.push(h),n&&(s++,n=void 0),o||(a=h)}let c=s-r.depth;return c>$N&&(l=PN(l,c),s-=c),new cr(l.append(i),s)}remapping(e,n){let r=new ol;return this.items.forEach((o,i)=>{let s=o.mirrorOffset!=null&&i-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new cr(this.items.append(e.map(n=>new wr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),i=e.mapping,s=e.steps.length,l=this.eventCount;this.items.forEach(h=>{h.selection&&l--},o);let a=n;this.items.forEach(h=>{let m=i.getMirror(--a);if(m==null)return;s=Math.min(s,m);let g=i.maps[m];if(h.step){let b=e.steps[m].invert(e.docs[m]),k=h.selection&&h.selection.map(i.slice(a+1,m));k&&l++,r.push(new wr(g,b,k))}else r.push(new wr(g))},o);let c=[];for(let h=n;h<s;h++)c.push(new wr(i.maps[h]));let u=this.items.slice(0,o).append(c).append(r),d=new cr(u,l);return d.emptyItemCount()>NN&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],i=0;return this.items.forEach((s,l)=>{if(l>=e)o.push(s),s.selection&&i++;else if(s.step){let a=s.step.map(n.slice(r)),c=a&&a.getMap();if(r--,c&&n.appendMap(c,r),a){let u=s.selection&&s.selection.map(n.slice(r));u&&i++;let d=new wr(c.invert(),a,u),h,m=o.length-1;(h=o.length&&o[m].merge(d))?o[m]=h:o.push(d)}}else s.map&&r--},this.items.length,0),new cr(Ut.from(o.reverse()),i)}}cr.empty=new cr(Ut.empty,0);function PN(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}class wr{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new wr(n.getMap().invert(),n,this.selection)}}}class ao{constructor(e,n,r,o,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=i}}const $N=20;function DN(t,e,n,r){let o=n.getMeta(ti),i;if(o)return o.historyState;n.getMeta(RN)&&(t=new ao(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(ti))return s.getMeta(ti).redo?new ao(t.done.addTransform(n,void 0,r,ba(e)),t.undone,Wm(n.mapping.maps),t.prevTime,t.prevComposition):new ao(t.done,t.undone.addTransform(n,void 0,r,ba(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!s&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!IN(n,t.prevRanges)),c=s?Bu(t.prevRanges,n.mapping):Wm(n.mapping.maps);return new ao(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,ba(e)),cr.empty,c,n.time,l??t.prevComposition)}else return(i=n.getMeta("rebased"))?new ao(t.done.rebased(n,i),t.undone.rebased(n,i),Bu(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new ao(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Bu(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function IN(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&o>=e[i]&&(n=!0)}),n}function Wm(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,o,i,s)=>e.push(i,s));return e}function Bu(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),i=e.map(t[r+1],-1);o<=i&&n.push(o,i)}return n}function BN(t,e,n){let r=ba(e),o=ti.get(e).spec.config,i=(n?t.undone:t.done).popEvent(e,r);if(!i)return null;let s=i.selection.resolve(i.transform.doc),l=(n?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),o,r),a=new ao(n?l:i.remaining,n?i.remaining:l,null,0,-1);return i.transform.setSelection(s).setMeta(ti,{redo:n,historyState:a})}let Ru=!1,qm=null;function ba(t){let e=t.plugins;if(qm!=e){Ru=!1,qm=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Ru=!0;break}}return Ru}const ti=new Pr("history"),RN=new Pr("closeHistory");function LN(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Rn({key:ti,state:{init(){return new ao(cr.empty,cr.empty,null,0,-1)},apply(e,n,r){return DN(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?e0:r=="historyRedo"?t0:null;return o?(n.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function Qv(t,e){return(n,r)=>{let o=ti.getState(n);if(!o||(t?o.undone:o.done).eventCount==0)return!1;if(r){let i=BN(o,n,t);i&&r(e?i.scrollIntoView():i)}return!0}}const e0=Qv(!1,!0),t0=Qv(!0,!0),VN=Mn.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>e0(t,e),redo:()=>({state:t,dispatch:e})=>t0(t,e)}},addProseMirrorPlugins(){return[LN(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),FN=Bn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",An(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:o}=n,i=t();return r.parentOffset===0?i.insertContentAt({from:Math.max(r.pos-1,0),to:o.pos},{type:this.name}):x_(n)?i.insertContentAt(o.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:l})=>{var a;if(l){const{$to:c}=s.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(ze.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(De.create(s.doc,c.pos)):s.setSelection(ze.create(s.doc,c.pos));else{const d=(a=c.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();d&&(s.insert(u,d),s.setSelection(ze.create(s.doc,u+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[eN({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),jN=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,HN=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,zN=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,KN=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,UN=Oo.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",An(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ts({find:jN,type:this.type}),ts({find:zN,type:this.type})]},addPasteRules(){return[ns({find:HN,type:this.type}),ns({find:KN,type:this.type})]}}),WN=Bn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",An(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),qN="listItem",Jm="textStyle",Gm=/^(\d+)\.\s$/,JN=Bn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",An(this.options.HTMLAttributes,n),0]:["ol",An(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(qN,this.editor.getAttributes(Jm)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=ul({find:Gm,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ul({find:Gm,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Jm)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),GN=Bn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",An(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),YN=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,XN=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,ZN=Oo.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",An(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ts({find:YN,type:this.type})]},addPasteRules(){return[ns({find:XN,type:this.type})]}}),QN=Bn.create({name:"text",group:"inline"}),n0=Mn.create({name:"starterKit",addExtensions(){var t,e,n,r,o,i,s,l,a,c,u,d,h,m,g,b,k,T;const A=[];return this.options.bold!==!1&&A.push(lN.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&A.push(nN.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&A.push(cN.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&A.push(fN.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&A.push(mN.configure((o=this.options)===null||o===void 0?void 0:o.codeBlock)),this.options.document!==!1&&A.push(gN.configure((i=this.options)===null||i===void 0?void 0:i.document)),this.options.dropcursor!==!1&&A.push(vN.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&A.push(ON.configure((l=this.options)===null||l===void 0?void 0:l.gapcursor)),this.options.hardBreak!==!1&&A.push(AN.configure((a=this.options)===null||a===void 0?void 0:a.hardBreak)),this.options.heading!==!1&&A.push(MN.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&A.push(VN.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&A.push(FN.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&A.push(UN.configure((h=this.options)===null||h===void 0?void 0:h.italic)),this.options.listItem!==!1&&A.push(WN.configure((m=this.options)===null||m===void 0?void 0:m.listItem)),this.options.orderedList!==!1&&A.push(JN.configure((g=this.options)===null||g===void 0?void 0:g.orderedList)),this.options.paragraph!==!1&&A.push(GN.configure((b=this.options)===null||b===void 0?void 0:b.paragraph)),this.options.strike!==!1&&A.push(ZN.configure((k=this.options)===null||k===void 0?void 0:k.strike)),this.options.text!==!1&&A.push(QN.configure((T=this.options)===null||T===void 0?void 0:T.text)),A}}),eP={components:{EditorContent:Xv},props:{content:{type:String,required:!0}},emits:["update:content"],data(){return{editor:null}},methods:{emitContent(){this.$emit("update:content",this.editor.getHTML())}},mounted(){this.editor=new Yv({content:this.content,extensions:[n0]}),this.editor.on("blur",this.emitContent)},beforeUnmount(){this.editor&&this.editor.destroy()}};function tP(t,e,n,r,o,i){const s=Qe("editor-content");return X(),xt(s,{class:"editor",editor:o.editor},null,8,["editor"])}const nP=ct(eP,[["render",tP],["__scopeId","data-v-3da2c5ae"]]),rP={components:{FileName:hb,TipTap:nP},methods:{async handleChange(){await this.$root.UpdateRecord("Files",this.myfile.uuid,this.myfile)},updateContent(t){this.myfile.content=t,console.log(t),this.handleChange()}},name:"FileEditor",data(){return{myfile:null}},async mounted(){this.myfile=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Files.get(this.$root.tools.writer.selectednode)))}},oP={style:{"text-align":"center"}};function iP(t,e,n,r,o,i){const s=Qe("FileName"),l=Qe("TipTap");return X(),fe(rt,null,[P("div",oP,[(X(),xt(s,{myuuid:t.$root.tools.writer.selectednode,key:t.$root.tools.writer.selectednode,formmode:!0},null,8,["myuuid"]))]),o.myfile?(X(),xt(l,{content:o.myfile.content,"onUpdate:content":i.updateContent,key:o.myfile.lastupdated},null,8,["content","onUpdate:content"])):He("",!0)],64)}const sP=ct(rP,[["render",iP]]),lP={mounted(t){const e=()=>{t.style.height="auto",t.style.height=t.scrollHeight+"px"};t.style.height="auto",t.style.height=t.scrollHeight+"px",t.addEventListener("input",e),window.addEventListener("resize",e),t._onResize=e},updated(t){t.style.height="auto",t.style.height=t.scrollHeight+"px"},unmounted(t){window.removeEventListener("resize",t._onResize)}},r0=""+new URL("../resources/bookcover.png",import.meta.url).href,aP={props:{myimage:{type:String,default:""}},data(){return{base64Image:this.myimage}},methods:{onFileChange(t){const e=t.target.files[0];if(e){const n=new FileReader;n.onload=r=>{const o=new Image;o.src=r.target.result,o.onload=()=>{const i=document.createElement("canvas"),s=200,l=s/o.width;i.width=s,i.height=o.height*l,i.getContext("2d").drawImage(o,0,0,i.width,i.height),this.base64Image=i.toDataURL("image/jpeg"),this.$emit("image-changed",this.base64Image)}},n.readAsDataURL(e)}},triggerFileUpload(){this.$refs.fileInput.click()}}},cP=["src"];function uP(t,e,n,r,o,i){return X(),fe("div",null,[P("input",{type:"file",onChange:e[0]||(e[0]=(...s)=>i.onFileChange&&i.onFileChange(...s)),ref:"fileInput",style:{display:"none"}},null,544),o.base64Image?(X(),fe("img",{key:0,src:o.base64Image,alt:"Image Preview",class:"image-preview",onClick:e[1]||(e[1]=(...s)=>i.triggerFileUpload&&i.triggerFileUpload(...s))},null,8,cP)):He("",!0),o.base64Image?He("",!0):(X(),fe("img",{key:1,src:r0,alt:"Image Preview",class:"image-preview",onClick:e[2]||(e[2]=(...s)=>i.triggerFileUpload&&i.triggerFileUpload(...s))}))])}const dP=ct(aP,[["render",uP],["__scopeId","data-v-e0f8ef46"]]),fP={directives:{autosize:lP},components:{ImageUpload:dP},methods:{handleChange(){this.$root.UpdateRecord("Writer",this.$root.tools.writer.selected.uuid,this.this.$root.tools.writer.selected)},imageChanged(t){this.this.$root.tools.writer.selected.cover=t,this.handleChange()}},name:"BookEditor",data(){return{}},async mounted(){}},hP={key:0,class:"infocontainer"},pP={class:"bookcover"};function mP(t,e,n,r,o,i){const s=Qe("ImageUpload"),l=mS("autosize");return this.$root.tools.writer.selected?(X(),fe("div",hP,[P("div",pP,[wt(s,{myimage:this.$root.tools.writer.selected.cover,onImageChanged:i.imageChanged},null,8,["myimage","onImageChanged"])]),e[5]||(e[5]=P("label",null,"Book Title",-1)),an(P("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>this.$root.tools.writer.selected.title=a),onBlur:e[1]||(e[1]=(...a)=>i.handleChange&&i.handleChange(...a))},null,544),[[xn,this.$root.tools.writer.selected.title]]),e[6]||(e[6]=P("label",null,"Author",-1)),an(P("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>this.$root.tools.writer.selected.author=a),onBlur:e[3]||(e[3]=(...a)=>i.handleChange&&i.handleChange(...a))},null,544),[[xn,this.$root.tools.writer.selected.author]]),e[7]||(e[7]=P("label",null,"Description",-1)),an(P("textarea",{"onUpdate:modelValue":e[4]||(e[4]=a=>this.$root.tools.writer.selected.description=a)},null,512),[[l],[xn,this.$root.tools.writer.selected.description]])])):He("",!0)}const gP=ct(fP,[["render",mP],["__scopeId","data-v-e1a2651a"]]),yP={name:"WriterHome",components:{DocStructure:lE,FileEditor:sP,BookEditor:gP},data(){return{lhshidden:!1,rhshidden:!1}},computed:{displaylist(){return this.$root.syncdb.Writer.sort((t,e)=>new Date(e.lastupdated)-new Date(t.lastupdated))}},methods:{addNewBook(){let t=JSON.parse(JSON.stringify(this.$root.writerTemplate));t.uuid=this.$root.uuid(),this.$root.AddRecord("Writer",t)}}},bP={key:0},vP={class:"writer-home"},wP={class:"gridcard-grid"},SP=["onClick"],kP={class:"book-3d"},xP={class:"book-3d__inner"},CP=["src","alt"],TP=["alt"],EP={key:1};function OP(t,e,n,r,o,i){const s=Qe("FileEditor"),l=Qe("BookEditor"),a=Qe("DocStructure");return X(),fe(rt,null,[t.$root.tools.writer.selected?He("",!0):(X(),fe("div",bP,[P("div",vP,[P("button",{onClick:e[0]||(e[0]=(...c)=>i.addNewBook&&i.addNewBook(...c))},"Add a New Book"),P("div",wP,[(X(!0),fe(rt,null,pr(i.displaylist,(c,u)=>(X(),fe("div",{class:"gridcard",key:u,onClick:d=>t.$root.tools.writer.selected=c},[P("div",kP,[P("div",xP,[c.cover?(X(),fe("img",{key:0,src:c.cover,class:"book-3d__cover",alt:c.title},null,8,CP)):(X(),fe("img",{key:1,class:"book-3d__cover",src:r0,alt:c.title},null,8,TP))])]),P("h2",null,kn(c.title),1),P("p",null,"by "+kn(c.author),1),P("p",null,kn(c.description),1),P("p",null,kn(c.lastupdated),1)],8,SP))),128))])])])),t.$root.tools.writer.selected?(X(),fe("div",EP,[P("div",{class:dr(["main",{lhsmain:o.lhshidden,rhsmain:o.rhshidden}])},[t.$root.tools.writer.selectednode?(X(),xt(s,{key:t.$root.tools.writer.selectednode})):He("",!0),t.$root.tools.writer.selectednode?He("",!0):(X(),xt(l,{key:1}))],2),P("div",{class:dr(["lhs",{lhshidden:o.lhshidden}])},[P("button",{onClick:e[1]||(e[1]=c=>o.lhshidden=!o.lhshidden),class:"btn lhsbtn"},e[3]||(e[3]=[P("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[P("title",null,"menu"),P("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"})],-1)])),wt(a)],2),P("div",{class:dr(["rhs",{rhshidden:o.rhshidden}])},[P("button",{onClick:e[2]||(e[2]=c=>o.rhshidden=!o.rhshidden),class:"btn rhsbtn"},e[4]||(e[4]=[P("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[P("title",null,"menu"),P("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"})],-1)]))],2)])):He("",!0)],64)}const AP=ct(yP,[["render",OP],["__scopeId","data-v-6762adfd"]]),MP={name:"MindmapHome",data(){return{}},methods:{async update(){await this.$root.UpdateRecord("Mindmap",this.$root.tools.mindmap.selected.uuid,this.$root.tools.mindmap.selected)}}},_P={class:"flexcol"};function NP(t,e,n,r,o,i){return X(),fe(rt,null,[P("div",_P,[an(P("input",{onBlur:e[0]||(e[0]=s=>i.update()),type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>t.$root.tools.mindmap.selected.title=s)},null,544),[[xn,t.$root.tools.mindmap.selected.title]]),P("button",{onClick:e[2]||(e[2]=s=>t.$root.tools.mindmap.selected=null)},"close")]),e[3]||(e[3]=P("div",null," OK mindmap needs to go here ",-1))],64)}const PP=ct(MP,[["render",NP],["__scopeId","data-v-4a66ea3d"]]),$P={name:"MindmapHome",components:{MindmapEditor:PP}},DP={key:0},IP=["onClick"],BP={key:1};function RP(t,e,n,r,o,i){const s=Qe("MindmapEditor");return X(),fe(rt,null,[t.$root.tools.mindmap.selected?He("",!0):(X(),fe("div",DP,[P("button",{onClick:e[0]||(e[0]=l=>t.$root.makeMindmap("",""))},"Add"),(X(!0),fe(rt,null,pr(this.$root.syncdb.Mindmap,(l,a)=>(X(),fe("div",null,[P("button",{onClick:c=>t.$root.tools.mindmap.selected=l},kn(l.title),9,IP)]))),256))])),t.$root.tools.mindmap.selected?(X(),fe("div",BP,[wt(s)])):He("",!0)],64)}const LP=ct($P,[["render",RP]]),VP={components:{EditorContent:Xv},props:{modelValue:{type:String,required:!0}},emits:["update:modelValue","blur"],data(){return{editor:null}},methods:{emitContent(){this.$emit("update:modelValue",this.editor.getHTML())},emitBlur(){this.$emit("blur")}},mounted(){this.editor=new Yv({content:this.modelValue,extensions:[n0]}),this.editor.on("update",this.emitContent),this.editor.on("blur",this.emitBlur)},beforeUnmount(){this.editor&&this.editor.destroy()}};function FP(t,e,n,r,o,i){const s=Qe("editor-content");return X(),xt(s,{class:"editor",editor:o.editor},null,8,["editor"])}const jP=ct(VP,[["render",FP]]),HP={name:"TimelineEditor",components:{MiniEditor:jP},data(){return{mytimeline:null}},async mounted(){this.mytimeline=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Timeline.get(this.$root.tools.timeline.selected.uuid)))},methods:{async update(){console.log("updating"),await this.$root.UpdateRecord("Timeline",this.mytimeline.uuid,this.mytimeline)},addTime(t){let e={};e.title="Title Here",e.text="",e.date="Date Label",t==null?this.mytimeline.content.items.push(e):this.mytimeline.content.items.splice(t,0,e)}}},zP={key:0,class:"subbar"},KP={key:1,class:"timeline"},UP={class:"content"},WP=["onUpdate:modelValue"],qP={class:"time"},JP=["onUpdate:modelValue"],GP={style:{"text-align":"center"}};function YP(t,e,n,r,o,i){const s=Qe("MiniEditor");return X(),fe(rt,null,[o.mytimeline?(X(),fe("div",zP,[an(P("input",{onBlur:e[0]||(e[0]=l=>i.update()),type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>this.mytimeline.title=l)},null,544),[[xn,this.mytimeline.title]]),P("button",{class:"btn",onClick:e[2]||(e[2]=l=>t.$root.tools.timeline.selected=null)},e[7]||(e[7]=[P("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[P("title",null,"close"),P("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})],-1)]))])):He("",!0),o.mytimeline?(X(),fe("div",KP,[P("ul",null,[(X(!0),fe(rt,null,pr(o.mytimeline.content.items,(l,a)=>(X(),fe("li",null,[P("div",UP,[P("h3",null,[an(P("input",{type:"text","onUpdate:modelValue":c=>l.title=c,placeholder:"Title Here",onBlur:e[3]||(e[3]=c=>i.update())},null,40,WP),[[xn,l.title]])]),P("p",null,[(X(),xt(s,{modelValue:l.text,"onUpdate:modelValue":c=>l.text=c,onBlur:e[4]||(e[4]=c=>i.update()),key:o.mytimeline.lastupdated},null,8,["modelValue","onUpdate:modelValue"]))])]),P("div",qP,[P("h4",null,[an(P("input",{type:"text","onUpdate:modelValue":c=>l.date=c,placeholder:"label",onBlur:e[5]||(e[5]=c=>i.update())},null,40,JP),[[xn,l.date]])])])]))),256)),e[9]||(e[9]=P("div",{style:{clear:"both"}},null,-1)),P("div",GP,[P("button",{onClick:e[6]||(e[6]=l=>i.addTime()),class:"tlbutton"},e[8]||(e[8]=[P("svg",{icon:"",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[P("title",null,"plus-circle-outline"),P("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})],-1)]))])])])):He("",!0)],64)}const XP=ct(HP,[["render",YP],["__scopeId","data-v-50942c24"]]),ZP={name:"TimelineHome",components:{TimelineEditor:XP}},QP={key:0,class:"timelines"},e2=["onClick"],t2={key:1};function n2(t,e,n,r,o,i){const s=Qe("TimelineEditor");return X(),fe(rt,null,[t.$root.tools.timeline.selected?He("",!0):(X(),fe("div",QP,[(X(!0),fe(rt,null,pr(this.$root.syncdb.Timeline,(l,a)=>(X(),fe("button",{onClick:c=>t.$root.tools.timeline.selected=l},[e[1]||(e[1]=P("svg",{class:"icon",viewBox:"0 0 24 24"},[P("title",null,"timeline-outline"),P("path",{d:"M4 2V8H2V2H4M2 22V16H4V22H2M5 12C5 13.11 4.11 14 3 14C1.9 14 1 13.11 1 12C1 10.9 1.9 10 3 10C4.11 10 5 10.9 5 12M24 6V18C24 19.11 23.11 20 22 20H10C8.9 20 8 19.11 8 18V14L6 12L8 10V6C8 4.89 8.9 4 10 4H22C23.11 4 24 4.89 24 6M10 6V18H22V6H10Z"})],-1)),P("div",null,kn(l.title),1)],8,e2))),256)),P("button",{onClick:e[0]||(e[0]=l=>t.$root.makeTimeline()),class:"add"},e[2]||(e[2]=[P("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[P("title",null,"plus-circle-outline"),P("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})],-1),P("div",null,"Add",-1)]))])),t.$root.tools.timeline.selected?(X(),fe("div",t2,[wt(s)])):He("",!0)],64)}const r2=ct(ZP,[["render",n2],["__scopeId","data-v-71745106"]]),o2={name:"SnowflakeEditor",data(){return{}},methods:{async update(){await this.$root.UpdateRecord("Snowflake",this.$root.tools.snowflake.selected.uuid,this.$root.tools.snowflake.selected)}}},i2={class:"flexcol"};function s2(t,e,n,r,o,i){return X(),fe(rt,null,[P("div",i2,[an(P("input",{onBlur:e[0]||(e[0]=s=>i.update()),type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>t.$root.tools.snowflake.selected.title=s)},null,544),[[xn,t.$root.tools.snowflake.selected.title]]),P("button",{onClick:e[2]||(e[2]=s=>t.$root.tools.snowflake.selected=null)},"close")]),e[3]||(e[3]=P("div",null," OK snowflake needs to go here ",-1))],64)}const l2=ct(o2,[["render",s2],["__scopeId","data-v-21f9e03e"]]),a2={name:"SnowflakeHome",components:{SnowflakeEditor:l2}},c2={key:0},u2=["onClick"],d2={key:1};function f2(t,e,n,r,o,i){const s=Qe("SnowflakeEditor");return X(),fe(rt,null,[t.$root.tools.snowflake.selected?He("",!0):(X(),fe("div",c2,[P("button",{onClick:e[0]||(e[0]=l=>t.$root.makeSnowflake())},"Add"),(X(!0),fe(rt,null,pr(this.$root.syncdb.Snowflake,(l,a)=>(X(),fe("div",null,[P("button",{onClick:c=>t.$root.tools.snowflake.selected=l},kn(l.title),9,u2)]))),256))])),t.$root.tools.snowflake.selected?(X(),fe("div",d2,[wt(s)])):He("",!0)],64)}const h2=ct(a2,[["render",f2]]),p2={name:"GridplannerEditor",data(){return{}},methods:{async update(){await this.$root.UpdateRecord("Gridplanner",this.$root.tools.gridplanner.selected.uuid,this.$root.tools.gridplanner.selected)}}},m2={class:"flexcol"};function g2(t,e,n,r,o,i){return X(),fe(rt,null,[P("div",m2,[an(P("input",{onBlur:e[0]||(e[0]=s=>i.update()),type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>t.$root.tools.gridplanner.selected.title=s)},null,544),[[xn,t.$root.tools.gridplanner.selected.title]]),P("button",{onClick:e[2]||(e[2]=s=>t.$root.tools.gridplanner.selected=null)},"close")]),e[3]||(e[3]=P("div",null," OK gridplanner needs to go here ",-1))],64)}const y2=ct(p2,[["render",g2],["__scopeId","data-v-22703585"]]),b2={name:"GridplannerHome",components:{GridplannerEditor:y2}},v2={key:0},w2=["onClick"],S2={key:1};function k2(t,e,n,r,o,i){const s=Qe("GridplannerEditor");return X(),fe(rt,null,[t.$root.tools.gridplanner.selected?He("",!0):(X(),fe("div",v2,[P("button",{onClick:e[0]||(e[0]=l=>t.$root.makeGridplanner())},"Add"),(X(!0),fe(rt,null,pr(this.$root.syncdb.Gridplanner,(l,a)=>(X(),fe("div",null,[P("button",{onClick:c=>t.$root.tools.gridplanner.selected=l},kn(l.title),9,w2)]))),256))])),t.$root.tools.gridplanner.selected?(X(),fe("div",S2,[wt(s)])):He("",!0)],64)}const x2=ct(b2,[["render",k2]]),C2={name:"CardViewer",components:{},props:{cardRef:{type:String}},data(){return{currentcard:null}},async mounted(){this.currentcard=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Cards.get(this.cardRef)))},methods:{editcard(t){this.$root.tools.cards.selected=this.currentcard,this.$root.modal=!0}}},T2={key:0,class:"card card-placeholder"},E2={class:"card-title"},O2={class:"card-description"};function A2(t,e,n,r,o,i){return X(),fe("div",{class:"",onClick:e[0]||(e[0]=s=>i.editcard(o.currentcard.uuid))},[o.currentcard?He("",!0):(X(),fe("div",T2,' No card ref provided so we need to have the "create" or "link" option ')),o.currentcard?(X(),fe("div",{key:1,class:dr(["card card-button",o.currentcard.color])},[P("h1",E2,kn(o.currentcard.title),1),P("div",O2,kn(o.currentcard.description),1)],2)):He("",!0)])}const M2=ct(C2,[["render",A2],["__scopeId","data-v-fef44b76"]]),_2={name:"CardsdatabaseHome",components:{CardViewer:M2},computed:{filteredCardList(){return this.$root.syncdb.Cards}},methods:{}},N2={class:"masonry-grid"};function P2(t,e,n,r,o,i){const s=Qe("CardViewer");return X(),fe(rt,null,[P("div",null,[P("button",{class:"btn",onClick:e[0]||(e[0]=l=>t.$root.makeNewCard())},e[1]||(e[1]=[P("svg",{class:"icon",viewBox:"0 0 24 24"},[P("path",{d:"M19,20H4C2.89,20 2,19.1 2,18V6C2,4.89 2.89,4 4,4H10L12,6H19A2,2 0 0,1 21,8H21L4,8V18L6.14,10H23.21L20.93,18.5C20.7,19.37 19.92,20 19,20Z"})],-1),P("span",null,"NEW",-1)]))]),P("div",N2,[(X(!0),fe(rt,null,pr(i.filteredCardList,(l,a)=>(X(),xt(s,{key:l.uuid,cardRef:l.uuid,class:"masonry-item"},null,8,["cardRef"]))),128))])],64)}const $2=ct(_2,[["render",P2],["__scopeId","data-v-e0e201cc"]]),D2={name:"App Home",components:{ProjectHome:YC,WriterHome:AP,MindmapHome:LP,TimelineHome:r2,SnowflakeHome:h2,GridplannerHome:x2,CardsdatabaseHome:$2},data(){return{}}};function I2(t,e,n,r,o,i){const s=Qe("ProjectHome"),l=Qe("WriterHome"),a=Qe("MindmapHome"),c=Qe("TimelineHome"),u=Qe("SnowflakeHome"),d=Qe("GridplannerHome"),h=Qe("CardsdatabaseHome");return X(),fe(rt,null,[t.$root.currentTool?He("",!0):(X(),xt(s,{key:0})),t.$root.currentTool==="writer"?(X(),xt(l,{key:1})):He("",!0),t.$root.currentTool==="mindmap"?(X(),xt(a,{key:2})):He("",!0),t.$root.currentTool==="timeline"?(X(),xt(c,{key:3})):He("",!0),t.$root.currentTool==="snowflake"?(X(),xt(u,{key:4})):He("",!0),t.$root.currentTool==="gridplanner"?(X(),xt(d,{key:5})):He("",!0),t.$root.currentTool==="cardsdatabase"?(X(),xt(h,{key:6})):He("",!0)],64)}const B2=ct(D2,[["render",I2]]),R2={mixins:[Kx,Ux,Wx,qx],components:{TopToolbar:iC,ModalManager:pC,InstallPopup:kC,FooterBar:bC,ApplicationSections:B2,Welcome:MC},data(){return{modal:null,currentTool:null,urlSelected:null,FileManager:{fileHandle:null,jsonData:null},tools:{current:null,writer:{selected:null,selectednode:null,mybook:null},cards:{searchterms:null,selected:null},gridplanner:{selected:null},timeline:{selected:null},snowflake:{selected:null},mindmap:{selected:null},planningboard:{selected:null}}}},created(){"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js").then(t=>{t.onupdatefound=()=>{const e=t.installing;e&&(e.onstatechange=()=>{e.state==="installed"&&navigator.serviceWorker.controller&&confirm("A new version of the app is available. Would you like to update?")&&window.location.reload()})}})},methods:{}},L2={id:"app"};function V2(t,e,n,r,o,i){const s=Qe("TopToolbar"),l=Qe("Welcome"),a=Qe("ApplicationSections"),c=Qe("FooterBar"),u=Qe("ModalManager"),d=Qe("InstallPopup");return X(),fe(rt,null,[P("div",L2,[t.$root.mainwindow?(X(),xt(s,{key:0})):He("",!0),P("div",{class:dr(["container",{mainwindow:t.$root.mainwindow}])},[t.$root.dbRef?(X(),xt(a,{key:1})):(X(),xt(l,{key:0}))],2),t.$root.mainwindow?(X(),xt(c,{key:1})):He("",!0)]),t.$root.modal?(X(),xt(u,{key:0})):He("",!0),wt(d)],64)}const F2=ct(R2,[["render",V2]]);var eo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function j2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var o0={exports:{}};/*!
* sweetalert2 v11.4.4
* Released under the MIT License.
*/(function(t,e){(function(n,r){t.exports=r()})(eo,function(){const n="SweetAlert2:",r=f=>{const p=[];for(let v=0;v<f.length;v++)p.indexOf(f[v])===-1&&p.push(f[v]);return p},o=f=>f.charAt(0).toUpperCase()+f.slice(1),i=f=>Array.prototype.slice.call(f),s=f=>{console.warn("".concat(n," ").concat(typeof f=="object"?f.join(" "):f))},l=f=>{console.error("".concat(n," ").concat(f))},a=[],c=f=>{a.includes(f)||(a.push(f),s(f))},u=(f,p)=>{c('"'.concat(f,'" is deprecated and will be removed in the next major release. Please use "').concat(p,'" instead.'))},d=f=>typeof f=="function"?f():f,h=f=>f&&typeof f.toPromise=="function",m=f=>h(f)?f.toPromise():Promise.resolve(f),g=f=>f&&Promise.resolve(f)===f,b={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},k=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],T={},A=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],N=f=>Object.prototype.hasOwnProperty.call(b,f),B=f=>k.indexOf(f)!==-1,D=f=>T[f],V=f=>{N(f)||s('Unknown parameter "'.concat(f,'"'))},j=f=>{A.includes(f)&&s('The parameter "'.concat(f,'" is incompatible with toasts'))},K=f=>{D(f)&&u(f,D(f))},E=f=>{!f.backdrop&&f.allowOutsideClick&&s('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const p in f)V(p),f.toast&&j(p),K(p)},S="swal2-",F=f=>{const p={};for(const v in f)p[f[v]]=S+f[v];return p},C=F(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),ue=F(["success","warning","info","question","error"]),Q=()=>document.body.querySelector(".".concat(C.container)),xe=f=>{const p=Q();return p?p.querySelector(f):null},be=f=>xe(".".concat(f)),ee=()=>be(C.popup),Ae=()=>be(C.icon),et=()=>be(C.title),Ue=()=>be(C["html-container"]),ot=()=>be(C.image),ht=()=>be(C["progress-steps"]),Lt=()=>be(C["validation-message"]),Me=()=>xe(".".concat(C.actions," .").concat(C.confirm)),tt=()=>xe(".".concat(C.actions," .").concat(C.deny)),At=()=>be(C["input-label"]),H=()=>xe(".".concat(C.loader)),z=()=>xe(".".concat(C.actions," .").concat(C.cancel)),q=()=>be(C.actions),W=()=>be(C.footer),ae=()=>be(C["timer-progress-bar"]),O=()=>be(C.close),_=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,R=()=>{const f=i(ee().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((v,M)=>{const se=parseInt(v.getAttribute("tabindex")),Ne=parseInt(M.getAttribute("tabindex"));return se>Ne?1:se<Ne?-1:0}),p=i(ee().querySelectorAll(_)).filter(v=>v.getAttribute("tabindex")!=="-1");return r(f.concat(p)).filter(v=>I(v))},L=()=>Z(document.body,C.shown)&&!Z(document.body,C["toast-shown"])&&!Z(document.body,C["no-backdrop"]),U=()=>ee()&&Z(ee(),C.toast),J=()=>ee().hasAttribute("data-loading"),oe={previousBodyPadding:null},G=(f,p)=>{if(f.textContent="",p){const v=new DOMParser().parseFromString(p,"text/html");i(v.querySelector("head").childNodes).forEach(M=>{f.appendChild(M)}),i(v.querySelector("body").childNodes).forEach(M=>{f.appendChild(M)})}},Z=(f,p)=>{if(!p)return!1;const v=p.split(/\s+/);for(let M=0;M<v.length;M++)if(!f.classList.contains(v[M]))return!1;return!0},Y=(f,p)=>{i(f.classList).forEach(v=>{!Object.values(C).includes(v)&&!Object.values(ue).includes(v)&&!Object.values(p.showClass).includes(v)&&f.classList.remove(v)})},ge=(f,p,v)=>{if(Y(f,p),p.customClass&&p.customClass[v]){if(typeof p.customClass[v]!="string"&&!p.customClass[v].forEach)return s("Invalid type of customClass.".concat(v,'! Expected string or iterable object, got "').concat(typeof p.customClass[v],'"'));te(f,p.customClass[v])}},le=(f,p)=>{if(!p)return null;switch(p){case"select":case"textarea":case"file":return f.querySelector(".".concat(C.popup," > .").concat(C[p]));case"checkbox":return f.querySelector(".".concat(C.popup," > .").concat(C.checkbox," input"));case"radio":return f.querySelector(".".concat(C.popup," > .").concat(C.radio," input:checked"))||f.querySelector(".".concat(C.popup," > .").concat(C.radio," input:first-child"));case"range":return f.querySelector(".".concat(C.popup," > .").concat(C.range," input"));default:return f.querySelector(".".concat(C.popup," > .").concat(C.input))}},he=f=>{if(f.focus(),f.type!=="file"){const p=f.value;f.value="",f.value=p}},pe=(f,p,v)=>{!f||!p||(typeof p=="string"&&(p=p.split(/\s+/).filter(Boolean)),p.forEach(M=>{Array.isArray(f)?f.forEach(se=>{v?se.classList.add(M):se.classList.remove(M)}):v?f.classList.add(M):f.classList.remove(M)}))},te=(f,p)=>{pe(f,p,!0)},ke=(f,p)=>{pe(f,p,!1)},Oe=(f,p)=>{const v=i(f.childNodes);for(let M=0;M<v.length;M++)if(Z(v[M],p))return v[M]},me=(f,p,v)=>{v==="".concat(parseInt(v))&&(v=parseInt(v)),v||parseInt(v)===0?f.style[p]=typeof v=="number"?"".concat(v,"px"):v:f.style.removeProperty(p)},w=function(f){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";f.style.display=p},y=f=>{f.style.display="none"},x=(f,p,v,M)=>{const se=f.querySelector(p);se&&(se.style[v]=M)},$=(f,p,v)=>{p?w(f,v):y(f)},I=f=>!!(f&&(f.offsetWidth||f.offsetHeight||f.getClientRects().length)),re=()=>!I(Me())&&!I(tt())&&!I(z()),ie=f=>f.scrollHeight>f.clientHeight,Te=f=>{const p=window.getComputedStyle(f),v=parseFloat(p.getPropertyValue("animation-duration")||"0"),M=parseFloat(p.getPropertyValue("transition-duration")||"0");return v>0||M>0},ve=function(f){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const v=ae();I(v)&&(p&&(v.style.transition="none",v.style.width="100%"),setTimeout(()=>{v.style.transition="width ".concat(f/1e3,"s linear"),v.style.width="0%"},10))},Ie=()=>{const f=ae(),p=parseInt(window.getComputedStyle(f).width);f.style.removeProperty("transition"),f.style.width="100%";const v=parseInt(window.getComputedStyle(f).width),M=p/v*100;f.style.removeProperty("transition"),f.style.width="".concat(M,"%")},Ge=()=>typeof window>"u"||typeof document>"u",Xe=100,ye={},it=()=>{ye.previousActiveElement&&ye.previousActiveElement.focus?(ye.previousActiveElement.focus(),ye.previousActiveElement=null):document.body&&document.body.focus()},nt=f=>new Promise(p=>{if(!f)return p();const v=window.scrollX,M=window.scrollY;ye.restoreFocusTimeout=setTimeout(()=>{it(),p()},Xe),window.scrollTo(v,M)}),pt=`
 <div aria-labelledby="`.concat(C.title,'" aria-describedby="').concat(C["html-container"],'" class="').concat(C.popup,`" tabindex="-1">
   <button type="button" class="`).concat(C.close,`"></button>
   <ul class="`).concat(C["progress-steps"],`"></ul>
   <div class="`).concat(C.icon,`"></div>
   <img class="`).concat(C.image,`" />
   <h2 class="`).concat(C.title,'" id="').concat(C.title,`"></h2>
   <div class="`).concat(C["html-container"],'" id="').concat(C["html-container"],`"></div>
   <input class="`).concat(C.input,`" />
   <input type="file" class="`).concat(C.file,`" />
   <div class="`).concat(C.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(C.select,`"></select>
   <div class="`).concat(C.radio,`"></div>
   <label for="`).concat(C.checkbox,'" class="').concat(C.checkbox,`">
     <input type="checkbox" />
     <span class="`).concat(C.label,`"></span>
   </label>
   <textarea class="`).concat(C.textarea,`"></textarea>
   <div class="`).concat(C["validation-message"],'" id="').concat(C["validation-message"],`"></div>
   <div class="`).concat(C.actions,`">
     <div class="`).concat(C.loader,`"></div>
     <button type="button" class="`).concat(C.confirm,`"></button>
     <button type="button" class="`).concat(C.deny,`"></button>
     <button type="button" class="`).concat(C.cancel,`"></button>
   </div>
   <div class="`).concat(C.footer,`"></div>
   <div class="`).concat(C["timer-progress-bar-container"],`">
     <div class="`).concat(C["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),mt=()=>{const f=Q();return f?(f.remove(),ke([document.documentElement,document.body],[C["no-backdrop"],C["toast-shown"],C["has-column"]]),!0):!1},Le=()=>{ye.currentInstance.resetValidationMessage()},Vt=()=>{const f=ee(),p=Oe(f,C.input),v=Oe(f,C.file),M=f.querySelector(".".concat(C.range," input")),se=f.querySelector(".".concat(C.range," output")),Ne=Oe(f,C.select),Nt=f.querySelector(".".concat(C.checkbox," input")),Fn=Oe(f,C.textarea);p.oninput=Le,v.onchange=Le,Ne.onchange=Le,Nt.onchange=Le,Fn.oninput=Le,M.oninput=()=>{Le(),se.value=M.value},M.onchange=()=>{Le(),M.nextSibling.value=M.value}},Ee=f=>typeof f=="string"?document.querySelector(f):f,de=f=>{const p=ee();p.setAttribute("role",f.toast?"alert":"dialog"),p.setAttribute("aria-live",f.toast?"polite":"assertive"),f.toast||p.setAttribute("aria-modal","true")},Pe=f=>{window.getComputedStyle(f).direction==="rtl"&&te(Q(),C.rtl)},_e=f=>{const p=mt();if(Ge()){l("SweetAlert2 requires document to initialize");return}const v=document.createElement("div");v.className=C.container,p&&te(v,C["no-transition"]),G(v,pt);const M=Ee(f.target);M.appendChild(v),de(f),Pe(M),Vt()},Be=(f,p)=>{f instanceof HTMLElement?p.appendChild(f):typeof f=="object"?Ze(f,p):f&&G(p,f)},Ze=(f,p)=>{f.jquery?hn(p,f):G(p,f.toString())},hn=(f,p)=>{if(f.textContent="",0 in p)for(let v=0;v in p;v++)f.appendChild(p[v].cloneNode(!0));else f.appendChild(p.cloneNode(!0))},gt=(()=>{if(Ge())return!1;const f=document.createElement("div"),p={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const v in p)if(Object.prototype.hasOwnProperty.call(p,v)&&typeof f.style[v]<"u")return p[v];return!1})(),tn=()=>{const f=document.createElement("div");f.className=C["scrollbar-measure"],document.body.appendChild(f);const p=f.getBoundingClientRect().width-f.clientWidth;return document.body.removeChild(f),p},_n=(f,p)=>{const v=q(),M=H();!p.showConfirmButton&&!p.showDenyButton&&!p.showCancelButton?y(v):w(v),ge(v,p,"actions"),ut(v,M,p),G(M,p.loaderHtml),ge(M,p,"loader")};function ut(f,p,v){const M=Me(),se=tt(),Ne=z();ft(M,"confirm",v),ft(se,"deny",v),ft(Ne,"cancel",v),Nn(M,se,Ne,v),v.reverseButtons&&(v.toast?(f.insertBefore(Ne,M),f.insertBefore(se,M)):(f.insertBefore(Ne,p),f.insertBefore(se,p),f.insertBefore(M,p)))}function Nn(f,p,v,M){if(!M.buttonsStyling)return ke([f,p,v],C.styled);te([f,p,v],C.styled),M.confirmButtonColor&&(f.style.backgroundColor=M.confirmButtonColor,te(f,C["default-outline"])),M.denyButtonColor&&(p.style.backgroundColor=M.denyButtonColor,te(p,C["default-outline"])),M.cancelButtonColor&&(v.style.backgroundColor=M.cancelButtonColor,te(v,C["default-outline"]))}function ft(f,p,v){$(f,v["show".concat(o(p),"Button")],"inline-block"),G(f,v["".concat(p,"ButtonText")]),f.setAttribute("aria-label",v["".concat(p,"ButtonAriaLabel")]),f.className=C[p],ge(f,v,"".concat(p,"Button")),te(f,v["".concat(p,"ButtonClass")])}function pn(f,p){typeof p=="string"?f.style.background=p:p||te([document.documentElement,document.body],C["no-backdrop"])}function qt(f,p){p in C?te(f,C[p]):(s('The "position" parameter is not valid, defaulting to "center"'),te(f,C.center))}function Ln(f,p){if(p&&typeof p=="string"){const v="grow-".concat(p);v in C&&te(f,C[v])}}const Vn=(f,p)=>{const v=Q();v&&(pn(v,p.backdrop),qt(v,p.position),Ln(v,p.grow),ge(v,p,"container"))};var We={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const fi=["input","file","range","select","radio","checkbox","textarea"],Qr=(f,p)=>{const v=ee(),M=We.innerParams.get(f),se=!M||p.input!==M.input;fi.forEach(Ne=>{const Nt=C[Ne],Fn=Oe(v,Nt);Jt(Ne,p.inputAttributes),Fn.className=Nt,se&&y(Fn)}),p.input&&(se&&ls(p),ir(p))},ls=f=>{if(!Pn[f.input])return l('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(f.input,'"'));const p=th(f.input),v=Pn[f.input](p,f);w(v),setTimeout(()=>{he(v)})},gr=f=>{for(let p=0;p<f.attributes.length;p++){const v=f.attributes[p].name;["type","value","style"].includes(v)||f.removeAttribute(v)}},Jt=(f,p)=>{const v=le(ee(),f);if(v){gr(v);for(const M in p)v.setAttribute(M,p[M])}},ir=f=>{const p=th(f.input);f.customClass&&te(p,f.customClass.input)},sr=(f,p)=>{(!f.placeholder||p.inputPlaceholder)&&(f.placeholder=p.inputPlaceholder)},yr=(f,p,v)=>{if(v.inputLabel){f.id=C.input;const M=document.createElement("label"),se=C["input-label"];M.setAttribute("for",f.id),M.className=se,te(M,v.customClass.inputLabel),M.innerText=v.inputLabel,p.insertAdjacentElement("beforebegin",M)}},th=f=>{const p=C[f]?C[f]:C.input;return Oe(ee(),p)},Pn={};Pn.text=Pn.email=Pn.password=Pn.number=Pn.tel=Pn.url=(f,p)=>(typeof p.inputValue=="string"||typeof p.inputValue=="number"?f.value=p.inputValue:g(p.inputValue)||s('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof p.inputValue,'"')),yr(f,f,p),sr(f,p),f.type=p.input,f),Pn.file=(f,p)=>(yr(f,f,p),sr(f,p),f),Pn.range=(f,p)=>{const v=f.querySelector("input"),M=f.querySelector("output");return v.value=p.inputValue,v.type=p.input,M.value=p.inputValue,yr(v,f,p),f},Pn.select=(f,p)=>{if(f.textContent="",p.inputPlaceholder){const v=document.createElement("option");G(v,p.inputPlaceholder),v.value="",v.disabled=!0,v.selected=!0,f.appendChild(v)}return yr(f,f,p),f},Pn.radio=f=>(f.textContent="",f),Pn.checkbox=(f,p)=>{const v=le(ee(),"checkbox");v.value="1",v.id=C.checkbox,v.checked=!!p.inputValue;const M=f.querySelector("span");return G(M,p.inputPlaceholder),f},Pn.textarea=(f,p)=>{f.value=p.inputValue,sr(f,p),yr(f,f,p);const v=M=>parseInt(window.getComputedStyle(M).marginLeft)+parseInt(window.getComputedStyle(M).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const M=parseInt(window.getComputedStyle(ee()).width),se=()=>{const Ne=f.offsetWidth+v(f);Ne>M?ee().style.width="".concat(Ne,"px"):ee().style.width=null};new MutationObserver(se).observe(f,{attributes:!0,attributeFilter:["style"]})}}),f};const s0=(f,p)=>{const v=Ue();ge(v,p,"htmlContainer"),p.html?(Be(p.html,v),w(v,"block")):p.text?(v.textContent=p.text,w(v,"block")):y(v),Qr(f,p)},l0=(f,p)=>{const v=W();$(v,p.footer),p.footer&&Be(p.footer,v),ge(v,p,"footer")},a0=(f,p)=>{const v=O();G(v,p.closeButtonHtml),ge(v,p,"closeButton"),$(v,p.showCloseButton),v.setAttribute("aria-label",p.closeButtonAriaLabel)},c0=(f,p)=>{const v=We.innerParams.get(f),M=Ae();if(v&&p.icon===v.icon){rh(M,p),nh(M,p);return}if(!p.icon&&!p.iconHtml)return y(M);if(p.icon&&Object.keys(ue).indexOf(p.icon)===-1)return l('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(p.icon,'"')),y(M);w(M),rh(M,p),nh(M,p),te(M,p.showClass.icon)},nh=(f,p)=>{for(const v in ue)p.icon!==v&&ke(f,ue[v]);te(f,ue[p.icon]),h0(f,p),u0(),ge(f,p,"icon")},u0=()=>{const f=ee(),p=window.getComputedStyle(f).getPropertyValue("background-color"),v=f.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let M=0;M<v.length;M++)v[M].style.backgroundColor=p},d0=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,f0=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,rh=(f,p)=>{f.textContent="",p.iconHtml?G(f,oh(p.iconHtml)):p.icon==="success"?G(f,d0):p.icon==="error"?G(f,f0):G(f,oh({question:"?",warning:"!",info:"i"}[p.icon]))},h0=(f,p)=>{if(p.iconColor){f.style.color=p.iconColor,f.style.borderColor=p.iconColor;for(const v of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])x(f,v,"backgroundColor",p.iconColor);x(f,".swal2-success-ring","borderColor",p.iconColor)}},oh=f=>'<div class="'.concat(C["icon-content"],'">').concat(f,"</div>"),p0=(f,p)=>{const v=ot();if(!p.imageUrl)return y(v);w(v,""),v.setAttribute("src",p.imageUrl),v.setAttribute("alt",p.imageAlt),me(v,"width",p.imageWidth),me(v,"height",p.imageHeight),v.className=C.image,ge(v,p,"image")},m0=f=>{const p=document.createElement("li");return te(p,C["progress-step"]),G(p,f),p},g0=f=>{const p=document.createElement("li");return te(p,C["progress-step-line"]),f.progressStepsDistance&&(p.style.width=f.progressStepsDistance),p},y0=(f,p)=>{const v=ht();if(!p.progressSteps||p.progressSteps.length===0)return y(v);w(v),v.textContent="",p.currentProgressStep>=p.progressSteps.length&&s("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),p.progressSteps.forEach((M,se)=>{const Ne=m0(M);if(v.appendChild(Ne),se===p.currentProgressStep&&te(Ne,C["active-progress-step"]),se!==p.progressSteps.length-1){const Nt=g0(p);v.appendChild(Nt)}})},b0=(f,p)=>{const v=et();$(v,p.title||p.titleText,"block"),p.title&&Be(p.title,v),p.titleText&&(v.innerText=p.titleText),ge(v,p,"title")},v0=(f,p)=>{const v=Q(),M=ee();p.toast?(me(v,"width",p.width),M.style.width="100%",M.insertBefore(H(),Ae())):me(M,"width",p.width),me(M,"padding",p.padding),p.color&&(M.style.color=p.color),p.background&&(M.style.background=p.background),y(Lt()),w0(M,p)},w0=(f,p)=>{f.className="".concat(C.popup," ").concat(I(f)?p.showClass.popup:""),p.toast?(te([document.documentElement,document.body],C["toast-shown"]),te(f,C.toast)):te(f,C.modal),ge(f,p,"popup"),typeof p.customClass=="string"&&te(f,p.customClass),p.icon&&te(f,C["icon-".concat(p.icon)])},ih=(f,p)=>{v0(f,p),Vn(f,p),y0(f,p),c0(f,p),p0(f,p),b0(f,p),a0(f,p),s0(f,p),_n(f,p),l0(f,p),typeof p.didRender=="function"&&p.didRender(ee())},hi=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),S0=()=>{i(document.body.children).forEach(f=>{f===Q()||f.contains(Q())||(f.hasAttribute("aria-hidden")&&f.setAttribute("data-previous-aria-hidden",f.getAttribute("aria-hidden")),f.setAttribute("aria-hidden","true"))})},sh=()=>{i(document.body.children).forEach(f=>{f.hasAttribute("data-previous-aria-hidden")?(f.setAttribute("aria-hidden",f.getAttribute("data-previous-aria-hidden")),f.removeAttribute("data-previous-aria-hidden")):f.removeAttribute("aria-hidden")})},lh=["swal-title","swal-html","swal-footer"],k0=f=>{const p=typeof f.template=="string"?document.querySelector(f.template):f.template;if(!p)return{};const v=p.content;return M0(v),Object.assign(x0(v),C0(v),T0(v),E0(v),O0(v),A0(v,lh))},x0=f=>{const p={};return i(f.querySelectorAll("swal-param")).forEach(v=>{$o(v,["name","value"]);const M=v.getAttribute("name"),se=v.getAttribute("value");typeof b[M]=="boolean"&&se==="false"&&(p[M]=!1),typeof b[M]=="object"&&(p[M]=JSON.parse(se))}),p},C0=f=>{const p={};return i(f.querySelectorAll("swal-button")).forEach(v=>{$o(v,["type","color","aria-label"]);const M=v.getAttribute("type");p["".concat(M,"ButtonText")]=v.innerHTML,p["show".concat(o(M),"Button")]=!0,v.hasAttribute("color")&&(p["".concat(M,"ButtonColor")]=v.getAttribute("color")),v.hasAttribute("aria-label")&&(p["".concat(M,"ButtonAriaLabel")]=v.getAttribute("aria-label"))}),p},T0=f=>{const p={},v=f.querySelector("swal-image");return v&&($o(v,["src","width","height","alt"]),v.hasAttribute("src")&&(p.imageUrl=v.getAttribute("src")),v.hasAttribute("width")&&(p.imageWidth=v.getAttribute("width")),v.hasAttribute("height")&&(p.imageHeight=v.getAttribute("height")),v.hasAttribute("alt")&&(p.imageAlt=v.getAttribute("alt"))),p},E0=f=>{const p={},v=f.querySelector("swal-icon");return v&&($o(v,["type","color"]),v.hasAttribute("type")&&(p.icon=v.getAttribute("type")),v.hasAttribute("color")&&(p.iconColor=v.getAttribute("color")),p.iconHtml=v.innerHTML),p},O0=f=>{const p={},v=f.querySelector("swal-input");v&&($o(v,["type","label","placeholder","value"]),p.input=v.getAttribute("type")||"text",v.hasAttribute("label")&&(p.inputLabel=v.getAttribute("label")),v.hasAttribute("placeholder")&&(p.inputPlaceholder=v.getAttribute("placeholder")),v.hasAttribute("value")&&(p.inputValue=v.getAttribute("value")));const M=f.querySelectorAll("swal-input-option");return M.length&&(p.inputOptions={},i(M).forEach(se=>{$o(se,["value"]);const Ne=se.getAttribute("value"),Nt=se.innerHTML;p.inputOptions[Ne]=Nt})),p},A0=(f,p)=>{const v={};for(const M in p){const se=p[M],Ne=f.querySelector(se);Ne&&($o(Ne,[]),v[se.replace(/^swal-/,"")]=Ne.innerHTML.trim())}return v},M0=f=>{const p=lh.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);i(f.children).forEach(v=>{const M=v.tagName.toLowerCase();p.indexOf(M)===-1&&s("Unrecognized element <".concat(M,">"))})},$o=(f,p)=>{i(f.attributes).forEach(v=>{p.indexOf(v.name)===-1&&s(['Unrecognized attribute "'.concat(v.name,'" on <').concat(f.tagName.toLowerCase(),">."),"".concat(p.length?"Allowed attributes are: ".concat(p.join(", ")):"To set the value, use HTML within the element.")])})};var ah={email:(f,p)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(f)?Promise.resolve():Promise.resolve(p||"Invalid email address"),url:(f,p)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(f)?Promise.resolve():Promise.resolve(p||"Invalid URL")};function _0(f){f.inputValidator||Object.keys(ah).forEach(p=>{f.input===p&&(f.inputValidator=ah[p])})}function N0(f){(!f.target||typeof f.target=="string"&&!document.querySelector(f.target)||typeof f.target!="string"&&!f.target.appendChild)&&(s('Target parameter is not valid, defaulting to "body"'),f.target="body")}function P0(f){_0(f),f.showLoaderOnConfirm&&!f.preConfirm&&s(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),N0(f),typeof f.title=="string"&&(f.title=f.title.split(`
`).join("<br />")),_e(f)}class $0{constructor(p,v){this.callback=p,this.remaining=v,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(p){const v=this.running;return v&&this.stop(),this.remaining+=p,v&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const D0=()=>{oe.previousBodyPadding===null&&document.body.scrollHeight>window.innerHeight&&(oe.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(oe.previousBodyPadding+tn(),"px"))},I0=()=>{oe.previousBodyPadding!==null&&(document.body.style.paddingRight="".concat(oe.previousBodyPadding,"px"),oe.previousBodyPadding=null)},B0=()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!Z(document.body,C.iosfix)){const f=document.body.scrollTop;document.body.style.top="".concat(f*-1,"px"),te(document.body,C.iosfix),L0(),R0()}},R0=()=>{const f=navigator.userAgent,p=!!f.match(/iPad/i)||!!f.match(/iPhone/i),v=!!f.match(/WebKit/i);p&&v&&!f.match(/CriOS/i)&&ee().scrollHeight>window.innerHeight-44&&(Q().style.paddingBottom="".concat(44,"px"))},L0=()=>{const f=Q();let p;f.ontouchstart=v=>{p=V0(v)},f.ontouchmove=v=>{p&&(v.preventDefault(),v.stopPropagation())}},V0=f=>{const p=f.target,v=Q();return F0(f)||j0(f)?!1:p===v||!ie(v)&&p.tagName!=="INPUT"&&p.tagName!=="TEXTAREA"&&!(ie(Ue())&&Ue().contains(p))},F0=f=>f.touches&&f.touches.length&&f.touches[0].touchType==="stylus",j0=f=>f.touches&&f.touches.length>1,H0=()=>{if(Z(document.body,C.iosfix)){const f=parseInt(document.body.style.top,10);ke(document.body,C.iosfix),document.body.style.top="",document.body.scrollTop=f*-1}},ch=10,z0=f=>{const p=Q(),v=ee();typeof f.willOpen=="function"&&f.willOpen(v);const M=window.getComputedStyle(document.body).overflowY;W0(p,v,f),setTimeout(()=>{K0(p,v)},ch),L()&&(U0(p,f.scrollbarPadding,M),S0()),!U()&&!ye.previousActiveElement&&(ye.previousActiveElement=document.activeElement),typeof f.didOpen=="function"&&setTimeout(()=>f.didOpen(v)),ke(p,C["no-transition"])},uh=f=>{const p=ee();if(f.target!==p)return;const v=Q();p.removeEventListener(gt,uh),v.style.overflowY="auto"},K0=(f,p)=>{gt&&Te(p)?(f.style.overflowY="hidden",p.addEventListener(gt,uh)):f.style.overflowY="auto"},U0=(f,p,v)=>{B0(),p&&v!=="hidden"&&D0(),setTimeout(()=>{f.scrollTop=0})},W0=(f,p,v)=>{te(f,v.showClass.backdrop),p.style.setProperty("opacity","0","important"),w(p,"grid"),setTimeout(()=>{te(p,v.showClass.popup),p.style.removeProperty("opacity")},ch),te([document.documentElement,document.body],C.shown),v.heightAuto&&v.backdrop&&!v.toast&&te([document.documentElement,document.body],C["height-auto"])},pi=f=>{let p=ee();p||new Cl,p=ee();const v=H();U()?y(Ae()):q0(p,f),w(v),p.setAttribute("data-loading",!0),p.setAttribute("aria-busy",!0),p.focus()},q0=(f,p)=>{const v=q(),M=H();!p&&I(Me())&&(p=Me()),w(v),p&&(y(p),M.setAttribute("data-button-to-replace",p.className)),M.parentNode.insertBefore(M,p),te([f,v],C.loading)},J0=(f,p)=>{p.input==="select"||p.input==="radio"?Q0(f,p):["text","email","number","tel","textarea"].includes(p.input)&&(h(p.inputValue)||g(p.inputValue))&&(pi(Me()),e1(f,p))},G0=(f,p)=>{const v=f.getInput();if(!v)return null;switch(p.input){case"checkbox":return Y0(v);case"radio":return X0(v);case"file":return Z0(v);default:return p.inputAutoTrim?v.value.trim():v.value}},Y0=f=>f.checked?1:0,X0=f=>f.checked?f.value:null,Z0=f=>f.files.length?f.getAttribute("multiple")!==null?f.files:f.files[0]:null,Q0=(f,p)=>{const v=ee(),M=se=>t1[p.input](v,Rc(se),p);h(p.inputOptions)||g(p.inputOptions)?(pi(Me()),m(p.inputOptions).then(se=>{f.hideLoading(),M(se)})):typeof p.inputOptions=="object"?M(p.inputOptions):l("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof p.inputOptions))},e1=(f,p)=>{const v=f.getInput();y(v),m(p.inputValue).then(M=>{v.value=p.input==="number"?parseFloat(M)||0:"".concat(M),w(v),v.focus(),f.hideLoading()}).catch(M=>{l("Error in inputValue promise: ".concat(M)),v.value="",w(v),v.focus(),f.hideLoading()})},t1={select:(f,p,v)=>{const M=Oe(f,C.select),se=(Ne,Nt,Fn)=>{const mn=document.createElement("option");mn.value=Fn,G(mn,Nt),mn.selected=dh(Fn,v.inputValue),Ne.appendChild(mn)};p.forEach(Ne=>{const Nt=Ne[0],Fn=Ne[1];if(Array.isArray(Fn)){const mn=document.createElement("optgroup");mn.label=Nt,mn.disabled=!1,M.appendChild(mn),Fn.forEach(gi=>se(mn,gi[1],gi[0]))}else se(M,Fn,Nt)}),M.focus()},radio:(f,p,v)=>{const M=Oe(f,C.radio);p.forEach(Ne=>{const Nt=Ne[0],Fn=Ne[1],mn=document.createElement("input"),gi=document.createElement("label");mn.type="radio",mn.name=C.radio,mn.value=Nt,dh(Nt,v.inputValue)&&(mn.checked=!0);const Kc=document.createElement("span");G(Kc,Fn),Kc.className=C.label,gi.appendChild(mn),gi.appendChild(Kc),M.appendChild(gi)});const se=M.querySelectorAll("input");se.length&&se[0].focus()}},Rc=f=>{const p=[];return typeof Map<"u"&&f instanceof Map?f.forEach((v,M)=>{let se=v;typeof se=="object"&&(se=Rc(se)),p.push([M,se])}):Object.keys(f).forEach(v=>{let M=f[v];typeof M=="object"&&(M=Rc(M)),p.push([v,M])}),p},dh=(f,p)=>p&&p.toString()===f.toString();function fh(){const f=We.innerParams.get(this);if(!f)return;const p=We.domCache.get(this);y(p.loader),U()?f.icon&&w(Ae()):n1(p),ke([p.popup,p.actions],C.loading),p.popup.removeAttribute("aria-busy"),p.popup.removeAttribute("data-loading"),p.confirmButton.disabled=!1,p.denyButton.disabled=!1,p.cancelButton.disabled=!1}const n1=f=>{const p=f.popup.getElementsByClassName(f.loader.getAttribute("data-button-to-replace"));p.length?w(p[0],"inline-block"):re()&&y(f.actions)};function r1(f){const p=We.innerParams.get(f||this),v=We.domCache.get(f||this);return v?le(v.popup,p.input):null}var as={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};function hh(f,p,v,M){U()?ph(f,M):(nt(v).then(()=>ph(f,M)),ye.keydownTarget.removeEventListener("keydown",ye.keydownHandler,{capture:ye.keydownListenerCapture}),ye.keydownHandlerAdded=!1),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(p.setAttribute("style","display:none !important"),p.removeAttribute("class"),p.innerHTML=""):p.remove(),L()&&(I0(),H0(),sh()),o1()}function o1(){ke([document.documentElement,document.body],[C.shown,C["height-auto"],C["no-backdrop"],C["toast-shown"]])}function kl(f){f=a1(f);const p=as.swalPromiseResolve.get(this),v=s1(this);this.isAwaitingPromise()?f.isDismissed||(cs(this),p(f)):v&&p(f)}function i1(){return!!We.awaitingPromise.get(this)}const s1=f=>{const p=ee();if(!p)return!1;const v=We.innerParams.get(f);if(!v||Z(p,v.hideClass.popup))return!1;ke(p,v.showClass.popup),te(p,v.hideClass.popup);const M=Q();return ke(M,v.showClass.backdrop),te(M,v.hideClass.backdrop),c1(f,p,v),!0};function l1(f){const p=as.swalPromiseReject.get(this);cs(this),p&&p(f)}const cs=f=>{f.isAwaitingPromise()&&(We.awaitingPromise.delete(f),We.innerParams.get(f)||f._destroy())},a1=f=>typeof f>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},f),c1=(f,p,v)=>{const M=Q(),se=gt&&Te(p);typeof v.willClose=="function"&&v.willClose(p),se?u1(f,p,M,v.returnFocus,v.didClose):hh(f,M,v.returnFocus,v.didClose)},u1=(f,p,v,M,se)=>{ye.swalCloseEventFinishedCallback=hh.bind(null,f,v,M,se),p.addEventListener(gt,function(Ne){Ne.target===p&&(ye.swalCloseEventFinishedCallback(),delete ye.swalCloseEventFinishedCallback)})},ph=(f,p)=>{setTimeout(()=>{typeof p=="function"&&p.bind(f.params)(),f._destroy()})};function mh(f,p,v){const M=We.domCache.get(f);p.forEach(se=>{M[se].disabled=v})}function gh(f,p){if(!f)return!1;if(f.type==="radio"){const v=f.parentNode.parentNode.querySelectorAll("input");for(let M=0;M<v.length;M++)v[M].disabled=p}else f.disabled=p}function d1(){mh(this,["confirmButton","denyButton","cancelButton"],!1)}function f1(){mh(this,["confirmButton","denyButton","cancelButton"],!0)}function h1(){return gh(this.getInput(),!1)}function p1(){return gh(this.getInput(),!0)}function m1(f){const p=We.domCache.get(this),v=We.innerParams.get(this);G(p.validationMessage,f),p.validationMessage.className=C["validation-message"],v.customClass&&v.customClass.validationMessage&&te(p.validationMessage,v.customClass.validationMessage),w(p.validationMessage);const M=this.getInput();M&&(M.setAttribute("aria-invalid",!0),M.setAttribute("aria-describedby",C["validation-message"]),he(M),te(M,C.inputerror))}function g1(){const f=We.domCache.get(this);f.validationMessage&&y(f.validationMessage);const p=this.getInput();p&&(p.removeAttribute("aria-invalid"),p.removeAttribute("aria-describedby"),ke(p,C.inputerror))}function y1(){return We.domCache.get(this).progressSteps}function b1(f){const p=ee(),v=We.innerParams.get(this);if(!p||Z(p,v.hideClass.popup))return s("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const M=v1(f),se=Object.assign({},v,M);ih(this,se),We.innerParams.set(this,se),Object.defineProperties(this,{params:{value:Object.assign({},this.params,f),writable:!1,enumerable:!0}})}const v1=f=>{const p={};return Object.keys(f).forEach(v=>{B(v)?p[v]=f[v]:s('Invalid parameter to update: "'.concat(v,`". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js

If you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md`))}),p};function w1(){const f=We.domCache.get(this),p=We.innerParams.get(this);if(!p){yh(this);return}f.popup&&ye.swalCloseEventFinishedCallback&&(ye.swalCloseEventFinishedCallback(),delete ye.swalCloseEventFinishedCallback),ye.deferDisposalTimer&&(clearTimeout(ye.deferDisposalTimer),delete ye.deferDisposalTimer),typeof p.didDestroy=="function"&&p.didDestroy(),S1(this)}const S1=f=>{yh(f),delete f.params,delete ye.keydownHandler,delete ye.keydownTarget,delete ye.currentInstance},yh=f=>{f.isAwaitingPromise()?(Lc(We,f),We.awaitingPromise.set(f,!0)):(Lc(as,f),Lc(We,f))},Lc=(f,p)=>{for(const v in f)f[v].delete(p)};var bh=Object.freeze({hideLoading:fh,disableLoading:fh,getInput:r1,close:kl,isAwaitingPromise:i1,rejectPromise:l1,handleAwaitingPromise:cs,closePopup:kl,closeModal:kl,closeToast:kl,enableButtons:d1,disableButtons:f1,enableInput:h1,disableInput:p1,showValidationMessage:m1,resetValidationMessage:g1,getProgressSteps:y1,update:b1,_destroy:w1});const k1=f=>{const p=We.innerParams.get(f);f.disableButtons(),p.input?vh(f,"confirm"):Fc(f,!0)},x1=f=>{const p=We.innerParams.get(f);f.disableButtons(),p.returnInputValueOnDeny?vh(f,"deny"):Vc(f,!1)},C1=(f,p)=>{f.disableButtons(),p(hi.cancel)},vh=(f,p)=>{const v=We.innerParams.get(f);if(!v.input)return l('The "input" parameter is needed to be set when using returnInputValueOn'.concat(o(p)));const M=G0(f,v);v.inputValidator?T1(f,M,p):f.getInput().checkValidity()?p==="deny"?Vc(f,M):Fc(f,M):(f.enableButtons(),f.showValidationMessage(v.validationMessage))},T1=(f,p,v)=>{const M=We.innerParams.get(f);f.disableInput(),Promise.resolve().then(()=>m(M.inputValidator(p,M.validationMessage))).then(se=>{f.enableButtons(),f.enableInput(),se?f.showValidationMessage(se):v==="deny"?Vc(f,p):Fc(f,p)})},Vc=(f,p)=>{const v=We.innerParams.get(f||void 0);v.showLoaderOnDeny&&pi(tt()),v.preDeny?(We.awaitingPromise.set(f||void 0,!0),Promise.resolve().then(()=>m(v.preDeny(p,v.validationMessage))).then(M=>{M===!1?(f.hideLoading(),cs(f)):f.closePopup({isDenied:!0,value:typeof M>"u"?p:M})}).catch(M=>Sh(f||void 0,M))):f.closePopup({isDenied:!0,value:p})},wh=(f,p)=>{f.closePopup({isConfirmed:!0,value:p})},Sh=(f,p)=>{f.rejectPromise(p)},Fc=(f,p)=>{const v=We.innerParams.get(f||void 0);v.showLoaderOnConfirm&&pi(),v.preConfirm?(f.resetValidationMessage(),We.awaitingPromise.set(f||void 0,!0),Promise.resolve().then(()=>m(v.preConfirm(p,v.validationMessage))).then(M=>{I(Lt())||M===!1?(f.hideLoading(),cs(f)):wh(f,typeof M>"u"?p:M)}).catch(M=>Sh(f||void 0,M))):wh(f,p)},E1=(f,p,v)=>{We.innerParams.get(f).toast?O1(f,p,v):(M1(p),_1(p),N1(f,p,v))},O1=(f,p,v)=>{p.popup.onclick=()=>{const M=We.innerParams.get(f);M&&(A1(M)||M.timer||M.input)||v(hi.close)}},A1=f=>f.showConfirmButton||f.showDenyButton||f.showCancelButton||f.showCloseButton;let xl=!1;const M1=f=>{f.popup.onmousedown=()=>{f.container.onmouseup=function(p){f.container.onmouseup=void 0,p.target===f.container&&(xl=!0)}}},_1=f=>{f.container.onmousedown=()=>{f.popup.onmouseup=function(p){f.popup.onmouseup=void 0,(p.target===f.popup||f.popup.contains(p.target))&&(xl=!0)}}},N1=(f,p,v)=>{p.container.onclick=M=>{const se=We.innerParams.get(f);if(xl){xl=!1;return}M.target===p.container&&d(se.allowOutsideClick)&&v(hi.backdrop)}},P1=()=>I(ee()),kh=()=>Me()&&Me().click(),$1=()=>tt()&&tt().click(),D1=()=>z()&&z().click(),I1=(f,p,v,M)=>{p.keydownTarget&&p.keydownHandlerAdded&&(p.keydownTarget.removeEventListener("keydown",p.keydownHandler,{capture:p.keydownListenerCapture}),p.keydownHandlerAdded=!1),v.toast||(p.keydownHandler=se=>R1(f,se,M),p.keydownTarget=v.keydownListenerCapture?window:ee(),p.keydownListenerCapture=v.keydownListenerCapture,p.keydownTarget.addEventListener("keydown",p.keydownHandler,{capture:p.keydownListenerCapture}),p.keydownHandlerAdded=!0)},jc=(f,p,v)=>{const M=R();if(M.length)return p=p+v,p===M.length?p=0:p===-1&&(p=M.length-1),M[p].focus();ee().focus()},xh=["ArrowRight","ArrowDown"],B1=["ArrowLeft","ArrowUp"],R1=(f,p,v)=>{const M=We.innerParams.get(f);M&&(p.isComposing||p.keyCode===229||(M.stopKeydownPropagation&&p.stopPropagation(),p.key==="Enter"?L1(f,p,M):p.key==="Tab"?V1(p,M):[...xh,...B1].includes(p.key)?F1(p.key):p.key==="Escape"&&j1(p,M,v)))},L1=(f,p,v)=>{if(d(v.allowEnterKey)&&p.target&&f.getInput()&&p.target.outerHTML===f.getInput().outerHTML){if(["textarea","file"].includes(v.input))return;kh(),p.preventDefault()}},V1=(f,p)=>{const v=f.target,M=R();let se=-1;for(let Ne=0;Ne<M.length;Ne++)if(v===M[Ne]){se=Ne;break}f.shiftKey?jc(p,se,-1):jc(p,se,1),f.stopPropagation(),f.preventDefault()},F1=f=>{const p=Me(),v=tt(),M=z();if(![p,v,M].includes(document.activeElement))return;const se=xh.includes(f)?"nextElementSibling":"previousElementSibling";let Ne=document.activeElement;for(let Nt=0;Nt<q().children.length;Nt++){if(Ne=Ne[se],!Ne)return;if(I(Ne)&&Ne instanceof HTMLButtonElement)break}Ne instanceof HTMLButtonElement&&Ne.focus()},j1=(f,p,v)=>{d(p.allowEscapeKey)&&(f.preventDefault(),v(hi.esc))},H1=f=>typeof f=="object"&&f.jquery,Ch=f=>f instanceof Element||H1(f),z1=f=>{const p={};return typeof f[0]=="object"&&!Ch(f[0])?Object.assign(p,f[0]):["title","html","icon"].forEach((v,M)=>{const se=f[M];typeof se=="string"||Ch(se)?p[v]=se:se!==void 0&&l("Unexpected type of ".concat(v,'! Expected "string" or "Element", got ').concat(typeof se))}),p};function K1(){const f=this;for(var p=arguments.length,v=new Array(p),M=0;M<p;M++)v[M]=arguments[M];return new f(...v)}function U1(f){class p extends this{_main(M,se){return super._main(M,Object.assign({},f,se))}}return p}const W1=()=>ye.timeout&&ye.timeout.getTimerLeft(),Th=()=>{if(ye.timeout)return Ie(),ye.timeout.stop()},Eh=()=>{if(ye.timeout){const f=ye.timeout.start();return ve(f),f}},q1=()=>{const f=ye.timeout;return f&&(f.running?Th():Eh())},J1=f=>{if(ye.timeout){const p=ye.timeout.increase(f);return ve(p,!0),p}},G1=()=>ye.timeout&&ye.timeout.isRunning();let Oh=!1;const Hc={};function Y1(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Hc[f]=this,Oh||(document.body.addEventListener("click",X1),Oh=!0)}const X1=f=>{for(let p=f.target;p&&p!==document;p=p.parentNode)for(const v in Hc){const M=p.getAttribute(v);if(M){Hc[v].fire({template:M});return}}};var Z1=Object.freeze({isValidParameter:N,isUpdatableParameter:B,isDeprecatedParameter:D,argsToParams:z1,isVisible:P1,clickConfirm:kh,clickDeny:$1,clickCancel:D1,getContainer:Q,getPopup:ee,getTitle:et,getHtmlContainer:Ue,getImage:ot,getIcon:Ae,getInputLabel:At,getCloseButton:O,getActions:q,getConfirmButton:Me,getDenyButton:tt,getCancelButton:z,getLoader:H,getFooter:W,getTimerProgressBar:ae,getFocusableElements:R,getValidationMessage:Lt,isLoading:J,fire:K1,mixin:U1,showLoading:pi,enableLoading:pi,getTimerLeft:W1,stopTimer:Th,resumeTimer:Eh,toggleTimer:q1,increaseTimer:J1,isTimerRunning:G1,bindClickHandler:Y1});let zc;class mi{constructor(){if(typeof window>"u")return;zc=this;for(var p=arguments.length,v=new Array(p),M=0;M<p;M++)v[M]=arguments[M];const se=Object.freeze(this.constructor.argsToParams(v));Object.defineProperties(this,{params:{value:se,writable:!1,enumerable:!0,configurable:!0}});const Ne=this._main(this.params);We.promise.set(this,Ne)}_main(p){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};E(Object.assign({},v,p)),ye.currentInstance&&(ye.currentInstance._destroy(),L()&&sh()),ye.currentInstance=this;const M=ew(p,v);P0(M),Object.freeze(M),ye.timeout&&(ye.timeout.stop(),delete ye.timeout),clearTimeout(ye.restoreFocusTimeout);const se=tw(this);return ih(this,M),We.innerParams.set(this,M),Q1(this,se,M)}then(p){return We.promise.get(this).then(p)}finally(p){return We.promise.get(this).finally(p)}}const Q1=(f,p,v)=>new Promise((M,se)=>{const Ne=Nt=>{f.closePopup({isDismissed:!0,dismiss:Nt})};as.swalPromiseResolve.set(f,M),as.swalPromiseReject.set(f,se),p.confirmButton.onclick=()=>k1(f),p.denyButton.onclick=()=>x1(f),p.cancelButton.onclick=()=>C1(f,Ne),p.closeButton.onclick=()=>Ne(hi.close),E1(f,p,Ne),I1(f,ye,v,Ne),J0(f,v),z0(v),nw(ye,v,Ne),rw(p,v),setTimeout(()=>{p.container.scrollTop=0})}),ew=(f,p)=>{const v=k0(f),M=Object.assign({},b,p,v,f);return M.showClass=Object.assign({},b.showClass,M.showClass),M.hideClass=Object.assign({},b.hideClass,M.hideClass),M},tw=f=>{const p={popup:ee(),container:Q(),actions:q(),confirmButton:Me(),denyButton:tt(),cancelButton:z(),loader:H(),closeButton:O(),validationMessage:Lt(),progressSteps:ht()};return We.domCache.set(f,p),p},nw=(f,p,v)=>{const M=ae();y(M),p.timer&&(f.timeout=new $0(()=>{v("timer"),delete f.timeout},p.timer),p.timerProgressBar&&(w(M),ge(M,p,"timerProgressBar"),setTimeout(()=>{f.timeout&&f.timeout.running&&ve(p.timer)})))},rw=(f,p)=>{if(!p.toast){if(!d(p.allowEnterKey))return iw();ow(f,p)||jc(p,-1,1)}},ow=(f,p)=>p.focusDeny&&I(f.denyButton)?(f.denyButton.focus(),!0):p.focusCancel&&I(f.cancelButton)?(f.cancelButton.focus(),!0):p.focusConfirm&&I(f.confirmButton)?(f.confirmButton.focus(),!0):!1,iw=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Object.assign(mi.prototype,bh),Object.assign(mi,Z1),Object.keys(bh).forEach(f=>{mi[f]=function(){if(zc)return zc[f](...arguments)}}),mi.DismissReason=hi,mi.version="11.4.4";const Cl=mi;return Cl.default=Cl,Cl}),typeof eo<"u"&&eo.Sweetalert2&&(eo.swal=eo.sweetAlert=eo.Swal=eo.SweetAlert=eo.Sweetalert2)})(o0);var H2=o0.exports;const Jl=j2(H2);class z2{static install(e,n={}){var r;const o=Jl.mixin(n),i=function(...s){return o.fire.call(o,...s)};Object.assign(i,Jl),Object.keys(Jl).filter(s=>typeof Jl[s]=="function").forEach(s=>{i[s]=o[s].bind(o)}),(r=e.config)!=null&&r.globalProperties&&!e.config.globalProperties.$swal?(e.config.globalProperties.$swal=i,e.provide("$swal",i)):Object.prototype.hasOwnProperty.call(e,"$swal")||(e.prototype.$swal=i,e.swal=i)}}const i0=_k(F2);i0.use(z2);i0.mount("#app");
